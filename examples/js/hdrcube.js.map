{"version":3,"sources":["webpack:///webpack/bootstrap 4aace9525f1b74b222bc","webpack:///./src/core/GL.ts","webpack:///./node_modules/gl-matrix/src/gl-matrix.js","webpack:///./src/core/Constants.ts","webpack:///./src/math/Vector3.ts","webpack:///./src/shaders/chunks/EsVersion.glsl.ts","webpack:///./src/core/Capabilities.ts","webpack:///./src/geometry/Geometry.ts","webpack:///./node_modules/gl-matrix/src/gl-matrix/common.js","webpack:///./src/core/Mesh.ts","webpack:///./src/core/Shader.ts","webpack:///./src/shaders/chunks/ProjectionView.glsl.ts","webpack:///./src/math/Utils.ts","webpack:///./src/math/Color.ts","webpack:///./src/utils/Console.ts","webpack:///./src/core/EventDispatcher.ts","webpack:///./src/math/Vector2.ts","webpack:///./src/core/UniformBuffers.ts","webpack:///./src/cameras/Camera.ts","webpack:///./src/core/UniformBuffer.ts","webpack:///./src/shaders/chunks/AmbientLight.glsl.ts","webpack:///./src/shaders/chunks/DirectionalLights.glsl.ts","webpack:///./src/shaders/chunks/Lambert.glsl.ts","webpack:///./src/loaders/HdrLoader.ts","webpack:///./src/core/ImageData.ts","webpack:///./src/loaders/ImageLoader.ts","webpack:///./src/lights/Light.ts","webpack:///./src/loaders/FileLoader.ts","webpack:///./src/core/Object3D.ts","webpack:///./node_modules/gl-matrix/src/gl-matrix/mat3.js","webpack:///./node_modules/gl-matrix/src/gl-matrix/vec3.js","webpack:///./node_modules/gl-matrix/src/gl-matrix/vec4.js","webpack:///./src/core/Vao.ts","webpack:///./src/math/Ray.ts","webpack:///./src/utils/Detect.ts","webpack:///./src/shaders/chunks/PointLights.glsl.ts","webpack:///./src/shaders/chunks/Math.glsl.ts","webpack:///./src/geometry/BufferAttribute.ts","webpack:///./src/geometry/LineGeometry.ts","webpack:///./src/geometry/SphereGeometry.ts","webpack:///./node_modules/bezier-js/lib/bezier.js","webpack:///./node_modules/bezier-js/lib/utils.js","webpack:///./src/utils/ObjParser.ts","webpack:///./src/index.ts","webpack:///./node_modules/gl-matrix/src/gl-matrix/mat2.js","webpack:///./node_modules/gl-matrix/src/gl-matrix/mat2d.js","webpack:///./node_modules/gl-matrix/src/gl-matrix/mat4.js","webpack:///./node_modules/gl-matrix/src/gl-matrix/quat.js","webpack:///./node_modules/gl-matrix/src/gl-matrix/vec2.js","webpack:///./src/cameras/OrthographicCamera.ts","webpack:///./src/cameras/PerspectiveCamera.ts","webpack:///./src/core/Raycaster.ts","webpack:///./src/core/Renderer.ts","webpack:///./package.json","webpack:///./src/core/RenderTarget.ts","webpack:///./src/core/Scene.ts","webpack:///./src/shaders/Basic.glsl.ts","webpack:///./src/shaders/Lambert.glsl.ts","webpack:///./src/shaders/Phong.glsl.ts","webpack:///./src/shaders/chunks/Phong.glsl.ts","webpack:///./src/shaders/Vertex.glsl.ts","webpack:///./src/utils/ShaderParser.ts","webpack:///./src/core/Program.ts","webpack:///./src/core/Texture.ts","webpack:///./node_modules/parse-hdr/index.js","webpack:///./src/core/Texture3d.ts","webpack:///./src/core/TextureCube.ts","webpack:///./src/core/TextureVideo.ts","webpack:///./src/geometry/BoxGeometry.ts","webpack:///./src/geometry/Face.ts","webpack:///./src/geometry/PlaneGeometry.ts","webpack:///./src/helpers/AxisHelper.ts","webpack:///./src/helpers/CameraHelper.ts","webpack:///./src/helpers/GridHelper.ts","webpack:///./src/helpers/NormalsHelper.ts","webpack:///./src/helpers/VerticesHelper.ts","webpack:///./src/lights/Lights.ts","webpack:///./src/lights/AmbientLight.ts","webpack:///./src/lights/DirectionalLight.ts","webpack:///./src/lights/PointLight.ts","webpack:///./src/shaders/chunks/index.ts","webpack:///./src/shaders/chunks/Conditionals.glsl.ts","webpack:///./src/shaders/chunks/EnvMapCube.glsl.ts","webpack:///./src/shaders/chunks/Fog.glsl.ts","webpack:///./src/shaders/chunks/Gamma.glsl.ts","webpack:///./src/shaders/chunks/Matcap.glsl.ts","webpack:///./src/shaders/chunks/Noise.glsl.ts","webpack:///./src/shaders/chunks/Packing.glsl.ts","webpack:///./src/shaders/chunks/Tonemap.glsl.ts","webpack:///./src/shaders/chunks/Transpose.glsl.ts","webpack:///./src/utils/CameraDolly.ts","webpack:///./node_modules/bezier-js/index.js","webpack:///./node_modules/bezier-js/lib/poly-bezier.js","webpack:///./node_modules/uuid/v1.js","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./src/utils/Clock.ts","webpack:///./node_modules/webgl-obj-loader/webgl-obj-loader.js","webpack:///./src/controls/OrbitControls.ts","webpack:///./src/loaders/JsonLoader.ts","webpack:///./src/loaders/ObjLoader.ts","webpack:///./examples/src/js/gui.js","webpack:///./node_modules/dat-gui/index.js","webpack:///./node_modules/dat-gui/vendor/dat.gui.js","webpack:///./node_modules/dat-gui/vendor/dat.color.js","webpack:///./node_modules/query-string/index.js","webpack:///./node_modules/strict-uri-encode/index.js","webpack:///./node_modules/object-assign/index.js","webpack:///./node_modules/decode-uri-component/index.js","webpack:///./examples/src/js/hdrcube/index.js"],"names":[],"mappings":"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,MAIvD,WAAS,SACP,KAAgB,gBACd,EAAmB,mBACrB,KAEP,YAEY,CAAgB,SACvB,QAAS,SAAK,KACd,wBAAkB,kBAAS,iBAAK,KAAS,SAAE,EAAQ,EAAE,EAAM,KAChE,UAEe,CAAiB,YAC3B,MACD,WAAO,EACF,eAAS,SAAK,KAChB,WAEP,SAEc,WACV,IAAK,cACR,aAAiB,GAAO,KAAO,OAAS,SAAQ,QAC7C,MAAiB,CACd,CADS,YACF,OAAS,SAAmB,SACnC,QAAO,OAEd,MAEa,UACR,MACA,gBACA,iBAAY,YACZ,UAAY,YACZ,UAAS,SACT,UAAS,SACT,UAAM,MACN,UAAY,YACZ,UAAW,WAElB,qCCoLD,iBACA,uBACA,qBACA,qBAEA,qBACA,qBACA,qBAEA,GAYA,oBAXA,iBACA,iBAEA,iBACA,iBACA,iBAEA,iBACA,iBACA,iBACA,KAUA,CAiVA,iBACA,CAUA,mBATA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,IAYA,uBAlUA,WAFA,oFAxUA,UACA,wBACA,GAUA,YATA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,GASA,aACA,aACA,CAUA,cATA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,KAQA,UACA,WACA,wBACA,GAUA,cATA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,IASA,SACA,aACA,CAUA,cATA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,IAgBA,eACA,2BACA,wBACA,GAUA,SATA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MAiBA,QACA,6BACA,CAUA,SATA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MAQA,aACA,WACA,CAUA,YATA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,GASA,cACA,aAEA,UACA,uBACA,UACA,UACA,KACA,YACA,KACA,OACA,IACA,aACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UAGA,GACA,QAQA,WACA,aACA,uBACA,qBACA,qBAEA,SACA,WACA,UAGA,cAGA,gBAIA,SACA,eACA,iBACA,YACA,cACA,kBACA,YACA,eACA,iBAEA,UAZA,IAoBA,YACA,aACA,uBACA,qBACA,qBAEA,GAUA,gBATA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,KAQA,gBACA,WACA,uBACA,qBACA,qBAEA,0CACA,IASA,2BAgCA,eACA,uBACA,qBACA,qBACA,cAEA,GAYA,SAXA,OACA,OAEA,OACA,OACA,OAEA,cACA,eACA,eACA,OAUA,WACA,eACA,uBACA,qBACA,qBAEA,iBAeA,gBAXA,aACA,aAEA,aACA,aACA,aAEA,MACA,OACA,OACA,MAUA,UACA,eACA,gBAEA,GAYA,gBAXA,YACA,YAEA,YACA,YACA,YAEA,UACA,UACA,UACA,IAaA,oBACA,aACA,CAUA,YATA,OACA,OACA,OACA,OACA,OACA,SACA,UACA,QACA,GAaA,iBACA,aACA,cAEA,KAYA,SAXA,OACA,UAEA,OACA,KACA,UAEA,OACA,OACA,OACA,GAaA,gBACA,aACA,CAYA,cAXA,QACA,OAEA,OACA,SACA,QAEA,OACA,OACA,OACA,GASA,cACA,aACA,CAYA,cAXA,UACA,QAEA,SACA,UACA,QAEA,SACA,UACA,QACA,GAUA,aACA,aACA,8BACA,KACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,IAaA,YAZA,WACA,SAEA,SACA,SACA,WAEA,SACA,SACA,SAEA,OAUA,mBACA,aACA,8BACA,4BACA,6BACA,gCAEA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UAGA,0BAGA,gBAIA,kBACA,qBACA,qBAEA,qBACA,qBACA,qBAEA,qBACA,qBACA,qBAGA,UAfA,IAwBA,eACA,eACA,CAUA,YATA,SACA,OACA,OACA,QACA,SACA,QACA,OACA,OACA,GAQA,QACA,WACA,wCACA,8BACA,8BACA,GAOA,SACA,WACA,yGACA,GASA,QACA,eACA,CAUA,mBATA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,IAUA,gCAwBA,eACA,CAUA,cATA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,MAWA,yBACA,iBACA,CAUA,mBATA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,MASA,gBACA,aACA,2CACA,uCACA,uCACA,EAQA,EAnuBA,SAouBA,aACA,iEACA,+DACA,qCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,KAMA,UAvtBA,GA6tBA,8CC5tBA,YACA,wBACA,GAIA,YAHA,OACA,OACA,GAQA,CAeA,aACA,SACA,OACA,OACA,oBACA,IASA,CACA,iBACA,wBACA,GAIA,SAHA,OACA,OACA,MASA,CA+CA,iBACA,CAIA,mBAHA,eACA,eACA,IAUA,CACA,iBACA,CAIA,mBAHA,eACA,eACA,IAUA,CACA,iBACA,CAIA,mBAHA,eACA,eACA,IASA,CAwGA,eACA,cACA,YACA,YACA,oBACA,IAQA,CACA,eACA,cACA,YACA,YACA,kBACA,GAOA,CACA,aACA,SACA,OACA,OACA,kBACA,GAQA,CA6BA,eACA,SACA,OACA,OACA,aACA,IAQA,MANA,WACA,YACA,YACA,YAEA,OASA,CACA,eACA,mCACA,EASA,8DAiGA,WACA,4CALA,uEAhbA,WACA,wBACA,GAIA,cAHA,UACA,UACA,IAQA,mCA+BA,aACA,CAIA,cAHA,UACA,UACA,IAWA,QACA,iBACA,CAIA,SAHA,OACA,OACA,MAUA,QACA,eACA,CAIA,mBAHA,eACA,eACA,IAUA,8CA6CA,aACA,CAIA,gBAHA,aACA,aACA,KASA,UACA,aACA,CAIA,gBAHA,aACA,aACA,KAUA,QACA,eACA,CAIA,qBAHA,kBACA,kBACA,KAUA,QACA,eACA,CAIA,qBAHA,kBACA,kBACA,KASA,UACA,aACA,CAIA,gBAHA,aACA,aACA,KAUA,UACA,eACA,CAIA,cAHA,YACA,YACA,MAWA,gBACA,iBACA,CAIA,mBAHA,iBACA,iBACA,MASA,8DA0CA,aACA,CAIA,eAHA,WACA,WACA,IASA,YACA,aACA,CAIA,gBAHA,YACA,YACA,IASA,gCAmCA,eACA,uBACA,qBAEA,GAIA,gBAHA,aACA,aACA,KAWA,SACA,iBACA,SACA,OACA,OACA,GAIA,mBAHA,kBACA,kBACA,OAaA,YACA,qBACA,OACA,gBACA,SACA,YACA,UAEA,KAKA,mCAJA,iCACA,iCAEA,MAaA,WACA,qBACA,OACA,MACA,MACA,MACA,MACA,QACA,QAEA,IAKA,mCAJA,iCACA,iCAEA,MASA,WACA,aACA,GAEA,4BAEA,qBAEA,OAIA,oCADA,KAWA,kBACA,eACA,uBACA,6BACA,IAKA,SAJA,kCACA,oCACA,qCACA,QAUA,kBACA,eACA,uBACA,GAIA,8BAHA,0BACA,0BACA,IAUA,kBACA,eAGA,uBACA,4BAGA,aACA,cACA,cACA,eAGA,IAIA,4BAHA,wBACA,wBACA,IAUA,YACA,iBACA,UAEA,KAeA,mBAdA,eACA,eAGA,UACA,uBACA,yBAGA,iBACA,eACA,eAEA,IAUA,YACA,iBACA,UAEA,KAeA,mBAdA,eACA,eAGA,uBACA,YACA,uBAGA,iBACA,eACA,eAEA,IAUA,YACA,iBACA,UAEA,KAeA,mBAdA,eACA,eAGA,uBACA,yBACA,YAGA,eACA,eACA,eAEA,IAQA,UACA,aACA,qBACA,oBAEA,IACA,OAEA,aAEA,aACA,KAEA,EAGA,YAEA,OAOA,QACA,WACA,wCACA,GAQA,gBACA,aACA,2CACA,EAQA,EA7qBA,SA8qBA,aACA,uBACA,qBACA,qCACA,kCACA,kCACA,KAMA,UA3pBA,GAiqBA,QAMA,QAMA,QAMA,SAMA,YAMA,QAaA,WACA,kBACA,OAEA,gCACA,OAEA,YAIA,SAIA,iBAEA,UAGA,OAAmB,IAAO,IAC1B,UAAoB,cAAiB,YACrC,GACA,gBAAoB,YAAiB,YAGrC,GACA,QACA,CAAC,8CCvuBD,YACA,wBACA,GAKA,YAJA,OACA,OACA,OACA,GAQA,CAqFA,iBACA,CAKA,mBAJA,eACA,eACA,eACA,IAUA,CACA,iBACA,CAKA,mBAJA,eACA,eACA,eACA,IAUA,CACA,iBACA,CAKA,mBAJA,eACA,eACA,eACA,IASA,CA+EA,iBACA,CAKA,cAJA,YACA,YACA,YACA,MAWA,CAgBA,eACA,cACA,YACA,YACA,YACA,wBACA,IAQA,CACA,eACA,cACA,YACA,YACA,YACA,sBACA,GAOA,CACA,aACA,SACA,OACA,OACA,OACA,wBACA,IAOA,CACA,aACA,SACA,OACA,OACA,OACA,sBACA,GAQA,CA+BA,eACA,SACA,OACA,OACA,OACA,iBACA,IAQA,MAPA,WACA,UACA,SACA,SACA,SAEA,MASA,4JA/VA,WACA,wBACA,GAKA,cAJA,UACA,UACA,UACA,IAWA,eACA,iBACA,wBACA,GAKA,SAJA,OACA,OACA,OACA,MASA,SACA,aACA,CAKA,cAJA,UACA,UACA,UACA,IAYA,QACA,mBACA,CAKA,SAJA,OACA,OACA,OACA,MAUA,QACA,eACA,CAKA,mBAJA,eACA,eACA,eACA,IAUA,8CAgDA,aACA,CAKA,gBAJA,aACA,aACA,aACA,KASA,UACA,aACA,CAKA,gBAJA,aACA,aACA,aACA,KAUA,QACA,eACA,CAKA,qBAJA,kBACA,kBACA,kBACA,KAUA,QACA,eACA,CAKA,qBAJA,kBACA,kBACA,kBACA,KASA,UACA,aACA,CAKA,gBAJA,aACA,aACA,aACA,KAUA,0BAkBA,iBACA,CAKA,mBAJA,iBACA,iBACA,iBACA,MASA,yEA2DA,aACA,CAKA,eAJA,WACA,WACA,WACA,IASA,YACA,aACA,CAKA,gBAJA,YACA,YACA,YACA,IASA,sBAwBA,aACA,6CACA,EAUA,SACA,iBACA,SACA,OACA,OACA,OACA,GAKA,mBAJA,kBACA,kBACA,kBACA,OASA,WACA,aACA,CAUA,SAPA,UACA,gBACA,gBACA,gBACA,WACA,OACA,UAUA,kBACA,eACA,8BACA,GAKA,mCAJA,kCACA,mCACA,mCACA,OAUA,kBACA,eACA,uBACA,4BAGA,aACA,cACA,cACA,eAGA,IAKA,4BAJA,wBACA,wBACA,UACA,IAQA,QACA,WACA,kDACA,GAQA,gBACA,aACA,wDACA,EAQA,EAlgBA,SAmgBA,aACA,8BACA,4BACA,qCACA,kCACA,k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MACF,GAAgB,GAAI,EACS,IACjB,GAAK,EAEjB,MAAW,GAAgB,GAAe,EAC1C,KAAY,EAAyB,IAC9B,IACA,UACA,UAAK,KAAM,EACX,KACA,UAAK,KAAO,EACZ,KAAK,KAAM,EAEtB,EAEK,OACH,GAA0B,iBAC1B,GAAwB,gBACxB,GAAyB,iBACzB,GAIL,2CC7DD,YACA,CAGA,kCAqGA,CAAkC,0BAClC,aACA,uBACA,MACA,aACA,cAEA,OACA,gBACA,cACA,kBAEA,YAAY,SACZ,IAEA,YAnHA,WACA,WACA,WACA,YACA,YAEA,MAAc,UAGd,OAGA,QAUA,iBACA,oCACA,WACA,8BACA,KACA,UACA,2BACA,kCACA,CACA,iCAEA,KACA,EACA,GACA,GACA,IACA,UACA,OACA,aACA,IACA,qCAEA,wEACA,IAEA,+BACA,QACA,qCAIA,4GACA,gCACA,aACA,gBAAsC,IAAS,IAC/C,OACA,GACA,WAEe,gBACf,MAEA,4BACA,OACA,YACA,uBACA,UACA,qBAEA,kBACA,aACA,UACA,oBAAmC,WACnC,SAAkB,MAAY,OAC9B,mBACA,GAIA,cAHA,cAIA,UAAK,EAEL,eACA,WACA,OACA,QAEA,uBACA,uDACA,qBACA,uCAEA,oBACA,EACA,GACA,UAJA,QAMA,yCAiBA,IAAkC,0BAElC,KAAe,YACf,iBAAe,YAEf,sBACA,4BACA,IAEA,uCACA,CAAkC,0BAClC,aACA,WAAmC,qCACnC,aAEA,WACA,mBACA,cACA,OACA,MACA,MAGe,aACf,OAAe,OAHf,QAIA,EAFA,SAGA,IAAe,wCACf,QAAe,gCACf,QAAe,gCACf,QAAe,wCAEf,YACA,eAEA,kBACA,CACA,QAEA,IAEA,uBACA,CACA,6BACA,aACA,UACA,qBACA,8BACA,OACA,kBACA,aACA,wBACA,cACA,SACA,gCACA,aAAiC,OAAQ,IACzC,gBACA,eAEA,iBACA,IACA,mBAEA,MACA,gDAA+C,IAAK,YAEpD,kBAAyB,EAAK,IAC9B,MACA,oBACA,sBAEA,SACA,2BAEA,MAEA,qBACA,QACA,GACA,MACA,kBACA,6BACA,YACA,sCACA,mBACA,GACA,mBACA,sCACA,MACA,EACA,0BACA,SACA,cAAuC,uBACvC,UACA,kBAAkB,EAAU,KAC5B,gCAEA,kBACA,IACA,kBACA,MACA,iCACA,IAAkB,QAAc,OAChC,MACA,OACA,gBACA,eAGA,kBACA,cACA,OACA,qBAEA,gCACA,MACA,iBACA,UACA,qBACA,kBACA,WAGA,SAFA,MACA,KAIA,OAIA,YAHA,SAIA,OAHA,KAGoB,SAFpB,IAE+B,GAC/B,YACA,eACA,UACA,MACA,IAGA,KAIA,cAHA,aACA,MACA,KAEA,iBACA,aACA,UACA,mBACA,aACA,SACA,qBAEA,IAAiB,yBACjB,MAAiB,8BAEjB,kBACA,SAGA,OACA,eASA,SARA,mBACA,oBAEA,QAAuB,0BACvB,qBAKA,OACA,MACA,MACA,QACA,+BACA,MACA,MACA,QAEA,KACA,mBACA,MACA,UACA,UAEA,WACA,qCACA,sCAEA,GAIA,YAHA,4CAEA,IAIA,0CACA,qBACA,WAAqB,aAAkB,EACvC,SACA,yBACA,6BAEA,MACA,wDAGA,0BACA,EACA,UACA,EACA,kBACA,6CACmB,MAAnB,EAAwB,IACxB,MACA,WACA,QACA,qBACA,sBAGA,mBACA,GACA,QACA,wBACA,OACA,MACA,iBACA,OAA0B,2BAAwB,MAAQ,IAC1D,KAA0B,mBAAW,MAAY,UACjD,WACA,4BACA,6BAEA,GAIA,YAHA,mCAEA,IAEA,wBACA,2BACA,OACA,oBACA,wCACA,YACA,uBACA,YACA,gCACA,SAAc,cACd,IACA,uBAEA,YACA,kCACA,gCACA,6BACA,KAAiB,OAAY,OAC7B,OAAiB,OAAY,OAE7B,WACA,iBACA,kBACA,kBAEA,6BACA,KAAe,OAAU,OAEzB,0CACA,gCACA,gCAEA,KACA,4BACA,6BACA,6BAEA,GACA,QACA,kBACA,YACA,OACA,KAEA,OACA,IACA,IACA,EAJA,eAKA,YACA,YACA,GAA4B,0BAE5B,gBACA,KACA,oBAA8B,EAAK,IACnC,wBACA,MACA,SAEA,QACA,GACA,CACA,QACA,qBAEA,YAA0B,wBAC1B,QAAkB,2BAGlB,iBACA,UACA,qEACA,0EACA,KAIA,gDACA,0CACA,2CACA,2CAGA,KAAe,GAGf,yBACA,iBACA,kBACA,IACA,oBACA,YACA,KACA,KACA,OACA,EAcA,4BAbA,cAA2B,OAAe,KAC1C,oBACA,cACA,UACA,mCACA,0BAEA,wCAAsD,cAAuB,IAC7E,mBACA,OAAO,OACP,sCAAmD,UAAmC,cACtF,KACA,UAEA,iBACA,sBACA,KAIA,oCAHA,yBACA,KAAO,OACP,QAEA,sBACA,YACA,WACA,gBACA,gBACA,sBACA,0BACA,YACA,cACA,YACA,CACA,IACA,YACA,YAEA,KAIA,YAHA,gBAEA,MAEA,iBACA,mBACA,gCACA,OACA,WACA,YAEA,GAEA,cAF0B,gBAC1B,IAEA,UACA,SACA,YACA,iCACA,UACA,QACA,EACA,mBACA,mBACA,yDACA,wDACA,0BACA,QACA,mBACA,iBACA,mBACA,OAAoB,eACpB,WACA,iBACA,CACA,mBACA,yBAEA,sBACA,gBAAmC,yBACnC,YAAmC,yBAEnC,aAA6B,OAAkB,OAC/C,MACA,YACA,aACA,QACA,QACA,QAIA,IA6BA,4BA5BA,OACA,IACA,EACA,YAAyB,OAAY,IACrC,YACA,uBACA,IACA,OAEA,OAEA,aACA,qCACA,+BACA,OACA,QACA,IACA,KAGA,CACA,kBACA,6BACA,aACA,MAEA,QACA,IAEA,mBACA,YACA,MACA,QAAmC,uBACnC,QAAqC,0BAGrC,oBACA,gBACA,WACA,wCACA,oCACA,MAAc,mBAEd,qEAGA,qCACA,uBACA,0BACA,sBACA,CAAO,OAEP,OAGA,8BACA,oBACA,YACA,YACA,gBAAoB,mBACpB,2BACA,IAAS,OACT,OAKA,oCACA,oBACA,cACA,KACA,SACA,UAEA,YACA,kBACA,0BACA,KACA,OACA,YACA,WACA,YAEA,GAAO,OACP,OACA,SACA,2BACA,sBAYA,mBACA,OACA,wCACA,GACA,CAGA,GAlBA,qCACA,aACA,OACA,KACA,OAEA,SAEA,SAHA,uBAcA,KAEA,gCAXA,sCAYA,mCAEA,uBACA,yBAEA,MACA,IAGA,sBACA,CAIA,WAHA,kBAAkB,qBACJ,iBACd,KACO,GAGP,4BACA,wCACA,wCACA,iBACA,OACA,kBACA,0CACA,cAEA,aACA,SACA,+BACA,GACA,iCACA,OACA,aAAsC,aAAW,EACjD,yBACA,2BACA,2BACA,IAEA,QACA,QACA,0BACA,kBAEA,QAEA,mBAAmC,qBACnC,oCACA,oBALA,iBAMA,4BACA,qBACA,mBACA,mBACA,mBACA,KACA,qDACA,SACA,8CACA,MACA,EACA,4BACA,YAIA,iCACA,QAAc,EAAO,IACrB,kBACA,eACA,UACA,2BAEA,UACA,QACA,iCACA,IAEA,2BACA,sBACA,GACA,oBAAwB,QAExB,SACA,EAEA,MACA,MAOA,4BANA,gCACA,SACA,iBAEA,UACA,IAEA,kBACA,MAEA,gBACA,cACA,0BACA,aACA,aACA,gBACA,SACA,cACA,cACA,0BACA,IACA,wBACA,aAEA,IACA,GAGA,IAGA,wCASA,QANA,EAGA,IAIA,CACA,IACA,YACA,EAEA,WACA,cAEA,WAGA,6BACA,CACA,QAGA,kBACA,qBAEA,UACA,OAGA,OAGA,SACA,kBACA,EACA,IACA,KAEA,UACA,CAIA,KAEA,IACA,WAEA,YACA,OAKA,QACA,QACA,QACA,GACA,OACA,KACA,QAGA,KAEA,SAAC,qBC/0BD,YAUA,gBATA,CAGA,wBACA,WACA,WACA,WACA,YACA,iBAGA,iBAAyB,6BAA0C,EAEnE,SACA,KACA,QAIA,WACA,0BAGA,mBAEA,CA4BA,8dA2BA,ufACA,OACA,qBACA,QACA,mCAEA,GACA,IAEA,yBACA,4CACA,kBAEA,+BACA,iBACA,QAEA,oBACA,oCACA,QAAc,EAAO,IACrB,UACA,+BAEA,iBACA,IAEA,yBACA,UAEA,OADA,YAGA,sBACA,OACA,gBACA,kBAEA,IAIA,eAHA,qBAEA,KAGA,2BACA,iBACA,EAIA,MAHA,mCAEA,IAGA,4BACA,6CACA,GAEA,kBACA,wBACA,aAEA,uBACA,aACA,UACA,UACA,UACA,QAGA,OAFA,QACA,IAIA,qBACA,OACA,iBACA,uCACA,KAEA,oBACA,aACA,UACA,eACA,IAEA,uBACA,iBACA,gCACA,KACA,UACA,MACA,IAEA,IACA,GAAc,SACd,OAEA,wBAEA,WACA,MAEA,YACA,wBACO,mBACP,MAEA,wCAEA,GADA,KAGA,+BAEA,WACA,MAEA,YACA,wBACO,mBACP,MAEA,0BACA,eACA,IAEA,gCACA,0BAGA,WACA,OAAc,+BAHd,UAIA,4BAHA,QAKA,wBACA,eACA,YACA,YACA,YACA,WACA,qBAEA,mBACA,yBACA,EAEA,wBACA,SACA,8CACA,mCACA,QAEA,sBACA,iBACA,gCACA,SACA,yBACA,uBACA,uBACA,uBACA,IACA,GACA,GAAY,8BACZ,OAAY,8BAEZ,KAEA,wCACA,wBACA,YACA,uCACA,yCACA,QAeA,4BAdA,GACA,8BACA,OACA,iBACA,gBACA,eACA,OACA,OACA,OACA,OAEA,SACA,EACA,IAGA,2BACA,gBACA,kBACA,2CACA,wCACA,MACA,CACA,WACA,UACA,OACA,yBAGA,YAIA,kCAHA,0CACA,OACA,GAGA,2BACA,aAAwB,WACxB,iBACA,GAAgC,yBAChC,YAAgC,yBAChC,mBAAkC,OAAO,IACzC,MACA,SACA,OAAwB,WACxB,MAAwB,WAExB,YAAc,8BACd,IAEA,qBACA,YACA,SACA,qBACA,cAOA,eANA,OACA,wBACA,4BAEA,KACA,EAGA,qBACA,OAAsB,IAAI,MAAQ,OAAK,MACvC,mBACA,MACA,wBAAgC,cAAsB,IAEtD,UACA,YACA,SACA,SACA,MACA,eACA,cACA,OACA,SACA,kBACA,SACA,SACA,eACA,wBAGA,YAGA,YACA,SACA,SACA,SACA,WACA,iBACA,eACA,SACA,gBACA,MACA,yBACA,OACA,QACA,cACA,SACA,UACA,IAEA,EADA,aAEA,mBACA,MACA,OACA,OACA,wBACA,mBACA,qBACA,UACA,SAAO,IACP,yBACA,aACA,SACA,QAEA,gBACA,gBACA,UACA,eAEA,SAEA,oBAEA,iBACA,SACA,OACA,OACA,OACA,eACA,cACA,OACA,WAGA,GAFA,SACA,QAEA,eACA,mBAGA,SAGA,iBACA,gBACA,SACA,cAGA,KACA,CAEA,yBACA,eAIA,yBAAmC,wBACnC,mBACA,gBACA,gBACA,gBACA,iBACA,mBACA,WAEA,6BACA,0BACA,OACA,cACA,WACA,GACA,CACA,QAEA,OAEA,MADA,SAGA,6BAEA,2CACA,cACA,IACA,EAEA,2BACA,oCACA,QAAc,EAAO,IACrB,SACA,YACA,WACA,4BACA,YAEA,SACA,QAEA,yBACA,aAAoC,kBACpC,iBAAoC,kBACpC,sBAA+C,kBAC/C,iBAAoC,kBACpC,iBAAoC,kBACpC,sBAA+C,kBAC/C,+BACA,4BACA,IAAkB,8BAClB,wBACA,yBACA,MAAkB,yBAClB,IAEA,+BACA,SACA,WACA,OACA,WACA,yCACA,2CAEA,sCACA,eACA,OACA,EAAa,oBACb,OAAa,oBACb,QAAa,qBACb,QAAa,qBACb,6BACA,4CACA,OACA,MACA,YACA,sCACA,KACA,gCAEA,SACA,2BACA,UACA,cAEA,KAEA,4BACA,aACA,UACA,UACA,UACA,aACA,gBACA,gBACA,gBAEA,iBACA,cACA,cACA,cAEA,MAMA,SALA,IACA,QACA,IAEA,SAGA,4BACA,qBACA,qBACA,GAEA,EAiBA,MAbA,YAAyB,OACzB,MAAkB,MAAK,IAAK,IAK5B,WAAyB,KAAK,IAAK,IAAc,KAGjD,OACA,MACA,MACA,KAIA,KACA,SAAC,mDCjiBa,SAAc,WAC1B,MAAU,GAAG,GAAO,KACd,cACI,UAAE,GAAgB,cAAK,EACxB,kBAAE,GAAgB,cAAK,EACvB,uBAAE,GAAe,aAAK,EAC1B,aAAE,GAAgB,cAAK,EAE7B,U,0vFCVM,4CA+JqC,iCCgD5C,iBACA,8BACA,4BACA,GAKA,gBAJA,aACA,aACA,aACA,KAUA,CAkIA,iBACA,CAKA,mBAJA,eACA,eACA,eACA,IASA,uBA3IA,WADA,oFApMA,UACA,wBACA,GAKA,YAJA,OACA,OACA,OACA,GAQA,UACA,WACA,wBACA,GAKA,cAJA,UACA,UACA,UACA,IASA,SACA,aACA,CAKA,cAJA,UACA,UACA,UACA,IAQA,aACA,WACA,CAKA,YAJA,OACA,OACA,OACA,GAWA,eACA,iBACA,wBACA,GAKA,SAJA,OACA,OACA,OACA,MAYA,QACA,mBACA,CAKA,SAJA,OACA,OACA,OACA,MASA,cACA,aAGA,UACA,SACA,UACA,KACA,IACA,aACA,UACA,UACA,UAGA,GACA,QAQA,WACA,aACA,8BAGA,SAGA,gBAIA,SACA,SACA,UACA,UAGA,OARA,IAgBA,YACA,aAEA,SACA,GAMA,cALA,WACA,WACA,KAEA,MAQA,gBACA,WACA,yBACA,EASA,wBAmBA,eACA,8BACA,iBAOA,gBAJA,aACA,cACA,cACA,KAUA,UACA,eACA,8BACA,cACA,GAKA,YAJA,SACA,SACA,SACA,KAaA,iBACA,aACA,OACA,OACA,KAKA,SAJA,OACA,UACA,KACA,MAaA,gBACA,aACA,CAKA,cAJA,QACA,OACA,SACA,IAQA,QACA,WACA,kDACA,GAOA,SACA,WACA,uDACA,GAQA,QAEA,iBACA,oBACA,UACA,UACA,oBACA,GACA,OASA,QACA,eACA,CAKA,mBAJA,eACA,eACA,eACA,IAUA,6BAgBA,aACA,wDACA,EAQA,WACA,aACA,8BACA,4BACA,qCACA,kCACA,kCACA,kCACA,KASA,mBACA,eACA,CAKA,cAJA,YACA,YACA,YACA,MAWA,EA7ZA,uBA8ZA,iBACA,CAKA,mBAJA,iBACA,iBACA,iBACA,MAOA,UA3YA,GAiZA,8CC7OA,iBACA,4CACA,0CACA,GAOA,gBANA,aACA,aACA,aACA,aACA,eACA,OAUA,CAqKA,iBACA,CAOA,mBANA,eACA,eACA,eACA,eACA,eACA,IAUA,uBAjLA,WADA,oFA5KA,UACA,wBACA,GAOA,YANA,OACA,OACA,OACA,OACA,OACA,GAQA,UACA,WACA,wBACA,GAOA,cANA,UACA,UACA,UACA,UACA,UACA,IASA,SACA,aACA,CAOA,cANA,UACA,UACA,UACA,UACA,UACA,IAQA,aACA,WACA,CAOA,YANA,OACA,OACA,OACA,OACA,OACA,GAaA,eACA,qBACA,wBACA,GAOA,SANA,OACA,OACA,OACA,OACA,OACA,MAcA,QACA,uBACA,CAOA,SANA,OACA,OACA,OACA,OACA,OACA,MASA,WACA,aACA,8BACA,cAEA,SAEA,gBAIA,SACA,SACA,UACA,UACA,cACA,iBAEA,UATA,IAgBA,gBACA,WACA,yBACA,EASA,wBAqBA,eACA,4CACA,iBASA,gBANA,aACA,cACA,cACA,MACA,OACA,MAUA,UACA,eACA,4CACA,cACA,GAOA,YANA,SACA,SACA,SACA,MACA,OACA,MAUA,cACA,eACA,4CACA,cACA,GAOA,SANA,OACA,OACA,OACA,cACA,eACA,OAaA,iBACA,aACA,cACA,KAOA,SANA,OACA,UACA,KACA,UACA,OACA,GAaA,gBACA,aACA,CAOA,cANA,QACA,OACA,SACA,QACA,OACA,GAaA,oBACA,aACA,CAOA,YANA,OACA,OACA,OACA,SACA,UACA,IAQA,QACA,WACA,yCACA,8BACA,GAOA,SACA,WACA,8EACA,EASA,QACA,eACA,CAOA,mBANA,eACA,eACA,eACA,eACA,eACA,IAUA,gCAmBA,eACA,CAOA,cANA,YACA,YACA,YACA,YACA,YACA,MAWA,yBACA,iBACA,CAOA,mBANA,iBACA,iBACA,iBACA,iBACA,iBACA,MASA,gBACA,aACA,kFACA,EAQA,EA3bA,SA4bA,aACA,4CACA,0CACA,qCACA,kCACA,kCACA,kCACA,kCACA,kCACA,KAMA,UA9ZA,GAoaA,8CC5EA,iBACA,8BACA,4BACA,6BACA,gCAGA,6BACA,GAuBA,wBAtBA,qBACA,qBACA,qBAEA,QAAY,OAAW,OAAW,OAClC,oBACA,qBACA,qBACA,qBAEA,QAAY,OAAW,OAAY,QACnC,qBACA,qBACA,sBACA,sBAEA,QAAa,QAAY,QAAY,QACrC,sBACA,sBACA,sBACA,sBACA,KAUA,CA0lCA,iBACA,CAiBA,mBAhBA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,KAUA,8CA5hCA,WADA,8FAreA,UACA,wBACA,IAiBA,YAhBA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,GAQA,UACA,WACA,wBACA,IAiBA,cAhBA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,YACA,YACA,YACA,YACA,YACA,KASA,SACA,aACA,CAiBA,cAhBA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,YACA,YACA,YACA,YACA,YACA,KAuBA,eACA,yCACA,wBACA,IAiBA,SAhBA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,OAwBA,QACA,2CACA,CAiBA,SAhBA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,OASA,aACA,WACA,CAiBA,YAhBA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,GASA,cACA,aAEA,UACA,uBACA,cACA,OAEA,WACA,UACA,UACA,MACA,YACA,UACA,MACA,OACA,aACA,MACA,QACA,QACA,KACA,aACA,UACA,UACA,UACA,WACA,UACA,UACA,UACA,WACA,UACA,WACA,YACA,YACA,WACA,WACA,YAGA,IACA,QAQA,WACA,aACA,8BACA,4BACA,6BACA,gCAEA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UAGA,0BAGA,gBAIA,kBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,qBACA,sBACA,sBACA,sBACA,sBACA,sBACA,sBAGA,UApBA,IA4BA,YACA,aACA,8BACA,4BACA,6BACA,gCAEA,IAiBA,2CAhBA,2CACA,0CACA,2CACA,4CACA,0CACA,2CACA,0CACA,yCACA,2CACA,2CACA,4CACA,6CACA,2CACA,4CACA,2CACA,MAQA,gBACA,WACA,8BACA,4BACA,6BACA,gCAEA,eACA,UAaA,UAZA,UASA,UARA,UAOA,UANA,UAKA,UAJA,UAGA,KAOA,KATA,UACA,IAiBA,2BA0CA,eACA,uBACA,SACA,QACA,QAEA,EAqBA,MApBA,qCACA,iCACA,kCACA,kCAEA,UAAe,OAAY,OAAY,OACvC,OAAe,OAAY,OAAY,OACvC,OAAe,OAAY,OAAa,QAExC,MAAiB,OAAc,OAAc,OAC7C,OAAiB,OAAc,OAAc,OAC7C,OAAiB,OAAc,OAAe,QAE9C,0BACA,wBACA,wBACA,wBAGA,MAUA,UACA,eACA,uBAEA,GAiBA,cAhBA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,aACA,cACA,cACA,YACA,YACA,YACA,KAWA,WACA,iBACA,uBACA,eACA,SACA,QACA,QACA,QACA,MACA,MACA,MAEA,cAAyC,UAEzC,QACA,IACA,KACA,KAEA,qBAIA,QAAa,OAAY,OAAY,OACrC,OAAa,OAAY,OAAY,OACrC,OAAa,OAAY,OAAa,QAGtC,MAAsB,gBAAyB,YAC/C,YAA0B,MAAqB,gBAC/C,YAA0B,YAAyB,MAGnD,qBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,kBACA,kBAEA,IACA,gBACA,YACA,YACA,YAGA,OASA,YACA,eACA,OACA,OACA,SACA,OACA,OACA,OACA,OACA,OACA,OACA,QAEA,IAqBA,MApBA,gBACA,UACA,UACA,UACA,WACA,YACA,YACA,YAIA,cACA,aACA,aACA,aACA,aACA,aACA,cACA,cACA,KAUA,YACA,eACA,OACA,OACA,SACA,OACA,OACA,OACA,OACA,OACA,OACA,QAEA,IAqBA,MApBA,gBACA,UACA,UACA,UACA,WACA,YACA,YACA,YAIA,cACA,aACA,aACA,aACA,aACA,aACA,cACA,cACA,KAUA,YACA,eACA,OACA,OACA,SACA,OACA,OACA,OACA,OACA,OACA,OACA,OAEA,GAqBA,MApBA,gBACA,UACA,WACA,YACA,YACA,YACA,YACA,YAIA,cACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,KAaA,oBACA,aACA,CAiBA,YAhBA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,UACA,WACA,WACA,SACA,GAaA,gBACA,aACA,CAiBA,cAhBA,QACA,OACA,OACA,OACA,SACA,QACA,OACA,OACA,OACA,UACA,SACA,QACA,QACA,QACA,QACA,GAcA,iBACA,eACA,uBACA,eACA,SAEA,cAAyC,UAEzC,QACA,IACA,KACA,KAEA,OACA,OACA,OAGA,SACA,mBACA,eACA,SACA,aACA,SACA,mBACA,SACA,aACA,eACA,UACA,cACA,QACA,QACA,QACA,QAEA,IAYA,kBACA,aACA,OACA,OAGA,KAiBA,YAhBA,OACA,OACA,OACA,OACA,IACA,OACA,UACA,OACA,OACA,KACA,YACA,QACA,QACA,QACA,QACA,GAaA,kBACA,aACA,OACA,OAGA,KAiBA,SAhBA,UACA,OACA,QACA,OACA,OACA,OACA,OACA,IACA,UACA,IACA,YACA,QACA,QACA,QACA,QACA,GAaA,kBACA,aACA,OACA,OAGA,KAiBA,SAhBA,OACA,UACA,OACA,OACA,KACA,UACA,OACA,OACA,OACA,QACA,QACA,QACA,QACA,QACA,QACA,GAiBA,4BACA,eAEA,8BACA,KACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,IAkBA,eAjBA,UACA,SACA,SACA,OACA,YACA,UACA,SACA,OACA,SACA,aACA,WACA,UACA,WACA,WACA,SAEA,GAWA,mBACA,aACA,CAKA,cAJA,WACA,WAEA,KAYA,eACA,aACA,SACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OAEA,IAKA,sBAJA,oBACA,oBAEA,MAWA,gBACA,aAEA,mBACA,MAEA,EA2BA,MA1BA,QACA,cACA,oBACA,mBACA,mBACG,wBACH,OACA,oCACA,WACA,oBACA,mBACG,cACH,OACA,oCACA,mBACA,WACA,oBAEA,UACA,oCACA,mBACA,mBACA,WAGA,SAmBA,iCACA,iBAEA,8BACA,KACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,QACA,OACA,OAEA,GAkBA,gBAjBA,cACA,aACA,YACA,QACA,gBACA,cACA,YACA,QACA,aACA,iBACA,cACA,UACA,WACA,WACA,SAEA,GAsBA,uCACA,mBAEA,8BACA,KACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,QACA,OACA,OAEA,OACA,OACA,OAEA,GAkBA,gBAjBA,cACA,aACA,YACA,QACA,gBACA,cACA,YACA,QACA,aACA,iBACA,cACA,gCACA,oCACA,oCACA,aAEA,GAUA,aACA,aACA,8BACA,KACA,MACA,MAEA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MAEA,IAqBA,YApBA,WACA,SACA,SAEA,OACA,SACA,WACA,SAEA,OACA,SACA,UACA,YAEA,QACA,QACA,QACA,QAEA,GAcA,YACA,uBACA,UACA,UACA,UACA,KAiBA,YAhBA,WACA,OACA,OACA,OACA,OACA,WACA,OACA,QACA,aACA,cACA,cACA,QACA,QACA,QACA,gBACA,GAYA,gBACA,mBACA,aACA,QACA,KAiBA,YAhBA,SACA,OACA,OACA,OACA,IACA,UACA,OACA,OACA,OACA,SACA,cACA,QACA,QACA,QACA,cACA,GAaA,+BACA,iBACA,uBACA,yBACA,yBACA,0BACA,UACA,UAEA,KAiBA,SAhBA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,YACA,oBACA,uBACA,WACA,KACA,QACA,iBACA,OACA,OAcA,UACA,uBACA,UACA,UACA,UACA,KAiBA,aAhBA,SACA,OACA,OACA,OACA,QACA,SACA,OACA,OACA,OACA,QACA,UACA,SACA,cACA,cACA,aACA,GAWA,WACA,iBACA,SAEA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OAEA,qBAVA,gBAWA,kBACA,kBACA,eAGA,eACA,MACA,MAEA,kBACA,KACA,KACA,KAEA,WACA,UACA,UACA,gBAEA,UAKA,IACA,KACA,KAGA,SATA,IACA,IAEA,SAOA,UACA,UAEA,gBAEA,UAKA,IACA,KACA,KAGA,SATA,IACA,IAEA,KAOA,OACA,OACA,UACA,IACA,OACA,OACA,UACA,IACA,OACA,OACA,YACA,kBACA,qBACA,qBACA,WAGA,IAUA,aACA,iBACA,SACA,OACA,OACA,OACA,OACA,OAEA,SACA,SACA,SAEA,aACA,IACA,UACA,KACA,KACA,KAGA,gBACA,UACA,UAEA,IAiBA,SAhBA,OACA,OACA,UACA,WACA,aACA,aACA,SACA,IACA,OACA,OACA,YACA,IACA,QACA,QACA,YACA,GAQA,QACA,WACA,kDACA,wCACA,0CACA,4CACA,GAOA,SACA,WACA,6KACA,GASA,QACA,eACA,CAiBA,mBAhBA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,iBACA,kBACA,kBACA,kBACA,kBACA,kBACA,KAUA,gCA6BA,eACA,CAiBA,cAhBA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,aACA,cACA,cACA,cACA,cACA,cACA,OAWA,yBACA,iBACA,CAiBA,mBAhBA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,mBACA,oBACA,oBACA,oBACA,oBACA,oBACA,OASA,gBACA,aACA,wDACA,oDACA,uDACA,4DACA,GAQA,EAxmDA,SAymDA,aACA,8BACA,4BACA,6BACA,gCAEA,6BACA,4BACA,6BACA,gCAEA,sCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,KAMA,UA3mDA,GAinDA,8CC7mDA,YACA,wBACA,GAKA,YAJA,OACA,OACA,OACA,GAQA,CAkBA,iBACA,IACA,eAMA,gBAJA,YACA,YACA,cAgBA,CAyBA,iBACA,8BACA,4BAEA,GAKA,wBAJA,qBACA,qBACA,qBACA,KAUA,CAoFA,mBAGA,8BACA,4BAEA,WAGA,EA6BA,qBA3BA,IACA,QACA,KACA,KACA,KACA,KAGA,SAEA,OACA,OACA,UACA,cAIA,WACA,IAGA,cACA,aACA,aACA,aAEA,KASA,CA0CA,eAGA,mBACA,GAEA,KAEA,QACA,UACA,QACA,mBACA,mBACA,mBACG,UAEH,OACA,SACA,OACA,UACA,WACA,eACA,UAEA,0BACA,eACA,QACA,uBACA,2BACA,2BACA,SAEA,CACA,QAWA,wBAlRA,WAJA,uFApBA,WACA,CAKA,YAJA,OACA,OACA,OACA,GAWA,kCAwBA,aACA,aACA,QACA,KAWA,MAVA,YAMA,OACA,OAEA,WARA,YACA,YAGA,OAcA,yBAoBA,eACA,IAEA,iCACA,YAEA,KAKA,gBAJA,aACA,aACA,aACA,KAUA,YACA,eACA,IAEA,iCACA,YAEA,KAKA,gBAJA,aACA,aACA,aACA,KAUA,YACA,eACA,IAEA,iCACA,YAEA,KAKA,gBAJA,aACA,aACA,aACA,KAWA,eACA,aACA,uBAEA,GAKA,SAJA,OACA,OACA,+BACA,OAWA,qBAgDA,aACA,8BACA,iBACA,YAIA,EAKA,YAJA,UACA,UACA,UACA,KAUA,cACA,aACA,CAKA,eAJA,WACA,WACA,UACA,IAaA,2BA8CA,iBACA,mBACA,IACA,KACA,KAEA,WACA,OACA,OACA,OACA,OACA,OAEA,KAMA,kBALA,iBACA,iBACA,iBAEA,OAQA,QACA,WACA,kDACA,GAQA,yBAlYA,QAkCA,IAiWA,gBAWA,UACA,qBASA,eACA,eAYA,SACA,cAUA,QACA,cAMA,QAUA,QACA,gBASA,UACA,cAWA,QACA,eAOA,SACA,iBAMA,WAQA,QACA,wBAMA,kBASA,WACA,oBAQA,cACA,sBAQA,gBACA,iBAYA,WACA,kBACA,OACA,8BACA,sBAEA,yBACA,OACA,kBACA,YACA,eACA,eACA,eACA,4BAEK,OACL,iBACA,OACA,OACA,OAGA,MACA,sBACA,UACA,UACA,QACA,IAEA,OACA,CAAC,IAYD,eACA,kBACA,OACA,MAEA,gCACA,CAKA,MAJA,YACA,wBAEA,OAEA,CAAC,IAWD,WACA,kBACA,OAEA,mCACA,eACA,UACA,UAEA,UACA,UACA,UAEA,WACA,WACA,WAEA,OACA,OACA,CAAC,8CCjlBD,YACA,wBACA,GAGA,YAFA,OACA,GAQA,CAuEA,iBACA,CAGA,mBAFA,eACA,IAUA,CACA,iBACA,CAGA,mBAFA,eACA,IAUA,CACA,iBACA,CAGA,mBAFA,eACA,IASA,CAiGA,eACA,cACA,YACA,gBACA,IAQA,CACA,eACA,cACA,YACA,cACA,GAOA,CACA,aACA,SACA,OACA,gBACA,IAOA,CACA,aACA,SACA,OACA,cACA,GAQA,4JAhQA,WACA,wBACA,GAGA,cAFA,UACA,IASA,eACA,aACA,wBACA,GAGA,SAFA,OACA,MASA,SACA,aACA,CAGA,cAFA,UACA,IAUA,QACA,eACA,CAGA,SAFA,OACA,MAUA,QACA,eACA,CAGA,mBAFA,eACA,IAUA,8CA0CA,aACA,CAGA,gBAFA,aACA,KASA,UACA,aACA,CAGA,gBAFA,aACA,KAUA,QACA,eACA,CAGA,qBAFA,kBACA,KAUA,QACA,eACA,CAGA,qBAFA,kBACA,KASA,UACA,aACA,CAGA,gBAFA,aACA,KAUA,UACA,eACA,CAGA,cAFA,YACA,MAWA,gBACA,iBACA,CAGA,mBAFA,iBACA,MASA,yEAmDA,aACA,CAGA,eAFA,WACA,IASA,YACA,aACA,CAGA,gBAFA,YACA,IASA,cACA,aACA,SACA,OACA,SACA,IAOA,MALA,WACA,YACA,YAEA,OASA,QACA,aACA,yBACA,EAUA,UACA,eACA,wBACA,GAGA,iBAFA,IACA,MAWA,SACA,iBACA,SACA,OACA,GAGA,mBAFA,kBACA,OASA,WACA,aACA,GACA,6BACA,GAGA,iBAFA,mBACA,UAUA,kBACA,eACA,SACA,OACA,GAGA,qBAFA,mBACA,MAUA,mBACA,eACA,SACA,OACA,GAGA,4BAFA,wBACA,IAWA,kBACA,eACA,SACA,OACA,GAGA,4BAFA,wBACA,IAYA,kBACA,eACA,SACA,OACA,GAGA,4BAFA,yBACA,KAQA,QACA,WACA,8BACA,GAQA,gBACA,aACA,8BACA,EAQA,EA9eA,SA+eA,aACA,gBACA,cACA,qCACA,kCACA,KAMA,UA3dA,GAieA,QAMA,QAMA,QAMA,QAMA,SAMA,YAaA,WACA,kBACA,OAEA,gCACA,OAEA,YAIA,SAIA,iBAEA,UAGA,OAAmB,IAAO,IAC1B,UAAoB,cA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,MACA,QAEA,QACA,UAEA,UACA,gBAEA,gBACA,QAEA,QACA,oBAEA,sBACA,OACA,mBACA,MACA,+BACA,eACA,iBACA,eACA,yCACA,cACA,sBACA,MACA,sCACA,gBACA,aACA,8CACA,cAEA,EAAC,IAGD,yBAEA,uBACA,0BAQA,YAEA,CAEA,2BAEA,CAUA,gDARA,QACA,yBACA,aAEA,KAAO,EAEP,OAIA,sBAEA,CAUA,gDARA,QACA,yBACA,aAEA,KAAO,EAEP,OAIA,oBACA,cACA,4BACA,kBACA,sBAA4C,EAAQ,KACpD,kBAEA,kBACA,EACA,CAEA,sBAGA,SAEA,cAEO,yCAEP,mBAAyC,OAAS,IAClD,uCACA,MAIA,oBACA,mCACA,MAIA,MAEA,mBACA,cACA,EAEA,qBACA,oBACA,YACA,OAEA,yBACA,OACA,WAEA,oBACA,OACA,SAEA,mBACA,OACA,MAEA,oCACA,wBACA,KAEA,sBACA,YACA,SAEA,sBACA,cACA,CAEA,sBACA,cACA,EAEA,uBACA,eACA,MAEA,wBACA,OACA,uDAIA,EAAC,IAGD,oCAUA,oBAEA,mBAMA,4CAMA,YAMA,cAOA,gBAOA,uBAEA,uBAEA,EAgFA,SA9EA,SAGA,UAUA,qBACA,aACA,aACA,IAWA,4BACA,aACA,mBACA,IAOA,sBACA,yBACA,iBACA,iCAEA,aACA,gBACA,IAOA,qBACA,yBACA,SAOA,0BACA,OACA,KAKA,uBACA,iCACA,UAMA,KAGC,kBAGD,qBAEA,cAiBA,oCAEA,WAEA,kBACA,UAOA,eAFA,GAQA,CA7BA,GACA,iJACA,qBACA,CACA,MACA,EAEA,SAEA,oBA2BA,6BAEA,wBAEA,oCACA,CACA,QAAO,YACP,CAEA,iCACA,wCACA,6BAEA,MAQA,gCAEA,oBACA,yBAEA,uBAGA,4BACA,gBAGA,mBACA,iBAGA,EAQA,6BACA,GACA,YACA,QACA,mCAEA,kCACA,eACA,cACA,oCACA,oBACA,uBACA,kDACA,EACA,EAGA,oBACA,MACA,UACA,8CACA,0BACA,CACA,cACA,WACA,UACA,YACA,WACA,eAEA,wBACA,yBACA,mBACA,oBACA,oBACA,UACA,MACA,wBACA,cAGA,mBACA,gBACA,gBASA,wBACA,CAMA,SALA,QACA,mBACA,0BACA,2BACA,WAUA,0BACA,CAMA,SALA,QACA,sBACA,6BACA,2BACA,WAQA,wBACA,MACA,qBACO,oCACP,yBACA,OACA,oBACA,kEAEA,IACA,CACA,QAOA,2BACA,CACA,QAeA,oCAbS,qBACT,gCACS,aACT,yBACA,UACA,YACA,kBACA,sBAEA,KAEA,CAGA,QAEA,wBACA,uDACA,cAMA,sBAEA,OAEA,+BACA,0BACA,2BACA,qBACA,oBACA,QAMA,uBAEA,OAEA,+BACA,yBACA,4BACA,oBACA,qBACA,SAMA,uBACA,QAAoB,WACpB,QACA,aACA,aACA,oBACS,oBAET,cACA,QAOA,sBACA,+CACA,KAIA,GAEA,QAAC,kBAGD,8CAeA,sBAEA,mBAEA,gBAMA,6CAEA,uBACA,IACA,0BACA,CACA,MACA,GACA,GAEA,uBAEA,8BACA,YACA,2BACA,sBAEA,cAGA,QAEA,wDACA,wCACA,QACA,WAEA,oCAEA,SAEA,EA4BA,SA1BA,eAEA,SACA,YAEA,UAEA,qBACA,4CACA,QAIA,YAHA,uDAEA,aAGA,0BACA,iCACA,qDACA,KAMA,KAEC,2BACD,UACA,gBAGA,4CAgBA,cAoGA,YACA,YACA,yCAEA,EAEA,CAEA,sBA1GA,mBAEA,YAEA,mBACA,iBACA,kBAEA,2CAEA,QACA,qBAGA,iDAKA,QAIA,+BAGA,cAEA,EAgFA,SA9EA,eAEA,SACA,YAGA,UAEA,qBAEA,oCACA,aACW,kCACX,eAGA,6BACA,2CAGA,6CAEA,OASA,iBACA,aACA,QACA,IASA,iBACA,aACA,QACA,IAYA,kBACA,aACA,SACA,IAMA,KAWC,2BACD,gBAGA,iDAkBA,gBA2FA,SACA,eACA,MAEA,sBA7FA,aAgCA,4BACA,qBACA,WAEA,cAeA,WACA,oCAEA,mBAEA,OAEA,aACA,iBACA,+BACA,YAEA,MA7DA,2CAEA,kBAMA,KAEA,sCACA,0CAIA,4BACA,gCACA,iBAkBA,CACA,MACA,8CAEA,WAEA,uBAvBA,uBAwBA,eACA,6BACA,iBACA,OAEA,4CA1BA,CACA,mBACA,8BACA,SAGA,yBAEA,QAkCA,iDAEA,QAEA,EA0BA,SAxBA,eAEA,SACA,YAEA,UAEA,yBAEA,6FACA,uDACA,KAMA,KAOC,iCACD,UACA,gBAGA,wDAoBA,sBAmFA,wBACA,KAEA,0BApFA,cAwBA,GAEA,qCACA,6BAEA,cAMA,SALA,+CAGA,UAIA,aACA,iBACA,+BACA,eACA,8CAEA,WAEA,4BA7CoE,aAEpE,eAEA,8CACA,gDAIA,gCAEA,uBAKA,eACA,6BAEA,aACA,IAEA,gCAVA,uCAEA,kBAiCA,mDACA,+CAEA,aAEA,EAkCA,SA7BA,0CACA,GACA,SAEA,IAEA,SACA,YAEA,UAEA,yBACA,qDACA,kDACA,8CACA,KAQA,KAMC,iCACD,UACA,YACA,eACkkB,ukBAGlkB,gDAYA,sBAEA,mBAEA,gBAEA,0CACA,0CACA,iDACA,CAGA,SAFA,mBACA,SAGA,4BAEA,2CAGA,SAEA,EAuBA,SArBA,eAEA,SACA,YACA,UAEA,gBACA,MACA,iCAEA,WACA,uDAEA,sCACA,OAKA,KAEC,2BACD,UACA,gBAGA,+CAWA,oBAEA,mBAEA,gBACA,sBAEA,kDACA,6CAGA,mCAEA,mBAMA,eACA,OAEA,uCANA,iBAEA,eAMA,EAsCA,SApCA,eAEA,SACA,YAEA,UAEA,qBACA,4CACA,QAKA,YAJA,uDAEA,6BACA,YAGA,0BAEA,iBACA,mDACA,2BAEA,4BAGA,qDAEA,KAOA,KAEC,2BACD,UACA,gBAGA,4BAEA,mBAEA,+BAEA,0BACA,IACA,cAGA,YAEA,KAEA,oDAIA,GAEA,CAAC,kBAGD,+BAEA,OAuCA,CAEA,UAEA,qBAEA,gBAEA,iBAEA,eACA,4CAEA,WACA,OACA,UACA,SACA,0BACA,gCACA,gCAGA,YAEA,EAIA,sBAEA,iBAEA,eACA,2BAEA,WACA,OACA,6BAGA,YAEA,EAIA,iBAEA,iBAEA,eACA,kDAEA,WACA,OACA,qBACA,mBACA,mBAGA,IAEA,EAIA,kBAEA,iBAEA,eACA,+DAEA,WACA,OACA,qBACA,mBACA,mBACA,mBAGA,IAEA,EASA,WAEA,UAEA,qBAEA,KACA,iBACA,OACA,OACA,MACA,qBAEA,MAEA,mBACA,UACA,GAQA,KAEA,UAEA,oBAEA,WACA,iBACA,SACA,cACA,OACA,UACA,OACA,OAEA,GAEA,mBACA,kBACA,EAIA,cACA,iBACA,SACA,cACA,OACA,UACA,OACA,OACA,OAEA,GAEA,mBACA,sBACA,EASA,KAEA,UAEA,qBAEA,UACA,iBACA,qBACA,iBACA,iBACA,iBACA,IACA,OACA,UACA,MACA,MACA,MAIA,EAEA,mBACA,OACA,KACA,MACA,MACA,MAEA,EAGA,WACA,iBACA,qBACA,iBACA,iBACA,IACA,OACA,UACA,MACA,MAIA,EAEA,mBACA,OACA,KACA,MACA,MAEA,EAGA,YACA,iBACA,qBACA,iBACA,iBACA,iBACA,IACA,OACA,UACA,MACA,MACA,MAIA,EAEA,mBACA,OACA,KACA,MACA,MACA,MAEA,EAGA,WACA,iBACA,qBACA,iBACA,iBACA,IACA,OACA,UACA,MACA,MAIA,EAEA,mBACA,OACA,KACA,MACA,MAEA,EAWA,QA5TA,EA+TA,iBA7TA,CAEA,6DAEA,GA0BA,2BAxBA,MAEA,mDAEA,QAEA,gBACA,aACA,OACA,mBACA,eAIA,KAEA,KAIA,KAEA,IAIA,CA6RC,mBACD,gBAGA,uDAEA,oBAivBA,IACA,iEAGA,QAEA,QAEA,QAEK,eAEL,sBACA,iBAEA,UAEA,GACA,wCAGA,MAEA,+BAEA,kCACA,qBACA,+BAEA,sCACA,SACA,+BAEA,0BAEA,QASA,sBARA,4CAEA,YAEA,yBAEA,SAWA,kBACA,8BACA,MAQA,YANA,8CAEA,eAEA,iBACA,YAGA,kBAEA,MACA,SAEA,mBAEA,oBAEA,OACA,uBAEA,SAEA,MACA,SACA,SACA,eACA,0CAMA,+BACA,eAEA,SAEA,MACA,SACA,SACA,eACA,+BAMA,aAEA,kBACA,CAEA,kDADA,aAGA,mBACA,CAEA,eADA,WAGA,mBACA,CAEA,eADA,WAMA,mBAEA,wBACA,SAAW,gCAEX,yEACA,OACA,OACA,yBACA,kCACA,oBACA,aACA,UACA,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wBACA,mCAEA,sDACA,KAMA,KAEC,2BACD,UACA,gBACA,iCACA,gCACA,gBACA,yBACA,gCACA,iCACA,kCACA,qCACA,+BACA,iDAEA,oBA4RA,oBACA,uBACA,yEACA,UACA,EAEA,cACA,oBACA,oBACA,sJACA,mJACA,8IACA,+IACA,yHAGA,oBA1SA,cA8HA,CAEA,mBACA,6BACA,YAEA,aACA,iBACA,+BAEA,YAEA,aACA,cACA,OACA,4BAKA,sBAJA,+BAEA,cAIA,aACA,iBACA,+BACA,YAEA,cAaA,GAEA,oCACA,oCACA,sDACA,iDAEA,aAcA,aAbA,UAEA,SACA,UAEA,aACA,cAEA,yBAGA,gBAIA,cAEA,GAEA,qCACA,6BACA,gDAEA,aASA,aARA,UAEA,eAEA,2BAEA,gBAIA,mBA9MA,kCACA,8BAEA,SAEA,4CAEA,6BAEA,sDACA,iCAEA,0DACA,yCAEA,4DACA,mCACA,sCAEA,oDACA,iCAEA,mDACA,kCAEA,gDACA,2BACA,+BAEA,sDACA,CACA,uBAEA,KAEA,uBAEA,uDAEA,CACA,gBACA,wCACA,4BACA,OAEA,EAEA,gCAEA,sCACA,OACA,eACA,gBACA,sBACA,iBAGA,iEACA,UACA,iBACA,cACA,iEACA,kBACA,2CACA,cAGA,mCACA,UACA,iBACA,cACA,kBACA,wBAGA,2CACA,OACA,eACA,eACA,6BACA,cACA,sBAGA,6BACA,OACA,cACA,kBAGA,mCAEA,wCACA,OACA,cACA,gBACA,sBACA,wBAGA,qBAEA,yCACA,SAEA,iBAGA,eACA,cACA,aACA,0CAGA,mDACA,wCAEA,8DACA,CACA,mBACA,6BACA,YAEA,2BA6BA,gDACA,+CACA,qDACA,+CAEA,6CACA,0CAEA,iBAEA,eA8CA,IAEA,eAEA,SACA,YAEA,UAEA,yBAEA,cAEA,sBAEA,IAIA,qCACA,mBACA,mCACA,iCACA,WAGA,MAFA,QAEa,EAKb,+BAGA,UAEA,2CAEA,uBAEA,iDACA,IAEA,uCACA,iCACA,wCACA,iCACA,gEAGA,iEAEA,mBACA,gBAEA,sDAEA,wCACA,iDACA,sCACA,6DAGA,QAMA,OA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CA,gCACA,gCAGA,YAEA,EAIA,sBAEA,iBAEA,eACA,2BAEA,WACA,OACA,6BAGA,YAEA,EAIA,iBAEA,iBAEA,eACA,kDAEA,WACA,OACA,qBACA,mBACA,mBAGA,IAEA,EAIA,kBAEA,iBAEA,eACA,+DAEA,WACA,OACA,qBACA,mBACA,mBACA,mBAGA,IAEA,EASA,WAEA,UAEA,qBAEA,KACA,iBACA,OACA,OACA,MACA,qBAEA,MAEA,mBACA,UACA,GAQA,KAEA,UAEA,oBAEA,WACA,iBACA,SACA,cACA,OACA,UACA,OACA,OAEA,GAEA,mBACA,kBACA,EAIA,cACA,iBACA,SACA,cACA,OACA,UACA,OACA,OACA,OAEA,GAEA,mBACA,sBACA,EASA,KAEA,UAEA,qBAEA,UACA,iBACA,qBACA,iBACA,iBACA,iBACA,IACA,OACA,UACA,MACA,MACA,MAIA,EAEA,mBACA,OACA,KACA,MACA,MACA,MAEA,EAGA,WACA,iBACA,qBACA,iBACA,iBACA,IACA,OACA,UACA,MACA,MAIA,EAEA,mBACA,OACA,KACA,MACA,MAEA,EAGA,YACA,iBACA,qBACA,iBACA,iBACA,iBACA,IACA,OACA,UACA,MACA,MACA,MAIA,EAEA,mBACA,OACA,KACA,MACA,MACA,MAEA,EAGA,WACA,iBACA,qBACA,iBACA,iBACA,IACA,OACA,UACA,MACA,MAIA,EAEA,mBACA,OACA,KACA,MACA,MAEA,EAWA,QA5TA,EA+TA,iBA7TA,CAEA,6DAEA,GA0BA,2BAxBA,MAEA,mDAEA,QAEA,gBACA,aACA,OACA,mBACA,eAIA,KAEA,KAIA,KAEA,IAIA,CA6RC,mBACD,gBACA,uBAEA,IAEA,SAEA,2BAEA,eAEA,aACA,SACA,YACA,aACA,UACA,CACA,QACA,QACA,QACA,QACA,QAGA,kBACA,GACA,WACA,WAGA,SAEA,4BAEA,YACA,kBACA,aACA,MAEA,KACA,OAEA,eACA,GACA,MACA,IAIA,YACA,MACO,OACP,QAEA,UAEA,UACA,EACA,SAGA,GACA,GACA,MACA,QAEA,IAEA,4BACA,iCACA,KAGA,mCAFA,iCACA,MAGA,kCACA,OACA,WAEA,oCACA,uBACA,OAIA,EAAC,IACD,iBACA,Q,yBClvBA,aAKA,aACA,UACA,iBACA,8BACA,iBACA,CACA,OAEA,MACA,cACA,CACA,OACA,IACA,OACA,KACA,aACA,GAEA,MACA,8BACA,wBACA,CACA,OACA,MACA,aACA,GAEA,EACA,4BACA,wBACA,CACA,OACA,IACA,aACA,GAEA,IAEA,aACA,IAEA,YACA,iBACA,8BACA,uBAEA,+BAGA,WAKA,gBAGA,gBACA,YALA,OAOA,MACA,gCACA,oBACA,4BAEA,IACA,SAEK,QACL,wBAIA,yBACA,QAEA,EACA,8BACA,OACA,oBAIA,4BACA,QAEA,IAEA,eACA,UACA,qBAIA,wBAEA,aACA,UACA,oBACE,aACF,uDACA,OACA,KAAG,kBACH,OACA,KAIA,KAhHA,QACA,SACA,cAgHA,qBACA,yBACA,IAEA,qBACA,MAAsB,YAEtB,iBAIA,qBAEA,YAIA,mDAEA,IAIA,uCACA,kCAGA,SACA,4BAIA,8BAEA,OACA,SAEA,6CACA,OACA,KAQA,0CANA,aAKA,MACE,gBACF,WAEA,yBACA,GAQA,EAPA,CACA,UACA,sBAGA,iBAIA,mDACA,OAEA,QACA,iBAGA,MACA,eAGA,4BACA,IAEA,0CACA,CAIA,2BACA,QAEA,UACA,IAEA,mBACA,MAAE,qBACF,OACA,WAAE,aACF,iBC7MA,aACA,qBACA,4DACA,wCACA,aACA,8BCEA;;;;EAKA,aACA,cACA,+BAGA,+DACA,WAVA,aACA,yCACA,uDAsDA,UA5CA,UACA,IACA,YACA,OAMA,0BACA,eACA,KACA,uCAIA,gBACA,QAAiB,EAAQ,KACzB,iBAEA,sEACA,OACA,KACA,MACA,0BAIA,YACA,iHACA,CACA,MACA,GAMA,4CANkC,mBAClC,GAKE,SAEF,CACA,QACA,8BAGA,WAEA,OAEgB,EAHhB,EAGA,cAAsC,WACtC,QAGA,eADA,kBAEA,iBAIA,WACA,GACA,eAAkB,MAAoB,OACtC,aACA,kBAGA,MACA,CAEA,CACA,uBCzFA,aAKA,eACA,IAEA,kCACA,IAAE,SAEF,CAEA,IACA,aAGA,cAGA,gBACA,SAEA,oDACA,MAEA,aACA,IACA,OACA,sBAAE,SACF,aAEA,WAAiB,MAAmB,OACpC,kBAEA,QAGA,SACA,QACA,EAEA,aAEA,QAKA,yDACA,WACA,IAEA,8BACA,GAAG,SACH,WAEA,UACA,SAEA,MAEA,KACA,OAGA,UAEA,0BAEA,UAAgB,QAAoB,OAEpC,MACA,mCAGA,MACA,SA3EA,GACA,0CA4EA,qBACA,IACA,sGAGA,QACA,0BAGA,KACA,qBAAE,SAEF,OACA,KACA,wCCkGS,YACP,IAAM,GAAQ,OACd,WAAM,EAAS,OACf,cACA,eAAO,MACP,MACD,yBAKQ,YACP,CAEA,2BAEA,sBAAW,QAAQ,WACjB,GAAO,OAAO,SAAS,OAAO,MAAQ,EACtC,QAAO,OAAO,SAAS,UAAU,MAAQ,EAC1C,QAED,KACD,YArND,cAa+B,EAAmB,iBAA1C,QAAK,IAGb,cAAM,EAAW,eACf,OAAO,OAAO,WAAa,OAC3B,6BAAkB,EAAc,UAElC,EAAS,oBAAoB,OAAO,kBACpC,SAAS,KAAK,YAAY,EAE1B,QACA,GAAM,GAAQ,MAGd,MAAM,EAAS,wBACb,KAAK,KAGP,EAAO,SAAS,IAAI,GAAI,EAAG,IAC3B,EAEA,SACA,GAAM,GAAW,MAAkB,gBAAQ,EAAS,QACpD,EAAS,SAET,GAAM,GAAiB,kBACrB,CAmBF,wPAEA,EAAyB,WAEzB,EAAQ,MAAe,WAAY,EAAG,GAEtC,GAAmB,MAgDnB,CA9CS,UACP,IAAM,GAAW,aACf,oIAKC,eAAa,sBACb,eAAa,QAAQ,2BACrB,eAAa,MAEd,yBAYA,wRACE,cACE,MACA,WAAO,EAET,gBACE,MACA,UAAO,EAET,iBACE,MACA,UAAO,EAKb,aAAM,EAAW,qBAAmB,GAAI,GACxC,IAAM,EAAO,MAEb,YAEA,SACD,YAGQ,UACP,IAAM,GAAW,aACf,eAGA,iDAcA,imBAMC,eAAa,sBACb,eAAa,QAAQ,2BACrB,eAAa,MAEd,yBAYA,uRACE,KACE,MACA,WAAO,EAET,gBACE,MACA,UAAO,EAET,iBACE,MACA,UAAO,EAET,0BACE,MACA,KAKN,kBAAM,EAAY,qBAAmB,EAAG,GACxC,IAAM,EAAQ,MACd,YASA,SAED,QACD,GASA,IAEA,OAAO,iBAA2B,YAclC","file":"hdrcube.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 116);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4aace9525f1b74b222bc","import { WEBGL2_CONTEXT } from './Constants';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\nlet contextType: string;\nlet webgl2: boolean;\n\n/*\n\tSet the gl instance\n\tThis is set from the renderer\n*/\nexport function set(\n  _gl: WebGL2RenderingContext | WebGLRenderingContext,\n  _contextType: string\n) {\n  gl = _gl;\n  contextType = _contextType;\n  webgl2 = contextType === WEBGL2_CONTEXT;\n}\n\n/*\n\tGet the gl instance\n*/\nexport function get(): WebGL2RenderingContext | WebGLRenderingContext {\n  return gl;\n}\n\n/**\n\t* createBuffer\n\t* @return {Buffer}\n\t*/\nfunction createBuffer(\n  type: GLenum,\n  data: Float32Array | Uint16Array,\n  isDynamic: boolean = false\n) {\n  const buffer = gl.createBuffer();\n  const usage = isDynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\n  const ArrayView = type === gl.ARRAY_BUFFER ? Float32Array : Uint16Array;\n  gl.bindBuffer(type, buffer);\n  // https://github.com/nkemnitz/webgl2-ts/blob/master/WebGL2/webgl2-context.d.ts#L276\n  if (gl instanceof WebGL2RenderingContext) {\n    gl.bufferData(type, new ArrayView(data), usage, 0);\n  } else {\n    gl.bufferData(type, new ArrayView(data), usage);\n  }\n  gl.bindBuffer(type, null);\n  return buffer;\n}\n\n/**\n\t* createUniformBuffer\n\t* @return {Buffer}\n\t*/\nfunction createUniformBuffer(data: Float32Array) {\n  const buffer = gl.createBuffer();\n  if (gl instanceof WebGL2RenderingContext) {\n    gl.bindBuffer(gl.UNIFORM_BUFFER, buffer);\n    gl.bufferData(gl.UNIFORM_BUFFER, new Float32Array(data), gl.DYNAMIC_DRAW);\n    gl.bindBuffer(gl.UNIFORM_BUFFER, null);\n    return buffer;\n  } else {\n    return false;\n  }\n}\n\nexport { webgl2, createBuffer, createUniformBuffer };\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/GL.ts","/**\n * @fileoverview gl-matrix - High performance matrix and vector operations\n * @author Brandon Jones\n * @author Colin MacKenzie IV\n * @version 2.4.0\n */\n\n/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n// END HEADER\n\nimport * as glMatrix from \"./gl-matrix/common\";\nimport * as mat2 from \"./gl-matrix/mat2\";\nimport * as mat2d from \"./gl-matrix/mat2d\";\nimport * as mat3 from \"./gl-matrix/mat3\";\nimport * as mat4 from \"./gl-matrix/mat4\";\nimport * as quat from \"./gl-matrix/quat\";\nimport * as vec2 from \"./gl-matrix/vec2\";\nimport * as vec3 from \"./gl-matrix/vec3\";\nimport * as vec4 from \"./gl-matrix/vec4\";\n\nexport {\n  glMatrix,\n  mat2, mat2d, mat3, mat4,\n  quat,\n  vec2, vec3, vec4,\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/src/gl-matrix.js\n// module id = 1\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","// Contexts\nexport const WEBGL_CONTEXT: string = 'webgl';\nexport const WEBGL2_CONTEXT: string = 'webgl2';\n\n// Default ratio\nexport const RENDERER_DEFAULT_CONTEXT: string = WEBGL2_CONTEXT;\nexport const RENDERER_DEFAULT_WIDTH: number = 1280;\nexport const RENDERER_DEFAULT_HEIGHT: number = 720;\nexport const RENDERER_DEFAULT_RATIO: number =\n  RENDERER_DEFAULT_WIDTH / RENDERER_DEFAULT_HEIGHT;\n\n// Precision\nexport const PRECISION: string = 'highp';\n\n// Culling\nexport const CULL_NONE: number = -1;\nexport const CULL_BACK: number = 0x0405;\nexport const CULL_FRONT: number = 0x0404;\nexport const CULL_FRONT_AND_BACK: number = 0x0408;\n\n// Draw style\nexport const DRAW_POINTS: number = 0;\nexport const DRAW_LINES: number = 1;\nexport const DRAW_LINE_LOOP: number = 2;\nexport const DRAW_LINE_STRIP: number = 3;\nexport const DRAW_TRIANGLES: number = 4;\n\n// Uniform buffer location indices\nexport const UNIFORM_PROJECTION_VIEW_LOCATION: number = 0;\nexport const UNIFORM_AMBIENT_LIGHT_LOCATION: number = 1;\nexport const UNIFORM_DIRECTIONAL_LIGHTS_LOCATION: number = 2;\nexport const UNIFORM_POINT_LIGHTS_LOCATION: number = 3;\n\n// Shader types\nexport const SHADER_BASIC = 'basic';\nexport const SHADER_LAMBERT = 'lambert';\nexport const SHADER_PHONG = 'phong';\n\nexport const LIGHT_AMBIENT = 'ambient';\nexport const LIGHT_DIRECTIONAL = 'directional';\nexport const LIGHT_POINT = 'point';\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Constants.ts","import { vec3 } from 'gl-matrix';\n\nexport default class Vector3 {\n  public v: vec3;\n  constructor(x = 0, y = 0, z = 0) {\n    this.v = vec3.create();\n    this.set(x, y, z);\n    return this;\n  }\n  set x(value: number) {\n    this.v[0] = value;\n  }\n  get x() {\n    return this.v[0];\n  }\n  set y(value: number) {\n    this.v[1] = value;\n  }\n  get y() {\n    return this.v[1];\n  }\n  set z(value: number) {\n    this.v[2] = value;\n  }\n  get z() {\n    return this.v[2];\n  }\n  public set(x: number, y: number, z: number) {\n    vec3.set(this.v, x, y, z);\n    return this;\n  }\n  public clone() {\n    return new Vector3(this.v[0], this.v[1], this.v[2]);\n  }\n  public copy(vector3: Vector3) {\n    vec3.copy(this.v, vector3.v);\n    return this;\n  }\n  public add(vector3: Vector3) {\n    vec3.add(this.v, this.v, vector3.v);\n    return this;\n  }\n  public subtract(vector3: Vector3) {\n    vec3.subtract(this.v, this.v, vector3.v);\n    return this;\n  }\n  public subtractVectors(vector0: Vector3, vector1: Vector3) {\n    const out = vec3.create();\n    vec3.subtract(out, vector0.v, vector1.v);\n    return out;\n  }\n  public scale(value: number) {\n    vec3.scale(this.v, this.v, value);\n    return this;\n  }\n  public distance(vector3: Vector3) {\n    return vec3.distance(this.v, vector3.v);\n  }\n  public length(): number {\n    return vec3.length(this.v);\n  }\n  public negate() {\n    vec3.negate(this.v, this.v);\n    return this;\n  }\n  public normalize() {\n    vec3.normalize(this.v, this.v);\n    return this;\n  }\n  public dot(vector3: Vector3): number {\n    return vec3.dot(this.v, vector3.v);\n  }\n  public cross(vector3: Vector3) {\n    vec3.cross(this.v, this.v, vector3.v);\n    return this;\n  }\n  public crossVectors(vector0: Vector3, vector1: Vector3) {\n    const out = vec3.create();\n    vec3.cross(out, vector0.v, vector1.v);\n    return out;\n  }\n  public lerp(vector3: Vector3, value: number) {\n    vec3.lerp(this.v, this.v, vector3.v, value);\n    return this;\n  }\n  public equals(vector3: Vector3): boolean {\n    return vec3.equals(this.v, vector3.v);\n  }\n  public fromArray(values: number[]) {\n    return vec3.copy(this.v, values);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/math/Vector3.ts","// Es300\nexport default '#version 300 es';\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/EsVersion.glsl.ts","import { warn } from '../utils/Console';\nimport { PRECISION } from './Constants';\nimport * as GL from './GL';\n\n/*\n\t* https://github.com/mrdoob/three.js/blob/dev/src/renderers/webgl/WebGLCapabilities.js\n\t*/\n\nfunction getMaxPrecision(\n  gl: WebGL2RenderingContext | WebGLRenderingContext,\n  precision: string\n) {\n  if (precision === 'highp') {\n    if (\n      gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).precision >\n        0 &&\n      gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).precision >\n        0\n    ) {\n      return 'highp';\n    }\n    precision = 'mediump';\n  }\n\n  if (precision === 'mediump') {\n    if (\n      gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).precision >\n        0 &&\n      gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT)\n        .precision > 0\n    ) {\n      return 'mediump';\n    }\n  }\n  return 'lowp';\n}\n\nfunction Capabilities(gl: WebGL2RenderingContext | WebGLRenderingContext) {\n  let precision = PRECISION;\n  const maxPrecision = getMaxPrecision(gl, precision);\n\n  if (maxPrecision !== precision) {\n    warn(\n      'Capabilities:',\n      precision,\n      'not supported, using',\n      maxPrecision,\n      'instead.'\n    );\n    precision = maxPrecision;\n  }\n\n  const maxTextures: number = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n  const maxVertexTextures: number = gl.getParameter(\n    gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS\n  );\n  const maxTextureSize: number = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n  const maxCubemapSize: number = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\n\n  const maxAttributes: number = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n  const maxVertexUniforms: number = gl.getParameter(\n    gl.MAX_VERTEX_UNIFORM_VECTORS\n  );\n  const maxVaryings: number = gl.getParameter(gl.MAX_VARYING_VECTORS);\n  const maxFragmentUniforms: number = gl.getParameter(\n    gl.MAX_FRAGMENT_UNIFORM_VECTORS\n  );\n\n  return {\n    maxAttributes,\n    maxCubemapSize,\n    maxFragmentUniforms,\n    maxPrecision,\n    maxTextures,\n    maxTextureSize,\n    maxVertexTextures,\n    maxVertexUniforms,\n    maxVaryings,\n    precision\n  };\n}\n\nfunction Extensions(gl: WebGL2RenderingContext | WebGLRenderingContext) {\n  const vertexArrayObject =\n    GL.webgl2 || gl.getExtension('OES_vertex_array_object') || false;\n  const angleInstancedArrays =\n    gl.getExtension('ANGLE_instanced_arrays') || false;\n  const textureFloat = gl.getExtension('OES_texture_float') || false;\n\n  return {\n    angleInstancedArrays,\n    textureFloat,\n    vertexArrayObject\n  };\n}\n\nlet capabilities: any = {};\nlet extensions: any = {};\n\n/*\n\tSet the capabilities once\n*/\nexport function set(gl: WebGL2RenderingContext | WebGLRenderingContext) {\n  capabilities = Capabilities(gl);\n  extensions = Extensions(gl);\n}\n\n/*\n\tGet capabilities\n*/\nexport { capabilities, extensions };\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Capabilities.ts","import * as GL from '../core/GL';\nimport Vector2 from '../math/Vector2';\nimport Vector3 from '../math/Vector3';\nimport BufferAttribute from './BufferAttribute';\nimport Face from './Face';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\nlet bufferNormalsTmp = [];\n\nexport default class Geometry {\n  public bufferVertices: Float32Array;\n  public bufferIndices: Uint16Array;\n  public bufferNormals: Float32Array;\n  public bufferUvs: Float32Array;\n  public bufferColors: Float32Array;\n  public attributes: any;\n  public attributesInstanced: any;\n  public vertices: Vector3[];\n  public faces: Face[];\n  public uvs: Vector2[];\n\n  constructor(\n    vertices: Float32Array,\n    indices?: Uint16Array,\n    normals?: Float32Array,\n    uvs?: Float32Array,\n    colors?: Float32Array\n  ) {\n    gl = GL.get();\n    this.bufferVertices = vertices;\n    this.bufferIndices = indices;\n    this.bufferNormals = normals;\n    this.bufferUvs = uvs;\n    this.bufferColors = colors;\n    this.attributes = {};\n    this.attributesInstanced = {};\n\n    // Vertex positions\n    if (this.bufferVertices) {\n      this.addAttribute(\n        'aVertexPosition',\n        gl.ARRAY_BUFFER,\n        this.bufferVertices,\n        3\n      );\n      this.generateVertices();\n    }\n\n    // Vertex indices\n    if (this.bufferIndices) {\n      this.addAttribute(\n        'aIndex',\n        gl.ELEMENT_ARRAY_BUFFER,\n        this.bufferIndices,\n        1,\n        false\n      );\n      this.generateFaces();\n    }\n\n    // Vertex normals\n    if (this.bufferNormals) {\n      this.addAttribute(\n        'aVertexNormal',\n        gl.ARRAY_BUFFER,\n        this.bufferNormals,\n        3\n      );\n    }\n\n    // uvs\n    if (this.bufferUvs) {\n      this.addAttribute('aUv', gl.ARRAY_BUFFER, this.bufferUvs, 2);\n      this.generateUvs();\n    }\n\n    // Vertex colors\n    if (this.bufferColors) {\n      this.addAttribute('aVertexColor', gl.ARRAY_BUFFER, this.bufferColors, 3);\n    }\n  }\n\n  public addAttribute(\n    name: string,\n    type: GLenum,\n    data: Float32Array | Uint16Array,\n    count: number,\n    shaderAttribute?: boolean\n  ) {\n    this.attributes[name] = new BufferAttribute(\n      type,\n      data,\n      count,\n      shaderAttribute\n    );\n  }\n\n  public addInstancedBufferAttribute(name, value, count) {\n    this.attributesInstanced[name] = new BufferAttribute(\n      gl.ARRAY_BUFFER,\n      value,\n      count\n    );\n  }\n\n  public generateVertices() {\n    this.vertices = [];\n    for (let i = 0; i < this.bufferVertices.length; i += 3) {\n      const a = this.bufferVertices[i];\n      const b = this.bufferVertices[i + 1];\n      const c = this.bufferVertices[i + 2];\n      const vertex = new Vector3(a, b, c);\n      this.vertices.push(vertex);\n    }\n  }\n\n  public generateFaces() {\n    this.faces = [];\n    for (let i = 0; i < this.bufferIndices.length; i += 3) {\n      const ia = this.bufferIndices[i];\n      const ib = this.bufferIndices[i + 1];\n      const ic = this.bufferIndices[i + 2];\n      const a = this.vertices[ia];\n      const b = this.vertices[ib];\n      const c = this.vertices[ic];\n      const face = new Face(ia, ib, ic, a, b, c);\n      this.faces.push(face);\n    }\n  }\n\n  public generateUvs() {\n    this.uvs = [];\n    for (let i = 0; i < this.bufferUvs.length; i += 2) {\n      const a = this.bufferUvs[i];\n      const b = this.bufferUvs[i + 1];\n\n      const uv = new Vector2(a, b);\n      this.uvs.push(uv);\n    }\n  }\n\n  public updateVertices() {\n    gl = GL.get();\n    this.vertices.forEach((vertex, i) => {\n      this.bufferVertices.set(vertex.v, i * vertex.v.length);\n    });\n    this.attributes.aVertexPosition.update(this.bufferVertices);\n  }\n\n  public updateNormals() {\n    const normals = [];\n    this.faces.forEach(face => {\n      face.updateFaceNormal();\n      normals[face.indices[0]] = face.normal.v;\n      normals[face.indices[1]] = face.normal.v;\n      normals[face.indices[2]] = face.normal.v;\n    });\n    // Flatten\n    bufferNormalsTmp = [];\n    normals.forEach(normal => {\n      bufferNormalsTmp = bufferNormalsTmp.concat(...normal);\n    });\n    // Copy from temp\n    this.bufferNormals.set(bufferNormalsTmp);\n    this.attributes.aVertexNormal.update(this.bufferNormals);\n  }\n\n  public dispose() {\n    gl = GL.get();\n    // Dispose attributes and buffers\n    Object.keys(this.attributes).forEach(attributeName => {\n      this.attributes[attributeName].dispose(gl);\n      delete this.attributes[attributeName];\n    });\n    Object.keys(this.attributesInstanced).forEach(attributeName => {\n      this.attributesInstanced[attributeName].dispose(gl);\n      delete this.attributesInstanced[attributeName];\n    });\n    delete this.attributes;\n    delete this.attributesInstanced;\n    this.bufferVertices = null;\n    this.bufferIndices = null;\n    this.bufferNormals = null;\n    this.bufferUvs = null;\n    this.bufferColors = null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/Geometry.ts","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\n/**\n * Common utilities\n * @module glMatrix\n */\n\n// Configuration Constants\nexport const EPSILON = 0.000001;\nexport let ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\nexport const RANDOM = Math.random;\n\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Type} type Array type, such as Float32Array or Array\n */\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\n\nconst degree = Math.PI / 180;\n\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\nexport function toRadian(a) {\n  return a * degree;\n}\n\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON*Math.max(1.0, Math.abs(a), Math.abs(b));\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/src/gl-matrix/common.js\n// module id = 7\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","import { mat4 } from 'gl-matrix';\nimport Camera from '../cameras/Camera';\nimport OrthographicCamera from '../cameras/OrthographicCamera';\nimport PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport Geometry from '../geometry/Geometry';\nimport { extensions } from './Capabilities';\nimport * as GL from './GL';\nimport Object3D from './Object3D';\nimport Shader from './Shader';\nimport Vao from './Vao';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\nexport default class Mesh extends Object3D {\n  public geometry: Geometry;\n  public shader: Shader;\n  public vao: Vao;\n  public visible: boolean;\n  public instanceCount: number;\n  public isInstanced: boolean;\n\n  constructor(geometry: Geometry, shader: Shader) {\n    super();\n    this.geometry = geometry;\n    this.shader = shader;\n    this.vao = new Vao();\n    this.visible = true;\n    this.instanceCount = 0;\n    // Allow meshes to share shaders and programs\n    if (!this.shader.program.created) {\n      this.shader.create(this.geometry);\n    }\n    this.isInstanced = false;\n\n    gl = GL.get();\n\n    // Setup vao\n    this.vao.bind();\n    this.bindAttributes();\n    this.bindAttributesInstanced();\n    this.bindIndexBuffer();\n    this.vao.unbind();\n  }\n\n  public setInstanceCount(value: number) {\n    gl = GL.get();\n    this.instanceCount = value;\n    this.isInstanced = true;\n  }\n\n  public bindAttributes() {\n    // Attributes\n    Object.keys(this.geometry.attributes).forEach(attributeName => {\n      if (attributeName !== 'aIndex') {\n        // enableVertexAttribArray\n        this.shader.program.setAttributeLocation(attributeName);\n        // Bind buffer\n        this.geometry.attributes[attributeName].bind();\n        // vertexAttribPointer\n        this.shader.program.setAttributePointer(\n          attributeName,\n          this.geometry.attributes[attributeName].itemSize\n        );\n      }\n    });\n  }\n\n  public bindAttributesInstanced() {\n    // Instanced Attributes\n    Object.keys(this.geometry.attributesInstanced).forEach(attributeName => {\n      if (attributeName !== 'aIndex') {\n        // enableVertexAttribArray\n        this.shader.program.setAttributeLocation(attributeName);\n        // Bind buffer\n        this.geometry.attributesInstanced[attributeName].bind();\n        // vertexAttribPointer\n        this.shader.program.setAttributeInstancedPointer(\n          attributeName,\n          this.geometry.attributesInstanced[attributeName].itemSize\n        );\n        if (gl instanceof WebGL2RenderingContext) {\n          gl.vertexAttribDivisor(\n            this.shader.program.attributeLocations[attributeName],\n            1\n          );\n        } else {\n          extensions.angleInstancedArrays.vertexAttribDivisorANGLE(\n            this.shader.program.attributeLocations[attributeName],\n            1\n          );\n        }\n      }\n    });\n  }\n\n  public bindIndexBuffer() {\n    // Bind index buffer\n    if (this.geometry.bufferIndices) {\n      this.geometry.attributes.aIndex.bind();\n    }\n  }\n\n  public draw(camera: Camera | PerspectiveCamera | OrthographicCamera) {\n    if (!this.visible) return;\n\n    gl = GL.get();\n\n    // Update modelMatrix\n    this.updateMatrix(camera);\n\n    this.shader.program.bind();\n\n    // Culling enable\n    if (this.shader.culling !== -1) {\n      gl.enable(gl.CULL_FACE);\n      gl.cullFace(this.shader.culling);\n    }\n\n    this.shader.setUniforms(\n      camera.projectionMatrix,\n      this.modelViewMatrix,\n      this.modelMatrix,\n      camera\n    );\n\n    if (extensions.vertexArrayObject) {\n      this.vao.bind();\n    } else {\n      this.bindAttributes();\n      this.bindAttributesInstanced();\n      this.bindIndexBuffer();\n    }\n\n    if (this.geometry.attributes.aIndex) {\n      gl.drawElements(\n        this.shader.drawType,\n        this.geometry.attributes.aIndex.numItems,\n        gl.UNSIGNED_SHORT,\n        0\n      );\n    } else {\n      gl.drawArrays(\n        this.shader.drawType,\n        0,\n        this.geometry.attributes.aVertexPosition.numItems\n      );\n    }\n\n    if (extensions.vertexArrayObject) {\n      this.vao.unbind();\n    }\n\n    // Culling disable\n    if (this.shader.culling !== -1) {\n      gl.disable(gl.CULL_FACE);\n    }\n  }\n\n  public drawInstance(camera: Camera | PerspectiveCamera | OrthographicCamera) {\n    if (!this.visible) return;\n\n    gl = GL.get();\n\n    // Update modelMatrix\n    this.updateMatrix(camera);\n\n    this.shader.program.bind();\n    this.shader.setUniforms(\n      camera.projectionMatrix,\n      this.modelViewMatrix,\n      this.modelMatrix,\n      camera\n    );\n\n    // Culling enable\n    if (this.shader.culling !== -1) {\n      gl.enable(gl.CULL_FACE);\n      gl.cullFace(this.shader.culling);\n    }\n\n    if (extensions.vertexArrayObject) {\n      this.vao.bind();\n    } else {\n      this.bindAttributes();\n      this.bindAttributesInstanced();\n      this.bindIndexBuffer();\n    }\n\n    if (gl instanceof WebGL2RenderingContext) {\n      gl.drawElementsInstanced(\n        this.shader.drawType,\n        this.geometry.attributes.aIndex.numItems,\n        gl.UNSIGNED_SHORT,\n        0,\n        this.instanceCount\n      );\n    } else {\n      extensions.angleInstancedArrays.drawElementsInstancedANGLE(\n        this.shader.drawType,\n        this.geometry.attributes.aIndex.numItems,\n        gl.UNSIGNED_SHORT,\n        0,\n        this.instanceCount\n      );\n    }\n\n    if (extensions.vertexArrayObject) {\n      this.vao.unbind();\n    }\n\n    // Culling disable\n    if (this.shader.culling !== -1) {\n      gl.disable(gl.CULL_FACE);\n    }\n  }\n\n  public dispose() {\n    this.shader.dispose();\n    this.geometry.dispose();\n    this.vao.dispose();\n    this.geometry = null;\n    this.shader = null;\n    super.dispose();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Mesh.ts","import { mat3, mat4 } from 'gl-matrix';\nimport OrthographicCamera from '../cameras/OrthographicCamera';\nimport PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport Geometry from '../geometry/Geometry';\nimport Lights from '../lights/Lights';\nimport Color from '../math/Color';\nimport {\n  basicFragmentShaderEs100,\n  basicFragmentShaderEs300\n} from '../shaders/Basic.glsl';\nimport {\n  lambertFragmentShaderEs100,\n  lambertFragmentShaderEs300\n} from '../shaders/Lambert.glsl';\nimport {\n  phongFragmentShaderEs100,\n  phongFragmentShaderEs300\n} from '../shaders/Phong.glsl';\nimport { vertexShaderEs100, vertexShaderEs300 } from '../shaders/Vertex.glsl';\nimport ShaderParser from '../utils/ShaderParser';\nimport { capabilities } from './Capabilities';\nimport * as CONSTANTS from './Constants';\nimport * as GL from './GL';\nimport Program from './Program';\nimport UniformBuffers from './UniformBuffers';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\nconst normalMatrix: mat3 = mat3.create();\nconst inversedModelViewMatrix: mat4 = mat4.create();\n\ninterface Options {\n  name?: string;\n  type?: string;\n  uniforms?: any;\n  fov?: number;\n  hookVertexPre?: string;\n  hookVertexMain?: string;\n  hookVertexEnd?: string;\n  hookFragmentPre?: string;\n  hookFragmentMain?: string;\n  hookFragmentEnd?: string;\n  vertexShader?: string;\n  fragmentShader?: string;\n  drawType?: number;\n  ambientLight?: Lights;\n  directionalLights?: Lights;\n  pointLights?: Lights;\n  culling?: number;\n}\n\nexport default class Shader {\n  public name: string;\n  public type: string;\n  public uniforms: any;\n  public fov: number;\n  public hookVertexPre: string;\n  public hookVertexMain: string;\n  public hookVertexEnd: string;\n  public hookFragmentPre: string;\n  public hookFragmentMain: string;\n  public hookFragmentEnd: string;\n  public vertexShader: string;\n  public fragmentShader: string;\n  public drawType: number;\n  public ambientLight: Lights;\n  public directionalLights: Lights;\n  public pointLights: Lights;\n  public culling: number;\n  public program: Program;\n  public customUniforms: object;\n\n  constructor(options?: Options) {\n    const vertexShader = GL.webgl2 ? vertexShaderEs300 : vertexShaderEs100;\n    let fragmentShader;\n\n    switch (options.type) {\n      case CONSTANTS.SHADER_LAMBERT: {\n        fragmentShader = GL.webgl2\n          ? lambertFragmentShaderEs300\n          : lambertFragmentShaderEs100;\n        break;\n      }\n      case CONSTANTS.SHADER_PHONG: {\n        fragmentShader = GL.webgl2\n          ? phongFragmentShaderEs300\n          : phongFragmentShaderEs100;\n        break;\n      }\n      default: {\n        fragmentShader = GL.webgl2\n          ? basicFragmentShaderEs300\n          : basicFragmentShaderEs100;\n      }\n    }\n\n    this.name = '';\n    this.type = CONSTANTS.SHADER_BASIC;\n    this.uniforms = {};\n    this.hookVertexPre = '';\n    this.hookVertexMain = '';\n    this.hookVertexEnd = '';\n    this.hookFragmentPre = '';\n    this.hookFragmentMain = '';\n    this.hookFragmentEnd = '';\n    this.vertexShader = vertexShader;\n    this.fragmentShader = fragmentShader;\n    this.drawType = CONSTANTS.DRAW_TRIANGLES;\n    this.directionalLights = undefined;\n    this.pointLights = undefined;\n    this.culling = CONSTANTS.CULL_NONE;\n    Object.assign(this, options);\n    this.program = new Program();\n  }\n\n  public create(geometry: Geometry, transformFeedbackVaryings?: string[]) {\n    gl = GL.get();\n\n    this.vertexShader = this._processShader(\n      this.vertexShader,\n      'vertex',\n      geometry\n    );\n    this.fragmentShader = this._processShader(\n      this.fragmentShader,\n      'fragment',\n      geometry\n    );\n\n    this.program.link(\n      this.vertexShader,\n      this.fragmentShader,\n      transformFeedbackVaryings\n    );\n\n    // User defined uniforms\n    this.customUniforms = this.uniforms || {};\n\n    // Uniforms for ProjectionView uniform block\n    if (GL.webgl2) {\n      this.program.setUniformBlockLocation(\n        'ProjectionView',\n        UniformBuffers.projectionView.buffer,\n        CONSTANTS.UNIFORM_PROJECTION_VIEW_LOCATION\n      );\n    }\n\n    if (this.ambientLight) {\n      if (GL.webgl2) {\n        // Setup uniform block for point lights\n        this.program.setUniformBlockLocation(\n          'AmbientLight',\n          this.ambientLight.uniformBuffer.buffer,\n          CONSTANTS.UNIFORM_AMBIENT_LIGHT_LOCATION\n        );\n      } else {\n        // Generate uniforms for point lights\n        this.ambientLight.get().forEach((ambientLight, i) => {\n          Object.keys(ambientLight.uniforms).forEach(ambientLightUniform => {\n            const uniform = ambientLight.uniforms[ambientLightUniform];\n            this.customUniforms[\n              `uAmbientLight.${ambientLightUniform}`\n            ] = uniform;\n          });\n        });\n      }\n    }\n\n    if (this.directionalLights) {\n      if (GL.webgl2) {\n        // Setup uniform block for directional lights\n        this.program.setUniformBlockLocation(\n          'DirectionalLights',\n          this.directionalLights.uniformBuffer.buffer,\n          CONSTANTS.UNIFORM_DIRECTIONAL_LIGHTS_LOCATION\n        );\n      } else {\n        // Generate uniforms for directional lights\n        this.directionalLights.get().forEach((directionalLight, i) => {\n          Object.keys(\n            directionalLight.uniforms\n          ).forEach(directionalLightUniform => {\n            const uniform = directionalLight.uniforms[directionalLightUniform];\n            this.customUniforms[\n              `uDirectionalLights[${i}].${directionalLightUniform}`\n            ] = uniform;\n          });\n        });\n      }\n    }\n\n    if (this.pointLights) {\n      if (GL.webgl2) {\n        // Setup uniform block for point lights\n        this.program.setUniformBlockLocation(\n          'PointLights',\n          this.pointLights.uniformBuffer.buffer,\n          CONSTANTS.UNIFORM_POINT_LIGHTS_LOCATION\n        );\n      } else {\n        // Generate uniforms for point lights\n        this.pointLights.get().forEach((pointLight, i) => {\n          Object.keys(pointLight.uniforms).forEach(pointLightUniform => {\n            const uniform = pointLight.uniforms[pointLightUniform];\n            this.customUniforms[\n              `uPointLights[${i}].${pointLightUniform}`\n            ] = uniform;\n          });\n        });\n      }\n    }\n\n    // Generate texture indices\n    const textureIndices = [\n      gl.TEXTURE0,\n      gl.TEXTURE1,\n      gl.TEXTURE2,\n      gl.TEXTURE3,\n      gl.TEXTURE4,\n      gl.TEXTURE5\n    ];\n    Object.keys(this.uniforms).forEach((uniformName, i) => {\n      switch (this.uniforms[uniformName].type) {\n        case 't':\n        case 'tc':\n        case 't3d': {\n          this.uniforms[uniformName].textureIndex = i;\n          this.uniforms[uniformName].activeTexture = textureIndices[i];\n          break;\n        }\n        default:\n      }\n    });\n\n    // Add Camera position uniform for point lights if it doesn\"t exist\n    if (this.uniforms.uCameraPosition === undefined && this.pointLights) {\n      this.uniforms.uCameraPosition = {\n        type: '3f',\n        value: [0, 0, 0]\n      };\n    }\n\n    // Only for webgl1\n    const projectionViewUniforms = GL.webgl2\n      ? {}\n      : {\n          uProjectionMatrix: {\n            location: null,\n            type: '4fv',\n            value: mat4.create()\n          }\n        };\n\n    // Default uniforms\n    this.uniforms = {\n      uDiffuse: {\n        location: null,\n        type: '3f',\n        value: new Color().v\n      },\n      uModelMatrix: {\n        location: null,\n        type: '4fv',\n        value: mat4.create()\n      },\n      uModelViewMatrix: {\n        location: null,\n        type: '4fv',\n        value: mat4.create()\n      },\n      uNormalMatrix: {\n        location: null,\n        type: '4fv',\n        value: mat4.create()\n      },\n      ...this.customUniforms,\n      ...projectionViewUniforms\n    };\n\n    Object.keys(this.uniforms).forEach(uniformName => {\n      this.program.setUniformLocation(this.uniforms, uniformName);\n    });\n  }\n\n  public _processShader(shader: string, type: string, geometry: Geometry) {\n    gl = GL.get();\n    let defines = '';\n\n    const precision = `precision ${capabilities.precision} float;`;\n\n    function addDefine(define) {\n      defines += `#define ${define} \\n`;\n    }\n\n    if (geometry.bufferUvs) {\n      addDefine('uv');\n    }\n\n    if (geometry.bufferColors) {\n      addDefine('vertexColors');\n    }\n\n    if (geometry.bufferNormals) {\n      addDefine('normals');\n    }\n\n    if (this.ambientLight) {\n      addDefine('ambientLight');\n    }\n\n    if (this.directionalLights) {\n      addDefine('directionalLights');\n    }\n\n    if (this.pointLights) {\n      addDefine('pointLights');\n    }\n\n    shader = shader.replace(/#HOOK_PRECISION/g, precision);\n    shader = shader.replace(/#HOOK_DEFINES/g, defines);\n    shader = shader.replace(/#HOOK_VERTEX_PRE/g, this.hookVertexPre);\n    shader = shader.replace(/#HOOK_VERTEX_MAIN/g, this.hookVertexMain);\n    shader = shader.replace(/#HOOK_VERTEX_END/g, this.hookVertexEnd);\n    shader = shader.replace(/#HOOK_FRAGMENT_PRE/g, this.hookFragmentPre);\n    shader = shader.replace(/#HOOK_FRAGMENT_MAIN/g, this.hookFragmentMain);\n    shader = shader.replace(/#HOOK_FRAGMENT_END/g, this.hookFragmentEnd);\n\n    if (this.pointLights) {\n      shader = shader.replace(\n        /#HOOK_POINT_LIGHTS/g,\n        String(this.pointLights.length)\n      );\n    }\n\n    if (this.directionalLights) {\n      shader = shader.replace(\n        /#HOOK_DIRECTIONAL_LIGHTS/g,\n        String(this.directionalLights.length)\n      );\n    }\n\n    return ShaderParser(shader, type);\n  }\n\n  public setUniforms(\n    projectionMatrix: mat4,\n    modelViewMatrix: mat4,\n    modelMatrix: mat4,\n    camera?: PerspectiveCamera | OrthographicCamera\n  ) {\n    gl = GL.get();\n\n    // Update the other uniforms\n    Object.keys(this.customUniforms).forEach(uniformName => {\n      const uniform = this.uniforms[uniformName];\n      switch (uniform.type) {\n        case 't': {\n          gl.uniform1i(uniform.location, uniform.textureIndex);\n          gl.activeTexture(uniform.activeTexture);\n          gl.bindTexture(gl.TEXTURE_2D, uniform.value);\n          break;\n        }\n        case 'tc': {\n          gl.uniform1i(uniform.location, uniform.textureIndex);\n          gl.activeTexture(uniform.activeTexture);\n          gl.bindTexture(gl.TEXTURE_CUBE_MAP, uniform.value);\n          break;\n        }\n        case 't3d': {\n          if (gl instanceof WebGL2RenderingContext) {\n            gl.uniform1i(uniform.location, uniform.textureIndex);\n            gl.activeTexture(uniform.activeTexture);\n            gl.bindTexture(gl.TEXTURE_3D, uniform.value);\n          }\n          break;\n        }\n        case 'i': {\n          gl.uniform1i(uniform.location, uniform.value);\n          break;\n        }\n        case 'f': {\n          gl.uniform1f(uniform.location, uniform.value);\n          break;\n        }\n        case '2f': {\n          gl.uniform2f(uniform.location, uniform.value[0], uniform.value[1]);\n          break;\n        }\n        case '3f': {\n          gl.uniform3f(\n            uniform.location,\n            uniform.value[0],\n            uniform.value[1],\n            uniform.value[2]\n          );\n          break;\n        }\n        case '4f': {\n          gl.uniform4f(\n            uniform.location,\n            uniform.value[0],\n            uniform.value[1],\n            uniform.value[2],\n            uniform.value[3]\n          );\n          break;\n        }\n        case '1iv': {\n          gl.uniform1iv(uniform.location, uniform.value);\n          break;\n        }\n        case '2iv': {\n          gl.uniform2iv(uniform.location, uniform.value);\n          break;\n        }\n        case '1fv': {\n          gl.uniform1fv(uniform.location, uniform.value);\n          break;\n        }\n        case '2fv': {\n          gl.uniform2fv(uniform.location, uniform.value);\n          break;\n        }\n        case '3fv': {\n          gl.uniform3fv(uniform.location, uniform.value);\n          break;\n        }\n        case '4fv': {\n          gl.uniform4fv(uniform.location, uniform.value);\n          break;\n        }\n        case 'Matrix3fv': {\n          gl.uniformMatrix3fv(uniform.location, false, uniform.value);\n          break;\n        }\n        case 'Matrix4fv': {\n          gl.uniformMatrix4fv(uniform.location, false, uniform.value);\n          break;\n        }\n        default:\n      }\n    });\n\n    if (!GL.webgl2) {\n      gl.uniformMatrix4fv(\n        this.uniforms.uProjectionMatrix.location,\n        false,\n        projectionMatrix\n      );\n    }\n\n    gl.uniformMatrix4fv(\n      this.uniforms.uModelViewMatrix.location,\n      false,\n      modelViewMatrix\n    );\n    gl.uniformMatrix4fv(\n      this.uniforms.uModelMatrix.location,\n      false,\n      modelMatrix\n    );\n\n    mat4.identity(inversedModelViewMatrix);\n    mat4.invert(inversedModelViewMatrix, modelMatrix);\n\n    mat3.identity(normalMatrix);\n    mat3.fromMat4(normalMatrix, inversedModelViewMatrix);\n    mat3.transpose(normalMatrix, normalMatrix);\n    gl.uniformMatrix3fv(\n      this.uniforms.uNormalMatrix.location,\n      false,\n      normalMatrix\n    );\n\n    // uDiffuse\n    gl.uniform3f(\n      this.uniforms.uDiffuse.location,\n      this.uniforms.uDiffuse.value[0],\n      this.uniforms.uDiffuse.value[1],\n      this.uniforms.uDiffuse.value[2]\n    );\n\n    // Camera\n    if (camera && this.uniforms.uCameraPosition) {\n      gl.uniform3f(\n        this.uniforms.uCameraPosition.location,\n        camera.position.v[0],\n        camera.position.v[1],\n        camera.position.v[2]\n      );\n    }\n  }\n\n  public dispose() {\n    // Dispose textures\n    Object.keys(this.customUniforms).forEach(uniformName => {\n      const uniform = this.uniforms[uniformName];\n      switch (uniform.type) {\n        case 't':\n        case 'tc': {\n          gl.deleteTexture(uniform.value);\n          break;\n        }\n        default:\n      }\n    });\n    this.program.dispose();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Shader.ts","// Es300\nexport default `\n\tuniform ProjectionView {\n\t\tmat4 projectionMatrix;\n\t} uProjectionView;\n`;\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/ProjectionView.glsl.ts","import { mat4, quat, vec3 } from 'gl-matrix';\nimport Vector2 from '../math/Vector2';\nimport Vector3 from '../math/Vector3';\n\nexport function degToRad(degrees: number) {\n  return degrees * (Math.PI / 180);\n}\n\nexport function radToDeg(radians: number) {\n  return radians * (180 / Math.PI);\n}\n\nexport function clamp(value: number, min: number, max: number) {\n  return Math.max(Math.min(value, max), min);\n}\n\nexport function lerp(min: number, max: number, alpha: number) {\n  return min + (max - min) * alpha;\n}\n\nexport function barycoordFromPoint(point: vec3, a: vec3, b: vec3, c: vec3) {\n  const v0 = vec3.create();\n  const v1 = vec3.create();\n  const v2 = vec3.create();\n\n  vec3.sub(v0, c, a);\n  vec3.sub(v1, b, a);\n  vec3.sub(v2, point, a);\n\n  const dot00 = vec3.dot(v0, v0);\n  const dot01 = vec3.dot(v0, v1);\n  const dot02 = vec3.dot(v0, v2);\n  const dot11 = vec3.dot(v1, v1);\n  const dot12 = vec3.dot(v1, v2);\n\n  const denom = dot00 * dot11 - dot01 * dot01;\n\n  const result = new Vector3();\n\n  // collinear or singular triangle\n  if (denom === 0) {\n    // arbitrary location outside of triangle?\n    // not sure if this is the best idea, maybe should be returning undefined\n    return result.set(-2, -1, -1);\n  }\n\n  const invDenom = 1 / denom;\n  const u = (dot11 * dot02 - dot01 * dot12) * invDenom;\n  const v = (dot00 * dot12 - dot01 * dot02) * invDenom;\n\n  // barycentric coordinates must always sum to 1\n  return result.set(1 - u - v, v, u);\n}\n\n/*\nhttp://stackoverflow.com/questions/5531827/random-point-on-a-given-sphere\n\t*/\nexport function randomSpherePoint(\n  x0: number,\n  y0: number,\n  z0: number,\n  radius: number\n) {\n  const u = Math.random();\n  const v = Math.random();\n  const theta = 2 * Math.PI * u;\n  const phi = Math.acos(2 * v - 1);\n  const x = x0 + radius * Math.sin(phi) * Math.cos(theta);\n  const y = y0 + radius * Math.sin(phi) * Math.sin(theta);\n  const z = z0 + radius * Math.cos(phi);\n  return [x, y, z];\n}\n\n// https://github.com/hughsk/from-3d-to-2d/blob/master/index.js\nexport function from3DTo2D(position: Vector3, pVMatrix: mat4) {\n  const ix = position.x;\n  const iy = position.y;\n  const iz = position.z;\n\n  const ox =\n    pVMatrix[0] * ix + pVMatrix[4] * iy + pVMatrix[8] * iz + pVMatrix[12];\n  const oy =\n    pVMatrix[1] * ix + pVMatrix[5] * iy + pVMatrix[9] * iz + pVMatrix[13];\n  const ow =\n    pVMatrix[3] * ix + pVMatrix[7] * iy + pVMatrix[11] * iz + pVMatrix[15];\n\n  const screenPosition = new Vector2();\n  screenPosition.x = (ox / ow + 1) / 2;\n  screenPosition.y = 1 - (oy / ow + 1) / 2;\n\n  return screenPosition;\n}\n\n// https://github.com/mrdoob/three.js/blob/master/src/math/Matrix4.js#L324\nexport function lookAt(eye: vec3, target: vec3, up: vec3) {\n  const quatOut = quat.create();\n  const x = vec3.create();\n  const y = vec3.create();\n  const z = vec3.create();\n\n  vec3.sub(z, eye, target);\n\n  if (vec3.squaredLength(z) === 0) {\n    // eye and target are in the same position\n    z[2] = 1;\n  }\n\n  vec3.normalize(z, z);\n  vec3.cross(x, up, z);\n\n  if (vec3.squaredLength(x) === 0) {\n    // eye and target are in the same vertical\n    z[2] += 0.0001;\n    vec3.cross(x, up, z);\n  }\n\n  vec3.normalize(x, x);\n  vec3.cross(y, z, x);\n\n  quat.setAxes(quatOut, z, x, y);\n  quat.invert(quatOut, quatOut);\n\n  return quatOut;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/math/Utils.ts","import { vec3 } from 'gl-matrix';\n\nexport default class Color {\n  public v: vec3;\n\n  constructor(hex = 0xffffff) {\n    this.v = vec3.create();\n    this.convert(hex);\n    return this;\n  }\n  set r(value: number) {\n    this.v[0] = value;\n  }\n  get r() {\n    return this.v[0];\n  }\n  set g(value: number) {\n    this.v[1] = value;\n  }\n  get g() {\n    return this.v[1];\n  }\n  set b(value: number) {\n    this.v[2] = value;\n  }\n  get b() {\n    return this.v[2];\n  }\n  public set(r: number, g: number, b: number) {\n    vec3.set(this.v, r, g, b);\n    return this;\n  }\n  public copy(rgb: number[]) {\n    vec3.copy(this.v, vec3.fromValues(rgb[0], rgb[1], rgb[2]));\n    return this;\n  }\n  public convert(hex: string | number) {\n    let rgb;\n    if (typeof hex === 'number') {\n      rgb = this.hexIntToRgb(hex);\n    }\n    if (typeof hex === 'string') {\n      rgb = this.hexStringToRgb(hex);\n    }\n    vec3.copy(this.v, this.normalize(rgb));\n    return this;\n  }\n  public normalize(array: number[]) {\n    return vec3.fromValues(array[0] / 255, array[1] / 255, array[2] / 255);\n  }\n  public fromArray(array: number[]) {\n    this.set(array[0], array[1], array[2]);\n  }\n  public componentToHex(c: number) {\n    const hex = c.toString(16);\n    return hex.length === 1 ? `0${hex}` : hex;\n  }\n  public rgbToHex(r: number, g: number, b: number) {\n    const hexR = this.componentToHex(r);\n    const hexG = this.componentToHex(g);\n    const hexB = this.componentToHex(b);\n    return `#${hexR}${hexG}${hexB}`;\n  }\n  public hexIntToRgb(hex: number) {\n    const r = hex >> 16;\n    const g = (hex >> 8) & 0xff;\n    const b = hex & 0xff;\n    return vec3.fromValues(r, g, b);\n  }\n  public hexStringToRgb(hex: string) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result\n      ? vec3.fromValues(\n          parseInt(result[1], 16),\n          parseInt(result[2], 16),\n          parseInt(result[3], 16)\n        )\n      : null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/math/Color.ts","const enabled = true;\n\nexport const log = (() => {\n  if (!window.console || !console.log) {\n    return () => {\n      return;\n    };\n  }\n  if (!enabled)\n    return () => {\n      return;\n    };\n  return Function.prototype.bind.call(console.log, console);\n})();\n\nexport const clear = (() => {\n  if (!window.console || !console.clear) {\n    return () => {\n      return;\n    };\n  }\n  if (!enabled)\n    return () => {\n      return;\n    };\n  return Function.prototype.bind.call(console.clear, console);\n})();\n\nexport const debug = (() => {\n  if (!window.console || !console.debug) {\n    return () => {\n      return;\n    };\n  }\n  if (!enabled)\n    return () => {\n      return;\n    };\n  return Function.prototype.bind.call(console.debug, console);\n})();\n\nexport const info = (() => {\n  if (!window.console || !console.info) {\n    return () => {\n      return;\n    };\n  }\n  if (!enabled)\n    return () => {\n      return;\n    };\n  return Function.prototype.bind.call(console.info, console);\n})();\n\nexport const warn = (() => {\n  if (!window.console || !console.warn) {\n    return () => {\n      return;\n    };\n  }\n  if (!enabled)\n    return () => {\n      return;\n    };\n  return Function.prototype.bind.call(console.warn, console);\n})();\n\nexport const error = (() => {\n  if (!window.console || !console.error) {\n    return () => {\n      return;\n    };\n  }\n  if (!enabled)\n    return () => {\n      return;\n    };\n  return Function.prototype.bind.call(console.error, console);\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Console.ts","// https://github.com/arboleya/happens\n\nexport default class EventDispatcher {\n  public listeners: any[];\n\n  public on(event: string, fn: () => void) {\n    this.validate(fn);\n    this.init(event).push(fn);\n  }\n\n  public off(event: string, fn: () => void) {\n    const pool = this.init(event);\n    pool.splice(pool.indexOf(fn), 1);\n  }\n\n  public once(event: string, fn: () => void) {\n    this.validate(fn);\n    const wrapper = () => {\n      this.off(event, wrapper);\n      fn.apply(this, arguments);\n    };\n    this.on(event, wrapper);\n  }\n\n  public emit(event: string, ...args) {\n    const pool = this.init(event).slice(0);\n    for (const i in pool) pool[i].apply(this, [].slice.call(arguments, 1));\n  }\n\n  private validate(fn: () => void) {\n    if (!(fn && fn instanceof Function))\n      throw new Error(fn + ' is not a Function');\n  }\n\n  private init(event: string) {\n    const tmp = this.listeners || (this.listeners = []);\n    return tmp[event] || (tmp[event] = []);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/EventDispatcher.ts","import { vec2 } from 'gl-matrix';\n\nexport default class Vector2 {\n  public v: vec2;\n\n  constructor(x = 0, y = 0) {\n    this.v = vec2.create();\n    this.set(x, y);\n    return this;\n  }\n  set x(value: number) {\n    this.v[0] = value;\n  }\n  get x() {\n    return this.v[0];\n  }\n  set y(value: number) {\n    this.v[1] = value;\n  }\n  get y() {\n    return this.v[1];\n  }\n  public set(x: number, y: number) {\n    vec2.set(this.v, x, y);\n    return this;\n  }\n  public clone() {\n    return new Vector2(this.v[0], this.v[1]);\n  }\n  public copy(vector2: Vector2) {\n    vec2.copy(this.v, vector2.v);\n    return this;\n  }\n  public add(vector2: Vector2) {\n    vec2.add(this.v, this.v, vector2.v);\n    return this;\n  }\n  public subtract(vector2: Vector2) {\n    vec2.subtract(this.v, this.v, vector2.v);\n    return this;\n  }\n  public subtractVectors(vector0: Vector2, vector1: Vector2) {\n    const out = vec2.create();\n    vec2.subtract(out, vector0.v, vector1.v);\n    return out;\n  }\n  public scale(value: number) {\n    vec2.scale(this.v, this.v, value);\n    return this;\n  }\n  public distance(vector2: Vector2) {\n    return vec2.distance(this.v, vector2.v);\n  }\n  public length(): number {\n    return vec2.length(this.v);\n  }\n  public negate() {\n    vec2.negate(this.v, this.v);\n    return this;\n  }\n  public normalize() {\n    vec2.normalize(this.v, this.v);\n    return this;\n  }\n  public lerp(vector2: Vector2, value: number) {\n    vec2.lerp(this.v, this.v, vector2.v, value);\n    return this;\n  }\n  public equals(vector2: Vector2): boolean {\n    return vec2.equals(this.v, vector2.v);\n  }\n  public fromArray(values: number[]) {\n    return vec2.copy(this.v, values);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/math/Vector2.ts","import { mat4 } from 'gl-matrix';\nimport UniformBuffer from './UniformBuffer';\n\n// Global uniform buffers\nconst uniformBuffers: any = {};\n\n// Create buffers when gl context is ready\nexport function setup() {\n  // ProjectionView\n  const projectionViewData = new Float32Array([...mat4.create()]);\n\n  uniformBuffers.projectionView = new UniformBuffer(projectionViewData);\n}\n\n// Update projectionView buffer data\nexport function updateProjectionView(\n  gl: WebGL2RenderingContext,\n  projectionMatrix: mat4\n) {\n  gl.bindBufferBase(gl.UNIFORM_BUFFER, 0, uniformBuffers.projectionView.buffer);\n  gl.bindBuffer(gl.UNIFORM_BUFFER, uniformBuffers.projectionView.buffer);\n\n  const projectionViewData = [...projectionMatrix];\n\n  uniformBuffers.projectionView.data.set(projectionViewData, 0);\n\n  gl.bufferSubData(gl.UNIFORM_BUFFER, 0, uniformBuffers.projectionView.data);\n  gl.bindBuffer(gl.UNIFORM_BUFFER, null);\n}\n\nexport default uniformBuffers;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/UniformBuffers.ts","import { mat4 } from 'gl-matrix';\nimport { RENDERER_DEFAULT_RATIO } from '../core/Constants';\nimport Object3D from '../core/Object3D';\nimport Vector3 from '../math/Vector3';\n\ninterface Options {\n  near?: number;\n  far?: number;\n  fov?: number;\n  position?: Vector3;\n  target?: Vector3;\n  up?: Vector3;\n}\n\nexport default class Camera {\n  public projectionMatrix: mat4;\n  public worldInverseMatrix: mat4;\n  public isCamera: boolean;\n  public isPespectiveCamera: boolean;\n  public isOrthographicCamera: boolean;\n  public near: number;\n  public far: number;\n  public fov: number;\n  public ratio: number;\n  public position: Vector3;\n  public target: Vector3;\n  public up: Vector3;\n\n  constructor(options: Options) {\n    this.projectionMatrix = mat4.create();\n    this.worldInverseMatrix = mat4.create();\n    this.isCamera = true;\n    this.isPespectiveCamera = false;\n    this.isOrthographicCamera = false;\n    this.near = 0.1;\n    this.far = 100;\n    this.fov = 70;\n    this.ratio = RENDERER_DEFAULT_RATIO;\n    this.position = new Vector3();\n    this.target = new Vector3();\n    this.up = new Vector3(0, 1, 0);\n    Object.assign(this, options);\n  }\n\n  public lookAt(x = 0, y = 0, z = 0) {\n    this.target.set(x, y, z);\n  }\n\n  public updateMatrixWorld() {\n    mat4.identity(this.worldInverseMatrix);\n    mat4.lookAt(\n      this.worldInverseMatrix,\n      this.position.v,\n      this.target.v,\n      this.up.v\n    );\n  }\n\n  public updateProjectionMatrix() {\n    // override\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cameras/Camera.ts","import { createUniformBuffer } from './GL';\n\nexport default class UniformBuffer {\n  public data: Float32Array;\n  public buffer: WebGLBuffer;\n\n  constructor(data: Float32Array) {\n    this.data = data;\n    this.buffer = createUniformBuffer(data);\n  }\n\n  public setValues(values: Float32Array, offset = 0) {\n    this.data.set(values, offset);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/UniformBuffer.ts","const ambientLightEs300 = `\n\tuniform AmbientLight {\n\t\tvec4 color;\n\t\tvec4 intensity;\n\t} uAmbientLight;\n`;\n\nconst ambientLightEs100 = `\n\tstruct AmbientLight {\n\t\tvec3 color;\n\t\tfloat intensity;\n\t};\n\tuniform AmbientLight uAmbientLight;\n`;\n\nexport { ambientLightEs300, ambientLightEs100 };\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/AmbientLight.glsl.ts","const directionalLightsEs300 = `\n\tstruct DirectionalLight {\n\t\tvec4 position;\n\t\tvec4 color;\n\t\tvec4 intensity;\n\t};\n\tuniform DirectionalLights {\n\t\tDirectionalLight uDirectionalLights[#HOOK_DIRECTIONAL_LIGHTS];\n\t};\n`;\n\nconst directionalLightsEs100 = `\n\tstruct DirectionalLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat intensity;\n\t};\n\tuniform DirectionalLight uDirectionalLights[#HOOK_DIRECTIONAL_LIGHTS];\n`;\n\nexport { directionalLightsEs300, directionalLightsEs100 };\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/DirectionalLights.glsl.ts","const lambertEs300 = `\n\tvec3 CalculateDirectionalLight(DirectionalLight light, vec3 normal) {\n\t\tvec3 lightDirection = normalize(light.position.xyz);\n\t\t// diffuse shading\n\t\tfloat diff = max(dot(lightDirection, normal), 0.0);\n\n\t\tvec3 ambientColor = vec3(0.5);\n\t\tfloat ambientIntensity = 0.5;\n\n\t\t#ifdef ambientLight\n\t\tambientColor = uAmbientLight.color.rgb;\n\t\tambientIntensity = uAmbientLight.intensity.x;\n\t\t#endif\n\n\t\t// combine results\n\t\tvec3 ambient = (ambientColor * ambientIntensity) * vDiffuse;\n\t\tvec3 diffuse = light.color.rgb * diff * vDiffuse;\n\t\treturn (ambient + diffuse * light.intensity.x);\n\t}\n`;\n\nconst lambertEs100 = `\n\tvec3 CalculateDirectionalLight(DirectionalLight light, vec3 normal) {\n\t\tvec3 lightDirection = normalize(light.position);\n\t\t// diffuse shading\n\t\tfloat diff = max(dot(lightDirection, normal), 0.0);\n\n\t\t\tvec3 ambientColor = vec3(0.5);\n\t\t\tfloat ambientIntensity = 0.5;\n\n\t\t\t#ifdef ambientLight\n\t\t\tambientColor = uAmbientLight.color;\n\t\t\tambientIntensity = uAmbientLight.intensity;\n\t\t\t#endif\n\n\t\t\t// combine results\n\t\tvec3 ambient = (ambientColor * ambientIntensity) * vDiffuse;\n\t\t\tvec3 diffuse = light.color * diff * vDiffuse;\n\t\treturn (ambient + diffuse * light.intensity);\n\t}\n`;\n\nexport { lambertEs300, lambertEs100 };\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/Lambert.glsl.ts","import parseHDR from 'parse-hdr';\nimport ImageData from '../core/ImageData';\n\nexport default function HdrLoader(src): Promise<ImageData> {\n  return new Promise((resolve: (image) => void, reject: (status) => void) => {\n    const req = new XMLHttpRequest();\n    req.responseType = 'arraybuffer';\n    req.onreadystatechange = () => {\n      if (req.readyState !== 4) return;\n      if (req.readyState === 4 && req.status === 200) {\n        const hdr = parseHDR(req.response);\n        const image = new ImageData(hdr.shape[0], hdr.shape[1], hdr.data);\n        resolve(image);\n      } else {\n        reject(req.status);\n      }\n    };\n    req.open('GET', src, true);\n    req.send();\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/HdrLoader.ts","export default class ImageData {\n  public width: number;\n  public height: number;\n  public data: Float32Array;\n\n  constructor(width: number, height: number, data: Float32Array) {\n    this.width = width;\n    this.height = height;\n    this.data = data;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/ImageData.ts","export default function ImageLoader(src): Promise<HTMLImageElement> {\n  return new Promise((resolve: (image) => void, reject: (status) => void) => {\n    const image = new Image();\n\n    image.onload = () => {\n      resolve(image);\n    };\n\n    image.onerror = () => {\n      reject(`Failed to load ${src}`);\n    };\n\n    image.src = src;\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/ImageLoader.ts","export default class Light {\n  public type: string;\n  public data: Float32Array;\n\n  public update() {\n    return;\n  }\n\n  public setValues(values: number[] | Float32Array, offset = 0) {\n    this.data.set(values, offset);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lights/Light.ts","export default function FileLoader(url: string): Promise<any> {\n  return new Promise(\n    (resolve: (response, statis) => void, reject: (status) => void) => {\n      const req = new XMLHttpRequest();\n      req.onreadystatechange = () => {\n        if (req.readyState !== 4) return;\n        if (req.readyState === 4 && req.status === 200) {\n          resolve(req.responseText, req.status);\n        } else {\n          reject(req.status);\n        }\n      };\n      req.open('GET', url, true);\n      req.send();\n    }\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/FileLoader.ts","import { mat4, quat, vec3 } from 'gl-matrix';\nimport Camera from '../cameras/Camera';\nimport OrthographicCamera from '../cameras/OrthographicCamera';\nimport PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport { lookAt } from '../math/Utils';\nimport Vector3 from '../math/Vector3';\n\nlet axisAngle = 0;\nconst quaternionAxisAngle = vec3.create();\n\nexport default class Object3D {\n  public children: Object3D[];\n  public localMatrix: mat4;\n  public modelMatrix: mat4;\n  public modelViewMatrix: mat4;\n  public position: Vector3;\n  public rotation: Vector3;\n  public scale: Vector3;\n  public isObject3D: boolean;\n  public parent: Object3D;\n  public matrixAutoUpdate: boolean;\n  public _quaternion: quat;\n  public _quaternionLookAt: quat;\n  public _lookAtUp: vec3;\n\n  constructor() {\n    this.children = [];\n    this.localMatrix = mat4.create();\n    this.modelMatrix = mat4.create();\n    this.modelViewMatrix = mat4.create();\n    this.matrixAutoUpdate = true;\n    this.position = new Vector3();\n    this.rotation = new Vector3();\n    this.scale = new Vector3(1, 1, 1);\n    this.isObject3D = true;\n    this._quaternion = quat.create();\n    this._quaternionLookAt = quat.create();\n    this._lookAtUp = vec3.create(); // needs to be [0, 0, 0] although it should be [0, 1, 0]\n  }\n\n  public updateMatrix(camera: Camera | PerspectiveCamera | OrthographicCamera) {\n    mat4.identity(this.modelViewMatrix);\n\n    if (this.matrixAutoUpdate) {\n      // Reset\n      mat4.identity(this.localMatrix);\n      mat4.identity(this.modelMatrix);\n      quat.identity(this._quaternion);\n\n      // If Object3D has a parent, copy the computed modelMatrix into localMatrix\n      if (this.parent) {\n        mat4.copy(this.localMatrix, this.parent.modelMatrix);\n        mat4.multiply(this.modelMatrix, this.modelMatrix, this.localMatrix);\n      }\n\n      // Use lookAt quat as base\n      // Note: this.rotation isn't updated if lookAt's used\n      quat.copy(this._quaternion, this._quaternionLookAt);\n\n      // Apply local transitions to modelMatrix\n      mat4.translate(this.modelMatrix, this.modelMatrix, this.position.v);\n      quat.rotateX(this._quaternion, this._quaternion, this.rotation.x);\n      quat.rotateY(this._quaternion, this._quaternion, this.rotation.y);\n      quat.rotateZ(this._quaternion, this._quaternion, this.rotation.z);\n      axisAngle = quat.getAxisAngle(quaternionAxisAngle, this._quaternion);\n      mat4.rotate(\n        this.modelMatrix,\n        this.modelMatrix,\n        axisAngle,\n        quaternionAxisAngle\n      );\n      mat4.scale(this.modelMatrix, this.modelMatrix, this.scale.v);\n    }\n\n    // Model View Matrix\n    mat4.multiply(\n      this.modelViewMatrix,\n      camera.worldInverseMatrix,\n      this.modelMatrix\n    );\n  }\n\n  public lookAt(target: Vector3) {\n    quat.identity(this._quaternionLookAt);\n    this._quaternionLookAt = lookAt(this.position.v, target.v, this._lookAtUp);\n  }\n\n  public setParent(parent: Object3D) {\n    this.unParent();\n    if (parent.isObject3D) {\n      parent.children.push(this);\n      this.parent = parent;\n    }\n  }\n\n  public unParent() {\n    if (this.parent === undefined) return;\n    const objectIndex = this.parent.children.indexOf(this);\n    if (objectIndex !== -1) {\n      this.parent.children.splice(objectIndex, 1);\n      this.parent = null;\n    }\n  }\n\n  public dispose() {\n    this.unParent();\n    this.children = [];\n    this.localMatrix = null;\n    this.modelMatrix = null;\n    this.position = null;\n    this.rotation = null;\n    this.scale = null;\n    this._quaternion = null;\n    this.isObject3D = null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Object3D.ts","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\";\n\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {mat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  let out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    let a01 = a[1], a02 = a[2], a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function invert(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2];\n  let a10 = a[3], a11 = a[4], a12 = a[5];\n  let a20 = a[6], a21 = a[7], a22 = a[8];\n\n  let b01 = a22 * a11 - a12 * a21;\n  let b11 = -a22 * a10 + a12 * a20;\n  let b21 = a21 * a10 - a11 * a20;\n\n  // Calculate the determinant\n  let det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function adjoint(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2];\n  let a10 = a[3], a11 = a[4], a12 = a[5];\n  let a20 = a[6], a21 = a[7], a22 = a[8];\n\n  out[0] = (a11 * a22 - a12 * a21);\n  out[1] = (a02 * a21 - a01 * a22);\n  out[2] = (a01 * a12 - a02 * a11);\n  out[3] = (a12 * a20 - a10 * a22);\n  out[4] = (a00 * a22 - a02 * a20);\n  out[5] = (a02 * a10 - a00 * a12);\n  out[6] = (a10 * a21 - a11 * a20);\n  out[7] = (a01 * a20 - a00 * a21);\n  out[8] = (a00 * a11 - a01 * a10);\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat3\n *\n * @param {mat3} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2];\n  let a10 = a[3], a11 = a[4], a12 = a[5];\n  let a20 = a[6], a21 = a[7], a22 = a[8];\n\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nexport function multiply(out, a, b) {\n  let a00 = a[0], a01 = a[1], a02 = a[2];\n  let a10 = a[3], a11 = a[4], a12 = a[5];\n  let a20 = a[6], a21 = a[7], a22 = a[8];\n\n  let b00 = b[0], b01 = b[1], b02 = b[2];\n  let b10 = b[3], b11 = b[4], b12 = b[5];\n  let b20 = b[6], b21 = b[7], b22 = b[8];\n\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to translate\n * @param {vec2} v vector to translate by\n * @returns {mat3} out\n */\nexport function translate(out, a, v) {\n  let a00 = a[0], a01 = a[1], a02 = a[2],\n    a10 = a[3], a11 = a[4], a12 = a[5],\n    a20 = a[6], a21 = a[7], a22 = a[8],\n    x = v[0], y = v[1];\n\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nexport function rotate(out, a, rad) {\n  let a00 = a[0], a01 = a[1], a02 = a[2],\n    a10 = a[3], a11 = a[4], a12 = a[5],\n    a20 = a[6], a21 = a[7], a22 = a[8],\n\n    s = Math.sin(rad),\n    c = Math.cos(rad);\n\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n};\n\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\nexport function scale(out, a, v) {\n  let x = v[0], y = v[1];\n\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {vec2} v Translation vector\n * @returns {mat3} out\n */\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nexport function fromRotation(out, rad) {\n  let s = Math.sin(rad), c = Math.cos(rad);\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {vec2} v Scaling vector\n * @returns {mat3} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat2d} a the matrix to copy\n * @returns {mat3} out\n **/\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n\n/**\n* Calculates a 3x3 matrix from the given quaternion\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {quat} q Quaternion to create matrix from\n*\n* @returns {mat3} out\n*/\nexport function fromQuat(out, q) {\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let yx = y * x2;\n  let yy = y * y2;\n  let zx = z * x2;\n  let zy = z * y2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n\n  return out;\n}\n\n/**\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {mat4} a Mat4 to derive the normal matrix from\n*\n* @returns {mat3} out\n*/\nexport function normalFromMat4(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\n  return out;\n}\n\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\nexport function projection(out, width, height) {\n    out[0] = 2 / width;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = -2 / height;\n    out[5] = 0;\n    out[6] = -1;\n    out[7] = 1;\n    out[8] = 1;\n    return out;\n}\n\n/**\n * Returns a string representation of a mat3\n *\n * @param {mat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' +\n          a[3] + ', ' + a[4] + ', ' + a[5] + ', ' +\n          a[6] + ', ' + a[7] + ', ' + a[8] + ')';\n}\n\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {mat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2)))\n}\n\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n\n\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  out[2] = a[2] + (b[2] * scale);\n  out[3] = a[3] + (b[3] * scale);\n  out[4] = a[4] + (b[4] * scale);\n  out[5] = a[5] + (b[5] * scale);\n  out[6] = a[6] + (b[6] * scale);\n  out[7] = a[7] + (b[7] * scale);\n  out[8] = a[8] + (b[8] * scale);\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {mat3} a The first matrix.\n * @param {mat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] &&\n         a[3] === b[3] && a[4] === b[4] && a[5] === b[5] &&\n         a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {mat3} a The first matrix.\n * @param {mat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5], a6 = a[6], a7 = a[7], a8 = a[8];\n  let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5], b6 = b[6], b7 = b[7], b8 = b[8];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n          Math.abs(a3 - b3) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n          Math.abs(a4 - b4) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n          Math.abs(a5 - b5) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a5), Math.abs(b5)) &&\n          Math.abs(a6 - b6) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a6), Math.abs(b6)) &&\n          Math.abs(a7 - b7) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a7), Math.abs(b7)) &&\n          Math.abs(a8 - b8) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a8), Math.abs(b8)));\n}\n\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\nexport const sub = subtract;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/src/gl-matrix/mat3.js\n// module id = 28\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\";\n\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  return out;\n}\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {vec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  return Math.sqrt(x*x + y*y + z*z);\n}\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nexport function fromValues(x, y, z) {\n  let out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to ceil\n * @returns {vec3} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to floor\n * @returns {vec3} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to round\n * @returns {vec3} out\n */\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  out[2] = a[2] + (b[2] * scale);\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  let x = b[0] - a[0];\n  let y = b[1] - a[1];\n  let z = b[2] - a[2];\n  return Math.sqrt(x*x + y*y + z*z);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  let x = b[0] - a[0];\n  let y = b[1] - a[1];\n  let z = b[2] - a[2];\n  return x*x + y*y + z*z;\n}\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  return x*x + y*y + z*z;\n}\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to invert\n * @returns {vec3} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nexport function normalize(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let len = x*x + y*y + z*z;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n  let ax = a[0], ay = a[1], az = a[2];\n  let bx = b[0], by = b[1], bz = b[2];\n\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nexport function lerp(out, a, b, t) {\n  let ax = a[0];\n  let ay = a[1];\n  let az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {vec3} c the third operand\n * @param {vec3} d the fourth operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nexport function hermite(out, a, b, c, d, t) {\n  let factorTimes2 = t * t;\n  let factor1 = factorTimes2 * (2 * t - 3) + 1;\n  let factor2 = factorTimes2 * (t - 2) + t;\n  let factor3 = factorTimes2 * (t - 1);\n  let factor4 = factorTimes2 * (3 - 2 * t);\n\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n\n  return out;\n}\n\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {vec3} c the third operand\n * @param {vec3} d the fourth operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nexport function bezier(out, a, b, c, d, t) {\n  let inverseFactor = 1 - t;\n  let inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  let factorTimes2 = t * t;\n  let factor1 = inverseFactorTimesTwo * inverseFactor;\n  let factor2 = 3 * t * inverseFactorTimesTwo;\n  let factor3 = 3 * factorTimes2 * inverseFactor;\n  let factor4 = factorTimes2 * t;\n\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\nexport function random(out, scale) {\n  scale = scale || 1.0;\n\n  let r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  let z = (glMatrix.RANDOM() * 2.0) - 1.0;\n  let zScale = Math.sqrt(1.0-z*z) * scale;\n\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat4(out, a, m) {\n  let x = a[0], y = a[1], z = a[2];\n  let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat3(out, a, m) {\n  let x = a[0], y = a[1], z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n\n/**\n * Transforms the vec3 with a quat\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nexport function transformQuat(out, a, q) {\n  // benchmarks: http://jsperf.com/quaternion-transform-vec3-implementations\n\n  let x = a[0], y = a[1], z = a[2];\n  let qx = q[0], qy = q[1], qz = q[2], qw = q[3];\n\n  // calculate quat * vec\n  let ix = qw * x + qy * z - qz * y;\n  let iy = qw * y + qz * x - qx * z;\n  let iz = qw * z + qx * y - qy * x;\n  let iw = -qx * x - qy * y - qz * z;\n\n  // calculate result * inverse quat\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nexport function rotateX(out, a, b, c){\n  let p = [], r=[];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[0];\n  r[1] = p[1]*Math.cos(c) - p[2]*Math.sin(c);\n  r[2] = p[1]*Math.sin(c) + p[2]*Math.cos(c);\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nexport function rotateY(out, a, b, c){\n  let p = [], r=[];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[2]*Math.sin(c) + p[0]*Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2]*Math.cos(c) - p[0]*Math.sin(c);\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nexport function rotateZ(out, a, b, c){\n  let p = [], r=[];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[0]*Math.cos(c) - p[1]*Math.sin(c);\n  r[1] = p[0]*Math.sin(c) + p[1]*Math.cos(c);\n  r[2] = p[2];\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n\n  return out;\n}\n\n/**\n * Get the angle between two 3D vectors\n * @param {vec3} a The first operand\n * @param {vec3} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n  let tempA = fromValues(a[0], a[1], a[2]);\n  let tempB = fromValues(b[0], b[1], b[2]);\n\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n\n  let cosine = dot(tempA, tempB);\n\n  if(cosine > 1.0) {\n    return 0;\n  }\n  else if(cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2];\n  let b0 = b[0], b1 = b[1], b2 = b[2];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)));\n}\n\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nexport const sub = subtract;\n\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nexport const div = divide;\n\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nexport const dist = distance;\n\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function() {\n  let vec = create();\n\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 3;\n    }\n\n    if(!offset) {\n      offset = 0;\n    }\n\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2];\n    }\n\n    return a;\n  };\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/src/gl-matrix/vec3.js\n// module id = 29\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\";\n\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  return out;\n}\n\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {vec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\nexport function fromValues(x, y, z, w) {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the source vector\n * @returns {vec4} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to ceil\n * @returns {vec4} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to floor\n * @returns {vec4} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to round\n * @returns {vec4} out\n */\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  out[2] = a[2] + (b[2] * scale);\n  out[3] = a[3] + (b[3] * scale);\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  let x = b[0] - a[0];\n  let y = b[1] - a[1];\n  let z = b[2] - a[2];\n  let w = b[3] - a[3];\n  return Math.sqrt(x*x + y*y + z*z + w*w);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  let x = b[0] - a[0];\n  let y = b[1] - a[1];\n  let z = b[2] - a[2];\n  let w = b[3] - a[3];\n  return x*x + y*y + z*z + w*w;\n}\n\n/**\n * Calculates the length of a vec4\n *\n * @param {vec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  return Math.sqrt(x*x + y*y + z*z + w*w);\n}\n\n/**\n * Calculates the squared length of a vec4\n *\n * @param {vec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  return x*x + y*y + z*z + w*w;\n}\n\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to negate\n * @returns {vec4} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to invert\n * @returns {vec4} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to normalize\n * @returns {vec4} out\n */\nexport function normalize(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  let len = x*x + y*y + z*z + w*w;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = x * len;\n    out[1] = y * len;\n    out[2] = z * len;\n    out[3] = w * len;\n  }\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec4} out\n */\nexport function lerp(out, a, b, t) {\n  let ax = a[0];\n  let ay = a[1];\n  let az = a[2];\n  let aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\nexport function random(out, vectorScale) {\n  vectorScale = vectorScale || 1.0;\n\n  //TODO: This is a pretty awful way of doing this. Find something better.\n  out[0] = glMatrix.RANDOM();\n  out[1] = glMatrix.RANDOM();\n  out[2] = glMatrix.RANDOM();\n  out[3] = glMatrix.RANDOM();\n  normalize(out, out);\n  scale(out, out, vectorScale);\n  return out;\n}\n\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec4} out\n */\nexport function transformMat4(out, a, m) {\n  let x = a[0], y = a[1], z = a[2], w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec4} out\n */\nexport function transformQuat(out, a, q) {\n  let x = a[0], y = a[1], z = a[2];\n  let qx = q[0], qy = q[1], qz = q[2], qw = q[3];\n\n  // calculate quat * vec\n  let ix = qw * x + qy * z - qz * y;\n  let iy = qw * y + qz * x - qx * z;\n  let iz = qw * z + qx * y - qy * x;\n  let iw = -qx * x - qy * y - qz * z;\n\n  // calculate result * inverse quat\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {vec4} a The first vector.\n * @param {vec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec4} a The first vector.\n * @param {vec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n          Math.abs(a3 - b3) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a3), Math.abs(b3)));\n}\n\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\nexport const sub = subtract;\n\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\nexport const div = divide;\n\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\nexport const dist = distance;\n\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec4.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function() {\n  let vec = create();\n\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 4;\n    }\n\n    if(!offset) {\n      offset = 0;\n    }\n\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2]; vec[3] = a[i+3];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2]; a[i+3] = vec[3];\n    }\n\n    return a;\n  };\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/src/gl-matrix/vec4.js\n// module id = 30\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","import { extensions } from './Capabilities';\nimport * as GL from './GL';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\nexport default class Vao {\n  public vao: any;\n\n  constructor() {\n    gl = GL.get();\n    if (gl instanceof WebGL2RenderingContext) {\n      this.vao = gl.createVertexArray();\n    } else if (extensions.vertexArrayObject) {\n      this.vao = extensions.vertexArrayObject.createVertexArrayOES();\n    }\n  }\n\n  public bind() {\n    if (gl instanceof WebGL2RenderingContext) {\n      gl.bindVertexArray(this.vao);\n    } else if (extensions.vertexArrayObject) {\n      extensions.vertexArrayObject.bindVertexArrayOES(this.vao);\n    }\n  }\n\n  public unbind() {\n    if (gl instanceof WebGL2RenderingContext) {\n      gl.bindVertexArray(null);\n    } else if (extensions.vertexArrayObject) {\n      extensions.vertexArrayObject.bindVertexArrayOES(null);\n    }\n  }\n\n  public dispose() {\n    if (gl instanceof WebGL2RenderingContext) {\n      gl.deleteVertexArray(this.vao);\n    } else if (extensions.vertexArrayObject) {\n      extensions.vertexArrayObject.deleteVertexArrayOES(this.vao);\n    }\n    this.vao = null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Vao.ts","import { vec3 } from 'gl-matrix';\nimport Vector3 from './Vector3';\n\nconst diff = vec3.create();\nconst edge1 = vec3.create();\nconst edge2 = vec3.create();\nconst normal = vec3.create();\n\nexport default class Ray {\n  public origin: Vector3;\n  public direction: Vector3;\n\n  constructor() {\n    this.origin = new Vector3();\n    this.direction = new Vector3();\n  }\n\n  public set(origin: Vector3, direction: Vector3) {\n    this.origin.copy(origin);\n    this.direction.copy(direction);\n  }\n\n  public intersectTriangle(a: Vector3, b: Vector3, c: Vector3, culling = true) {\n    vec3.sub(edge1, b.v, a.v);\n    vec3.sub(edge2, c.v, a.v);\n    vec3.cross(normal, edge1, edge2);\n\n    // Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n    // E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n    //   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n    //   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n    //   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\n    // console.log('normal', normal);\n    let DdN = vec3.dot(this.direction.v, normal);\n    let sign;\n\n    // console.log('normal', normal);\n\n    if (DdN > 0) {\n      if (culling) return null;\n      sign = 1;\n    } else if (DdN < 0) {\n      sign = -1;\n      DdN = -DdN;\n    } else {\n      return null;\n    }\n\n    vec3.sub(diff, this.origin.v, a.v);\n    vec3.cross(edge2, diff, edge2);\n    const DdQxE2 = sign * vec3.dot(this.direction.v, edge2);\n\n    // b1 < 0, no intersection\n    if (DdQxE2 < 0) {\n      return null;\n    }\n\n    vec3.cross(edge1, edge1, diff);\n    const DdE1xQ = sign * vec3.dot(this.direction.v, edge1);\n\n    // b2 < 0, no intersection\n    if (DdE1xQ < 0) {\n      return null;\n    }\n\n    // b1+b2 > 1, no intersection\n    if (DdQxE2 + DdE1xQ > DdN) {\n      return null;\n    }\n\n    // Line intersects triangle, check if ray does.\n    const QdN = -sign * vec3.dot(diff, normal);\n\n    // t < 0, no intersection\n    if (QdN < 0) {\n      return null;\n    }\n\n    const result = new Vector3();\n    result\n      .copy(this.direction)\n      .scale(QdN / DdN)\n      .add(this.origin);\n\n    return result;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/math/Ray.ts","export default function() {\n  try {\n    const renderingContext = WebGLRenderingContext;\n    const canvasWebgl = document.createElement('canvas');\n    const canvasWebg2 = document.createElement('canvas');\n    const webgl2Context = canvasWebg2.getContext('webgl2');\n    const webglContext =\n      canvasWebgl.getContext('webgl') ||\n      canvasWebgl.getContext('experimental-webgl');\n    if (renderingContext === undefined) {\n      return false;\n    }\n    return {\n      webgl: !!webglContext,\n      webgl2: !!webgl2Context\n    };\n  } catch (error) {\n    return false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Detect.ts","const pointLightsEs300 = `\n\tstruct PointLight {\n\t\tvec4 position;\n\t\tvec4 color;\n\t\tvec4 specularColor;\n\t\tvec4 shininess;\n\t\tvec4 intensity;\n\t};\n\tuniform PointLights {\n\t\tPointLight uPointLights[#HOOK_POINT_LIGHTS];\n\t};\n`;\n\nconst pointLightsEs100 = `\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tvec3 specularColor;\n\t\tfloat shininess;\n\t\tfloat intensity;\n\t};\n\tuniform PointLight uPointLights[#HOOK_POINT_LIGHTS];\n`;\n\nexport { pointLightsEs300, pointLightsEs100 };\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/PointLights.glsl.ts","export const definePI = `\n#define PI 3.141592653589793\n`;\n\nexport const definePITwo = `\n#define TWO_PI 6.283185307179586\n`;\n\nexport const mapLinear = `\nfloat mapLinear(float value, float in_min, float in_max, float out_min, float out_max) {\n\treturn (value - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n`;\n\nexport default {\n  definePI,\n  definePITwo,\n  mapLinear\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/Math.glsl.ts","import * as GL from '../core/GL';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\nexport default class BufferAttribute {\n  public type: number;\n  public data: number[];\n  public itemSize: number;\n  public numItems: number;\n  public buffer: WebGLBuffer;\n  public shaderAttribute: boolean;\n\n  constructor(\n    type: GLenum,\n    data: Float32Array | Uint16Array,\n    itemSize: number,\n    shaderAttribute = true\n  ) {\n    this.type = type;\n    this.itemSize = itemSize;\n    this.numItems = data.length / itemSize;\n    this.buffer = GL.createBuffer(type, data);\n    this.shaderAttribute = shaderAttribute;\n  }\n\n  public bind() {\n    gl = GL.get();\n    gl.bindBuffer(this.type, this.buffer);\n  }\n\n  public unbind() {\n    gl = GL.get();\n    gl.bindBuffer(this.type, null);\n  }\n\n  public update(data: Float32Array) {\n    this.bind();\n    gl = GL.get();\n    gl.bufferSubData(this.type, 0, data);\n    this.unbind();\n  }\n\n  public dispose() {\n    gl = GL.get();\n    gl.deleteBuffer(this.buffer);\n    this.buffer = null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/BufferAttribute.ts","import Geometry from './Geometry';\n\nexport default class LineGeometry extends Geometry {\n  constructor(bufferVertices: number[] | Float32Array) {\n    const vertices = [];\n    let i3 = 0;\n    let i6 = 0;\n    const length = bufferVertices.length / 3;\n    for (let i = 0; i < length; i += 1) {\n      i3 = i * 3;\n      i6 = i * 6;\n      if (i < length - 1) {\n        vertices[i6] = bufferVertices[i3];\n        vertices[i6 + 1] = bufferVertices[i3 + 1];\n        vertices[i6 + 2] = bufferVertices[i3 + 2];\n        vertices[i6 + 3] = bufferVertices[i3 + 3];\n        vertices[i6 + 4] = bufferVertices[i3 + 4];\n        vertices[i6 + 5] = bufferVertices[i3 + 5];\n      }\n    }\n    super(new Float32Array(vertices));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/LineGeometry.ts","import Geometry from './Geometry';\n\nexport default class SphereGeometry extends Geometry {\n  constructor(\n    radius = 1,\n    axisDivisions = 8,\n    heightDivisons = 8,\n    colors?: Float32Array\n  ) {\n    // https://github.com/gpjt/webgl-lessons/blob/master/lesson12/index.html\n\n    const vertices = [];\n    const normals = [];\n    const uvs = [];\n    for (let axisNumber = 0; axisNumber <= axisDivisions; axisNumber += 1) {\n      const theta = axisNumber * Math.PI / axisDivisions;\n      const sinTheta = Math.sin(theta);\n      const cosTheta = Math.cos(theta);\n      for (\n        let heightNumber = 0;\n        heightNumber <= heightDivisons;\n        heightNumber += 1\n      ) {\n        const phi = heightNumber * 2 * Math.PI / heightDivisons;\n        const sinPhi = Math.sin(phi);\n        const cosPhi = Math.cos(phi);\n        const x = cosPhi * sinTheta;\n        const y = cosTheta;\n        const z = sinPhi * sinTheta;\n        const u = 1 - heightNumber / heightDivisons;\n        const v = 1 - axisNumber / axisDivisions;\n        normals.push(x);\n        normals.push(y);\n        normals.push(z);\n        uvs.push(u);\n        uvs.push(v);\n        vertices.push(radius * x);\n        vertices.push(radius * y);\n        vertices.push(radius * z);\n      }\n    }\n\n    const indices = [];\n    for (let axisNumber = 0; axisNumber < axisDivisions; axisNumber += 1) {\n      for (\n        let heightNumber = 0;\n        heightNumber < heightDivisons;\n        heightNumber += 1\n      ) {\n        const first = axisNumber * (heightDivisons + 1) + heightNumber;\n        const second = first + heightDivisons + 1;\n        indices.push(first);\n        indices.push(second);\n        indices.push(first + 1);\n        indices.push(second);\n        indices.push(second + 1);\n        indices.push(first + 1);\n      }\n    }\n\n    super(\n      new Float32Array(vertices),\n      new Uint16Array(indices),\n      new Float32Array(normals),\n      new Float32Array(uvs),\n      colors\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/SphereGeometry.ts","/**\n  A javascript Bezier curve library by Pomax.\n\n  Based on http://pomax.github.io/bezierinfo\n\n  This code is MIT licensed.\n**/\n(function() {\n  \"use strict\";\n\n  // math-inlining.\n  var abs = Math.abs,\n      min = Math.min,\n      max = Math.max,\n      acos = Math.acos,\n      sqrt = Math.sqrt,\n      pi = Math.PI,\n      // a zero coordinate, which is surprisingly useful\n      ZERO = {x:0,y:0,z:0};\n\n  // quite needed\n  var utils = require('./utils.js');\n\n  // not quite needed, but eventually this'll be useful...\n  var PolyBezier = require('./poly-bezier.js');\n\n  /**\n   * Bezier curve constructor. The constructor argument can be one of three things:\n   *\n   * 1. array/4 of {x:..., y:..., z:...}, z optional\n   * 2. numerical array/8 ordered x1,y1,x2,y2,x3,y3,x4,y4\n   * 3. numerical array/12 ordered x1,y1,z1,x2,y2,z2,x3,y3,z3,x4,y4,z4\n   *\n   */\n  var Bezier = function(coords) {\n    var args = (coords && coords.forEach) ? coords : [].slice.call(arguments);\n    var coordlen = false;\n    if(typeof args[0] === \"object\") {\n      coordlen = args.length;\n      var newargs = [];\n      args.forEach(function(point) {\n        ['x','y','z'].forEach(function(d) {\n          if(typeof point[d] !== \"undefined\") {\n            newargs.push(point[d]);\n          }\n        });\n      });\n      args = newargs;\n    }\n    var higher = false;\n    var len = args.length;\n    if (coordlen) {\n      if(coordlen>4) {\n        if (arguments.length !== 1) {\n          throw new Error(\"Only new Bezier(point[]) is accepted for 4th and higher order curves\");\n        }\n        higher = true;\n      }\n    } else {\n      if(len!==6 && len!==8 && len!==9 && len!==12) {\n        if (arguments.length !== 1) {\n          throw new Error(\"Only new Bezier(point[]) is accepted for 4th and higher order curves\");\n        }\n      }\n    }\n    var _3d = (!higher && (len === 9 || len === 12)) || (coords && coords[0] && typeof coords[0].z !== \"undefined\");\n    this._3d = _3d;\n    var points = [];\n    for(var idx=0, step=(_3d ? 3 : 2); idx<len; idx+=step) {\n      var point = {\n        x: args[idx],\n        y: args[idx+1]\n      };\n      if(_3d) { point.z = args[idx+2] };\n      points.push(point);\n    }\n    this.order = points.length - 1;\n    this.points = points;\n    var dims = ['x','y'];\n    if(_3d) dims.push('z');\n    this.dims = dims;\n    this.dimlen = dims.length;\n\n    (function(curve) {\n      var order = curve.order;\n      var points = curve.points;\n      var a = utils.align(points, {p1:points[0], p2:points[order]});\n      for(var i=0; i<a.length; i++) {\n        if(abs(a[i].y) > 0.0001) {\n          curve._linear = false;\n          return;\n        }\n      }\n      curve._linear = true;\n    }(this));\n\n    this._t1 = 0;\n    this._t2 = 1;\n    this.update();\n  };\n\n  Bezier.fromSVG = function(svgString) {\n    var list = svgString.match(/[-+]?\\d*\\.?\\d+(?:[eE][-+]?\\d+)?/g).map(parseFloat);\n    var relative = /[cq]/.test(svgString);\n    if(!relative) return new Bezier(list);\n    list = list.map(function(v,i) {\n      return i < 2 ? v : v + list[i % 2];\n    });\n    return new Bezier(list);\n  };\n\n  function getABC(n,S,B,E,t) {\n    if(typeof t === \"undefined\") { t = 0.5; }\n    var u = utils.projectionratio(t,n),\n        um = 1-u,\n        C = {\n          x: u*S.x + um*E.x,\n          y: u*S.y + um*E.y\n        },\n        s = utils.abcratio(t,n),\n        A = {\n          x: B.x + (B.x-C.x)/s,\n          y: B.y + (B.y-C.y)/s\n        };\n    return { A:A, B:B, C:C };\n  }\n\n  Bezier.quadraticFromPoints = function(p1,p2,p3, t) {\n    if(typeof t === \"undefined\") { t = 0.5; }\n    // shortcuts, although they're really dumb\n    if(t===0) { return new Bezier(p2,p2,p3); }\n    if(t===1) { return new Bezier(p1,p2,p2); }\n    // real fitting.\n    var abc = getABC(2,p1,p2,p3,t);\n    return new Bezier(p1, abc.A, p3);\n  };\n\n  Bezier.cubicFromPoints = function(S,B,E, t,d1) {\n    if(typeof t === \"undefined\") { t = 0.5; }\n    var abc = getABC(3,S,B,E,t);\n    if(typeof d1 === \"undefined\") { d1 = utils.dist(B,abc.C); }\n    var d2 = d1 * (1-t)/t;\n\n    var selen = utils.dist(S,E),\n        lx = (E.x-S.x)/selen,\n        ly = (E.y-S.y)/selen,\n        bx1 = d1 * lx,\n        by1 = d1 * ly,\n        bx2 = d2 * lx,\n        by2 = d2 * ly;\n    // derivation of new hull coordinates\n    var e1  = { x: B.x - bx1, y: B.y - by1 },\n        e2  = { x: B.x + bx2, y: B.y + by2 },\n        A = abc.A,\n        v1  = { x: A.x + (e1.x-A.x)/(1-t), y: A.y + (e1.y-A.y)/(1-t) },\n        v2  = { x: A.x + (e2.x-A.x)/(t), y: A.y + (e2.y-A.y)/(t) },\n        nc1 = { x: S.x + (v1.x-S.x)/(t), y: S.y + (v1.y-S.y)/(t) },\n        nc2 = { x: E.x + (v2.x-E.x)/(1-t), y: E.y + (v2.y-E.y)/(1-t) };\n    // ...done\n    return new Bezier(S,nc1,nc2,E);\n  };\n\n  var getUtils = function() {\n    return utils;\n  };\n\n  Bezier.getUtils = getUtils;\n\n  Bezier.prototype = {\n    getUtils: getUtils,\n    valueOf: function() {\n      return this.toString();\n    },\n    toString: function() {\n      return utils.pointsToString(this.points);\n    },\n    toSVG: function(relative) {\n      if(this._3d) return false;\n      var p = this.points,\n          x = p[0].x,\n          y = p[0].y,\n          s = [\"M\", x, y, (this.order===2 ? \"Q\":\"C\")];\n      for(var i=1, last=p.length; i<last; i++) {\n        s.push(p[i].x);\n        s.push(p[i].y);\n      }\n      return s.join(\" \");\n    },\n    update: function() {\n      // one-time compute derivative coordinates\n      this.dpoints = [];\n      for(var p=this.points, d=p.length, c=d-1; d>1; d--, c--) {\n        var list = [];\n        for(var j=0, dpt; j<c; j++) {\n          dpt = {\n            x: c * (p[j+1].x - p[j].x),\n            y: c * (p[j+1].y - p[j].y)\n          };\n          if(this._3d) {\n            dpt.z = c * (p[j+1].z - p[j].z);\n          }\n          list.push(dpt);\n        }\n        this.dpoints.push(list);\n        p = list;\n      };\n      this.computedirection();\n    },\n    computedirection: function() {\n      var points = this.points;\n      var angle = utils.angle(points[0], points[this.order], points[1]);\n      this.clockwise = angle > 0;\n    },\n    length: function() {\n      return utils.length(this.derivative.bind(this));\n    },\n    _lut: [],\n    getLUT: function(steps) {\n      steps = steps || 100;\n      if (this._lut.length === steps) { return this._lut; }\n      this._lut = [];\n      for(var t=0; t<=steps; t++) {\n        this._lut.push(this.compute(t/steps));\n      }\n      return this._lut;\n    },\n    on: function(point, error) {\n      error = error || 5;\n      var lut = this.getLUT(), hits = [], c, t=0;\n      for(var i=0; i<lut.length; i++) {\n        c = lut[i];\n        if (utils.dist(c,point) < error) {\n          hits.push(c)\n          t += i / lut.length;\n        }\n      }\n      if(!hits.length) return false;\n      return t /= hits.length;\n    },\n    project: function(point) {\n      // step 1: coarse check\n      var LUT = this.getLUT(), l = LUT.length-1,\n          closest = utils.closest(LUT, point),\n          mdist = closest.mdist,\n          mpos = closest.mpos;\n      if (mpos===0 || mpos===l) {\n        var t = mpos/l, pt = this.compute(t);\n        pt.t = t;\n        pt.d = mdist;\n        return pt;\n      }\n\n      // step 2: fine check\n      var ft, t, p, d,\n          t1 = (mpos-1)/l,\n          t2 = (mpos+1)/l,\n          step = 0.1/l;\n      mdist += 1;\n      for(t=t1,ft=t; t<t2+step; t+=step) {\n        p = this.compute(t);\n        d = utils.dist(point, p);\n        if (d<mdist) {\n          mdist = d;\n          ft = t;\n        }\n      }\n      p = this.compute(ft);\n      p.t = ft;\n      p.d = mdist;\n      return p;\n    },\n    get: function(t) {\n      return this.compute(t);\n    },\n    point: function(idx) {\n      return this.points[idx];\n    },\n    compute: function(t) {\n      // shortcuts\n      if(t===0) { return this.points[0]; }\n      if(t===1) { return this.points[this.order]; }\n\n      var p = this.points;\n      var mt = 1-t;\n\n      // linear?\n      if(this.order===1) {\n        ret = {\n          x: mt*p[0].x + t*p[1].x,\n          y: mt*p[0].y + t*p[1].y\n        };\n        if (this._3d) { ret.z = mt*p[0].z + t*p[1].z; }\n        return ret;\n      }\n\n      // quadratic/cubic curve?\n      if(this.order<4) {\n        var mt2 = mt*mt,\n            t2 = t*t,\n            a,b,c,d = 0;\n        if(this.order===2) {\n          p = [p[0], p[1], p[2], ZERO];\n          a = mt2;\n          b = mt*t*2;\n          c = t2;\n        }\n        else if(this.order===3) {\n          a = mt2*mt;\n          b = mt2*t*3;\n          c = mt*t2*3;\n          d = t*t2;\n        }\n        var ret = {\n          x: a*p[0].x + b*p[1].x + c*p[2].x + d*p[3].x,\n          y: a*p[0].y + b*p[1].y + c*p[2].y + d*p[3].y\n        };\n        if(this._3d) {\n          ret.z = a*p[0].z + b*p[1].z + c*p[2].z + d*p[3].z;\n        }\n        return ret;\n      }\n\n      // higher order curves: use de Casteljau's computation\n      var dCpts = JSON.parse(JSON.stringify(this.points));\n      while(dCpts.length > 1) {\n        for (var i=0; i<dCpts.length-1; i++) {\n          dCpts[i] = {\n            x: dCpts[i].x + (dCpts[i+1].x - dCpts[i].x) * t,\n            y: dCpts[i].y + (dCpts[i+1].y - dCpts[i].y) * t\n          };\n          if (typeof dCpts[i].z !== \"undefined\") {\n            dCpts[i] = dCpts[i].z + (dCpts[i+1].z - dCpts[i].z) * t\n          }\n        }\n        dCpts.splice(dCpts.length-1, 1);\n      }\n      return dCpts[0];\n    },\n    raise: function() {\n      var p = this.points, np = [p[0]], i, k=p.length, pi, pim;\n      for (var i=1; i<k; i++) {\n        pi = p[i];\n        pim = p[i-1];\n        np[i] = {\n          x: (k-i)/k * pi.x + i/k * pim.x,\n          y: (k-i)/k * pi.y + i/k * pim.y\n        };\n      }\n      np[k] = p[k-1];\n      return new Bezier(np);\n    },\n    derivative: function(t) {\n      var mt = 1-t,\n          a,b,c=0,\n          p = this.dpoints[0];\n      if(this.order===2) { p = [p[0], p[1], ZERO]; a = mt; b = t; }\n      if(this.order===3) { a = mt*mt; b = mt*t*2; c = t*t; }\n      var ret = {\n        x: a*p[0].x + b*p[1].x + c*p[2].x,\n        y: a*p[0].y + b*p[1].y + c*p[2].y\n      };\n      if(this._3d) {\n        ret.z = a*p[0].z + b*p[1].z + c*p[2].z;\n      }\n      return ret;\n    },\n    inflections: function() {\n      return utils.inflections(this.points);\n    },\n    normal: function(t) {\n      return this._3d ? this.__normal3(t) : this.__normal2(t);\n    },\n    __normal2: function(t) {\n      var d = this.derivative(t);\n      var q = sqrt(d.x*d.x + d.y*d.y)\n      return { x: -d.y/q, y: d.x/q };\n    },\n    __normal3: function(t) {\n      // see http://stackoverflow.com/questions/25453159\n      var r1 = this.derivative(t),\n          r2 = this.derivative(t+0.01),\n          q1 = sqrt(r1.x*r1.x + r1.y*r1.y + r1.z*r1.z),\n          q2 = sqrt(r2.x*r2.x + r2.y*r2.y + r2.z*r2.z);\n      r1.x /= q1; r1.y /= q1; r1.z /= q1;\n      r2.x /= q2; r2.y /= q2; r2.z /= q2;\n      // cross product\n      var c = {\n        x: r2.y*r1.z - r2.z*r1.y,\n        y: r2.z*r1.x - r2.x*r1.z,\n        z: r2.x*r1.y - r2.y*r1.x\n      };\n      var m = sqrt(c.x*c.x + c.y*c.y + c.z*c.z);\n      c.x /= m; c.y /= m; c.z /= m;\n      // rotation matrix\n      var R = [   c.x*c.x,   c.x*c.y-c.z, c.x*c.z+c.y,\n                c.x*c.y+c.z,   c.y*c.y,   c.y*c.z-c.x,\n                c.x*c.z-c.y, c.y*c.z+c.x,   c.z*c.z    ];\n      // normal vector:\n      var n = {\n        x: R[0] * r1.x + R[1] * r1.y + R[2] * r1.z,\n        y: R[3] * r1.x + R[4] * r1.y + R[5] * r1.z,\n        z: R[6] * r1.x + R[7] * r1.y + R[8] * r1.z\n      };\n      return n;\n    },\n    hull: function(t) {\n      var p = this.points,\n          _p = [],\n          pt,\n          q = [],\n          idx = 0,\n          i=0,\n          l=0;\n      q[idx++] = p[0];\n      q[idx++] = p[1];\n      q[idx++] = p[2];\n      if(this.order === 3) { q[idx++] = p[3]; }\n      // we lerp between all points at each iteration, until we have 1 point left.\n      while(p.length>1) {\n        _p = [];\n        for(i=0, l=p.length-1; i<l; i++) {\n          pt = utils.lerp(t,p[i],p[i+1]);\n          q[idx++] = pt;\n          _p.push(pt);\n        }\n        p = _p;\n      }\n      return q;\n    },\n    split: function(t1, t2) {\n      // shortcuts\n      if(t1===0 && !!t2) { return this.split(t2).left; }\n      if(t2===1) { return this.split(t1).right; }\n\n      // no shortcut: use \"de Casteljau\" iteration.\n      var q = this.hull(t1);\n      var result = {\n        left: this.order === 2 ? new Bezier([q[0],q[3],q[5]]) : new Bezier([q[0],q[4],q[7],q[9]]),\n        right: this.order === 2 ? new Bezier([q[5],q[4],q[2]]) : new Bezier([q[9],q[8],q[6],q[3]]),\n        span: q\n      };\n\n      // make sure we bind _t1/_t2 information!\n      result.left._t1  = utils.map(0,  0,1, this._t1,this._t2);\n      result.left._t2  = utils.map(t1, 0,1, this._t1,this._t2);\n      result.right._t1 = utils.map(t1, 0,1, this._t1,this._t2);\n      result.right._t2 = utils.map(1,  0,1, this._t1,this._t2);\n\n      // if we have no t2, we're done\n      if(!t2) { return result; }\n\n      // if we have a t2, split again:\n      t2 = utils.map(t2,t1,1,0,1);\n      var subsplit = result.right.split(t2);\n      return subsplit.left;\n    },\n    extrema: function() {\n      var dims = this.dims,\n          result={},\n          roots=[],\n          p, mfn;\n      dims.forEach(function(dim) {\n        mfn = function(v) { return v[dim]; };\n        p = this.dpoints[0].map(mfn);\n        result[dim] = utils.droots(p);\n        if(this.order === 3) {\n          p = this.dpoints[1].map(mfn);\n          result[dim] = result[dim].concat(utils.droots(p));\n        }\n        result[dim] = result[dim].filter(function(t) { return (t>=0 && t<=1); });\n        roots = roots.concat(result[dim].sort());\n      }.bind(this));\n      roots = roots.sort().filter(function(v,idx) { return (roots.indexOf(v) === idx); });\n      result.values = roots;\n      return result;\n    },\n    bbox: function() {\n      var extrema = this.extrema(), result = {};\n      this.dims.forEach(function(d) {\n        result[d] = utils.getminmax(this, d, extrema[d]);\n      }.bind(this));\n      return result;\n    },\n    overlaps: function(curve) {\n      var lbbox = this.bbox(),\n          tbbox = curve.bbox();\n      return utils.bboxoverlap(lbbox,tbbox);\n    },\n    offset: function(t, d) {\n      if(typeof d !== \"undefined\") {\n        var c = this.get(t);\n        var n = this.normal(t);\n        var ret = {\n          c: c,\n          n: n,\n          x: c.x + n.x * d,\n          y: c.y + n.y * d\n        };\n        if(this._3d) {\n          ret.z = c.z + n.z * d;\n        };\n        return ret;\n      }\n      if(this._linear) {\n        var nv = this.normal(0);\n        var coords = this.points.map(function(p) {\n          var ret = {\n            x: p.x + t * nv.x,\n            y: p.y + t * nv.y\n          };\n          if(p.z && n.z) { ret.z = p.z + t * nv.z; }\n          return ret;\n        });\n        return [new Bezier(coords)];\n      }\n      var reduced = this.reduce();\n      return reduced.map(function(s) {\n        return s.scale(t);\n      });\n    },\n    simple: function() {\n      if(this.order===3) {\n        var a1 = utils.angle(this.points[0], this.points[3], this.points[1]);\n        var a2 = utils.angle(this.points[0], this.points[3], this.points[2]);\n        if(a1>0 && a2<0 || a1<0 && a2>0) return false;\n      }\n      var n1 = this.normal(0);\n      var n2 = this.normal(1);\n      var s = n1.x*n2.x + n1.y*n2.y;\n      if(this._3d) { s += n1.z*n2.z; }\n      var angle = abs(acos(s));\n      return angle < pi/3;\n    },\n    reduce: function() {\n      var i, t1=0, t2=0, step=0.01, segment, pass1=[], pass2=[];\n      // first pass: split on extrema\n      var extrema = this.extrema().values;\n      if(extrema.indexOf(0)===-1) { extrema = [0].concat(extrema); }\n      if(extrema.indexOf(1)===-1) { extrema.push(1); }\n\n      for(t1=extrema[0], i=1; i<extrema.length; i++) {\n        t2 = extrema[i];\n        segment = this.split(t1,t2);\n        segment._t1 = t1;\n        segment._t2 = t2;\n        pass1.push(segment);\n        t1 = t2;\n      }\n\n      // second pass: further reduce these segments to simple segments\n      pass1.forEach(function(p1) {\n        t1=0;\n        t2=0;\n        while(t2 <= 1) {\n          for(t2=t1+step; t2<=1+step; t2+=step) {\n            segment = p1.split(t1,t2);\n            if(!segment.simple()) {\n              t2 -= step;\n              if(abs(t1-t2)<step) {\n                // we can never form a reduction\n                return [];\n              }\n              segment = p1.split(t1,t2);\n              segment._t1 = utils.map(t1,0,1,p1._t1,p1._t2);\n              segment._t2 = utils.map(t2,0,1,p1._t1,p1._t2);\n              pass2.push(segment);\n              t1 = t2;\n              break;\n            }\n          }\n        }\n        if(t1<1) {\n          segment = p1.split(t1,1);\n          segment._t1 = utils.map(t1,0,1,p1._t1,p1._t2);\n          segment._t2 = p1._t2;\n          pass2.push(segment);\n        }\n      });\n      return pass2;\n    },\n    scale: function(d) {\n      var order = this.order;\n      var distanceFn = false\n      if(typeof d === \"function\") { distanceFn = d; }\n      if(distanceFn && order === 2) { return this.raise().scale(distanceFn); }\n\n      // TODO: add special handling for degenerate (=linear) curves.\n      var clockwise = this.clockwise;\n      var r1 = distanceFn ? distanceFn(0) : d;\n      var r2 = distanceFn ? distanceFn(1) : d;\n      var v = [ this.offset(0,10), this.offset(1,10) ];\n      var o = utils.lli4(v[0], v[0].c, v[1], v[1].c);\n      if(!o) { throw new Error(\"cannot scale this curve. Try reducing it first.\"); }\n      // move all points by distance 'd' wrt the origin 'o'\n      var points=this.points, np=[];\n\n      // move end points by fixed distance along normal.\n      [0,1].forEach(function(t) {\n        var p = np[t*order] = utils.copy(points[t*order]);\n        p.x += (t?r2:r1) * v[t].n.x;\n        p.y += (t?r2:r1) * v[t].n.y;\n      }.bind(this));\n\n      if (!distanceFn) {\n        // move control points to lie on the intersection of the offset\n        // derivative vector, and the origin-through-control vector\n        [0,1].forEach(function(t) {\n          if(this.order===2 && !!t) return;\n          var p = np[t*order];\n          var d = this.derivative(t);\n          var p2 = { x: p.x + d.x, y: p.y + d.y };\n          np[t+1] = utils.lli4(p, p2, o, points[t+1]);\n        }.bind(this));\n        return new Bezier(np);\n      }\n\n      // move control points by \"however much necessary to\n      // ensure the correct tangent to endpoint\".\n      [0,1].forEach(function(t) {\n        if(this.order===2 && !!t) return;\n        var p = points[t+1];\n        var ov = {\n          x: p.x - o.x,\n          y: p.y - o.y\n        };\n        var rc = distanceFn ? distanceFn((t+1)/order) : d;\n        if(distanceFn && !clockwise) rc = -rc;\n        var m = sqrt(ov.x*ov.x + ov.y*ov.y);\n        ov.x /= m;\n        ov.y /= m;\n        np[t+1] = {\n          x: p.x + rc*ov.x,\n          y: p.y + rc*ov.y\n        }\n      }.bind(this));\n      return new Bezier(np);\n    },\n    outline: function(d1, d2, d3, d4) {\n      d2 = (typeof d2 === \"undefined\") ? d1 : d2;\n      var reduced = this.reduce(),\n          len = reduced.length,\n          fcurves = [],\n          bcurves = [],\n          p,\n          alen = 0,\n          tlen = this.length();\n\n      var graduated = (typeof d3 !== \"undefined\" && typeof d4 !== \"undefined\");\n\n      function linearDistanceFunction(s,e, tlen,alen,slen) {\n        return function (v) {\n          var f1 = alen/tlen, f2 = (alen+slen)/tlen, d = e-s;\n          return utils.map(v, 0,1, s+f1*d, s+f2*d);\n        };\n      };\n\n      // form curve oulines\n      reduced.forEach(function(segment) {\n        slen = segment.length();\n        if (graduated) {\n          fcurves.push(segment.scale(  linearDistanceFunction( d1, d3, tlen,alen,slen)  ));\n          bcurves.push(segment.scale(  linearDistanceFunction(-d2,-d4, tlen,alen,slen)  ));\n        } else {\n          fcurves.push(segment.scale( d1));\n          bcurves.push(segment.scale(-d2));\n        }\n        alen += slen;\n      });\n\n      // reverse the \"return\" outline\n      bcurves = bcurves.map(function(s) {\n        p = s.points;\n        if(p[3]) { s.points = [p[3],p[2],p[1],p[0]]; }\n        else { s.points = [p[2],p[1],p[0]]; }\n        return s;\n      }).reverse();\n\n      // form the endcaps as lines\n      var fs = fcurves[0].points[0],\n          fe = fcurves[len-1].points[fcurves[len-1].points.length-1],\n          bs = bcurves[len-1].points[bcurves[len-1].points.length-1],\n          be = bcurves[0].points[0],\n          ls = utils.makeline(bs,fs),\n          le = utils.makeline(fe,be),\n          segments = [ls].concat(fcurves).concat([le]).concat(bcurves),\n          slen = segments.length;\n\n      return new PolyBezier(segments);\n    },\n    outlineshapes: function(d1, d2, curveIntersectionThreshold) {\n      d2 = d2 || d1;\n      var outline = this.outline(d1,d2).curves;\n      var shapes = [];\n      for(var i=1, len=outline.length; i < len/2; i++) {\n        var shape = utils.makeshape(outline[i], outline[len-i], curveIntersectionThreshold);\n        shape.startcap.virtual = (i > 1);\n        shape.endcap.virtual = (i < len/2-1);\n        shapes.push(shape);\n      }\n      return shapes;\n    },\n    intersects: function(curve, curveIntersectionThreshold) {\n      if(!curve) return this.selfintersects(curveIntersectionThreshold);\n      if(curve.p1 && curve.p2) {\n        return this.lineIntersects(curve);\n      }\n      if(curve instanceof Bezier) { curve = curve.reduce(); }\n      return this.curveintersects(this.reduce(), curve, curveIntersectionThreshold);\n    },\n    lineIntersects: function(line) {\n      var mx = min(line.p1.x, line.p2.x),\n          my = min(line.p1.y, line.p2.y),\n          MX = max(line.p1.x, line.p2.x),\n          MY = max(line.p1.y, line.p2.y),\n          self=this;\n      return utils.roots(this.points, line).filter(function(t) {\n        var p = self.get(t);\n        return utils.between(p.x, mx, MX) && utils.between(p.y, my, MY);\n      });\n    },\n    selfintersects: function(curveIntersectionThreshold) {\n      var reduced = this.reduce();\n      // \"simple\" curves cannot intersect with their direct\n      // neighbour, so for each segment X we check whether\n      // it intersects [0:x-2][x+2:last].\n      var i,len=reduced.length-2,results=[],result,left,right;\n      for(i=0; i<len; i++) {\n        left = reduced.slice(i,i+1);\n        right = reduced.slice(i+2);\n        result = this.curveintersects(left, right, curveIntersectionThreshold);\n        results = results.concat( result );\n      }\n      return results;\n    },\n    curveintersects: function(c1, c2, curveIntersectionThreshold) {\n      var pairs = [];\n      // step 1: pair off any overlapping segments\n      c1.forEach(function(l) {\n        c2.forEach(function(r) {\n          if(l.overlaps(r)) {\n            pairs.push({ left: l, right: r });\n          }\n        });\n      });\n      // step 2: for each pairing, run through the convergence algorithm.\n      var intersections = [];\n      pairs.forEach(function(pair) {\n        var result = utils.pairiteration(pair.left, pair.right, curveIntersectionThreshold);\n        if(result.length > 0) {\n          intersections = intersections.concat(result);\n        }\n      });\n      return intersections;\n    },\n    arcs: function(errorThreshold) {\n      errorThreshold = errorThreshold || 0.5;\n      var circles = [];\n      return this._iterate(errorThreshold, circles);\n    },\n    _error: function(pc, np1, s, e) {\n      var q = (e - s) / 4,\n          c1 = this.get(s + q),\n          c2 = this.get(e - q),\n          ref = utils.dist(pc, np1),\n          d1  = utils.dist(pc, c1),\n          d2  = utils.dist(pc, c2);\n      return abs(d1-ref) + abs(d2-ref);\n    },\n    _iterate: function(errorThreshold, circles) {\n      var s = 0, e = 1, safety;\n      // we do a binary search to find the \"good `t` closest to no-longer-good\"\n      do {\n        safety=0;\n\n        // step 1: start with the maximum possible arc\n        e = 1;\n\n        // points:\n        var np1 = this.get(s), np2, np3, arc, prev_arc;\n\n        // booleans:\n        var curr_good = false, prev_good = false, done;\n\n        // numbers:\n        var m = e, prev_e = 1, step = 0;\n\n        // step 2: find the best possible arc\n        do {\n          prev_good = curr_good;\n          prev_arc = arc;\n          m = (s + e)/2;\n          step++;\n\n          np2 = this.get(m);\n          np3 = this.get(e);\n\n          arc = utils.getccenter(np1, np2, np3);\n\n          //also save the t values\n          arc.interval = {\n            start: s,\n            end: e\n          };\n\n          var error = this._error(arc, np1, s, e);\n          curr_good = (error <= errorThreshold);\n\n          done = prev_good && !curr_good;\n          if(!done) prev_e = e;\n\n          // this arc is fine: we can move 'e' up to see if we can find a wider arc\n          if(curr_good) {\n\n            // if e is already at max, then we're done for this arc.\n            if (e >= 1) {\n              arc.interval.end = prev_e = 1;\n              prev_arc = arc;\n              break;\n            }\n            // if not, move it up by half the iteration distance\n            e = e + (e-s)/2;\n          }\n\n          // this is a bad arc: we need to move 'e' down to find a good arc\n          else {\n            e = m;\n          }\n        }\n        while(!done && safety++<100);\n\n        if(safety>=100) {\n          break;\n        }\n\n        // console.log(\"L835: [F] arc found\", s, prev_e, prev_arc.x, prev_arc.y, prev_arc.s, prev_arc.e);\n\n        prev_arc = (prev_arc ? prev_arc : arc);\n        circles.push(prev_arc);\n        s = prev_e;\n      }\n      while(e < 1);\n      return circles;\n    }\n  };\n\n  module.exports = Bezier;\n\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/bezier-js/lib/bezier.js\n// module id = 39\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","(function() {\n  \"use strict\";\n\n  // math-inlining.\n  var abs = Math.abs,\n      cos = Math.cos,\n      sin = Math.sin,\n      acos = Math.acos,\n      atan2 = Math.atan2,\n      sqrt = Math.sqrt,\n      pow = Math.pow,\n      // cube root function yielding real roots\n      crt = function(v) { return (v<0) ? -pow(-v,1/3) : pow(v,1/3); },\n      // trig constants\n      pi = Math.PI,\n      tau = 2*pi,\n      quart = pi/2,\n      // float precision significant decimal\n      epsilon = 0.000001,\n      // extremas used in bbox calculation and similar algorithms\n      nMax = Number.MAX_SAFE_INTEGER,\n      nMin = Number.MIN_SAFE_INTEGER;\n\n  // Bezier utility functions\n  var utils = {\n    // Legendre-Gauss abscissae with n=24 (x_i values, defined at i=n as the roots of the nth order Legendre polynomial Pn(x))\n    Tvalues: [\n      -0.0640568928626056260850430826247450385909,\n       0.0640568928626056260850430826247450385909,\n      -0.1911188674736163091586398207570696318404,\n       0.1911188674736163091586398207570696318404,\n      -0.3150426796961633743867932913198102407864,\n       0.3150426796961633743867932913198102407864,\n      -0.4337935076260451384870842319133497124524,\n       0.4337935076260451384870842319133497124524,\n      -0.5454214713888395356583756172183723700107,\n       0.5454214713888395356583756172183723700107,\n      -0.6480936519369755692524957869107476266696,\n       0.6480936519369755692524957869107476266696,\n      -0.7401241915785543642438281030999784255232,\n       0.7401241915785543642438281030999784255232,\n      -0.8200019859739029219539498726697452080761,\n       0.8200019859739029219539498726697452080761,\n      -0.8864155270044010342131543419821967550873,\n       0.8864155270044010342131543419821967550873,\n      -0.9382745520027327585236490017087214496548,\n       0.9382745520027327585236490017087214496548,\n      -0.9747285559713094981983919930081690617411,\n       0.9747285559713094981983919930081690617411,\n      -0.9951872199970213601799974097007368118745,\n       0.9951872199970213601799974097007368118745\n    ],\n\n    // Legendre-Gauss weights with n=24 (w_i values, defined by a function linked to in the Bezier primer article)\n    Cvalues: [\n      0.1279381953467521569740561652246953718517,\n      0.1279381953467521569740561652246953718517,\n      0.1258374563468282961213753825111836887264,\n      0.1258374563468282961213753825111836887264,\n      0.1216704729278033912044631534762624256070,\n      0.1216704729278033912044631534762624256070,\n      0.1155056680537256013533444839067835598622,\n      0.1155056680537256013533444839067835598622,\n      0.1074442701159656347825773424466062227946,\n      0.1074442701159656347825773424466062227946,\n      0.0976186521041138882698806644642471544279,\n      0.0976186521041138882698806644642471544279,\n      0.0861901615319532759171852029837426671850,\n      0.0861901615319532759171852029837426671850,\n      0.0733464814110803057340336152531165181193,\n      0.0733464814110803057340336152531165181193,\n      0.0592985849154367807463677585001085845412,\n      0.0592985849154367807463677585001085845412,\n      0.0442774388174198061686027482113382288593,\n      0.0442774388174198061686027482113382288593,\n      0.0285313886289336631813078159518782864491,\n      0.0285313886289336631813078159518782864491,\n      0.0123412297999871995468056670700372915759,\n      0.0123412297999871995468056670700372915759\n    ],\n\n    arcfn: function(t, derivativeFn) {\n      var d = derivativeFn(t);\n      var l = d.x*d.x + d.y*d.y;\n      if(typeof d.z !== \"undefined\") {\n        l += d.z*d.z;\n      }\n      return sqrt(l);\n    },\n\n    between: function(v, m, M) {\n      return (m <= v && v <= M) || utils.approximately(v, m) || utils.approximately(v, M);\n    },\n\n    approximately: function(a,b,precision) {\n      return abs(a-b) <= (precision || epsilon);\n    },\n\n    length: function(derivativeFn) {\n      var z=0.5,sum=0,len=utils.Tvalues.length,i,t;\n      for(i=0; i<len; i++) {\n        t = z * utils.Tvalues[i] + z;\n        sum += utils.Cvalues[i] * utils.arcfn(t,derivativeFn);\n      }\n      return z * sum;\n    },\n\n    map: function(v, ds,de, ts,te) {\n      var d1 = de-ds, d2 = te-ts, v2 =  v-ds, r = v2/d1;\n      return ts + d2*r;\n    },\n\n    lerp: function(r, v1, v2) {\n      var ret = {\n        x: v1.x + r*(v2.x-v1.x),\n        y: v1.y + r*(v2.y-v1.y)\n      };\n      if(!!v1.z && !!v2.z) {\n        ret.z =  v1.z + r*(v2.z-v1.z);\n      }\n      return ret;\n    },\n\n    pointToString: function(p) {\n      var s = p.x+\"/\"+p.y;\n      if(typeof p.z !== \"undefined\") {\n        s += \"/\"+p.z;\n      }\n      return s;\n    },\n\n    pointsToString: function(points) {\n      return \"[\" + points.map(utils.pointToString).join(\", \") + \"]\";\n    },\n\n    copy: function(obj) {\n      return JSON.parse(JSON.stringify(obj));\n    },\n\n    angle: function(o,v1,v2) {\n      var dx1 = v1.x - o.x,\n          dy1 = v1.y - o.y,\n          dx2 = v2.x - o.x,\n          dy2 = v2.y - o.y,\n          cross = dx1*dy2 - dy1*dx2,\n          dot = dx1*dx2 + dy1*dy2;\n      return atan2(cross, dot);\n    },\n\n    // round as string, to avoid rounding errors\n    round: function(v, d) {\n      var s = '' + v;\n      var pos = s.indexOf(\".\");\n      return parseFloat(s.substring(0,pos+1+d));\n    },\n\n    dist: function(p1, p2) {\n      var dx = p1.x - p2.x,\n          dy = p1.y - p2.y;\n      return sqrt(dx*dx+dy*dy);\n    },\n\n    closest: function(LUT, point) {\n      var mdist = pow(2,63), mpos, d;\n      LUT.forEach(function(p, idx) {\n        d = utils.dist(point, p);\n        if (d<mdist) {\n          mdist = d;\n          mpos = idx;\n        }\n      });\n      return { mdist:mdist, mpos:mpos };\n    },\n\n    abcratio: function(t, n) {\n      // see ratio(t) note on http://pomax.github.io/bezierinfo/#abc\n      if (n!==2 && n!==3) {\n        return false;\n      }\n      if (typeof t === \"undefined\") {\n        t = 0.5;\n      } else if (t===0 || t===1) {\n        return t;\n      }\n      var bottom = pow(t,n) + pow(1-t,n), top = bottom - 1;\n      return abs(top/bottom);\n    },\n\n    projectionratio: function(t, n) {\n      // see u(t) note on http://pomax.github.io/bezierinfo/#abc\n      if (n!==2 && n!==3) {\n        return false;\n      }\n      if (typeof t === \"undefined\") {\n        t = 0.5;\n      } else if (t===0 || t===1) {\n        return t;\n      }\n      var top = pow(1-t, n), bottom = pow(t,n) + top;\n      return top/bottom;\n    },\n\n    lli8: function(x1,y1,x2,y2,x3,y3,x4,y4) {\n      var nx=(x1*y2-y1*x2)*(x3-x4)-(x1-x2)*(x3*y4-y3*x4),\n          ny=(x1*y2-y1*x2)*(y3-y4)-(y1-y2)*(x3*y4-y3*x4),\n          d=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4);\n      if(d==0) { return false; }\n      return { x: nx/d, y: ny/d };\n    },\n\n    lli4: function(p1,p2,p3,p4) {\n      var x1 = p1.x, y1 = p1.y,\n          x2 = p2.x, y2 = p2.y,\n          x3 = p3.x, y3 = p3.y,\n          x4 = p4.x, y4 = p4.y;\n      return utils.lli8(x1,y1,x2,y2,x3,y3,x4,y4);\n    },\n\n    lli: function(v1, v2) {\n      return utils.lli4(v1,v1.c,v2,v2.c);\n    },\n\n    makeline: function(p1,p2) {\n      var Bezier = require('./bezier');\n      var x1 = p1.x, y1 = p1.y, x2 = p2.x, y2 = p2.y, dx = (x2-x1)/3, dy = (y2-y1)/3;\n      return new Bezier(x1, y1, x1+dx, y1+dy, x1+2*dx, y1+2*dy, x2, y2);\n    },\n\n    findbbox: function(sections) {\n      var mx=nMax,my=nMax,MX=nMin,MY=nMin;\n      sections.forEach(function(s) {\n        var bbox = s.bbox();\n        if(mx > bbox.x.min) mx = bbox.x.min;\n        if(my > bbox.y.min) my = bbox.y.min;\n        if(MX < bbox.x.max) MX = bbox.x.max;\n        if(MY < bbox.y.max) MY = bbox.y.max;\n      });\n      return {\n        x: { min: mx, mid:(mx+MX)/2, max: MX, size:MX-mx },\n        y: { min: my, mid:(my+MY)/2, max: MY, size:MY-my }\n      }\n    },\n\n    shapeintersections: function(s1, bbox1, s2, bbox2, curveIntersectionThreshold) {\n      if(!utils.bboxoverlap(bbox1, bbox2)) return [];\n      var intersections = [];\n      var a1 = [s1.startcap, s1.forward, s1.back, s1.endcap];\n      var a2 = [s2.startcap, s2.forward, s2.back, s2.endcap];\n      a1.forEach(function(l1) {\n        if(l1.virtual) return;\n        a2.forEach(function(l2) {\n          if(l2.virtual) return;\n          var iss = l1.intersects(l2, curveIntersectionThreshold);\n          if(iss.length>0) {\n            iss.c1 = l1;\n            iss.c2 = l2;\n            iss.s1 = s1;\n            iss.s2 = s2;\n            intersections.push(iss);\n          }\n        });\n      });\n      return intersections;\n    },\n\n    makeshape: function(forward, back, curveIntersectionThreshold) {\n      var bpl = back.points.length;\n      var fpl = forward.points.length;\n      var start  = utils.makeline(back.points[bpl-1], forward.points[0]);\n      var end    = utils.makeline(forward.points[fpl-1], back.points[0]);\n      var shape  = {\n        startcap: start,\n        forward: forward,\n        back: back,\n        endcap: end,\n        bbox: utils.findbbox([start, forward, back, end])\n      };\n      var self = utils;\n      shape.intersections = function(s2) {\n        return self.shapeintersections(shape,shape.bbox,s2,s2.bbox, curveIntersectionThreshold);\n      };\n      return shape;\n    },\n\n    getminmax: function(curve, d, list) {\n      if(!list) return { min:0, max:0 };\n      var min=nMax, max=nMin,t,c;\n      if(list.indexOf(0)===-1) { list = [0].concat(list); }\n      if(list.indexOf(1)===-1) { list.push(1); }\n      for(var i=0,len=list.length; i<len; i++) {\n        t = list[i];\n        c = curve.get(t);\n        if(c[d] < min) { min = c[d]; }\n        if(c[d] > max) { max = c[d]; }\n      }\n      return { min:min, mid:(min+max)/2, max:max, size:max-min };\n    },\n\n    align: function(points, line) {\n      var tx = line.p1.x,\n          ty = line.p1.y,\n          a = -atan2(line.p2.y-ty, line.p2.x-tx),\n          d = function(v) {\n            return {\n              x: (v.x-tx)*cos(a) - (v.y-ty)*sin(a),\n              y: (v.x-tx)*sin(a) + (v.y-ty)*cos(a)\n            };\n          };\n      return points.map(d);\n    },\n\n    roots: function(points, line) {\n      line = line || {p1:{x:0,y:0},p2:{x:1,y:0}};\n      var order = points.length - 1;\n      var p = utils.align(points, line);\n      var reduce = function(t) { return 0<=t && t <=1; };\n\n      if (order === 2) {\n        var a = p[0].y,\n            b = p[1].y,\n            c = p[2].y,\n            d = a - 2*b + c;\n        if(d!==0) {\n          var m1 = -sqrt(b*b-a*c),\n              m2 = -a+b,\n              v1 = -( m1+m2)/d,\n              v2 = -(-m1+m2)/d;\n          return [v1, v2].filter(reduce);\n        }\n        else if(b!==c && d===0) {\n          return [ (2*b-c)/2*(b-c) ].filter(reduce);\n        }\n        return [];\n      }\n\n      // see http://www.trans4mind.com/personal_development/mathematics/polynomials/cubicAlgebra.htm\n      var pa = p[0].y,\n          pb = p[1].y,\n          pc = p[2].y,\n          pd = p[3].y,\n          d = (-pa + 3*pb - 3*pc + pd),\n          a = (3*pa - 6*pb + 3*pc) / d,\n          b = (-3*pa + 3*pb) / d,\n          c = pa / d,\n          p = (3*b - a*a)/3,\n          p3 = p/3,\n          q = (2*a*a*a - 9*a*b + 27*c)/27,\n          q2 = q/2,\n          discriminant = q2*q2 + p3*p3*p3,\n          u1,v1,x1,x2,x3;\n       if (discriminant < 0) {\n        var mp3 = -p/3,\n            mp33 = mp3*mp3*mp3,\n            r = sqrt( mp33 ),\n            t = -q/(2*r),\n            cosphi = t<-1 ? -1 : t>1 ? 1 : t,\n            phi = acos(cosphi),\n            crtr = crt(r),\n            t1 = 2*crtr;\n        x1 = t1 * cos(phi/3) - a/3;\n        x2 = t1 * cos((phi+tau)/3) - a/3;\n        x3 = t1 * cos((phi+2*tau)/3) - a/3;\n        return [x1, x2, x3].filter(reduce);\n      } else if(discriminant === 0) {\n        u1 = q2 < 0 ? crt(-q2) : -crt(q2);\n        x1 = 2*u1-a/3;\n        x2 = -u1 - a/3;\n        return [x1,x2].filter(reduce);\n      } else {\n        var sd = sqrt(discriminant);\n        u1 = crt(-q2+sd);\n        v1 = crt(q2+sd);\n        return [u1-v1-a/3].filter(reduce);;\n      }\n    },\n\n    droots: function(p) {\n      // quadratic roots are easy\n      if(p.length === 3) {\n        var a = p[0],\n            b = p[1],\n            c = p[2],\n            d = a - 2*b + c;\n        if(d!==0) {\n          var m1 = -sqrt(b*b-a*c),\n              m2 = -a+b,\n              v1 = -( m1+m2)/d,\n              v2 = -(-m1+m2)/d;\n          return [v1, v2];\n        }\n        else if(b!==c && d===0) {\n          return [(2*b-c)/(2*(b-c))];\n        }\n        return [];\n      }\n\n      // linear roots are even easier\n      if(p.length === 2) {\n        var a = p[0], b = p[1];\n        if(a!==b) {\n          return [a/(a-b)];\n        }\n        return [];\n      }\n    },\n\n    inflections: function(points) {\n      if (points.length<4) return [];\n\n      // FIXME: TODO: add in inflection abstraction for quartic+ curves?\n\n      var p = utils.align(points, { p1: points[0], p2: points.slice(-1)[0] }),\n          a = p[2].x * p[1].y,\n          b = p[3].x * p[1].y,\n          c = p[1].x * p[2].y,\n          d = p[3].x * p[2].y,\n          v1 = 18 * (-3*a + 2*b + 3*c - d),\n          v2 = 18 * (3*a - b - 3*c),\n          v3 = 18 * (c - a);\n\n      if (utils.approximately(v1,0)){\n        if(!utils.approximately(v2,0)){\n          var t = -v3/v2;\n          if (0 <= t && t <= 1)\n             return [t];\n        }\n        return [];\n      }\n\n      var trm = v2*v2 - 4*v1*v3,\n          sq = Math.sqrt(trm),\n          d = 2 * v1;\n\n      if (utils.approximately(d,0)) return [];\n\n      return [(sq-v2)/d, -(v2+sq)/d].filter(function(r) {\n        return (0 <= r && r <= 1);\n      });\n    },\n\n    bboxoverlap: function(b1,b2) {\n      var dims=['x','y'],len=dims.length,i,dim,l,t,d\n      for(i=0; i<len; i++) {\n        dim = dims[i];\n        l = b1[dim].mid;\n        t = b2[dim].mid;\n        d = (b1[dim].size + b2[dim].size)/2;\n        if(abs(l-t) >= d) return false;\n      }\n      return true;\n    },\n\n    expandbox: function(bbox, _bbox) {\n      if(_bbox.x.min < bbox.x.min) { bbox.x.min = _bbox.x.min; }\n      if(_bbox.y.min < bbox.y.min) { bbox.y.min = _bbox.y.min; }\n      if(_bbox.z && _bbox.z.min < bbox.z.min) { bbox.z.min = _bbox.z.min; }\n      if(_bbox.x.max > bbox.x.max) { bbox.x.max = _bbox.x.max; }\n      if(_bbox.y.max > bbox.y.max) { bbox.y.max = _bbox.y.max; }\n      if(_bbox.z && _bbox.z.max > bbox.z.max) { bbox.z.max = _bbox.z.max; }\n      bbox.x.mid = (bbox.x.min + bbox.x.max)/2;\n      bbox.y.mid = (bbox.y.min + bbox.y.max)/2;\n      if(bbox.z) { bbox.z.mid = (bbox.z.min + bbox.z.max)/2; }\n      bbox.x.size = bbox.x.max - bbox.x.min;\n      bbox.y.size = bbox.y.max - bbox.y.min;\n      if(bbox.z) { bbox.z.size = bbox.z.max - bbox.z.min; }\n    },\n\n    pairiteration: function(c1, c2, curveIntersectionThreshold) {\n      var c1b = c1.bbox(),\n          c2b = c2.bbox(),\n          r = 100000,\n          threshold = curveIntersectionThreshold || 0.5;\n      if(c1b.x.size + c1b.y.size < threshold && c2b.x.size + c2b.y.size < threshold) {\n        return [ ((r * (c1._t1+c1._t2)/2)|0)/r + \"/\" + ((r * (c2._t1+c2._t2)/2)|0)/r ];\n      }\n      var cc1 = c1.split(0.5),\n          cc2 = c2.split(0.5),\n          pairs = [\n            {left: cc1.left, right: cc2.left },\n            {left: cc1.left, right: cc2.right },\n            {left: cc1.right, right: cc2.right },\n            {left: cc1.right, right: cc2.left }];\n      pairs = pairs.filter(function(pair) {\n        return utils.bboxoverlap(pair.left.bbox(),pair.right.bbox());\n      });\n      var results = [];\n      if(pairs.length === 0) return results;\n      pairs.forEach(function(pair) {\n        results = results.concat(\n          utils.pairiteration(pair.left, pair.right, threshold)\n        );\n      })\n      results = results.filter(function(v,i) {\n        return results.indexOf(v) === i;\n      });\n      return results;\n    },\n\n    getccenter: function(p1,p2,p3) {\n      var dx1 = (p2.x - p1.x),\n          dy1 = (p2.y - p1.y),\n          dx2 = (p3.x - p2.x),\n          dy2 = (p3.y - p2.y);\n      var dx1p = dx1 * cos(quart) - dy1 * sin(quart),\n          dy1p = dx1 * sin(quart) + dy1 * cos(quart),\n          dx2p = dx2 * cos(quart) - dy2 * sin(quart),\n          dy2p = dx2 * sin(quart) + dy2 * cos(quart);\n      // chord midpoints\n      var mx1 = (p1.x + p2.x)/2,\n          my1 = (p1.y + p2.y)/2,\n          mx2 = (p2.x + p3.x)/2,\n          my2 = (p2.y + p3.y)/2;\n      // midpoint offsets\n      var mx1n = mx1 + dx1p,\n          my1n = my1 + dy1p,\n          mx2n = mx2 + dx2p,\n          my2n = my2 + dy2p;\n      // intersection of these lines:\n      var arc = utils.lli8(mx1,my1,mx1n,my1n, mx2,my2,mx2n,my2n),\n          r = utils.dist(arc,p1),\n          // arc start/end values, over mid point:\n          s = atan2(p1.y - arc.y, p1.x - arc.x),\n          m = atan2(p2.y - arc.y, p2.x - arc.x),\n          e = atan2(p3.y - arc.y, p3.x - arc.x),\n          _;\n      // determine arc direction (cw/ccw correction)\n      if (s<e) {\n        // if s<m<e, arc(s, e)\n        // if m<s<e, arc(e, s + tau)\n        // if s<e<m, arc(e, s + tau)\n        if (s>m || m>e) { s += tau; }\n        if (s>e) { _=e; e=s; s=_; }\n      } else {\n        // if e<m<s, arc(e, s)\n        // if m<e<s, arc(s, e + tau)\n        // if e<s<m, arc(s, e + tau)\n        if (e<m && m<s) { _=e; e=s; s=_; } else { e += tau; }\n      }\n      // assign and done.\n      arc.s = s;\n      arc.e = e;\n      arc.r = r;\n      return arc;\n    }\n  };\n\n  module.exports = utils;\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/bezier-js/lib/utils.js\n// module id = 40\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","import Obj from 'webgl-obj-loader';\n\nexport default function(data) {\n  const mesh = new Obj.Mesh(data);\n  return {\n    vertices: new Float32Array(mesh.vertices),\n    normals: new Float32Array(mesh.vertexNormals),\n    indices: new Uint16Array(mesh.indices),\n    uvs: new Float32Array(mesh.textures)\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ObjParser.ts","// Core\nimport * as Capabilities from './core/Capabilities';\nexport { Capabilities };\n\nimport * as Constants from './core/Constants';\nexport { Constants };\n\nimport * as GL from './core/GL';\nexport { GL };\n\nimport Mesh from './core/Mesh';\nexport { Mesh };\n\nimport Object3D from './core/Object3D';\nexport { Object3D };\n\nimport Camera from './cameras/Camera';\nexport { Camera };\n\nimport OrthographicCamera from './cameras/OrthographicCamera';\nexport { OrthographicCamera };\n\nimport PerspectiveCamera from './cameras/PerspectiveCamera';\nexport { PerspectiveCamera };\n\nimport RayCaster from './core/Raycaster';\nexport { RayCaster };\n\nimport Renderer from './core/Renderer';\nexport { Renderer };\n\nimport RenderTarget from './core/RenderTarget';\nexport { RenderTarget };\n\nimport Scene from './core/Scene';\nexport { Scene };\n\nimport Shader from './core/Shader';\nexport { Shader };\n\nimport Texture from './core/Texture';\nexport { Texture };\n\nimport Texture3d from './core/Texture3d';\nexport { Texture3d };\n\nimport TextureCube from './core/TextureCube';\nexport { TextureCube };\n\nimport TextureVideo from './core/TextureVideo';\nexport { TextureVideo };\n\nimport UniformBuffer from './core/UniformBuffer';\nexport { UniformBuffer };\n\nimport * as UniformBuffers from './core/UniformBuffers';\nexport { UniformBuffers };\n\nimport Vao from './core/Vao';\nexport { Vao };\n\n// Geometry\nimport BoxGeometry from './geometry/BoxGeometry';\nexport { BoxGeometry };\n\nimport BufferAttribute from './geometry/BufferAttribute';\nexport { BufferAttribute };\n\nimport Geometry from './geometry/Geometry';\nexport { Geometry };\n\nimport LineGeometry from './geometry/LineGeometry';\nexport { LineGeometry };\n\nimport PlaneGeometry from './geometry/PlaneGeometry';\nexport { PlaneGeometry };\n\nimport SphereGeometry from './geometry/SphereGeometry';\nexport { SphereGeometry };\n\n// Helpers\nimport AxisHelper from './helpers/AxisHelper';\nexport { AxisHelper };\n\nimport CameraHelper from './helpers/CameraHelper';\nexport { CameraHelper };\n\nimport GridHelper from './helpers/GridHelper';\nexport { GridHelper };\n\nimport NormalsHelper from './helpers/NormalsHelper';\nexport { NormalsHelper };\n\nimport VerticesHelper from './helpers/VerticesHelper';\nexport { VerticesHelper };\n\n// Lights\nimport Lights from './lights/Lights';\nexport { Lights };\n\nimport AmbientLight from './lights/AmbientLight';\nexport { AmbientLight };\n\nimport DirectionalLight from './lights/DirectionalLight';\nexport { DirectionalLight };\n\nimport PointLight from './lights/PointLight';\nexport { PointLight };\n\n// Math\nimport Color from './math/Color';\nexport { Color };\n\nimport Vector3 from './math/Vector3';\nexport { Vector3 };\n\nimport Vector2 from './math/Vector2';\nexport { Vector2 };\n\nimport Ray from './math/Ray';\nexport { Ray };\n\nimport * as MathUtils from './math/Utils';\nexport { MathUtils };\n\n// Shaders\nimport ShaderChunks from './shaders/chunks/index';\nexport { ShaderChunks };\n\n// Utils\nimport CameraDolly from './utils/CameraDolly';\nexport { CameraDolly };\n\nimport Clock from './utils/Clock';\nexport { Clock };\n\nimport Detect from './utils/Detect';\nexport { Detect };\n\nimport ObjParser from './utils/ObjParser';\nexport { ObjParser };\n\n// Controls\nimport OrbitControls from './controls/OrbitControls';\nexport { OrbitControls };\n\n// Loaders\nimport FileLoader from './loaders/FileLoader';\nexport { FileLoader };\n\nimport HdrLoader from './loaders/HdrLoader';\nexport { HdrLoader };\n\nimport ImageLoader from './loaders/ImageLoader';\nexport { ImageLoader };\n\nimport JsonLoader from './loaders/JsonLoader';\nexport { JsonLoader };\n\nimport ObjLoader from './loaders/ObjLoader';\nexport { ObjLoader };\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\"\n\n/**\n * 2x2 Matrix\n * @module mat2\n */\n\n/**\n * Creates a new identity mat2\n *\n * @returns {mat2} a new 2x2 matrix\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Creates a new mat2 initialized with values from an existing matrix\n *\n * @param {mat2} a matrix to clone\n * @returns {mat2} a new 2x2 matrix\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Copy the values from one mat2 to another\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Set a mat2 to the identity matrix\n *\n * @param {mat2} out the receiving matrix\n * @returns {mat2} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Create a new mat2 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\n * @returns {mat2} out A new 2x2 matrix\n */\nexport function fromValues(m00, m01, m10, m11) {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n\n/**\n * Set the components of a mat2 to the given values\n *\n * @param {mat2} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\n * @returns {mat2} out\n */\nexport function set(out, m00, m01, m10, m11) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n\n/**\n * Transpose the values of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache\n  // some values\n  if (out === a) {\n    let a1 = a[1];\n    out[1] = a[2];\n    out[2] = a1;\n  } else {\n    out[0] = a[0];\n    out[1] = a[2];\n    out[2] = a[1];\n    out[3] = a[3];\n  }\n\n  return out;\n}\n\n/**\n * Inverts a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nexport function invert(out, a) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n\n  // Calculate the determinant\n  let det = a0 * a3 - a2 * a1;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] =  a3 * det;\n  out[1] = -a1 * det;\n  out[2] = -a2 * det;\n  out[3] =  a0 * det;\n\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nexport function adjoint(out, a) {\n  // Caching this value is nessecary if out == a\n  let a0 = a[0];\n  out[0] =  a[3];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] =  a0;\n\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat2\n *\n * @param {mat2} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  return a[0] * a[3] - a[2] * a[1];\n}\n\n/**\n * Multiplies two mat2's\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the first operand\n * @param {mat2} b the second operand\n * @returns {mat2} out\n */\nexport function multiply(out, a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  return out;\n}\n\n/**\n * Rotates a mat2 by the given angle\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2} out\n */\nexport function rotate(out, a, rad) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  out[0] = a0 *  c + a2 * s;\n  out[1] = a1 *  c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  return out;\n}\n\n/**\n * Scales the mat2 by the dimensions in the given vec2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat2} out\n **/\nexport function scale(out, a, v) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let v0 = v[0], v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat2.identity(dest);\n *     mat2.rotate(dest, dest, rad);\n *\n * @param {mat2} out mat2 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2} out\n */\nexport function fromRotation(out, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat2.identity(dest);\n *     mat2.scale(dest, dest, vec);\n *\n * @param {mat2} out mat2 receiving operation result\n * @param {vec2} v Scaling vector\n * @returns {mat2} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  return out;\n}\n\n/**\n * Returns a string representation of a mat2\n *\n * @param {mat2} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return 'mat2(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n\n/**\n * Returns Frobenius norm of a mat2\n *\n * @param {mat2} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2)))\n}\n\n/**\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\n * @param {mat2} L the lower triangular matrix\n * @param {mat2} D the diagonal matrix\n * @param {mat2} U the upper triangular matrix\n * @param {mat2} a the input matrix to factorize\n */\n\nexport function LDU(L, D, U, a) {\n  L[2] = a[2]/a[0];\n  U[0] = a[0];\n  U[1] = a[1];\n  U[3] = a[3] - L[2] * U[1];\n  return [L, D, U];\n}\n\n/**\n * Adds two mat2's\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the first operand\n * @param {mat2} b the second operand\n * @returns {mat2} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the first operand\n * @param {mat2} b the second operand\n * @returns {mat2} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {mat2} a The first matrix.\n * @param {mat2} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {mat2} a The first matrix.\n * @param {mat2} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n          Math.abs(a3 - b3) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a3), Math.abs(b3)));\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat2} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n\n/**\n * Adds two mat2's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat2} out the receiving vector\n * @param {mat2} a the first operand\n * @param {mat2} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat2} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  out[2] = a[2] + (b[2] * scale);\n  out[3] = a[3] + (b[3] * scale);\n  return out;\n}\n\n/**\n * Alias for {@link mat2.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link mat2.subtract}\n * @function\n */\nexport const sub = subtract;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/src/gl-matrix/mat2.js\n// module id = 43\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\";\n\n/**\n * 2x3 Matrix\n * @module mat2d\n *\n * @description\n * A mat2d contains six elements defined as:\n * <pre>\n * [a, c, tx,\n *  b, d, ty]\n * </pre>\n * This is a short form for the 3x3 matrix:\n * <pre>\n * [a, c, tx,\n *  b, d, ty,\n *  0, 0, 1]\n * </pre>\n * The last row is ignored so the array is shorter and operations are faster.\n */\n\n/**\n * Creates a new identity mat2d\n *\n * @returns {mat2d} a new 2x3 matrix\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n\n/**\n * Creates a new mat2d initialized with values from an existing matrix\n *\n * @param {mat2d} a matrix to clone\n * @returns {mat2d} a new 2x3 matrix\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n\n/**\n * Copy the values from one mat2d to another\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the source matrix\n * @returns {mat2d} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n\n/**\n * Set a mat2d to the identity matrix\n *\n * @param {mat2d} out the receiving matrix\n * @returns {mat2d} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n\n/**\n * Create a new mat2d with the given values\n *\n * @param {Number} a Component A (index 0)\n * @param {Number} b Component B (index 1)\n * @param {Number} c Component C (index 2)\n * @param {Number} d Component D (index 3)\n * @param {Number} tx Component TX (index 4)\n * @param {Number} ty Component TY (index 5)\n * @returns {mat2d} A new mat2d\n */\nexport function fromValues(a, b, c, d, tx, ty) {\n  let out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n\n/**\n * Set the components of a mat2d to the given values\n *\n * @param {mat2d} out the receiving matrix\n * @param {Number} a Component A (index 0)\n * @param {Number} b Component B (index 1)\n * @param {Number} c Component C (index 2)\n * @param {Number} d Component D (index 3)\n * @param {Number} tx Component TX (index 4)\n * @param {Number} ty Component TY (index 5)\n * @returns {mat2d} out\n */\nexport function set(out, a, b, c, d, tx, ty) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n\n/**\n * Inverts a mat2d\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the source matrix\n * @returns {mat2d} out\n */\nexport function invert(out, a) {\n  let aa = a[0], ab = a[1], ac = a[2], ad = a[3];\n  let atx = a[4], aty = a[5];\n\n  let det = aa * ad - ab * ac;\n  if(!det){\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = ad * det;\n  out[1] = -ab * det;\n  out[2] = -ac * det;\n  out[3] = aa * det;\n  out[4] = (ac * aty - ad * atx) * det;\n  out[5] = (ab * atx - aa * aty) * det;\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat2d\n *\n * @param {mat2d} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  return a[0] * a[3] - a[1] * a[2];\n}\n\n/**\n * Multiplies two mat2d's\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the first operand\n * @param {mat2d} b the second operand\n * @returns {mat2d} out\n */\nexport function multiply(out, a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5];\n  let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  out[4] = a0 * b4 + a2 * b5 + a4;\n  out[5] = a1 * b4 + a3 * b5 + a5;\n  return out;\n}\n\n/**\n * Rotates a mat2d by the given angle\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2d} out\n */\nexport function rotate(out, a, rad) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5];\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  out[0] = a0 *  c + a2 * s;\n  out[1] = a1 *  c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n\n/**\n * Scales the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to translate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat2d} out\n **/\nexport function scale(out, a, v) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5];\n  let v0 = v[0], v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n\n/**\n * Translates the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to translate\n * @param {vec2} v the vec2 to translate the matrix by\n * @returns {mat2d} out\n **/\nexport function translate(out, a, v) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5];\n  let v0 = v[0], v1 = v[1];\n  out[0] = a0;\n  out[1] = a1;\n  out[2] = a2;\n  out[3] = a3;\n  out[4] = a0 * v0 + a2 * v1 + a4;\n  out[5] = a1 * v0 + a3 * v1 + a5;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.rotate(dest, dest, rad);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2d} out\n */\nexport function fromRotation(out, rad) {\n  let s = Math.sin(rad), c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.scale(dest, dest, vec);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {vec2} v Scaling vector\n * @returns {mat2d} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.translate(dest, dest, vec);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {vec2} v Translation vector\n * @returns {mat2d} out\n */\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = v[0];\n  out[5] = v[1];\n  return out;\n}\n\n/**\n * Returns a string representation of a mat2d\n *\n * @param {mat2d} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return 'mat2d(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' +\n          a[3] + ', ' + a[4] + ', ' + a[5] + ')';\n}\n\n/**\n * Returns Frobenius norm of a mat2d\n *\n * @param {mat2d} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + 1))\n}\n\n/**\n * Adds two mat2d's\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the first operand\n * @param {mat2d} b the second operand\n * @returns {mat2d} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the first operand\n * @param {mat2d} b the second operand\n * @returns {mat2d} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat2d} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  return out;\n}\n\n/**\n * Adds two mat2d's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat2d} out the receiving vector\n * @param {mat2d} a the first operand\n * @param {mat2d} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat2d} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  out[2] = a[2] + (b[2] * scale);\n  out[3] = a[3] + (b[3] * scale);\n  out[4] = a[4] + (b[4] * scale);\n  out[5] = a[5] + (b[5] * scale);\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {mat2d} a The first matrix.\n * @param {mat2d} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {mat2d} a The first matrix.\n * @param {mat2d} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5];\n  let b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n          Math.abs(a3 - b3) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n          Math.abs(a4 - b4) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n          Math.abs(a5 - b5) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a5), Math.abs(b5)));\n}\n\n/**\n * Alias for {@link mat2d.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link mat2d.subtract}\n * @function\n */\nexport const sub = subtract;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/src/gl-matrix/mat2d.js\n// module id = 44\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\";\n\n/**\n * 4x4 Matrix\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {mat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  let out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    let a01 = a[1], a02 = a[2], a03 = a[3];\n    let a12 = a[6], a13 = a[7];\n    let a23 = a[11];\n\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function invert(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function adjoint(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n  out[0]  =  (a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22));\n  out[1]  = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2]  =  (a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12));\n  out[3]  = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4]  = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5]  =  (a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22));\n  out[6]  = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7]  =  (a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12));\n  out[8]  =  (a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21));\n  out[9]  = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] =  (a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11));\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] =  (a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21));\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] =  (a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11));\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {mat4} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function multiply(out, a, b) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n  // Cache only the current line of the second matrix\n  let b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n  out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n  b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n  out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n  b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n  out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n  b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n  out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  return out;\n}\n\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nexport function translate(out, a, v) {\n  let x = v[0], y = v[1], z = v[2];\n  let a00, a01, a02, a03;\n  let a10, a11, a12, a13;\n  let a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n    a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n    a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n    out[0] = a00; out[1] = a01; out[2] = a02; out[3] = a03;\n    out[4] = a10; out[5] = a11; out[6] = a12; out[7] = a13;\n    out[8] = a20; out[9] = a21; out[10] = a22; out[11] = a23;\n\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nexport function scale(out, a, v) {\n  let x = v[0], y = v[1], z = v[2];\n\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function rotate(out, a, rad, axis) {\n  let x = axis[0], y = axis[1], z = axis[2];\n  let len = Math.sqrt(x * x + y * y + z * z);\n  let s, c, t;\n  let a00, a01, a02, a03;\n  let a10, a11, a12, a13;\n  let a20, a21, a22, a23;\n  let b00, b01, b02;\n  let b10, b11, b12;\n  let b20, b21, b22;\n\n  if (Math.abs(len) < glMatrix.EPSILON) { return null; }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n\n  a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n  a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n  a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n  // Construct the elements of the rotation matrix\n  b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) { // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateX(out, a, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  let a10 = a[4];\n  let a11 = a[5];\n  let a12 = a[6];\n  let a13 = a[7];\n  let a20 = a[8];\n  let a21 = a[9];\n  let a22 = a[10];\n  let a23 = a[11];\n\n  if (a !== out) { // If the source and destination differ, copy the unchanged rows\n    out[0]  = a[0];\n    out[1]  = a[1];\n    out[2]  = a[2];\n    out[3]  = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateY(out, a, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  let a00 = a[0];\n  let a01 = a[1];\n  let a02 = a[2];\n  let a03 = a[3];\n  let a20 = a[8];\n  let a21 = a[9];\n  let a22 = a[10];\n  let a23 = a[11];\n\n  if (a !== out) { // If the source and destination differ, copy the unchanged rows\n    out[4]  = a[4];\n    out[5]  = a[5];\n    out[6]  = a[6];\n    out[7]  = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateZ(out, a, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n  let a00 = a[0];\n  let a01 = a[1];\n  let a02 = a[2];\n  let a03 = a[3];\n  let a10 = a[4];\n  let a11 = a[5];\n  let a12 = a[6];\n  let a13 = a[7];\n\n  if (a !== out) { // If the source and destination differ, copy the unchanged last row\n    out[8]  = a[8];\n    out[9]  = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Scaling vector\n * @returns {mat4} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function fromRotation(out, rad, axis) {\n  let x = axis[0], y = axis[1], z = axis[2];\n  let len = Math.sqrt(x * x + y * y + z * z);\n  let s, c, t;\n\n  if (Math.abs(len) < glMatrix.EPSILON) { return null; }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromXRotation(out, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0]  = 1;\n  out[1]  = 0;\n  out[2]  = 0;\n  out[3]  = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromYRotation(out, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0]  = c;\n  out[1]  = 0;\n  out[2]  = -s;\n  out[3]  = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromZRotation(out, rad) {\n  let s = Math.sin(rad);\n  let c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0]  = c;\n  out[1]  = s;\n  out[2]  = 0;\n  out[3]  = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {mat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n\n  return out;\n}\n\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {mat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getScaling(out, mat) {\n  let m11 = mat[0];\n  let m12 = mat[1];\n  let m13 = mat[2];\n  let m21 = mat[4];\n  let m22 = mat[5];\n  let m23 = mat[6];\n  let m31 = mat[8];\n  let m32 = mat[9];\n  let m33 = mat[10];\n\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n\n  return out;\n}\n\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {mat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\nexport function getRotation(out, mat) {\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n  let trace = mat[0] + mat[5] + mat[10];\n  let S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if ((mat[0] > mat[5])&(mat[0] > mat[10])) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @param {vec3} s Scaling vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n  let sx = s[0];\n  let sy = s[1];\n  let sz = s[2];\n\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @param {vec3} s Scaling vector\n * @param {vec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n\n  let sx = s[0];\n  let sy = s[1];\n  let sz = s[2];\n\n  let ox = o[0];\n  let oy = o[1];\n  let oz = o[2];\n\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out[0] * ox + out[4] * oy + out[8] * oz);\n  out[13] = v[1] + oy - (out[1] * ox + out[5] * oy + out[9] * oz);\n  out[14] = v[2] + oz - (out[2] * ox + out[6] * oy + out[10] * oz);\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\nexport function fromQuat(out, q) {\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n\n  let xx = x * x2;\n  let yx = y * x2;\n  let yy = y * y2;\n  let zx = z * x2;\n  let zy = z * y2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function frustum(out, left, right, bottom, top, near, far) {\n  let rl = 1 / (right - left);\n  let tb = 1 / (top - bottom);\n  let nf = 1 / (near - far);\n  out[0] = (near * 2) * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = (near * 2) * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = (far * near * 2) * nf;\n  out[15] = 0;\n  return out;\n}\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspective(out, fovy, aspect, near, far) {\n  let f = 1.0 / Math.tan(fovy / 2);\n  let nf = 1 / (near - far);\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = (2 * far * near) * nf;\n  out[15] = 0;\n  return out;\n}\n\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  let upTan = Math.tan(fov.upDegrees * Math.PI/180.0);\n  let downTan = Math.tan(fov.downDegrees * Math.PI/180.0);\n  let leftTan = Math.tan(fov.leftDegrees * Math.PI/180.0);\n  let rightTan = Math.tan(fov.rightDegrees * Math.PI/180.0);\n  let xScale = 2.0 / (leftTan + rightTan);\n  let yScale = 2.0 / (upTan + downTan);\n\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = ((upTan - downTan) * yScale * 0.5);\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = (far * near) / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n\n/**\n * Generates a orthogonal projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function ortho(out, left, right, bottom, top, near, far) {\n  let lr = 1 / (left - right);\n  let bt = 1 / (bottom - top);\n  let nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} center Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function lookAt(out, eye, center, up) {\n  let x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  let eyex = eye[0];\n  let eyey = eye[1];\n  let eyez = eye[2];\n  let upx = up[0];\n  let upy = up[1];\n  let upz = up[2];\n  let centerx = center[0];\n  let centery = center[1];\n  let centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON &&\n      Math.abs(eyey - centery) < glMatrix.EPSILON &&\n      Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return mat4.identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n\n  return out;\n}\n\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} center Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function targetTo(out, eye, target, up) {\n  let eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n\n  let z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n\n  let len = z0*z0 + z1*z1 + z2*z2;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  let x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n};\n\n/**\n * Returns a string representation of a mat4\n *\n * @param {mat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' +\n          a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' +\n          a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' +\n          a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {mat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2) ))\n}\n\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  out[2] = a[2] + (b[2] * scale);\n  out[3] = a[3] + (b[3] * scale);\n  out[4] = a[4] + (b[4] * scale);\n  out[5] = a[5] + (b[5] * scale);\n  out[6] = a[6] + (b[6] * scale);\n  out[7] = a[7] + (b[7] * scale);\n  out[8] = a[8] + (b[8] * scale);\n  out[9] = a[9] + (b[9] * scale);\n  out[10] = a[10] + (b[10] * scale);\n  out[11] = a[11] + (b[11] * scale);\n  out[12] = a[12] + (b[12] * scale);\n  out[13] = a[13] + (b[13] * scale);\n  out[14] = a[14] + (b[14] * scale);\n  out[15] = a[15] + (b[15] * scale);\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {mat4} a The first matrix.\n * @param {mat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] &&\n         a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] &&\n         a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] &&\n         a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {mat4} a The first matrix.\n * @param {mat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0  = a[0],  a1  = a[1],  a2  = a[2],  a3  = a[3];\n  let a4  = a[4],  a5  = a[5],  a6  = a[6],  a7  = a[7];\n  let a8  = a[8],  a9  = a[9],  a10 = a[10], a11 = a[11];\n  let a12 = a[12], a13 = a[13], a14 = a[14], a15 = a[15];\n\n  let b0  = b[0],  b1  = b[1],  b2  = b[2],  b3  = b[3];\n  let b4  = b[4],  b5  = b[5],  b6  = b[6],  b7  = b[7];\n  let b8  = b[8],  b9  = b[9],  b10 = b[10], b11 = b[11];\n  let b12 = b[12], b13 = b[13], b14 = b[14], b15 = b[15];\n\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n          Math.abs(a3 - b3) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n          Math.abs(a4 - b4) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n          Math.abs(a5 - b5) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a5), Math.abs(b5)) &&\n          Math.abs(a6 - b6) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a6), Math.abs(b6)) &&\n          Math.abs(a7 - b7) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a7), Math.abs(b7)) &&\n          Math.abs(a8 - b8) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a8), Math.abs(b8)) &&\n          Math.abs(a9 - b9) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a9), Math.abs(b9)) &&\n          Math.abs(a10 - b10) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a10), Math.abs(b10)) &&\n          Math.abs(a11 - b11) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a11), Math.abs(b11)) &&\n          Math.abs(a12 - b12) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a12), Math.abs(b12)) &&\n          Math.abs(a13 - b13) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a13), Math.abs(b13)) &&\n          Math.abs(a14 - b14) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a14), Math.abs(b14)) &&\n          Math.abs(a15 - b15) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a15), Math.abs(b15)));\n}\n\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\nexport const sub = subtract;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/src/gl-matrix/mat4.js\n// module id = 45\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\"\nimport * as mat3 from \"./mat3\"\nimport * as vec3 from \"./vec3\"\nimport * as vec4 from \"./vec4\"\n\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {vec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  let s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {quat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\nexport function getAxisAngle(out_axis, q) {\n  let rad = Math.acos(q[3]) * 2.0;\n  let s = Math.sin(rad / 2.0);\n  if (s != 0.0) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n  return rad;\n}\n\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n */\nexport function multiply(out, a, b) {\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = Math.sin(rad), bw = Math.cos(rad);\n\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let by = Math.sin(rad), bw = Math.cos(rad);\n\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bz = Math.sin(rad), bw = Math.cos(rad);\n\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate W component of\n * @returns {quat} out\n */\nexport function calculateW(out, a) {\n  let x = a[0], y = a[1], z = a[2];\n\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n */\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n\n  let omega, cosom, sinom, scale0, scale1;\n\n  // calc cosine\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\n  // adjust signs (if necessary)\n  if ( cosom < 0.0 ) {\n    cosom = -cosom;\n    bx = - bx;\n    by = - by;\n    bz = - bz;\n    bw = - bw;\n  }\n  // calculate coefficients\n  if ( (1.0 - cosom) > 0.000001 ) {\n    // standard case (slerp)\n    omega  = Math.acos(cosom);\n    sinom  = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  }\n  // calculate final values\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n\n  return out;\n}\n\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate inverse of\n * @returns {quat} out\n */\nexport function invert(out, a) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let dot = a0*a0 + a1*a1 + a2*a2 + a3*a3;\n  let invDot = dot ? 1.0/dot : 0;\n\n  // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0*invDot;\n  out[1] = -a1*invDot;\n  out[2] = -a2*invDot;\n  out[3] = a3*invDot;\n  return out;\n}\n\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate conjugate of\n * @returns {quat} out\n */\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {mat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  let fTrace = m[0] + m[4] + m[8];\n  let fRoot;\n\n  if ( fTrace > 0.0 ) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0);  // 2w\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5/fRoot;  // 1/(4w)\n    out[0] = (m[5]-m[7])*fRoot;\n    out[1] = (m[6]-m[2])*fRoot;\n    out[2] = (m[1]-m[3])*fRoot;\n  } else {\n    // |w| <= 1/2\n    let i = 0;\n    if ( m[4] > m[0] )\n      i = 1;\n    if ( m[8] > m[i*3+i] )\n      i = 2;\n    let j = (i+1)%3;\n    let k = (i+2)%3;\n\n    fRoot = Math.sqrt(m[i*3+i]-m[j*3+j]-m[k*3+k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j*3+k] - m[k*3+j]) * fRoot;\n    out[j] = (m[j*3+i] + m[i*3+j]) * fRoot;\n    out[k] = (m[k*3+i] + m[i*3+k]) * fRoot;\n  }\n\n  return out;\n}\n\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\nexport function fromEuler(out, x, y, z) {\n    let halfToRad = 0.5 * Math.PI / 180.0;\n    x *= halfToRad;\n    y *= halfToRad;\n    z *= halfToRad;\n\n    let sx = Math.sin(x);\n    let cx = Math.cos(x);\n    let sy = Math.sin(y);\n    let cy = Math.cos(y);\n    let sz = Math.sin(z);\n    let cz = Math.cos(z);\n\n    out[0] = sx * cy * cz - cx * sy * sz;\n    out[1] = cx * sy * cz + sx * cy * sz;\n    out[2] = cx * cy * sz - sx * sy * cz;\n    out[3] = cx * cy * cz + sx * sy * sz;\n\n    return out;\n}\n\n/**\n * Returns a string representation of a quatenion\n *\n * @param {quat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\n}\n\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {quat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\nexport const clone = vec4.clone;\n\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\nexport const fromValues = vec4.fromValues;\n\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the source quaternion\n * @returns {quat} out\n * @function\n */\nexport const copy = vec4.copy;\n\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\nexport const set = vec4.set;\n\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n * @function\n */\nexport const add = vec4.add;\n\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {quat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\nexport const scale = vec4.scale;\n\n/**\n * Calculates the dot product of two quat's\n *\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\nexport const dot = vec4.dot;\n\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n * @function\n */\nexport const lerp = vec4.lerp;\n\n/**\n * Calculates the length of a quat\n *\n * @param {quat} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport const length = vec4.length;\n\n/**\n * Alias for {@link quat.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Calculates the squared length of a quat\n *\n * @param {quat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\nexport const squaredLength = vec4.squaredLength;\n\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\nexport const normalize = vec4.normalize;\n\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {quat} a The first quaternion.\n * @param {quat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport const exactEquals = vec4.exactEquals;\n\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {quat} a The first vector.\n * @param {quat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport const equals = vec4.equals;\n\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {vec3} a the initial vector\n * @param {vec3} b the destination vector\n * @returns {quat} out\n */\nexport const rotationTo = (function() {\n  let tmpvec3 = vec3.create();\n  let xUnitVec3 = vec3.fromValues(1,0,0);\n  let yUnitVec3 = vec3.fromValues(0,1,0);\n\n  return function(out, a, b) {\n    let dot = vec3.dot(a, b);\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001)\n        vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n})();\n\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {quat} c the third operand\n * @param {quat} d the fourth operand\n * @param {Number} t interpolation amount\n * @returns {quat} out\n */\nexport const sqlerp = (function () {\n  let temp1 = create();\n  let temp2 = create();\n\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n\n    return out;\n  };\n}());\n\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {vec3} view  the vector representing the viewing direction\n * @param {vec3} right the vector representing the local \"right\" direction\n * @param {vec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\nexport const setAxes = (function() {\n  let matr = mat3.create();\n\n  return function(out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n\n    return normalize(out, fromMat3(out, matr));\n  };\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/src/gl-matrix/quat.js\n// module id = 46\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nimport * as glMatrix from \"./common\";\n\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\nexport function create() {\n  let out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = 0;\n  out[1] = 0;\n  return out;\n}\n\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {vec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\nexport function clone(a) {\n  let out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\nexport function fromValues(x, y) {\n  let out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the source vector\n * @returns {vec2} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n};\n\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n};\n\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to ceil\n * @returns {vec2} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n};\n\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to floor\n * @returns {vec2} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n};\n\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n};\n\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n};\n\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to round\n * @returns {vec2} out\n */\nexport function round (out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n};\n\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n};\n\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + (b[0] * scale);\n  out[1] = a[1] + (b[1] * scale);\n  return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n    y = b[1] - a[1];\n  return Math.sqrt(x*x + y*y);\n};\n\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n    y = b[1] - a[1];\n  return x*x + y*y;\n};\n\n/**\n * Calculates the length of a vec2\n *\n * @param {vec2} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  var x = a[0],\n    y = a[1];\n  return Math.sqrt(x*x + y*y);\n};\n\n/**\n * Calculates the squared length of a vec2\n *\n * @param {vec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength (a) {\n  var x = a[0],\n    y = a[1];\n  return x*x + y*y;\n};\n\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to negate\n * @returns {vec2} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n};\n\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to invert\n * @returns {vec2} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n};\n\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to normalize\n * @returns {vec2} out\n */\nexport function normalize(out, a) {\n  var x = a[0],\n    y = a[1];\n  var len = x*x + y*y;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n  }\n  return out;\n};\n\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n};\n\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n};\n\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec2} out\n */\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n    ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n};\n\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n};\n\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2d} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n};\n\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat3} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n};\n\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat4(out, a, m) {\n  let x = a[0];\n  let y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\n}\n\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {vec2} a The first vector.\n * @param {vec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec2} a The first vector.\n * @param {vec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  let a0 = a[0], a1 = a[1];\n  let b0 = b[0], b1 = b[1];\n  return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)));\n}\n\n/**\n * Alias for {@link vec2.length}\n * @function\n */\nexport const len = length;\n\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\nexport const sub = subtract;\n\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\nexport const mul = multiply;\n\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\nexport const div = divide;\n\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\nexport const dist = distance;\n\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function() {\n  let vec = create();\n\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 2;\n    }\n\n    if(!offset) {\n      offset = 0;\n    }\n\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1];\n    }\n\n    return a;\n  };\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/gl-matrix/src/gl-matrix/vec2.js\n// module id = 47\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","import { mat4 } from 'gl-matrix';\nimport Vector3 from '../math/Vector3';\nimport Camera from './Camera';\n\ninterface Options {\n  near?: number;\n  far?: number;\n  fov?: number;\n  position?: Vector3;\n  target?: Vector3;\n  up?: Vector3;\n}\n\nexport default class OrthographicCamera extends Camera {\n  constructor(options: Options) {\n    super(options);\n    this.isOrthographicCamera = true;\n  }\n\n  public updateProjectionMatrix() {\n    mat4.ortho(\n      this.projectionMatrix,\n      -1.0,\n      1.0,\n      -1.0,\n      1.0,\n      this.near,\n      this.far\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cameras/OrthographicCamera.ts","import { mat4 } from 'gl-matrix';\nimport { RENDERER_DEFAULT_RATIO } from '../core/Constants';\nimport Vector3 from '../math/Vector3';\nimport Camera from './Camera';\n\ninterface Options {\n  near?: number;\n  far?: number;\n  fov?: number;\n  position?: Vector3;\n  target?: Vector3;\n  up?: Vector3;\n}\n\nexport default class PerspectiveCamera extends Camera {\n  constructor(options: Options) {\n    super(options);\n    this.isPespectiveCamera = true;\n  }\n\n  public updateProjectionMatrix() {\n    mat4.perspective(\n      this.projectionMatrix,\n      this.fov,\n      this.ratio,\n      this.near,\n      this.far\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/cameras/PerspectiveCamera.ts","import { mat4, vec2, vec3 } from 'gl-matrix';\nimport PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport Face from '../geometry/Face';\nimport Ray from '../math/Ray';\nimport { barycoordFromPoint } from '../math/Utils';\nimport Vector2 from '../math/Vector2';\nimport Vector3 from '../math/Vector3';\nimport Mesh from './Mesh';\nimport Scene from './Scene';\n\nconst inversedProjectionViewMatrix: mat4 = mat4.create();\nconst cameraDirection: vec3 = vec3.create();\nconst directionVector = new Vector3();\n\nlet barycoord: Vector3;\nconst fvA = new Vector3();\nconst fvB = new Vector3();\nconst fvC = new Vector3();\nconst uvA = new Vector2();\nconst uvB = new Vector2();\nconst uvC = new Vector2();\n\nexport default class RayCaster {\n  public ray: Ray;\n  public near: number;\n  public far: number;\n\n  constructor(origin: Vector3, direction: Vector3, near: number, far: number) {\n    this.ray = new Ray();\n    this.near = near || 0;\n    this.far = far || Infinity;\n  }\n\n  public setFromCamera(\n    coords: Vector2,\n    scene: Scene,\n    camera: PerspectiveCamera,\n    object: Mesh\n  ) {\n    if (camera && camera.isPespectiveCamera) {\n      this.ray.origin.copy(camera.position);\n\n      vec3.copy(cameraDirection, [coords.x, coords.y, 0.5]);\n\n      mat4.multiply(\n        inversedProjectionViewMatrix,\n        camera.projectionMatrix,\n        camera.worldInverseMatrix\n      );\n      mat4.invert(inversedProjectionViewMatrix, inversedProjectionViewMatrix);\n\n      vec3.transformMat4(\n        cameraDirection,\n        cameraDirection,\n        inversedProjectionViewMatrix\n      );\n\n      vec3.sub(cameraDirection, cameraDirection, camera.position.v);\n      vec3.normalize(cameraDirection, cameraDirection);\n\n      directionVector.set(\n        cameraDirection[0],\n        cameraDirection[1],\n        cameraDirection[2]\n      );\n\n      this.ray.direction.copy(directionVector);\n    }\n  }\n\n  public uvIntersection(point: Vector3, v0: Vector3, v1: Vector3, v2: Vector3) {\n    barycoord = barycoordFromPoint(point.v, v0.v, v1.v, v2.v);\n    uvA.scale(barycoord.x);\n    uvB.scale(barycoord.y);\n    uvC.scale(barycoord.z);\n    uvA.add(uvB).add(uvC);\n    return uvA.clone();\n  }\n\n  public intersectObject(object: Mesh) {\n    let intersect;\n    let uv;\n    for (const face of object.geometry.faces) {\n      vec3.copy(fvA.v, face.vertices[0].v);\n      vec3.copy(fvB.v, face.vertices[1].v);\n      vec3.copy(fvC.v, face.vertices[2].v);\n\n      // Multiply vertices by object matrix\n      vec3.transformMat4(fvA.v, fvA.v, object.modelMatrix);\n      vec3.transformMat4(fvB.v, fvB.v, object.modelMatrix);\n      vec3.transformMat4(fvC.v, fvC.v, object.modelMatrix);\n\n      intersect = this.ray.intersectTriangle(fvA, fvB, fvC);\n\n      if (intersect) {\n        // Get uv intersection\n        vec2.copy(uvA.v, object.geometry.uvs[face.uvs[0]].v);\n        vec2.copy(uvB.v, object.geometry.uvs[face.uvs[1]].v);\n        vec2.copy(uvC.v, object.geometry.uvs[face.uvs[2]].v);\n        uv = this.uvIntersection(intersect, fvA, fvB, fvC);\n        break;\n      }\n    }\n\n    return intersect ? { point: intersect, uv } : null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Raycaster.ts","import { mat4 } from 'gl-matrix';\nimport Camera from '../cameras/Camera';\nimport OrthorgraphicCamera from '../cameras/OrthographicCamera';\nimport PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport Scene from '../core/Scene';\nimport { log, warn } from '../utils/Console';\nimport Detect from '../utils/Detect';\nimport * as Capabilities from './Capabilities';\nimport {\n  RENDERER_DEFAULT_CONTEXT,\n  RENDERER_DEFAULT_HEIGHT,\n  RENDERER_DEFAULT_WIDTH,\n  WEBGL2_CONTEXT,\n  WEBGL_CONTEXT\n} from './Constants';\nimport * as GL from './GL';\nimport * as UniformBuffers from './UniformBuffers';\nconst config = require('../../package.json');\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\ninterface Options {\n  width?: number;\n  height?: number;\n  ratio?: number;\n  preserveDrawingBuffer?: boolean;\n  pixelRatio?: number;\n  prefferedContext?: string;\n}\n\ninterface Viewport {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\ninterface ClearColor {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n}\n\nexport default class Renderer {\n  public width: number;\n  public height: number;\n  public ratio: number;\n  public preserveDrawingBuffer: boolean;\n  public pixelRatio: number;\n  public prefferedContext: string;\n  public canvas: HTMLCanvasElement;\n  public viewport: Viewport;\n  public autoClear: boolean;\n  public clearColor: ClearColor;\n\n  constructor(options?: Options) {\n    // Default renderer settings\n    this.width = RENDERER_DEFAULT_WIDTH;\n    this.height = RENDERER_DEFAULT_HEIGHT;\n    this.ratio = RENDERER_DEFAULT_WIDTH / RENDERER_DEFAULT_HEIGHT;\n    this.preserveDrawingBuffer = false;\n    this.pixelRatio = 1;\n    this.prefferedContext = RENDERER_DEFAULT_CONTEXT;\n    this.autoClear = true;\n    this.clearColor = { r: 0, g: 0, b: 0, a: 1 };\n\n    // Apply defaults\n    Object.assign(this, options);\n\n    // Create canvas\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n\n    // Try initialising gl\n    const attributes = {\n      preserveDrawingBuffer: this.preserveDrawingBuffer\n    };\n\n    const detect = Detect();\n\n    if (detect) {\n      let contextType;\n      if (detect.webgl2 && this.prefferedContext === WEBGL2_CONTEXT) {\n        contextType = WEBGL2_CONTEXT;\n        const _gl = this.canvas.getContext(\n          'webgl2',\n          attributes\n        ) as WebGL2RenderingContext;\n        GL.set(_gl, contextType);\n      } else {\n        contextType = WEBGL_CONTEXT;\n        const _gl =\n          this.canvas.getContext('webgl', attributes) as WebGLRenderingContext ||\n          this.canvas.getContext(\n            'experimental-webgl',\n            attributes\n          ) as WebGLRenderingContext;\n        GL.set(_gl, contextType);\n      }\n    } else {\n      warn('Webgl not supported');\n      return;\n    }\n\n    log(\n      `%c${config.name} ${config.version} webgl${GL.webgl2 ? 2 : ''}`,\n      'padding: 1px; background: #222; color: #ff00ff'\n    );\n\n    gl = GL.get();\n\n    // Log Capabilities of gpu\n    Capabilities.set(gl);\n\n    // Setup global uniform buffers\n    if (GL.webgl2) {\n      UniformBuffers.setup();\n    }\n\n    // log(\"capabilities\", Capabilities.capabilities);\n    // log(\"extensions\", Capabilities.extensions);\n\n    this.viewport = {\n      x: 0,\n      y: 0,\n      width: gl.drawingBufferWidth,\n      height: gl.drawingBufferHeight\n    };\n\n    this.setClearColor();\n    gl.enable(gl.DEPTH_TEST);\n  }\n\n  public setClearColor(r = 0, g = 0, b = 0, a = 1) {\n    this.clearColor.r = r;\n    this.clearColor.g = g;\n    this.clearColor.b = b;\n    this.clearColor.a = a;\n  }\n\n  public setSize(width: number, height: number) {\n    const newWidth = width * this.pixelRatio;\n    const newHeight = height * this.pixelRatio;\n\n    if (newWidth !== this.width || newHeight !== this.height) {\n      this.width = width * this.pixelRatio;\n      this.height = height * this.pixelRatio;\n      this.ratio = this.width / this.height;\n\n      this.canvas.width = this.width;\n      this.canvas.height = this.height;\n\n      this.canvas.style.width = `${width}px`;\n      this.canvas.style.height = `${height}px`;\n\n      this.setViewport(0, 0, width, height);\n    }\n  }\n\n  public setDevicePixelRatio(ratio = 1) {\n    this.pixelRatio = ratio || 1;\n    this.setSize(this.width, this.height);\n  }\n\n  public setSissorTest(enable = false) {\n    gl = GL.get();\n    if (enable) {\n      gl.enable(gl.SCISSOR_TEST);\n    } else {\n      gl.disable(gl.SCISSOR_TEST);\n    }\n  }\n\n  public setSissor(x: number, y: number, width: number, height: number) {\n    gl = GL.get();\n    gl.scissor(\n      x * this.pixelRatio,\n      y * this.pixelRatio,\n      width * this.pixelRatio,\n      height * this.pixelRatio\n    );\n  }\n\n  public setViewport(x: number, y: number, width: number, height: number) {\n    this.viewport.x = x * this.pixelRatio;\n    this.viewport.y = y * this.pixelRatio;\n    this.viewport.width = width * this.pixelRatio;\n    this.viewport.height = height * this.pixelRatio;\n  }\n\n  public render(\n    scene: Scene,\n    camera: Camera | PerspectiveCamera | OrthorgraphicCamera\n  ) {\n    gl = GL.get();\n\n    gl.viewport(\n      this.viewport.x,\n      this.viewport.y,\n      this.viewport.width,\n      this.viewport.height\n    );\n\n    if (this.autoClear) {\n      gl.clearColor(\n        this.clearColor.r,\n        this.clearColor.g,\n        this.clearColor.b,\n        this.clearColor.a\n      );\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    }\n\n    // Update the scene\n    scene.update();\n\n    // Draw the scene objects\n    if (gl instanceof WebGL2RenderingContext) {\n      // Update global uniform buffers\n      UniformBuffers.updateProjectionView(gl, camera.projectionMatrix);\n    }\n\n    // Render the scene objects\n    scene.objects.forEach(child => {\n      if (child.isInstanced) {\n        child.drawInstance(camera);\n      } else {\n        child.draw(camera);\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Renderer.ts","module.exports = {\n\t\"name\": \"ixviii.medium\",\n\t\"version\": \"0.3.0\",\n\t\"description\": \"Progressive WebGL toolkit for art.\",\n\t\"main\": \"lib/ixviii.medium.js\",\n\t\"scripts\": {\n\t\t\"start\": \"concurrently 'npm run server' 'npm run examples:js' 'npm run examples:html'\",\n\t\t\"server\": \"live-server ./examples --port 3000 --quiet --watch ./examples --watch ./src --wait 0\",\n\t\t\"examples:js\": \"webpack --config webpack.config.examples.js --colors --watch\",\n\t\t\"examples:html\": \"node ./pug.config.js\",\n\t\t\"examples:build\": \"NODE_ENV=production webpack --config webpack.config.examples.js --colors; node ./pug.config.js\",\n\t\t\"build\": \"NODE_ENV=production npm run lint; webpack --config webpack.config.build.js --colors; NODE_ENV=production webpack --config webpack.config.build.js --colors\",\n\t\t\"prepublish\": \"npm run docs; npm run build\",\n\t\t\"formatting\": \"prettier --write --single-quote --print-width 80 './src/**/*.ts'\",\n\t\t\"formatting:examples\": \"prettier --write --single-quote --print-width 80 './examples/src/js/**/*.js'\",\n\t\t\"lint:examples\": \"eslint --ext .js ./examples/src ./internals --cache\",\n\t\t\"lint:src\": \"tslint --fix ./src/**/*.ts\",\n\t\t\"lint\": \"npm run lint:src; npm run lint:examples;\",\n\t\t\"docs\": \"typedoc --target es6 --tsconfig ./tsconfig.json --ignoreCompilerErrors --theme default --name Medium --out ./docs ./src\",\n\t\t\"precommit\": \"npm run lint\"\n\t},\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"https://github.com/amelierosser/medium.git\"\n\t},\n\t\"author\": \"Amelie Rosser <amelierosser1986@gmail.com> (https://www.ixviii.io)\",\n\t\"license\": \"MIT\",\n\t\"bugs\": {\n\t\t\"url\": \"https://github.com/amelierosser/medium/issues\"\n\t},\n\t\"homepage\": \"https://github.com/amelierosser/medium\",\n\t\"devDependencies\": {\n\t\t\"@types/gl-matrix\": \"^2.2.34\",\n\t\t\"@types/webgl2\": \"^0.0.2\",\n\t\t\"babel-cli\": \"^6.26.0\",\n\t\t\"babel-eslint\": \"^7.2.3\",\n\t\t\"babel-loader\": \"^7.1.2\",\n\t\t\"babel-plugin-module-resolver\": \"^2.7.1\",\n\t\t\"babel-plugin-transform-class-properties\": \"^6.24.1\",\n\t\t\"babel-preset-env\": \"^1.6.0\",\n\t\t\"babel-preset-minify\": \"^0.2.0\",\n\t\t\"babili-webpack-plugin\": \"^0.1.2\",\n\t\t\"concurrently\": \"^3.5.0\",\n\t\t\"eslint\": \"^4.6.1\",\n\t\t\"eslint-config-airbnb\": \"^15.1.0\",\n\t\t\"eslint-config-prettier\": \"^2.4.0\",\n\t\t\"eslint-plugin-compat\": \"^1.0.4\",\n\t\t\"eslint-plugin-import\": \"^2.7.0\",\n\t\t\"eslint-plugin-jsx-a11y\": \"^6.0.2\",\n\t\t\"eslint-plugin-prettier\": \"^2.2.0\",\n\t\t\"eslint-plugin-react\": \"^7.3.0\",\n\t\t\"eslint-plugin-redux-saga\": \"^0.4.0\",\n\t\t\"husky\": \"^0.14.3\",\n\t\t\"install\": \"^0.10.1\",\n\t\t\"json-loader\": \"^0.5.7\",\n\t\t\"live-server\": \"^1.2.0\",\n\t\t\"prettier\": \"^1.6.1\",\n\t\t\"pug-cli\": \"^1.0.0-alpha6\",\n\t\t\"redux-saga\": \"^0.15.6\",\n\t\t\"ts-loader\": \"^2.3.4\",\n\t\t\"tslint\": \"^5.7.0\",\n\t\t\"tslint-config-prettier\": \"^1.5.0\",\n\t\t\"typedoc\": \"^0.8.0\",\n\t\t\"typescript\": \"^2.5.2\",\n\t\t\"webpack\": \"^3.5.6\"\n\t},\n\t\"dependencies\": {\n\t\t\"@types/dat-gui\": \"^0.6.3\",\n\t\t\"bezier-js\": \"^2.2.3\",\n\t\t\"dat-gui\": \"^0.5.0\",\n\t\t\"file-name\": \"^0.1.0\",\n\t\t\"gl-matrix\": \"^2.4.0\",\n\t\t\"parse-hdr\": \"^1.0.0\",\n\t\t\"query-string\": \"^5.0.0\",\n\t\t\"shelljs\": \"^0.7.8\",\n\t\t\"simplex-noise\": \"^2.3.0\",\n\t\t\"uuid\": \"^3.1.0\",\n\t\t\"webgl-obj-loader\": \"^0.1.1\"\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./package.json\n// module id = 52\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","import { mat4 } from 'gl-matrix';\nimport Camera from '../cameras/Camera';\nimport OrthographicCamera from '../cameras/OrthographicCamera';\nimport PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport * as GL from './GL';\nimport Scene from './Scene';\nimport * as UniformBuffers from './UniformBuffers';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\ninterface Options {\n  width?: number;\n  height?: number;\n  ratio?: number;\n  pixelRatio?: number;\n}\n\ninterface Viewport {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport default class RenderTarget {\n  public width: number;\n  public height: number;\n  public ratio: number;\n  public pixelRatio: number;\n  public _frameBuffer: WebGLFramebuffer;\n  public _renderBuffer: WebGLRenderbuffer;\n  public texture: WebGLTexture;\n  public viewport: Viewport;\n  public autoClear: boolean;\n\n  constructor(options: Options) {\n    this.pixelRatio = options.pixelRatio || 1;\n    this.width = options.width * this.pixelRatio;\n    this.height = options.height * this.pixelRatio;\n    this.ratio = this.width / this.height;\n    this.viewport = {\n      x: 0,\n      y: 0,\n      width: this.width,\n      height: this.height\n    };\n    this.autoClear = true;\n\n    this.setClearColor();\n\n    gl = GL.get();\n    this._frameBuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\n    this.texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(\n      gl.TEXTURE_2D,\n      gl.TEXTURE_MIN_FILTER,\n      gl.LINEAR_MIPMAP_NEAREST\n    );\n    // gl.generateMipmap(gl.TEXTURE_2D);\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      gl.RGBA,\n      this.width,\n      this.height,\n      0,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      null\n    );\n    this._renderBuffer = gl.createRenderbuffer();\n    gl.bindRenderbuffer(gl.RENDERBUFFER, this._renderBuffer);\n    gl.renderbufferStorage(\n      gl.RENDERBUFFER,\n      gl.DEPTH_COMPONENT16,\n      this.width,\n      this.height\n    );\n    gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      this.texture,\n      0\n    );\n    gl.framebufferRenderbuffer(\n      gl.FRAMEBUFFER,\n      gl.DEPTH_ATTACHMENT,\n      gl.RENDERBUFFER,\n      this._renderBuffer\n    );\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  }\n\n  public setClearColor(r = 0, g = 0, b = 0, a = 1) {\n    gl = GL.get();\n    gl.clearColor(r, g, b, a);\n  }\n\n  public setSize(width: number, height: number) {\n    const newWidth = width * this.pixelRatio;\n    const newHeight = height * this.pixelRatio;\n\n    if (newWidth !== this.width || newHeight !== this.height) {\n      this.width = width * this.pixelRatio;\n      this.height = height * this.pixelRatio;\n      this.ratio = this.width / this.height;\n\n      gl.bindTexture(gl.TEXTURE_2D, this.texture);\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        0,\n        gl.RGBA,\n        this.width,\n        this.height,\n        0,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        null\n      );\n      gl.bindTexture(gl.TEXTURE_2D, null);\n      gl.bindRenderbuffer(gl.RENDERBUFFER, this._renderBuffer);\n      gl.renderbufferStorage(\n        gl.RENDERBUFFER,\n        gl.DEPTH_COMPONENT16,\n        this.width,\n        this.height\n      );\n      gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n\n      this.setViewport(0, 0, width, height);\n    }\n  }\n\n  public setSissorTest(enable = false) {\n    gl = GL.get();\n    if (enable) {\n      gl.enable(gl.SCISSOR_TEST);\n    } else {\n      gl.disable(gl.SCISSOR_TEST);\n    }\n  }\n\n  public setSissor(x: number, y: number, width: number, height: number) {\n    gl = GL.get();\n    gl.scissor(\n      x * this.pixelRatio,\n      y * this.pixelRatio,\n      width * this.pixelRatio,\n      height * this.pixelRatio\n    );\n  }\n\n  public setViewport(x: number, y: number, width: number, height: number) {\n    this.viewport.x = x * this.pixelRatio;\n    this.viewport.y = y * this.pixelRatio;\n    this.viewport.width = width * this.pixelRatio;\n    this.viewport.height = height * this.pixelRatio;\n  }\n\n  public render(scene: Scene, camera: PerspectiveCamera | OrthographicCamera) {\n    gl = GL.get();\n\n    gl.viewport(\n      this.viewport.x,\n      this.viewport.y,\n      this.viewport.width,\n      this.viewport.height\n    );\n\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\n\n    if (this.autoClear) {\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    }\n\n    // Update the scene\n    scene.update();\n\n    if (gl instanceof WebGL2RenderingContext) {\n      // Update global uniform buffers\n      UniformBuffers.updateProjectionView(gl, camera.projectionMatrix);\n    }\n\n    // Render the scene objects\n    scene.objects.forEach(child => {\n      if (child.isInstanced) {\n        child.drawInstance(camera);\n      } else {\n        child.draw(camera);\n      }\n    });\n\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.generateMipmap(gl.TEXTURE_2D);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    // Reset\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/RenderTarget.ts","import { mat4 } from 'gl-matrix';\nimport Mesh from '../core/Mesh';\nimport Lights from '../lights/Lights';\n\nexport default class Scene {\n  public objects: Mesh[];\n  public ambientLight: Lights;\n  public pointLights: Lights;\n  public directionalLights: Lights;\n\n  constructor() {\n    this.objects = [];\n    this.pointLights = undefined;\n    this.directionalLights = undefined;\n  }\n\n  public add(object: Mesh) {\n    this.objects.push(object);\n  }\n\n  public remove(object: Mesh, dispose = false) {\n    const objectIndex = this.objects.indexOf(object);\n    if (objectIndex !== -1) {\n      this.objects.splice(objectIndex, 1);\n      if (dispose) {\n        object.dispose();\n        object = undefined;\n      }\n    }\n  }\n\n  public update() {\n    if (this.ambientLight) {\n      this.ambientLight.update();\n      this.ambientLight.bind();\n    }\n    if (this.directionalLights) {\n      this.directionalLights.update();\n      this.directionalLights.bind();\n    }\n    if (this.pointLights) {\n      this.pointLights.update();\n      this.pointLights.bind();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Scene.ts","import EsVersion from './chunks/EsVersion.glsl';\n\nconst basicFragmentShaderEs300 = `${EsVersion}\n\t#HOOK_PRECISION\n\t#HOOK_DEFINES\n\n\tlayout(std140) uniform;\n\n\tin vec3 vDiffuse;\n\tin vec3 vPosition;\n\n\t#ifdef normals\n\tin vec3 vNormal;\n\t#endif\n\n\t#ifdef uv\n\tin vec2 vUv;\n\t#endif\n\n\tout vec4 outgoingColor;\n\n\t#HOOK_FRAGMENT_PRE\n\n\tvoid main(void){\n\n\t\tvec3 color = vDiffuse;\n\n\t\t#ifdef normals\n\t\tvec3 normal = normalize(vNormal);\n\t\t#endif\n\n\t\t#HOOK_FRAGMENT_MAIN\n\n\t\toutgoingColor = vec4(color.rgb, 1.0);\n\n\t\t#HOOK_FRAGMENT_END\n\t}\n`;\n\nconst basicFragmentShaderEs100 = `\n\t#HOOK_PRECISION\n\t#HOOK_DEFINES\n\n\tvarying vec3 vDiffuse;\n\tvarying vec3 vPosition;\n\n\t#ifdef normals\n\tvarying vec3 vNormal;\n\t#endif\n\n\t#ifdef uv\n\tvarying vec2 vUv;\n\t#endif\n\n\t#HOOK_FRAGMENT_PRE\n\n\tvoid main(void){\n\n\t\tvec3 color = vDiffuse;\n\n\t\t#ifdef normals\n\t\tvec3 normal = normalize(vNormal);\n\t\t#endif\n\n\t\t#HOOK_FRAGMENT_MAIN\n\n\t\tgl_FragColor = vec4(color.rgb, 1.0);\n\n\t\t#HOOK_FRAGMENT_END\n\t}\n`;\n\nexport { basicFragmentShaderEs300, basicFragmentShaderEs100 };\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/Basic.glsl.ts","import {\n  ambientLightEs100,\n  ambientLightEs300\n} from './chunks/AmbientLight.glsl';\nimport {\n  directionalLightsEs100,\n  directionalLightsEs300\n} from './chunks/DirectionalLights.glsl';\nimport EsVersion from './chunks/EsVersion.glsl';\nimport { lambertEs100, lambertEs300 } from './chunks/Lambert.glsl';\n\nconst lambertFragmentShaderEs300 = `${EsVersion}\n\t#HOOK_PRECISION\n\t#HOOK_DEFINES\n\n\tlayout(std140) uniform;\n\n\tin vec3 vDiffuse;\n\tin vec3 vPosition;\n\n\t#ifdef normals\n\tin vec3 vNormal;\n\t#endif\n\n\t#ifdef uv\n\tin vec2 vUv;\n\t#endif\n\n\t#ifdef ambientLight\n\t${ambientLightEs300}\n\t#endif\n\n\t#ifdef directionalLights\n\t${directionalLightsEs300}\n\t${lambertEs300}\n\t#endif\n\n\tout vec4 outgoingColor;\n\n\n\t#HOOK_FRAGMENT_PRE\n\n\tvoid main(void){\n\n\t\tvec3 color = vec3(0.0);\n\n\t\t#ifdef normals\n\t\tvec3 normal = normalize(vNormal);\n\t\t#endif\n\n\t\t#HOOK_FRAGMENT_MAIN\n\n\t\t#ifdef directionalLights\n\t\tfor (int i = 0; i < #HOOK_DIRECTIONAL_LIGHTS; i++) {\n\t\t\tcolor += CalculateDirectionalLight(uDirectionalLights[i], normal);\n\t\t}\n\t\t#endif\n\n\t\toutgoingColor = vec4(color.rgb, 1.0);\n\n\t\t#HOOK_FRAGMENT_END\n\t}\n`;\n\nconst lambertFragmentShaderEs100 = `\n\t#HOOK_PRECISION\n\t#HOOK_DEFINES\n\n\tvarying vec3 vDiffuse;\n\tvarying vec3 vPosition;\n\n\t#ifdef normals\n\tvarying vec3 vNormal;\n\t#endif\n\n\t#ifdef uv\n\tvarying vec2 vUv;\n\t#endif\n\n\t#ifdef ambientLight\n\t${ambientLightEs100}\n\t#endif\n\n\t#ifdef directionalLights\n\t${directionalLightsEs100}\n\t${lambertEs100}\n\t#endif\n\n\t#HOOK_FRAGMENT_PRE\n\n\tvoid main(void){\n\n\t\tvec3 color = vec3(0.0);\n\n\t\t#ifdef normals\n\t\tvec3 normal = normalize(vNormal);\n\t\t#endif\n\n\t\t#HOOK_FRAGMENT_MAIN\n\n\t\t#ifdef directionalLights\n\t\tfor (int i = 0; i < #HOOK_DIRECTIONAL_LIGHTS; i++) {\n\t\t\tcolor += CalculateDirectionalLight(uDirectionalLights[i], normal);\n\t\t}\n\t\t#endif\n\n\t\tgl_FragColor = vec4(color.rgb, 1.0);\n\n\t\t#HOOK_FRAGMENT_END\n\t}\n`;\n\nexport { lambertFragmentShaderEs300, lambertFragmentShaderEs100 };\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/Lambert.glsl.ts","import {\n  ambientLightEs100,\n  ambientLightEs300\n} from './chunks/AmbientLight.glsl';\nimport {\n  directionalLightsEs100,\n  directionalLightsEs300\n} from './chunks/DirectionalLights.glsl';\nimport EsVersion from './chunks/EsVersion.glsl';\nimport { lambertEs100, lambertEs300 } from './chunks/Lambert.glsl';\nimport { phongEs100, phongEs300 } from './chunks/Phong.glsl';\nimport { pointLightsEs100, pointLightsEs300 } from './chunks/PointLights.glsl';\n\nconst phongFragmentShaderEs300 = `${EsVersion}\n\t#HOOK_PRECISION\n\t#HOOK_DEFINES\n\n\tlayout(std140) uniform;\n\n\tin vec3 vDiffuse;\n\tin vec3 vPosition;\n\tin vec4 vWorldPosition;\n\n\tuniform vec3 uCameraPosition;\n\n\t#ifdef normals\n\tin vec3 vNormal;\n\t#endif\n\n\t#ifdef uv\n\tin vec2 vUv;\n\t#endif\n\n\t#ifdef ambientLight\n\t${ambientLightEs300}\n\t#endif\n\n\t#ifdef directionalLights\n\t${directionalLightsEs300}\n\t${lambertEs300}\n\t#endif\n\n\t#ifdef pointLights\n\t${pointLightsEs300}\n\t${phongEs300}\n\t#endif\n\n\tout vec4 outgoingColor;\n\n\t#HOOK_FRAGMENT_PRE\n\n\tvoid main(void){\n\n\t\tvec3 color = vec3(0.0);\n\n\t\t#ifdef normals\n\t\tvec3 normal = normalize(vNormal);\n\t\t#endif\n\n\t\t#HOOK_FRAGMENT_MAIN\n\n\t\t#ifdef directionalLights\n\t\tfor (int i = 0; i < #HOOK_DIRECTIONAL_LIGHTS; i++) {\n\t\t\tcolor += CalculateDirectionalLight(uDirectionalLights[i], normal);\n\t\t}\n\t\t#endif\n\n\t\t#ifdef pointLights\n\t\tfor (int i = 0; i < #HOOK_POINT_LIGHTS; i++) {\n\t\t\tcolor += CalculatePointLight(uPointLights[i], normal);\n\t\t}\n\t\t#endif\n\n\t\toutgoingColor = vec4(color.rgb, 1.0);\n\n\t\t#HOOK_FRAGMENT_END\n\t}\n`;\n\nconst phongFragmentShaderEs100 = `\n\t#HOOK_PRECISION\n\t#HOOK_DEFINES\n\n\tvarying vec3 vDiffuse;\n\tvarying vec3 vPosition;\n\tvarying vec4 vWorldPosition;\n\n\t#ifdef normals\n\tvarying vec3 vNormal;\n\t#endif\n\n\t#ifdef uv\n\tvarying vec2 vUv;\n\t#endif\n\n\t#ifdef ambientLight\n\t${ambientLightEs100}\n\t#endif\n\n\t#ifdef directionalLights\n\t${directionalLightsEs100}\n\t${lambertEs100}\n\t#endif\n\n\t#ifdef pointLights\n\t${pointLightsEs100}\n\t${phongEs100}\n\t#endif\n\n\t#HOOK_FRAGMENT_PRE\n\n\tvoid main(void){\n\n\t\tvec3 color = vec3(0.0);\n\n\t\t#ifdef normals\n\t\tvec3 normal = normalize(vNormal);\n\t\t#endif\n\n\t\t#HOOK_FRAGMENT_MAIN\n\n\t\t#ifdef directionalLights\n\t\tfor (int i = 0; i < #HOOK_DIRECTIONAL_LIGHTS; i++) {\n\t\t\tcolor += CalculateDirectionalLight(uDirectionalLights[i], normal);\n\t\t}\n\t\t#endif\n\n\t\t#ifdef pointLights\n\t\tfor (int i = 0; i < #HOOK_POINT_LIGHTS; i++) {\n\t\t\tcolor += CalculatePointLight(uPointLights[i], normal);\n\t\t}\n\t\t#endif\n\n\t\tgl_FragColor = vec4(color.rgb, 1.0);\n\n\t\t#HOOK_FRAGMENT_END\n\t}\n`;\n\nexport { phongFragmentShaderEs300, phongFragmentShaderEs100 };\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/Phong.glsl.ts","// https://learnopengl.com/#!Lighting/Multiple-lights\n\nconst phongEs300 = `\n\tvec3 CalculatePointLight(PointLight light, vec3 normal) {\n\t\tvec3 lightDirection = normalize(light.position.xyz - vWorldPosition.xyz);\n\n\t\t// diffuse shading\n\t\tfloat diff = max(dot(normal, lightDirection), 0.0);\n\t\t// specular shading\n\t\tvec3 reflectDirection = reflect(-lightDirection, normal);\n\n\t\t// Fix the spec from showing on the backside by multiplying it by the lambert term\n\t\tfloat spec = diff * pow(max(dot(lightDirection, reflectDirection), 0.0), light.shininess.x);\n\t\t// attenuation\n\t\tfloat constant = 1.0;\n\t\tfloat linear = 0.09;\n\t\tfloat quadratic = 0.032;\n\n\t\tfloat dist = length(light.position.xyz);\n\t\tfloat attenuation = 1.0 / (constant + linear * dist + quadratic * (dist * dist));\n\n\t\tvec3 ambientColor = vec3(0.5);\n\t\tfloat ambientIntensity = 0.5;\n\n\t\t#ifdef ambientLight\n\t\tambientColor = uAmbientLight.color.rgb;\n\t\tambientIntensity = uAmbientLight.intensity.x;\n\t\t#endif\n\n\t\t// combine results\n\t\tvec3 ambient = (ambientColor * ambientIntensity) * vDiffuse;\n\t\tvec3 diffuse = diff * vDiffuse;\n\t\tvec3 specular = light.specularColor.rgb * spec * light.shininess.x;\n\t\tambient  *= attenuation;\n\t\tdiffuse  *= attenuation;\n\t\tspecular *= attenuation;\n\t\treturn (ambient + diffuse + specular);\n\t}\n`;\n\nconst phongEs100 = `\n\tvec3 CalculatePointLight(PointLight light, vec3 normal) {\n\t\tvec3 lightDirection = normalize(light.position - vWorldPosition.xyz);\n\n\t\t// diffuse shading\n\t\tfloat diff = max(dot(normal, lightDirection), 0.0);\n\t\t// specular shading\n\t\tvec3 reflectDirection = reflect(-lightDirection, normal);\n\n\t\t// Fix the spec from showing on the backside by multiplying it by the lambert term\n\t\tfloat spec = diff * pow(max(dot(lightDirection, reflectDirection), 0.0), light.shininess);\n\t\t// attenuation\n\t\tfloat constant = 1.0;\n\t\tfloat linear = 0.09;\n\t\tfloat quadratic = 0.032;\n\n\t\tfloat dist = length(light.position);\n\t\tfloat attenuation = 1.0 / (constant + linear * dist + quadratic * (dist * dist));\n\n\t\tvec3 ambientColor = vec3(0.5);\n\t\tfloat ambientIntensity = 0.5;\n\n\t\t#ifdef ambientLight\n\t\tambientColor = uAmbientLight.color;\n\t\tambientIntensity = uAmbientLight.intensity;\n\t\t#endif\n\n\t\t// combine results\n\t\tvec3 ambient = (ambientColor * ambientIntensity) * vDiffuse;\n\t\tvec3 diffuse = diff * vDiffuse;\n\t\tvec3 specular = light.specularColor * spec * light.shininess;\n\t\tambient  *= attenuation;\n\t\tdiffuse  *= attenuation;\n\t\tspecular *= attenuation;\n\t\treturn (ambient + diffuse + specular);\n\t}\n`;\n\nexport { phongEs300, phongEs100 };\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/Phong.glsl.ts","import EsVersion from './chunks/EsVersion.glsl';\nimport { definePI, definePITwo } from './chunks/Math.glsl';\nimport ProjectionView from './chunks/ProjectionView.glsl';\n\nconst vertexShaderEs300 = `${EsVersion}\n\t${definePI}\n\t${definePITwo}\n\t#HOOK_DEFINES\n\n\tlayout(std140) uniform;\n\n\t${ProjectionView}\n\n\tuniform mat4 uProjectionMatrix;\n\tuniform mat4 uModelViewMatrix;\n\tuniform mat4 uModelMatrix;\n\tuniform mat3 uNormalMatrix;\n\n\tin vec3 aVertexPosition;\n\tout vec3 vPosition;\n\tout vec4 vWorldPosition;\n\n\t// Camera\n\tuniform vec3 uCameraPosition;\n\n\t#ifdef vertexColors\n\tin vec3 aVertexColor;\n\t#endif\n\n\t// Color\n\tuniform vec3 uDiffuse;\n\tout vec3 vDiffuse;\n\n\t// Normal\n\t#ifdef normals\n\tin vec3 aVertexNormal;\n\tout vec3 vNormal;\n\t#endif\n\n\t// Uv\n\t#ifdef uv\n\tin vec2 aUv;\n\tout vec2 vUv;\n\t#endif\n\n\t#HOOK_VERTEX_PRE\n\n\tvoid main(void){\n\n\t\tvDiffuse = uDiffuse;\n\n\t\t// Override for custom positioning\n\t\tvec3 transformed = vec3(0.0);\n\n\t\t#ifdef vertexColors\n\t\tvDiffuse = aVertexColor;\n\t\t#endif\n\n\t\t#ifdef uv\n\t\tvUv = aUv;\n\t\t#endif\n\n\t\t#HOOK_VERTEX_MAIN\n\n\t\t#ifdef normals\n\t\tvNormal = uNormalMatrix * aVertexNormal;\n\t\t#endif\n\n\t\t// Vertex position + offset\n\t\tvPosition = aVertexPosition + transformed;\n\n\t\t// Calculate world position of vertex with transformed\n\t\tvWorldPosition = uModelMatrix * vec4(aVertexPosition + transformed, 1.0);\n\n\t\tgl_Position = uProjectionView.projectionMatrix * uModelViewMatrix * vec4(vPosition, 1.0);\n\n\t\t#HOOK_VERTEX_END\n\t}\n`;\n\nconst vertexShaderEs100 = `\n\n\t${definePI}\n\t${definePITwo}\n\t#HOOK_DEFINES\n\n\t// Position\n\tuniform mat4 uProjectionMatrix;\n\tuniform mat4 uModelViewMatrix;\n\tuniform mat4 uModelMatrix;\n\tuniform mat3 uNormalMatrix;\n\tattribute vec3 aVertexPosition;\n\tvarying vec3 vPosition;\n\tvarying vec4 vWorldPosition;\n\n\t// Camera\n\tuniform vec3 uCameraPosition;\n\n\t#ifdef vertexColors\n\tattribute vec3 aVertexColor;\n\t#endif\n\n\t// Color\n\tuniform vec3 uDiffuse;\n\tvarying vec3 vDiffuse;\n\n\t// Normal\n\t#ifdef normals\n\tattribute vec3 aVertexNormal;\n\tvarying vec3 vNormal;\n\t#endif\n\n\t// Uv\n\t#ifdef uv\n\tattribute vec2 aUv;\n\tvarying vec2 vUv;\n\t#endif\n\n\t#HOOK_VERTEX_PRE\n\n\tvoid main(void){\n\n\t\tvDiffuse = uDiffuse;\n\n\t\t// Override for custom positioning\n\t\tvec3 transformed = vec3(0.0);\n\n\t\t#ifdef vertexColors\n\t\tvDiffuse = aVertexColor;\n\t\t#endif\n\n\t\t#ifdef uv\n\t\tvUv = aUv;\n\t\t#endif\n\n\t\t#HOOK_VERTEX_MAIN\n\n\t\t#ifdef normals\n\t\tvNormal = uNormalMatrix * aVertexNormal;\n\t\t#endif\n\n\t\t// Vertex position + offset\n\t\tvPosition = aVertexPosition + transformed;\n\n\t\t// Calculate world position of vertex with transformed\n\t\tvWorldPosition = uModelMatrix * vec4(aVertexPosition + transformed, 1.0);\n\n\t\tgl_Position = uProjectionMatrix * uModelViewMatrix * vec4(vPosition, 1.0);\n\n\t\t#HOOK_VERTEX_END\n\t}\n`;\n\nexport { vertexShaderEs300, vertexShaderEs100 };\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/Vertex.glsl.ts","import * as GL from '../core/GL';\nimport EsVersion from '../shaders/chunks/EsVersion.glsl';\n\nconst WORD_REGX = word => {\n  return new RegExp(`\\\\b${word}\\\\b`, 'gi');\n};\n\nconst LINE_REGX = word => {\n  return new RegExp(`${word}`, 'gi');\n};\n\nconst VERTEX = [\n  {\n    match: WORD_REGX('in'),\n    replace: 'attribute'\n  },\n  {\n    match: WORD_REGX('out'),\n    replace: 'varying'\n  }\n];\nconst FRAGMENT = [\n  {\n    match: WORD_REGX('in'),\n    replace: 'varying'\n  },\n  {\n    match: LINE_REGX('out vec4 outgoingColor;'),\n    replace: ''\n  },\n  {\n    match: WORD_REGX('outgoingColor'),\n    replace: 'gl_FragColor'\n  },\n  {\n    match: WORD_REGX('texture'),\n    replace(shader: any): string {\n      // Find all texture defintions\n      const textureGlobalRegx = new RegExp('\\\\btexture\\\\b', 'gi');\n\n      // Find single texture definition\n      const textureSingleRegx = new RegExp('\\\\btexture\\\\b', 'i');\n\n      // Gets the texture call signature e.g texture(uTexture1, vUv);\n      const textureUniformNameRegx = new RegExp(/texture\\(([^)]+)\\)/, 'i');\n\n      // Get all matching occurances\n      const matches = shader.match(textureGlobalRegx);\n      let replacement = '';\n\n      // If nothing matches return\n      if (matches === null) return shader;\n\n      // Replace each occurance by it's uniform type\n      for (const i of matches) {\n        const match = shader.match(textureUniformNameRegx)[0];\n        if (match) {\n          // Extract the uniform name\n          const uniformName = match.replace('texture(', '').split(',')[0];\n          // Find the uniform definition\n          let uniformType = shader.match(`(.*?) ${uniformName}`, 'i')[1];\n          uniformType = uniformType.split(' ')[1];\n          switch (uniformType) {\n            case 'sampler2D': {\n              replacement = 'texture2D';\n              break;\n            }\n            case 'samplerCube': {\n              replacement = 'textureCube';\n              break;\n            }\n            default:\n          }\n        }\n        shader = shader.replace(textureSingleRegx, replacement);\n      }\n      return shader;\n    }\n  }\n];\nconst GENERIC = [\n  {\n    match: LINE_REGX(EsVersion),\n    replace: ''\n  }\n];\n\nconst VERTEX_RULES = [...GENERIC, ...VERTEX];\n\nconst FRAGMENT_RULES = [...GENERIC, ...FRAGMENT];\n\n/**\n * Replaces es300 syntax to es100\n */\nexport default function parse(shader: string, shaderType: string) {\n  if (GL.webgl2) {\n    return shader;\n  }\n\n  const rules = shaderType === 'vertex' ? VERTEX_RULES : FRAGMENT_RULES;\n\n  rules.forEach(rule => {\n    if (typeof rule.replace === 'function') {\n      shader = rule.replace(shader);\n    } else {\n      shader = shader.replace(rule.match, rule.replace);\n    }\n  });\n\n  // if (shaderType === 'vertex') {\n  // \tconsole.log(shader);\n  // }\n\n  // if (shaderType === 'fragment') {\n  // \tconsole.log(shader);\n  // }\n\n  return shader;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ShaderParser.ts","import { warn } from '../utils/Console';\nimport * as GL from './GL';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\nexport default class Program {\n  public program: WebGLProgram;\n  public created: boolean;\n  public uniformBlocks: object;\n  public attributeLocations: object;\n  public compiledVertexShader: string;\n  public compiledFragmentShader: string;\n\n  constructor() {\n    gl = GL.get();\n    this.program = gl.createProgram();\n    this.created = false;\n\n    // Uniform blocks\n    this.uniformBlocks = {};\n\n    // Cache all attribute locations\n    this.attributeLocations = {};\n  }\n\n  public link(\n    vertexShader: string,\n    fragmentShader: string,\n    transformFeedbackVaryings: string[]\n  ) {\n    this.compiledVertexShader = this.compile('vs', vertexShader);\n    this.compiledFragmentShader = this.compile('fs', fragmentShader);\n\n    // Don\"t attach a broken shader\n    // this will allow other objects to continue rendering\n    if (!this.compiledVertexShader || !this.compiledFragmentShader) {\n      return;\n    }\n\n    gl.attachShader(this.program, this.compiledVertexShader);\n    gl.attachShader(this.program, this.compiledFragmentShader);\n\n    if (\n      transformFeedbackVaryings instanceof Array &&\n      gl instanceof WebGL2RenderingContext\n    ) {\n      gl.transformFeedbackVaryings(\n        this.program,\n        transformFeedbackVaryings,\n        gl.SEPARATE_ATTRIBS\n      );\n    }\n\n    gl.linkProgram(this.program);\n    gl.validateProgram(this.program);\n\n    if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n      const info = gl.getProgramInfoLog(this.program);\n      warn('Failed to initialise shaders', info);\n    }\n\n    this.created = true;\n  }\n\n  public compile(type: string, source: string) {\n    gl = GL.get();\n    let shader;\n\n    // console.log(source);\n\n    switch (type) {\n      case 'vs':\n        shader = gl.createShader(gl.VERTEX_SHADER);\n        break;\n      default:\n        shader = gl.createShader(gl.FRAGMENT_SHADER);\n    }\n\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      warn('Failed to compile shader:', gl.getShaderInfoLog(shader));\n      return false;\n    }\n\n    return shader;\n  }\n\n  public setAttributeLocation(attributeName: string) {\n    gl = GL.get();\n    this.attributeLocations[attributeName] = gl.getAttribLocation(\n      this.program,\n      attributeName\n    );\n    gl.enableVertexAttribArray(this.attributeLocations[attributeName]);\n  }\n\n  public setAttributePointer(attributeName: string, itemSize: number) {\n    gl = GL.get();\n    gl.vertexAttribPointer(\n      this.attributeLocations[attributeName],\n      itemSize,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  public setAttributeInstancedPointer(attributeName: string, itemSize: number) {\n    gl = GL.get();\n    gl.vertexAttribPointer(\n      this.attributeLocations[attributeName],\n      itemSize,\n      gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  public setUniformLocation(uniforms: object, uniformName: string) {\n    gl = GL.get();\n    uniforms[uniformName].location = gl.getUniformLocation(\n      this.program,\n      uniformName\n    );\n  }\n\n  public setUniformBlockLocation(\n    uniformName: string,\n    uniformBuffer: WebGLBuffer,\n    index: number\n  ) {\n    gl = GL.get();\n    if (gl instanceof WebGL2RenderingContext) {\n      this.uniformBlocks[uniformName] = gl.getUniformBlockIndex(\n        this.program,\n        uniformName\n      );\n      gl.uniformBlockBinding(\n        this.program,\n        this.uniformBlocks[uniformName],\n        this.uniformBlocks[uniformName]\n      );\n      gl.bindBufferBase(\n        gl.UNIFORM_BUFFER,\n        this.uniformBlocks[uniformName],\n        uniformBuffer\n      );\n    }\n  }\n\n  public bind() {\n    gl = GL.get();\n    gl.useProgram(this.program);\n  }\n\n  public dispose() {\n    gl = GL.get();\n    let attributeLocation;\n\n    // Cleanup attribute locations\n    Object.keys(this.attributeLocations).forEach(attributeName => {\n      attributeLocation = this.attributeLocations[attributeName];\n      gl.disableVertexAttribArray(attributeLocation);\n    });\n\n    gl.detachShader(this.program, this.compiledVertexShader);\n    gl.detachShader(this.program, this.compiledFragmentShader);\n    gl.deleteProgram(this.program);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Program.ts","import EventDispatcher from '../core/EventDispatcher';\nimport HdrLoader from '../loaders/HdrLoader';\nimport ImageLoader from '../loaders/ImageLoader';\nimport { warn } from '../utils/Console';\nimport * as GL from './GL';\nimport ImageData from './ImageData';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\ninterface Options {\n  src?: number;\n  magFilter?: number;\n  minFilter?: number;\n  wrapS?: number;\n  wrapT?: number;\n  resizeToPow2?: number;\n}\n\nexport default class Texture extends EventDispatcher {\n  public src: string;\n  public magFilter: number;\n  public minFilter: number;\n  public wrapS: number;\n  public wrapT: number;\n  public resizeToPow2: boolean;\n  public texture: WebGLTexture;\n  public _isHdr: boolean;\n  public image: HTMLImageElement;\n\n  constructor(options: Options) {\n    super();\n    gl = GL.get();\n\n    this.src = '';\n    this.magFilter = gl.NEAREST;\n    this.minFilter = gl.NEAREST;\n    this.wrapS = gl.CLAMP_TO_EDGE;\n    this.wrapT = gl.CLAMP_TO_EDGE;\n    this.resizeToPow2 = false;\n\n    Object.assign(this, options);\n\n    this.texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      gl.RGBA,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      this.placeholder()\n    );\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, this.magFilter);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, this.minFilter);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, this.wrapS);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, this.wrapT);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n\n    this._isHdr = this.src.split('.').pop() === 'hdr';\n    this.load(this.src);\n  }\n\n  public load(src: string) {\n    if (this._isHdr) {\n      HdrLoader(src)\n        .then(this.onTextureLoaded)\n        .catch(this.onTextureError);\n    } else {\n      ImageLoader(src)\n        .then(this.onTextureLoaded)\n        .catch(this.onTextureError);\n    }\n  }\n\n  public onTextureLoaded = response => {\n    this.image = response;\n    this.update(this.image);\n    this.emit('loaded');\n  };\n\n  public onTextureError = (error: string) => {\n    warn(error);\n    this.emit('error', error);\n  };\n\n  public updateImage(src: string) {\n    this.src = src || this.src;\n    this.load(this.src);\n  }\n\n  public update(image: HTMLCanvasElement | HTMLImageElement | ImageData) {\n    gl = GL.get();\n\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n    if (image instanceof ImageData && gl instanceof WebGL2RenderingContext) {\n      // This is only for hdr data texture atm\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        0,\n        gl.RGBA16F,\n        image.width,\n        image.height,\n        0,\n        gl.RGBA,\n        gl.FLOAT,\n        image.data\n      );\n    } else {\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        0,\n        gl.RGBA,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        this._resizeImage()\n      );\n    }\n    gl.bindTexture(gl.TEXTURE_2D, null);\n  }\n\n  public placeholder() {\n    const canvas = document.createElement('canvas');\n    canvas.width = 1;\n    canvas.height = 1;\n    return canvas;\n  }\n\n  public _resizeImage() {\n    if (!this.resizeToPow2 || this.image instanceof ImageData)\n      return this.image;\n\n    // 2, 4, 8, 16... 4096\n    const sizes = Array(12)\n      .fill(0)\n      .map((i, j) => {\n        return Math.pow(2, j + 1);\n      });\n\n    // Return if the image size is already a power of 2\n    sizes.forEach(powSize => {\n      if (this.image.width === powSize && this.image.height === powSize) {\n        return this.image;\n      }\n      return false;\n    });\n\n    const imageSize = Math.max(this.image.width, this.image.height);\n\n    const size = sizes.reduce((prev, curr) => {\n      return Math.abs(curr - imageSize) < Math.abs(prev - imageSize)\n        ? curr\n        : prev;\n    });\n\n    // Draw canvas with texture cropped inside\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    canvas.width = size;\n    canvas.height = size;\n    ctx.drawImage(this.image, 0, 0, size, size);\n\n    return canvas;\n  }\n\n  public dispose() {\n    gl = GL.get();\n    gl.deleteTexture(this.texture);\n    this.texture = null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Texture.ts","//Code ported by Marcin Ignac (2014)\n//Based on Java implementation from\n//https://code.google.com/r/cys12345-research/source/browse/hdr/image_processor/RGBE.java?r=7d84e9fd866b24079dbe61fa0a966ce8365f5726\nvar radiancePattern = \"#\\\\?RADIANCE\"\nvar commentPattern = \"#.*\"\nvar gammaPattern = \"GAMMA=\";\nvar exposurePattern = \"EXPOSURE=\\\\s*([0-9]*[.][0-9]*)\";\nvar formatPattern = \"FORMAT=32-bit_rle_rgbe\";\nvar widthHeightPattern = \"-Y ([0-9]+) \\\\+X ([0-9]+)\";\n\n//http://croquetweak.blogspot.co.uk/2014/08/deconstructing-floats-frexp-and-ldexp.html\nfunction ldexp(mantissa, exponent) {\n    return exponent > 1023 // avoid multiplying by infinity\n        ? mantissa * Math.pow(2, 1023) * Math.pow(2, exponent - 1023)\n        : exponent < -1074 // avoid multiplying by zero\n        ? mantissa * Math.pow(2, -1074) * Math.pow(2, exponent + 1074)\n        : mantissa * Math.pow(2, exponent);\n}\n\nfunction readPixelsRawRLE(buffer, data, offset, fileOffset, scanline_width, num_scanlines) {\n    var rgbe = new Array(4);\n    var scanline_buffer = null;\n    var ptr;\n    var ptr_end;\n    var count;\n    var buf = new Array(2);\n    var bufferLength = buffer.length;\n\n    function readBuf(buf) {\n      var bytesRead = 0;\n      do {\n        buf[bytesRead++] = buffer[fileOffset];\n      } while(++fileOffset < bufferLength && bytesRead < buf.length);\n      return bytesRead;\n    }\n\n    function readBufOffset(buf, offset, length) {\n      var bytesRead = 0;\n      do {\n        buf[offset + bytesRead++] = buffer[fileOffset];\n      } while(++fileOffset < bufferLength && bytesRead < length);\n      return bytesRead;\n    }\n\n    function readPixelsRaw(buffer, data, offset, numpixels) {\n        var numExpected = 4 * numpixels;\n        var numRead = readBufOffset(data, offset, numExpected);\n        if (numRead < numExpected) {\n            throw new Error('Error reading raw pixels: got ' + numRead + ' bytes, expected ' + numExpected);\n        }\n    }\n\n    while (num_scanlines > 0) {\n      if (readBuf(rgbe) < rgbe.length) {\n        throw new Error(\"Error reading bytes: expected \" + rgbe.length);\n      }\n\n      if ((rgbe[0] != 2)||(rgbe[1] != 2)||((rgbe[2] & 0x80) != 0)) {\n          //this file is not run length encoded\n          data[offset++] = rgbe[0];\n          data[offset++] = rgbe[1];\n          data[offset++] = rgbe[2];\n          data[offset++] = rgbe[3];\n          readPixelsRaw(buffer, data, offset, scanline_width*num_scanlines-1);\n          return;\n      }\n\n      if ((((rgbe[2] & 0xFF)<<8) | (rgbe[3] & 0xFF)) != scanline_width) {\n        throw new Error(\"Wrong scanline width \" + (((rgbe[2] & 0xFF)<<8) | (rgbe[3] & 0xFF)) + \", expected \" + scanline_width);\n      }\n\n      if (scanline_buffer == null) {\n        scanline_buffer = new Array(4*scanline_width);\n      }\n\n      ptr = 0;\n      /* read each of the four channels for the scanline into the buffer */\n      for (var i=0; i<4; i++) {\n        ptr_end = (i+1)*scanline_width;\n        while(ptr < ptr_end) {\n          if (readBuf(buf) < buf.length) {\n            throw new Error(\"Error reading 2-byte buffer\");\n          }\n          if ((buf[0] & 0xFF) > 128) {\n            /* a run of the same value */\n            count = (buf[0] & 0xFF) - 128;\n            if ((count == 0) || (count > ptr_end - ptr)) {\n              throw new Error(\"Bad scanline data\");\n            }\n            while(count-- > 0)\n              scanline_buffer[ptr++] = buf[1];\n          }\n          else {\n            /* a non-run */\n            count = buf[0] & 0xFF;\n            if ((count == 0) || (count > ptr_end - ptr)) {\n              throw new Error(\"Bad scanline data\");\n            }\n            scanline_buffer[ptr++] = buf[1];\n            if (--count > 0) {\n              if (readBufOffset(scanline_buffer, ptr, count) < count) {\n                throw new Error(\"Error reading non-run data\");\n              }\n              ptr += count;\n            }\n          }\n        }\n      }\n\n      /* copy byte data to output */\n      for(var i = 0; i < scanline_width; i++) {\n        data[offset + 0] = scanline_buffer[i];\n        data[offset + 1] = scanline_buffer[i+scanline_width];\n        data[offset + 2] = scanline_buffer[i+2*scanline_width];\n        data[offset + 3] = scanline_buffer[i+3*scanline_width];\n        offset += 4;\n      }\n\n      num_scanlines--;\n    }\n\n}\n\n//Returns data as floats and flipped along Y by default\nfunction parseHdr(buffer) {\n    if (buffer instanceof ArrayBuffer) {\n        buffer = new Uint8Array(buffer);\n    }\n\n    var fileOffset = 0;\n    var bufferLength = buffer.length;\n\n    var NEW_LINE = 10;\n\n    function readLine() {\n        var buf = \"\";\n        do {\n            var b = buffer[fileOffset];\n            if (b == NEW_LINE) {\n                ++fileOffset\n                break;\n            }\n            buf += String.fromCharCode(b);\n        } while(++fileOffset < bufferLength);\n        return buf;\n    }\n\n    var width = 0;\n    var height = 0;\n    var exposure = 1;\n    var gamma = 1;\n    var rle = false;\n\n    for(var i=0; i<20; i++) {\n        var line = readLine();\n        var match;\n        if (match = line.match(radiancePattern)) {\n        }\n        else if (match = line.match(formatPattern)) {\n            rle = true;\n        }\n        else if (match = line.match(exposurePattern)) {\n            exposure = Number(match[1]);\n        }\n        else if (match = line.match(commentPattern)) {\n        }\n        else if (match = line.match(widthHeightPattern)) {\n            height = Number(match[1]);\n            width = Number(match[2]);\n            break;\n        }\n    }\n\n    if (!rle) {\n        throw new Error(\"File is not run length encoded!\");\n    }\n\n    var data = new Uint8Array(width * height * 4);\n    var scanline_width = width;\n    var num_scanlines = height;\n\n    readPixelsRawRLE(buffer, data, 0, fileOffset, scanline_width, num_scanlines);\n\n    //TODO: Should be Float16\n    var floatData = new Float32Array(width * height * 4);\n    for(var offset=0; offset<data.length; offset += 4) {\n        var r = data[offset+0]/255;\n        var g = data[offset+1]/255;\n        var b = data[offset+2]/255;\n        var e = data[offset+3];\n        var f = Math.pow(2.0, e - 128.0)\n\n        r *= f;\n        g *= f;\n        b *= f;\n\n        var floatOffset = offset;\n\n        floatData[floatOffset+0] = r;\n        floatData[floatOffset+1] = g;\n        floatData[floatOffset+2] = b;\n        floatData[floatOffset+3] = 1.0;\n    }\n\n    return {\n        shape: [width, height],\n        exposure: exposure,\n        gamma: gamma,\n        data: floatData\n    }\n}\n\nmodule.exports = parseHdr;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parse-hdr/index.js\n// module id = 63\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","import EventDispatcher from '../core/EventDispatcher';\nimport HdrLoader from '../loaders/HdrLoader';\nimport ImageLoader from '../loaders/ImageLoader';\nimport { warn } from '../utils/Console';\nimport * as GL from './GL';\nimport ImageData from './ImageData';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\ninterface Options {\n  src: Uint8Array;\n  size: number;\n}\n\nexport default class Texture3d extends EventDispatcher {\n  public src: Uint8Array;\n  public size: number;\n  public texture: WebGLTexture;\n\n  constructor(options: Options) {\n    super();\n    gl = GL.get();\n\n    if (!(gl instanceof WebGL2RenderingContext)) {\n      return;\n    }\n\n    this.src = null;\n    this.size = null;\n    Object.assign(this, options);\n\n    this.texture = gl.createTexture();\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_3D, this.texture);\n    gl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_BASE_LEVEL, 0);\n    gl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_MAX_LEVEL, Math.log2(this.size));\n    gl.texParameteri(\n      gl.TEXTURE_3D,\n      gl.TEXTURE_MIN_FILTER,\n      gl.LINEAR_MIPMAP_LINEAR\n    );\n    gl.texParameteri(gl.TEXTURE_3D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n    gl.texImage3D(\n      gl.TEXTURE_3D,\n      0,\n      gl.R8,\n      this.size,\n      this.size,\n      this.size,\n      0,\n      gl.RED,\n      gl.UNSIGNED_BYTE,\n      this.src\n    );\n    gl.generateMipmap(gl.TEXTURE_3D);\n  }\n\n  public dispose() {\n    gl = GL.get();\n    if (!(gl instanceof WebGL2RenderingContext)) {\n      return;\n    }\n    gl.deleteTexture(this.texture);\n    this.texture = null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Texture3d.ts","import EventDispatcher from '../core/EventDispatcher';\nimport HdrLoader from '../loaders/HdrLoader';\nimport ImageLoader from '../loaders/ImageLoader';\nimport { warn } from '../utils/Console';\nimport * as GL from './GL';\nimport ImageData from './ImageData';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\ninterface Options {\n  src: string[];\n  magFilter: number;\n  minFilter: number;\n  wrapS: number;\n  wrapT: number;\n  resizeToPow2: boolean;\n}\n\nexport default class TextureCube extends EventDispatcher {\n  public src: string[];\n  public magFilter: number;\n  public minFilter: number;\n  public wrapS: number;\n  public wrapT: number;\n  public resizeToPow2: boolean;\n  public texture: WebGLTexture;\n  public _isHdr: boolean;\n  public loaders: any[];\n  public images: HTMLImageElement[];\n\n  constructor(options: Options) {\n    super();\n    gl = GL.get();\n\n    this.src = Array(6).fill('');\n    this.magFilter = gl.LINEAR;\n    this.minFilter = gl.LINEAR;\n    this.wrapS = gl.CLAMP_TO_EDGE;\n    this.wrapT = gl.CLAMP_TO_EDGE;\n    this.resizeToPow2 = false;\n\n    Object.assign(this, options);\n\n    this.texture = gl.createTexture();\n    this.images = [];\n    this.loaders = [];\n\n    this.update(this.placeholder());\n\n    // Check media type\n    this._isHdr = this.src[0].split('.').pop() === 'hdr';\n\n    this.src.forEach((src, i) => {\n      this.loaders[i] = this.load(this.src[i]);\n    });\n\n    Promise.all(this.loaders)\n      .then(this.onTextureLoaded)\n      .catch(this.onTextureError);\n  }\n\n  public load(src: string) {\n    if (this._isHdr) {\n      return HdrLoader(src);\n    } else {\n      return ImageLoader(src);\n    }\n  }\n\n  public onTextureLoaded = response => {\n    this.images = response;\n    this.update(this.images);\n    this.emit('loaded');\n  };\n\n  public onTextureError = (error: string) => {\n    warn(error);\n    this.emit('error', error);\n  };\n\n  public update(\n    images: Array<HTMLCanvasElement | HTMLImageElement | ImageData>\n  ) {\n    gl = GL.get();\n\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, this.texture);\n\n    const targets = [\n      gl.TEXTURE_CUBE_MAP_POSITIVE_X,\n      gl.TEXTURE_CUBE_MAP_NEGATIVE_X,\n      gl.TEXTURE_CUBE_MAP_POSITIVE_Y,\n      gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,\n      gl.TEXTURE_CUBE_MAP_POSITIVE_Z,\n      gl.TEXTURE_CUBE_MAP_NEGATIVE_Z\n    ];\n\n    for (let i = 0; i < 6; i += 1) {\n      const image = this._isHdr ? images[i] : this._resizeImage(images[i]);\n      gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n      if (image instanceof ImageData) {\n        if (gl instanceof WebGL2RenderingContext) {\n          gl.texImage2D(\n            targets[i],\n            0,\n            gl.RGBA16F,\n            image.width,\n            image.height,\n            0,\n            gl.RGBA,\n            gl.FLOAT,\n            image.data\n          );\n        } else {\n          // TODO\n        }\n      } else {\n        gl.texImage2D(targets[i], 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n      }\n      gl.texParameteri(\n        gl.TEXTURE_CUBE_MAP,\n        gl.TEXTURE_MAG_FILTER,\n        this.magFilter\n      );\n      gl.texParameteri(\n        gl.TEXTURE_CUBE_MAP,\n        gl.TEXTURE_MIN_FILTER,\n        this.minFilter\n      );\n      gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_S, this.wrapS);\n      gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_WRAP_T, this.wrapT);\n    }\n    // gl.generateMipmap(gl.TEXTURE_CUBE_MAP);\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, null);\n  }\n\n  public placeholder() {\n    const canvases = [];\n    for (let i = 0; i < 6; i += 1) {\n      const canvas = document.createElement('canvas');\n      canvas.width = 128;\n      canvas.height = 128;\n      canvases.push(canvas);\n    }\n    return canvases;\n  }\n\n  public _resizeImage(image: HTMLCanvasElement | HTMLImageElement | ImageData) {\n    if (!this.resizeToPow2 || image instanceof ImageData) return image;\n\n    // 2, 4, 8, 16... 4096\n    const sizes = Array(12)\n      .fill(0)\n      .map((i, j) => {\n        return Math.pow(2, j + 1);\n      });\n\n    // Return if the image size is already a power of 2\n    sizes.forEach(powSize => {\n      if (image.width === powSize && image.height === powSize) {\n        return image;\n      }\n      return false;\n    });\n\n    const imageSize = Math.max(image.width, image.height);\n\n    const size = sizes.reduce((prev, curr) => {\n      return Math.abs(curr - imageSize) < Math.abs(prev - imageSize)\n        ? curr\n        : prev;\n    });\n\n    // Draw canvas with texture cropped inside\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    canvas.width = size;\n    canvas.height = size;\n\n    ctx.drawImage(image, 0, 0, size, size);\n\n    return canvas;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/TextureCube.ts","import EventDispatcher from '../core/EventDispatcher';\nimport * as GL from './GL';\n\nlet gl;\n\ninterface VideoTextureOptions {\n  src?: number;\n  magFilter?: number;\n  minFilter?: number;\n  wrapS?: number;\n  wrapT?: number;\n  loop: boolean;\n  autoplay: boolean;\n}\n\nexport default class VideoTexture extends EventDispatcher {\n  public src: string;\n  public magFilter: number;\n  public minFilter: number;\n  public wrapS: number;\n  public wrapT: number;\n  public loop: boolean;\n  public autoplay: boolean;\n  public texture: WebGLTexture;\n  public video: HTMLVideoElement;\n  public _currentTime: number;\n\n  constructor(options: VideoTextureOptions) {\n    super();\n    gl = GL.get();\n\n    this.src = '';\n    this.magFilter = gl.NEAREST;\n    this.minFilter = gl.NEAREST;\n    this.wrapS = gl.CLAMP_TO_EDGE;\n    this.wrapT = gl.CLAMP_TO_EDGE;\n    this.loop = false;\n    this.autoplay = true;\n\n    Object.assign(this, options);\n\n    this.video = document.createElement('video');\n    this.video.src = this.src;\n    this.video.loop = this.loop;\n    this.video.autoplay = this.autoplay;\n    this.video.setAttribute('webkitplaysinline', 'webkitplaysinline');\n    this.video.setAttribute('playsinline', 'playsinline');\n    this.video.addEventListener('canplaythrough', this._onCanPlayThrough, true);\n    this.video.addEventListener('ended', this._onEnded, true);\n    this._currentTime = 0;\n\n    this.texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.texImage2D(\n      gl.TEXTURE_2D,\n      0,\n      gl.RGBA,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      this.placeholder()\n    );\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, this.magFilter);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, this.minFilter);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, this.wrapS);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, this.wrapT);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n  }\n\n  public update() {\n    gl = GL.get();\n\n    if (this.video.readyState >= this.video.HAVE_CURRENT_DATA) {\n      if (this.video.currentTime !== this._currentTime) {\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n        gl.texImage2D(\n          gl.TEXTURE_2D,\n          0,\n          gl.RGBA,\n          gl.RGBA,\n          gl.UNSIGNED_BYTE,\n          this.video\n        );\n        gl.bindTexture(gl.TEXTURE_2D, null);\n      }\n      this._currentTime = this.video.currentTime;\n    }\n  }\n\n  public placeholder() {\n    const canvas = document.createElement('canvas');\n    canvas.width = 1;\n    canvas.height = 1;\n    return canvas;\n  }\n\n  public _onCanPlayThrough = () => {\n    this.emit('canplaythrough');\n  };\n\n  public _onEnded = () => {\n    this.emit('ended');\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/TextureVideo.ts","import Geometry from './Geometry';\n\nexport default class Box extends Geometry {\n  constructor(width = 1, height = 1, depth = 1, colors?: Float32Array) {\n    // this.colors = [];\n\n    // Screenspace\n    /*\n\t\t\t(-1, 1)  (0, 1)  (1, 1)\n\n\t\t\t(-1, 0)  (0, 0)  (1, 0)\n\n\t\t\t(-1,-1)  (0,-1)  (1,-1)\n\t\t\t*/\n\n    const vertices = [\n      // Front face\n      -1.0,\n      -1.0,\n      1.0,\n      1.0,\n      -1.0,\n      1.0,\n      1.0,\n      1.0,\n      1.0,\n      -1.0,\n      1.0,\n      1.0,\n\n      // Back face\n      -1.0,\n      -1.0,\n      -1.0,\n      -1.0,\n      1.0,\n      -1.0,\n      1.0,\n      1.0,\n      -1.0,\n      1.0,\n      -1.0,\n      -1.0,\n\n      // Top face\n      -1.0,\n      1.0,\n      -1.0,\n      -1.0,\n      1.0,\n      1.0,\n      1.0,\n      1.0,\n      1.0,\n      1.0,\n      1.0,\n      -1.0,\n\n      // Bottom face\n      -1.0,\n      -1.0,\n      -1.0,\n      1.0,\n      -1.0,\n      -1.0,\n      1.0,\n      -1.0,\n      1.0,\n      -1.0,\n      -1.0,\n      1.0,\n\n      // Right face\n      1.0,\n      -1.0,\n      -1.0,\n      1.0,\n      1.0,\n      -1.0,\n      1.0,\n      1.0,\n      1.0,\n      1.0,\n      -1.0,\n      1.0,\n\n      // Left face\n      -1.0,\n      -1.0,\n      -1.0,\n      -1.0,\n      -1.0,\n      1.0,\n      -1.0,\n      1.0,\n      1.0,\n      -1.0,\n      1.0,\n      -1.0\n    ];\n\n    for (let i = 0; i < vertices.length; i += 3) {\n      vertices[i] *= width;\n      vertices[i + 1] *= height;\n      vertices[i + 2] *= depth;\n    }\n\n    const indices = [\n      0,\n      1,\n      2,\n      0,\n      2,\n      3, // Front face\n      4,\n      5,\n      6,\n      4,\n      6,\n      7, // Back face\n      8,\n      9,\n      10,\n      8,\n      10,\n      11, // Top face\n      12,\n      13,\n      14,\n      12,\n      14,\n      15, // Bottom face\n      16,\n      17,\n      18,\n      16,\n      18,\n      19, // Right face\n      20,\n      21,\n      22,\n      20,\n      22,\n      23 // Left face\n    ];\n\n    const normals = [\n      // Front\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      1.0,\n\n      // Back\n      0.0,\n      0.0,\n      -1.0,\n      0.0,\n      0.0,\n      -1.0,\n      0.0,\n      0.0,\n      -1.0,\n      0.0,\n      0.0,\n      -1.0,\n\n      // Top\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n\n      // Bottom\n      0.0,\n      -1.0,\n      0.0,\n      0.0,\n      -1.0,\n      0.0,\n      0.0,\n      -1.0,\n      0.0,\n      0.0,\n      -1.0,\n      0.0,\n\n      // Right\n      1.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n\n      // Left\n      -1.0,\n      0.0,\n      0.0,\n      -1.0,\n      0.0,\n      0.0,\n      -1.0,\n      0.0,\n      0.0,\n      -1.0,\n      0.0,\n      0.0\n    ];\n\n    const uvs = [\n      // Front face\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      1.0,\n      1.0,\n      0.0,\n      1.0,\n      // Back face\n      1.0,\n      0.0,\n      1.0,\n      1.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      // Top face\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      1.0,\n      1.0,\n      // Bottom face\n      1.0,\n      1.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      // Right face\n      1.0,\n      0.0,\n      1.0,\n      1.0,\n      0.0,\n      1.0,\n      0.0,\n      0.0,\n      // Left face\n      0.0,\n      0.0,\n      1.0,\n      0.0,\n      1.0,\n      1.0,\n      0.0,\n      1.0\n    ];\n\n    super(\n      new Float32Array(vertices),\n      new Uint16Array(indices),\n      new Float32Array(normals),\n      new Float32Array(uvs),\n      colors\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/BoxGeometry.ts","import { vec3 } from 'gl-matrix';\nimport Vector3 from '../math/Vector3';\nconst cb = vec3.create();\nconst ab = vec3.create();\n\nexport default class Face {\n  public indices: number[];\n  public vertices: Vector3[];\n  public uvs: number[];\n  public normal: Vector3;\n\n  constructor(\n    indiceA: number,\n    indiceB: number,\n    indiceC: number,\n    vertexA: Vector3,\n    vertexB: Vector3,\n    vertexC: Vector3\n  ) {\n    this.indices = [indiceA, indiceB, indiceC];\n    this.vertices = [vertexA, vertexB, vertexC];\n    this.uvs = [indiceA, indiceB, indiceC];\n    this.normal = new Vector3();\n    this.updateFaceNormal();\n  }\n\n  public updateFaceNormal() {\n    // from threejs\n    vec3.set(cb, 0, 0, 0);\n    vec3.set(ab, 0, 0, 0);\n    vec3.subtract(cb, this.vertices[2].v, this.vertices[1].v);\n    vec3.subtract(ab, this.vertices[0].v, this.vertices[1].v);\n    vec3.cross(cb, cb, ab);\n\n    vec3.normalize(cb, cb);\n    this.normal.set(cb[0], cb[1], cb[2]);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/Face.ts","import Geometry from './Geometry';\n\nexport default class Plane extends Geometry {\n  constructor(\n    width = 1,\n    height = 1,\n    subdivisionsX = 1,\n    subdivisionsY = 1,\n    axis = 'XY',\n    colors?: Float32Array\n  ) {\n    // https://github.com/yiwenl/Alfrid/blob/master/src/alfrid/Geom.js#L9\n\n    // Note triangles are seperate...\n\n    let vertices = [];\n    const indices = [];\n    let normals = [];\n    let uvs = [];\n    let index = 0;\n\n    const spacerX = width / subdivisionsX;\n    const spacerY = height / subdivisionsY;\n    const offsetX = -width * 0.5;\n    const offsetY = -height * 0.5;\n    const spacerU = 1 / subdivisionsX;\n    const spacerV = 1 / subdivisionsY;\n\n    for (let y = 0; y < subdivisionsY; y += 1) {\n      for (let x = 0; x < subdivisionsX; x += 1) {\n        const triangleX = spacerX * x + offsetX;\n        const triangleY = spacerY * y + offsetY;\n\n        const u = x / subdivisionsX;\n        const v = y / subdivisionsY;\n\n        switch (axis) {\n          case 'XZ': {\n            // Facing towards y\n            vertices = vertices.concat([triangleX, 0, triangleY]);\n            vertices = vertices.concat([triangleX + spacerX, 0, triangleY]);\n            vertices = vertices.concat([\n              triangleX + spacerX,\n              0,\n              triangleY + spacerY\n            ]);\n            vertices = vertices.concat([triangleX, 0, triangleY + spacerY]);\n\n            normals = normals.concat([0, 1, 0]);\n            normals = normals.concat([0, 1, 0]);\n            normals = normals.concat([0, 1, 0]);\n            normals = normals.concat([0, 1, 0]);\n\n            uvs = uvs.concat([u, 1 - v]);\n            uvs = uvs.concat([u + spacerU, 1 - v]);\n            uvs = uvs.concat([u + spacerU, 1 - (v + spacerV)]);\n            uvs = uvs.concat([u, 1 - (v + spacerV)]);\n            break;\n          }\n          case 'YZ': {\n            // Facing towards x\n\n            vertices = vertices.concat([0, triangleY, triangleX]);\n            vertices = vertices.concat([0, triangleY, triangleX + spacerX]);\n            vertices = vertices.concat([\n              0,\n              triangleY + spacerY,\n              triangleX + spacerX\n            ]);\n            vertices = vertices.concat([0, triangleY + spacerY, triangleX]);\n\n            normals = normals.concat([1, 0, 0]);\n            normals = normals.concat([1, 0, 0]);\n            normals = normals.concat([1, 0, 0]);\n            normals = normals.concat([1, 0, 0]);\n\n            uvs = uvs.concat([1 - u, v]);\n            uvs = uvs.concat([1 - (u + spacerU), v]);\n            uvs = uvs.concat([1 - (u + spacerU), v + spacerV]);\n            uvs = uvs.concat([1 - u, v + spacerV]);\n            break;\n          }\n          default: {\n            // Facing towards z\n            vertices = vertices.concat([triangleX, triangleY, 0]);\n            vertices = vertices.concat([triangleX + spacerX, triangleY, 0]);\n            vertices = vertices.concat([\n              triangleX + spacerX,\n              triangleY + spacerY,\n              0\n            ]);\n            vertices = vertices.concat([triangleX, triangleY + spacerY, 0]);\n\n            normals = normals.concat([0, 0, 1]);\n            normals = normals.concat([0, 0, 1]);\n            normals = normals.concat([0, 0, 1]);\n            normals = normals.concat([0, 0, 1]);\n\n            uvs = uvs.concat([u, v]);\n            uvs = uvs.concat([u + spacerU, v]);\n            uvs = uvs.concat([u + spacerU, v + spacerV]);\n            uvs = uvs.concat([u, v + spacerV]);\n          }\n        }\n\n        indices.push(index * 4 + 0);\n        indices.push(index * 4 + 1);\n        indices.push(index * 4 + 2);\n        indices.push(index * 4 + 0);\n        indices.push(index * 4 + 2);\n        indices.push(index * 4 + 3);\n\n        index += 1;\n      }\n    }\n\n    super(\n      new Float32Array(vertices),\n      new Uint16Array(indices),\n      new Float32Array(normals),\n      new Float32Array(uvs),\n      colors\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry/PlaneGeometry.ts","import { mat4 } from 'gl-matrix';\nimport Camera from '../cameras/Camera';\nimport OrthographicCamera from '../cameras/OrthographicCamera';\nimport PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport { capabilities, extensions } from '../core/Capabilities';\nimport * as GL from '../core/GL';\nimport Mesh from '../core/Mesh';\nimport Shader from '../core/Shader';\nimport Geometry from '../geometry/Geometry';\nimport EsVersion from '../shaders/chunks/EsVersion.glsl';\nimport ProjectionView from '../shaders/chunks/ProjectionView.glsl';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\nconst vertexShaderEs300 = `${EsVersion}\n\tlayout (location = 0) in vec3 aVertexPosition;\n\tlayout (location = 1) in vec3 aVertexColor;\n\n\t${ProjectionView}\n\n\tuniform mat4 uModelViewMatrix;\n\n\tout vec3 vColor;\n\n\tvoid main(void){\n\t\tvColor = aVertexColor;\n\t\tgl_Position = uProjectionView.projectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n\t}\n`;\n\nconst vertexShaderEs100 = `\n\tattribute vec3 aVertexPosition;\n\tattribute vec3 aVertexColor;\n\n\tuniform mat4 uProjectionMatrix;\n\tuniform mat4 uModelViewMatrix;\n\n\tvarying vec3 vColor;\n\n\tvoid main(void){\n\t\tvColor = aVertexColor;\n\t\tgl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n\t}\n`;\n\nfunction fragmentShaderEs300() {\n  return `${EsVersion}\n\tprecision ${capabilities.precision} float;\n\tin vec3 vColor;\n\tout vec4 outgoingColor;\n\n\tvoid main(void){\n\t\toutgoingColor = vec4(vColor, 1.0);\n\t}\n\t`;\n}\n\nfunction fragmentShaderEs100() {\n  return `\n\tprecision ${capabilities.precision} float;\n\tvarying vec3 vColor;\n\n\tvoid main(void){\n\t\tgl_FragColor = vec4(vColor, 1.0);\n\t}\n\t`;\n}\n\nclass AxisGeometry extends Geometry {\n  constructor(size: number) {\n    let vertices = [];\n\n    // X\n    vertices = vertices.concat([0, 0, 0, size, 0, 0]);\n    // Y\n    vertices = vertices.concat([0, 0, 0, 0, size, 0]);\n    // Z\n    vertices = vertices.concat([0, 0, 0, 0, 0, size]);\n\n    // Colors\n    const colors = new Float32Array([\n      1,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      1\n    ]);\n    super(new Float32Array(vertices), null, null, null, colors);\n  }\n}\n\nexport default class AxisHelper extends Mesh {\n  constructor(size = 1) {\n    const vertexShader = GL.webgl2 ? vertexShaderEs300 : vertexShaderEs100;\n    const fragmentShader = GL.webgl2\n      ? fragmentShaderEs300()\n      : fragmentShaderEs100();\n    super(\n      new AxisGeometry(size),\n      new Shader({\n        name: 'AxisHelper',\n        vertexShader,\n        fragmentShader\n      })\n    );\n  }\n\n  public draw(camera: Camera | PerspectiveCamera | OrthographicCamera) {\n    if (!this.visible) return;\n    gl = GL.get();\n\n    // Update modelMatrix\n    this.updateMatrix(camera);\n\n    this.shader.program.bind();\n    this.shader.setUniforms(\n      camera.projectionMatrix,\n      this.modelViewMatrix,\n      this.modelMatrix,\n      camera\n    );\n\n    if (extensions.vertexArrayObject) {\n      this.vao.bind();\n    } else {\n      this.bindAttributes();\n      this.bindAttributesInstanced();\n      this.bindIndexBuffer();\n    }\n\n    gl.drawArrays(\n      gl.LINES,\n      0,\n      this.geometry.attributes.aVertexPosition.numItems\n    );\n\n    if (extensions.vertexArrayObject) {\n      this.vao.unbind();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/AxisHelper.ts","import { mat4 } from 'gl-matrix';\nimport Camera from '../cameras/Camera';\nimport OrthographicCamera from '../cameras/OrthographicCamera';\nimport PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport { capabilities, extensions } from '../core/Capabilities';\nimport { DRAW_LINE_STRIP } from '../core/Constants';\nimport * as GL from '../core/GL';\nimport Mesh from '../core/Mesh';\nimport Shader from '../core/Shader';\nimport Geometry from '../geometry/Geometry';\nimport EsVersion from '../shaders/chunks/EsVersion.glsl';\nimport ProjectionView from '../shaders/chunks/ProjectionView.glsl';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\nconst vertexShaderEs300 = `${EsVersion}\n\t${ProjectionView}\n\n\tin vec3 aVertexPosition;\n\n\tuniform mat4 uModelViewMatrix;\n\tuniform mat3 uNormalMatrix;\n\n\tvoid main(void){\n\t\tgl_Position = uProjectionView.projectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n\t}\n`;\n\nconst vertexShaderEs100 = `\n\tattribute vec3 aVertexPosition;\n\n\tuniform mat4 uProjectionMatrix;\n\tuniform mat4 uModelViewMatrix;\n\tuniform mat3 uNormalMatrix;\n\n\tvoid main(void){\n\t\tgl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n\t}\n`;\n\nfunction fragmentShaderEs300() {\n  return `${EsVersion}\n\tprecision ${capabilities.precision} float;\n\tout vec4 outgoingColor;\n\n\tvoid main(void){\n\t\toutgoingColor = vec4(1.0, 1.0, 0.0, 1.0);\n\t}\n\t`;\n}\n\nfunction fragmentShaderEs100() {\n  return `\n\tprecision ${capabilities.precision} float;\n\n\tvoid main(void){\n\t\tgl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);\n\t}\n\t`;\n}\n\nclass CameraGeometry extends Geometry {\n  constructor(mesh: Mesh, size = 0.5) {\n    let vertices = [];\n\n    const addVertex = (x, y, z) => {\n      vertices = vertices.concat([x, y, z]);\n    };\n\n    function box(z, scale = 1) {\n      // bottom left\n      addVertex(-1 * scale, -1 * scale, z);\n\n      // top left\n      addVertex(-1 * scale, 1 * scale, z);\n      addVertex(-1 * scale, 1 * scale, z);\n\n      // top right\n      addVertex(1 * scale, 1 * scale, z);\n      addVertex(1 * scale, 1 * scale, z);\n\n      // bottom right\n      addVertex(1 * scale, -1 * scale, z);\n      addVertex(1 * scale, -1 * scale, z);\n\n      // bottom left\n      addVertex(-1 * scale, -1 * scale, z);\n    }\n\n    const zPosition = 3.5;\n    const scaleNear = 0.5;\n    const scaleFar = 3;\n\n    // Boxes\n    box(0, scaleNear);\n    box(zPosition, scaleFar);\n\n    // Lines\n\n    // Bottom left\n    addVertex(-1 * scaleNear, -1 * scaleNear, 0);\n    addVertex(-1 * scaleFar, -1 * scaleFar, zPosition);\n\n    // Top left\n    addVertex(-1 * scaleNear, 1 * scaleNear, 0);\n    addVertex(-1 * scaleFar, 1 * scaleFar, zPosition);\n\n    // Top right\n    addVertex(1 * scaleNear, 1 * scaleNear, 0);\n    addVertex(1 * scaleFar, 1 * scaleFar, zPosition);\n\n    // Bottom right\n    addVertex(1 * scaleNear, -1 * scaleNear, 0);\n    addVertex(1 * scaleFar, -1 * scaleFar, zPosition);\n\n    super(new Float32Array(vertices));\n  }\n}\n\nexport default class CameraHelper extends Mesh {\n  public camera: PerspectiveCamera;\n  constructor(camera) {\n    const vertexShader = GL.webgl2 ? vertexShaderEs300 : vertexShaderEs100;\n    const fragmentShader = GL.webgl2\n      ? fragmentShaderEs300()\n      : fragmentShaderEs100();\n    super(\n      new CameraGeometry(camera),\n      new Shader({\n        name: 'CameraHelper',\n        vertexShader,\n        fragmentShader,\n        drawType: DRAW_LINE_STRIP\n      })\n    );\n    this.camera = camera;\n  }\n\n  public update() {\n    this.position.copy(this.camera.position);\n    this.lookAt(this.camera.target);\n  }\n\n  public draw(camera: Camera | PerspectiveCamera | OrthographicCamera) {\n    if (!this.visible) return;\n    gl = GL.get();\n\n    // Update modelMatrix\n    this.updateMatrix(camera);\n\n    this.shader.program.bind();\n    this.shader.setUniforms(\n      camera.projectionMatrix,\n      this.modelViewMatrix,\n      this.modelMatrix,\n      camera\n    );\n\n    if (extensions.vertexArrayObject) {\n      this.vao.bind();\n    } else {\n      this.bindAttributes();\n      this.bindAttributesInstanced();\n      this.bindIndexBuffer();\n    }\n\n    gl.drawArrays(\n      gl.LINES,\n      0,\n      this.geometry.attributes.aVertexPosition.numItems\n    );\n\n    if (extensions.vertexArrayObject) {\n      this.vao.unbind();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/CameraHelper.ts","import { mat4 } from 'gl-matrix';\nimport Camera from '../cameras/Camera';\nimport OrthographicCamera from '../cameras/OrthographicCamera';\nimport PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport { capabilities, extensions } from '../core/Capabilities';\nimport * as GL from '../core/GL';\nimport Mesh from '../core/Mesh';\nimport Shader from '../core/Shader';\nimport Geometry from '../geometry/Geometry';\nimport { lerp } from '../math/Utils';\nimport EsVersion from '../shaders/chunks/EsVersion.glsl';\nimport ProjectionView from '../shaders/chunks/ProjectionView.glsl';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\nconst vertexShaderEs300 = `${EsVersion}\n\t${ProjectionView}\n\n\tin vec3 aVertexPosition;\n\n\tuniform mat4 uModelViewMatrix;\n\n\tvoid main(void){\n\t\tgl_Position = uProjectionView.projectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n\t}\n`;\n\nconst vertexShaderEs100 = `\n\tattribute vec3 aVertexPosition;\n\n\tuniform mat4 uProjectionMatrix;\n\tuniform mat4 uModelViewMatrix;\n\n\tvoid main(void){\n\t\tgl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n\t}\n`;\n\nfunction fragmentShaderEs300() {\n  return `${EsVersion}\n\tprecision ${capabilities.precision} float;\n\tout vec4 outgoingColor;\n\n\tvoid main(void){\n\t\toutgoingColor = vec4(vec3(0.5), 1.0);\n\t}\n\t`;\n}\n\nfunction fragmentShaderEs100() {\n  return `\n\tprecision ${capabilities.precision} float;\n\n\tvoid main(void){\n\t\tgl_FragColor = vec4(vec3(0.5), 1.0);\n\t}\n\t`;\n}\n\nclass GridGeometry extends Geometry {\n  constructor(size: number, divisions: number) {\n    let vertices = [];\n    const halfSize = size * 0.5;\n\n    for (let i = 0; i < divisions + 1; i += 1) {\n      const x1 = lerp(-halfSize, halfSize, i / divisions);\n      const y1 = 0;\n      const z1 = -halfSize;\n      const x2 = lerp(-halfSize, halfSize, i / divisions);\n      const y2 = 0;\n      const z2 = halfSize;\n      vertices = vertices.concat([x1, y1, z1, x2, y2, z2]);\n    }\n\n    for (let i = 0; i < divisions + 1; i += 1) {\n      const x1 = -halfSize;\n      const y1 = 0;\n      const z1 = lerp(-halfSize, halfSize, i / divisions);\n      const x2 = halfSize;\n      const y2 = 0;\n      const z2 = lerp(-halfSize, halfSize, i / divisions);\n      vertices = vertices.concat([x1, y1, z1, x2, y2, z2]);\n    }\n\n    super(new Float32Array(vertices));\n  }\n}\n\nexport default class GridHelper extends Mesh {\n  constructor(size = 1, divisions = 10) {\n    const vertexShader = GL.webgl2 ? vertexShaderEs300 : vertexShaderEs100;\n    const fragmentShader = GL.webgl2\n      ? fragmentShaderEs300()\n      : fragmentShaderEs100();\n    super(\n      new GridGeometry(size, divisions),\n      new Shader({\n        name: 'GridHelper',\n        vertexShader,\n        fragmentShader\n      })\n    );\n  }\n\n  public draw(camera: Camera | PerspectiveCamera | OrthographicCamera) {\n    if (!this.visible) return;\n    gl = GL.get();\n\n    // Update modelMatrix\n    this.updateMatrix(camera);\n\n    this.shader.program.bind();\n    this.shader.setUniforms(\n      camera.projectionMatrix,\n      this.modelViewMatrix,\n      this.modelMatrix,\n      camera\n    );\n\n    if (extensions.vertexArrayObject) {\n      this.vao.bind();\n    } else {\n      this.bindAttributes();\n      this.bindAttributesInstanced();\n      this.bindIndexBuffer();\n    }\n\n    gl.drawArrays(\n      gl.LINES,\n      0,\n      this.geometry.attributes.aVertexPosition.numItems\n    );\n\n    if (extensions.vertexArrayObject) {\n      this.vao.unbind();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/GridHelper.ts","import { mat4 } from 'gl-matrix';\nimport Camera from '../cameras/Camera';\nimport OrthographicCamera from '../cameras/OrthographicCamera';\nimport PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport { capabilities, extensions } from '../core/Capabilities';\nimport * as GL from '../core/GL';\nimport Mesh from '../core/Mesh';\nimport Shader from '../core/Shader';\nimport Geometry from '../geometry/Geometry';\nimport EsVersion from '../shaders/chunks/EsVersion.glsl';\nimport ProjectionView from '../shaders/chunks/ProjectionView.glsl';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\nconst vertexShaderEs300 = `${EsVersion}\n\t${ProjectionView}\n\n\tin vec3 aVertexPosition;\n\n\tuniform mat4 uModelViewMatrix;\n\tuniform mat3 uNormalMatrix;\n\n\tvoid main(void){\n\t\tgl_Position = uProjectionView.projectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n\t}\n`;\n\nconst vertexShaderEs100 = `\n\tattribute vec3 aVertexPosition;\n\n\tuniform mat4 uProjectionMatrix;\n\tuniform mat4 uModelViewMatrix;\n\tuniform mat3 uNormalMatrix;\n\n\tvoid main(void){\n\t\tgl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n\t}\n`;\n\nfunction fragmentShaderEs300() {\n  return `${EsVersion}\n\tprecision ${capabilities.precision} float;\n\tout vec4 outgoingColor;\n\n\tvoid main(void){\n\t\toutgoingColor = vec4(1.0);\n\t}\n\t`;\n}\n\nfunction fragmentShaderEs100() {\n  return `\n\tprecision ${capabilities.precision} float;\n\n\tvoid main(void){\n\t\tgl_FragColor = vec4(1.0);\n\t}\n\t`;\n}\n\nclass NormalsGeometry extends Geometry {\n  constructor(mesh: Mesh, size = 0.5) {\n    let vertices = [];\n\n    const sx = mesh.scale.x;\n    const sy = mesh.scale.y;\n    const sz = mesh.scale.z;\n    const length = mesh.geometry.bufferNormals.length / 3;\n    for (let i = 0; i < length; i += 1) {\n      const i3 = i * 3;\n      const v0x = sx * mesh.geometry.bufferVertices[i3];\n      const v0y = sy * mesh.geometry.bufferVertices[i3 + 1];\n      const v0z = sz * mesh.geometry.bufferVertices[i3 + 2];\n      const nx = mesh.geometry.bufferNormals[i3];\n      const ny = mesh.geometry.bufferNormals[i3 + 1];\n      const nz = mesh.geometry.bufferNormals[i3 + 2];\n      const v1x = v0x + size * nx;\n      const v1y = v0y + size * ny;\n      const v1z = v0z + size * nz;\n      vertices = vertices.concat([v0x, v0y, v0z, v1x, v1y, v1z]);\n    }\n\n    super(new Float32Array(vertices));\n  }\n}\n\nexport default class NormalsHelper extends Mesh {\n  constructor(mesh, size = 1) {\n    const vertexShader = GL.webgl2 ? vertexShaderEs300 : vertexShaderEs100;\n    const fragmentShader = GL.webgl2\n      ? fragmentShaderEs300()\n      : fragmentShaderEs100();\n    super(\n      new NormalsGeometry(mesh, size),\n      new Shader({\n        name: 'NormalsHelper',\n        vertexShader,\n        fragmentShader\n      })\n    );\n  }\n\n  public draw(camera: Camera | PerspectiveCamera | OrthographicCamera) {\n    if (!this.visible) return;\n    gl = GL.get();\n\n    // Update modelMatrix\n    this.updateMatrix(camera);\n\n    this.shader.program.bind();\n    this.shader.setUniforms(\n      camera.projectionMatrix,\n      this.modelViewMatrix,\n      this.modelMatrix,\n      camera\n    );\n\n    if (extensions.vertexArrayObject) {\n      this.vao.bind();\n    } else {\n      this.bindAttributes();\n      this.bindAttributesInstanced();\n      this.bindIndexBuffer();\n    }\n\n    gl.drawArrays(\n      gl.LINES,\n      0,\n      this.geometry.attributes.aVertexPosition.numItems\n    );\n\n    if (extensions.vertexArrayObject) {\n      this.vao.unbind();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/NormalsHelper.ts","import { mat4 } from 'gl-matrix';\nimport Camera from '../cameras/Camera';\nimport OrthographicCamera from '../cameras/OrthographicCamera';\nimport PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport { capabilities, extensions } from '../core/Capabilities';\nimport * as GL from '../core/GL';\nimport Mesh from '../core/Mesh';\nimport Shader from '../core/Shader';\nimport Geometry from '../geometry/Geometry';\nimport Color from '../math/Color';\nimport { from3DTo2D } from '../math/Utils';\nimport EsVersion from '../shaders/chunks/EsVersion.glsl';\nimport ProjectionView from '../shaders/chunks/ProjectionView.glsl';\n\nlet gl: WebGL2RenderingContext | WebGLRenderingContext;\n\nconst vertexShaderEs300 = `${EsVersion}\n\t${ProjectionView}\n\n\tin vec3 aVertexPosition;\n\n\tuniform mat4 uModelViewMatrix;\n\tuniform float uSize;\n\n\tvoid main(void){\n\t\tvec4 mvPosition = uProjectionView.projectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n\t\tgl_PointSize = uSize * (100.0 / length(mvPosition.xyz));\n\t\tgl_Position = mvPosition;\n\t}\n`;\n\nconst vertexShaderEs100 = `\n\tattribute vec3 aVertexPosition;\n\n\tuniform mat4 uProjectionMatrix;\n\tuniform mat4 uModelViewMatrix;\n\tuniform float uSize;\n\n\tvoid main(void){\n\t\tvec4 mvPosition = uProjectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);\n\t\tgl_PointSize = uSize * (100.0 / length(mvPosition.xyz));\n\t\tgl_Position = mvPosition;\n\t}\n`;\n\nfunction fragmentShaderEs300() {\n  return `${EsVersion}\n\tprecision ${capabilities.precision} float;\n\tuniform vec3 uColor;\n\tout vec4 outgoingColor;\n\n\tvoid main(void){\n\t\tif(length(gl_PointCoord - 0.5) > 0.5) {\n\t\t\tdiscard;\n\t\t}\n\t\toutgoingColor = vec4(uColor, 1.0);\n\t}\n\t`;\n}\n\nfunction fragmentShaderEs100() {\n  return `\n\tprecision ${capabilities.precision} float;\n\tuniform vec3 uColor;\n\n\tvoid main(void){\n\t\tif(length(gl_PointCoord - 0.5) > 0.5) {\n\t\t\tdiscard;\n\t\t}\n\t\tgl_FragColor = vec4(uColor, 1.0);\n\t}\n\t`;\n}\n\nclass VerticesGeometry extends Geometry {\n  constructor(mesh: Mesh, size = 0.5) {\n    const vertices = [];\n\n    const length = mesh.geometry.bufferVertices.length;\n    for (let i = 0; i < length; i += 1) {\n      vertices[i] = mesh.geometry.bufferVertices[i];\n    }\n\n    super(new Float32Array(vertices));\n  }\n}\n\nconst projectionViewMatrix = mat4.create();\nconst modelWorldMatrix = mat4.create();\n\nexport default class VerticesHelper extends Mesh {\n  public _labels: any[];\n  public _parentMesh: Mesh;\n\n  constructor(\n    mesh: Mesh,\n    size = 1,\n    colorPoint = 0x00ff00,\n    colorLabel = '#ffffff'\n  ) {\n    const vertexShader = GL.webgl2 ? vertexShaderEs300 : vertexShaderEs100;\n    const fragmentShader = GL.webgl2\n      ? fragmentShaderEs300()\n      : fragmentShaderEs100();\n    super(\n      new VerticesGeometry(mesh, size),\n      new Shader({\n        name: 'VerticesHelper',\n        vertexShader,\n        fragmentShader,\n        uniforms: {\n          uSize: {\n            type: 'f',\n            value: size\n          },\n          uColor: {\n            type: '3f',\n            value: new Color(colorPoint).v\n          }\n        }\n      })\n    );\n    this._labels = [];\n    this._parentMesh = mesh;\n    let element;\n\n    const addLabel = indice => {\n      element = document.createElement('div');\n      element.style.position = 'absolute';\n      element.style.pointerEvents = 'none';\n      element.style.color = colorLabel;\n      element.style.fontSize = '16px';\n      this._labels.push({\n        indice,\n        element\n      });\n      document.body.appendChild(element);\n    };\n\n    this._parentMesh.geometry.faces.forEach((face, i) => {\n      addLabel(face.indices[0]);\n      addLabel(face.indices[1]);\n      addLabel(face.indices[2]);\n    });\n  }\n\n  public draw(camera: Camera | PerspectiveCamera | OrthographicCamera) {\n    if (!this.visible) return;\n    gl = GL.get();\n\n    // Update modelMatrix\n    this.updateMatrix(camera);\n\n    // Update\n    mat4.identity(projectionViewMatrix);\n    mat4.identity(modelWorldMatrix);\n\n    mat4.mul(\n      projectionViewMatrix,\n      camera.projectionMatrix,\n      this.modelViewMatrix\n    );\n\n    let screenPosition;\n    let vertex;\n    this._labels.forEach((label, i) => {\n      vertex = this._parentMesh.geometry.vertices[label.indice];\n      screenPosition = from3DTo2D(vertex, projectionViewMatrix);\n      label.element.style.left = `${screenPosition.x * window.innerWidth}px`;\n      label.element.style.top = `${screenPosition.y * window.innerHeight}px`;\n      label.element.innerHTML = `${label.indice}`;\n    });\n\n    this.shader.program.bind();\n    this.shader.setUniforms(\n      camera.projectionMatrix,\n      this.modelViewMatrix,\n      this.modelMatrix,\n      camera\n    );\n\n    if (extensions.vertexArrayObject) {\n      this.vao.bind();\n    } else {\n      this.bindAttributes();\n      this.bindAttributesInstanced();\n      this.bindIndexBuffer();\n    }\n\n    gl.drawArrays(\n      gl.POINTS,\n      0,\n      this.geometry.attributes.aVertexPosition.numItems\n    );\n\n    if (extensions.vertexArrayObject) {\n      this.vao.unbind();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/VerticesHelper.ts","import {\n  LIGHT_AMBIENT,\n  LIGHT_DIRECTIONAL,\n  LIGHT_POINT,\n  UNIFORM_AMBIENT_LIGHT_LOCATION,\n  UNIFORM_DIRECTIONAL_LIGHTS_LOCATION,\n  UNIFORM_POINT_LIGHTS_LOCATION\n} from '../core/Constants';\nimport * as GL from '../core/GL';\nimport UniformBuffer from '../core/UniformBuffer';\nimport AmbientLight from '../lights/AmbientLight';\nimport DirectionalLight from '../lights/DirectionalLight';\nimport PointLight from '../lights/PointLight';\n\nlet gl;\n\n/**\n\t* Genetic class for PointLights and DirectionalLights\n\t* Creates a uniform buffer which stores all the data for the specific\n\t* light type\n\t*/\nexport default class Lights {\n  public lights: Array<DirectionalLight | PointLight | AmbientLight>;\n  public uniformBuffer: UniformBuffer;\n  public _lightsData: Float32Array;\n\n  constructor(lights: Array<AmbientLight | DirectionalLight | PointLight>) {\n    this.lights = lights;\n\n    gl = GL.get();\n\n    if (GL.webgl2) {\n      const dataLength = this.lights[0].data.length;\n\n      // Setup data\n      const values = Array(lights.length * dataLength);\n      const data = new Float32Array(values);\n\n      // Create uniform buffer to store all point lights data\n      // The uniform block is an array of lights\n      this.uniformBuffer = new UniformBuffer(data);\n\n      // Tmp array for updating the lights data buffer\n      this._lightsData = new Float32Array(\n        lights[0].data.length * lights.length\n      );\n    }\n  }\n\n  get length() {\n    return this.lights.length;\n  }\n\n  public get() {\n    return this.lights;\n  }\n\n  public update() {\n    if (GL.webgl2) {\n      // Get data from lights and update the uniform buffer\n      this.lights.forEach((light, i) => {\n        light.update();\n        this._lightsData.set(light.data, i * light.data.length);\n      });\n      this.uniformBuffer.setValues(this._lightsData, 0);\n    } else {\n      this.lights.forEach(light => {\n        light.update();\n      });\n    }\n  }\n\n  public bind() {\n    if (GL.webgl2) {\n      gl = GL.get();\n\n      gl.bindBuffer(gl.UNIFORM_BUFFER, this.uniformBuffer.buffer);\n      gl.bufferSubData(gl.UNIFORM_BUFFER, 0, this.uniformBuffer.data);\n      gl.bindBuffer(gl.UNIFORM_BUFFER, null);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lights/Lights.ts","import { LIGHT_AMBIENT } from '../core/Constants';\nimport * as GL from '../core/GL';\nimport Color from '../math/Color';\nimport Vector3 from '../math/Vector3';\nimport Light from './Light';\n\nexport default class AmbientLight extends Light {\n  public uniforms: any;\n  public position: Vector3;\n\n  constructor(uniforms = {}) {\n    super();\n    this.type = LIGHT_AMBIENT;\n    this.uniforms = {\n      color: {\n        type: '3f',\n        value: new Color(0x404040).v\n      },\n      intensity: {\n        type: 'f',\n        value: 0.1\n      }\n    };\n    Object.assign(this.uniforms, uniforms);\n\n    if (GL.webgl2) {\n      // Buffer data\n      this.data = new Float32Array([\n        ...this.uniforms.color.value,\n        0.0,\n        this.uniforms.intensity.value,\n        0.0,\n        0.0,\n        0.0\n      ]);\n    }\n  }\n\n  public update() {\n    if (GL.webgl2) {\n      // Set values for buffer data\n      this.setValues(this.uniforms.color.value, 0);\n      this.setValues([this.uniforms.intensity.value], 4);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lights/AmbientLight.ts","import { LIGHT_DIRECTIONAL } from '../core/Constants';\nimport * as GL from '../core/GL';\nimport Color from '../math/Color';\nimport Vector3 from '../math/Vector3';\nimport Light from './Light';\n\nexport default class DirectionalLight extends Light {\n  public uniforms: any;\n  public position: Vector3;\n\n  constructor(uniforms = {}) {\n    super();\n    this.type = LIGHT_DIRECTIONAL;\n    this.uniforms = {\n      position: {\n        type: '3f',\n        value: new Vector3(0, 0, 0).v\n      },\n      color: {\n        type: '3f',\n        value: new Color(0xffffff).v\n      },\n      intensity: {\n        type: 'f',\n        value: 1\n      }\n    };\n    Object.assign(this.uniforms, uniforms);\n\n    this.position = new Vector3();\n\n    if (GL.webgl2) {\n      // Buffer data\n      this.data = new Float32Array([\n        ...this.uniforms.position.value,\n        0.0,\n        ...this.uniforms.color.value,\n        0.0,\n        this.uniforms.intensity.value,\n        0.0,\n        0.0,\n        0.0\n      ]);\n    }\n  }\n\n  public update() {\n    if (GL.webgl2) {\n      // Set values for buffer data\n      this.setValues(this.position.v);\n      this.setValues(this.uniforms.color.value, 4);\n      this.setValues([this.uniforms.intensity.value], 8);\n    } else {\n      this.uniforms.position.value.set(this.position.v);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lights/DirectionalLight.ts","import { LIGHT_POINT } from '../core/Constants';\nimport * as GL from '../core/GL';\nimport Color from '../math/Color';\nimport Vector3 from '../math/Vector3';\nimport Light from './Light';\n\nexport default class PointLight extends Light {\n  public uniforms: any;\n  public position: Vector3;\n\n  constructor(uniforms = {}) {\n    super();\n    this.type = LIGHT_POINT;\n    this.uniforms = {\n      position: {\n        type: '3f',\n        value: new Vector3(0, 0, 0).v\n      },\n      color: {\n        type: '3f',\n        value: new Color(0xffffff).v\n      },\n      specularColor: {\n        type: '3f',\n        value: new Color(0xffffff).v\n      },\n      shininess: {\n        type: 'f',\n        value: 100\n      },\n      intensity: {\n        type: 'f',\n        value: 1\n      }\n    };\n    Object.assign(this.uniforms, uniforms);\n\n    this.position = new Vector3();\n\n    if (GL.webgl2) {\n      // Buffer data\n      this.data = new Float32Array([\n        ...this.uniforms.position.value,\n        0.0,\n        ...this.uniforms.color.value,\n        0.0,\n        ...this.uniforms.specularColor.value,\n        0.0,\n        this.uniforms.shininess.value,\n        0.0,\n        0.0,\n        0.0,\n        this.uniforms.intensity.value,\n        0.0,\n        0.0,\n        0.0\n      ]);\n    }\n  }\n\n  public update() {\n    if (GL.webgl2) {\n      // Set values for buffer data\n      this.setValues(this.position.v);\n      this.setValues(this.uniforms.color.value, 4);\n      this.setValues(this.uniforms.specularColor.value, 8);\n      this.setValues([this.uniforms.shininess.value], 12);\n      this.setValues([this.uniforms.intensity.value], 16);\n    } else {\n      this.uniforms.position.value.set(this.position.v);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lights/PointLight.ts","import * as AmbientLight from './AmbientLight.glsl';\nimport Conditionals from './Conditionals.glsl';\nimport * as DirectionalLights from './DirectionalLights.glsl';\nimport EnvMapCube from './EnvMapCube.glsl';\nimport EsVersion from './EsVersion.glsl';\nimport Fog from './Fog.glsl';\nimport Gamma from './Gamma.glsl';\nimport * as Lambert from './Lambert.glsl';\nimport Matcap from './Matcap.glsl';\nimport Math from './Math.glsl';\nimport * as Noise from './Noise.glsl';\nimport Packing from './Packing.glsl';\nimport * as PointLights from './PointLights.glsl';\nimport ProjectionView from './ProjectionView.glsl';\nimport * as Tonemap from './Tonemap.glsl';\nimport Transpose from './Transpose.glsl';\n\nexport default {\n  AmbientLight,\n  Conditionals,\n  DirectionalLights,\n  EnvMapCube,\n  EsVersion,\n  Fog,\n  Gamma,\n  Lambert,\n  Matcap,\n  Math,\n  Noise,\n  Packing,\n  PointLights,\n  ProjectionView,\n  Tonemap,\n  Transpose\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/index.ts","export const whenEquals = `\nfloat whenEquals(float x, float y) {\n  return 1.0 - abs(sign(x - y));\n};\n`;\n\nexport const whenEqualsInt = `\nint whenEqualsInt(int x, int y) {\n  return 1 - abs(sign(x - y));\n}\n`;\n\nexport const whenLessThan = `\nfloat whenLessThan(float x, float y) {\n  return max(sign(y - x), 0.0);\n}\n`;\n\nexport const whenGreaterThan = `\nfloat whenGreaterThan(float x, float y) {\n  return max(sign(x - y), 0.0);\n}\n`;\n\nexport default {\n  whenEquals,\n  whenEqualsInt,\n  whenLessThan,\n  whenGreaterThan\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/Conditionals.glsl.ts","/**\n * https://github.com/vorg/pragmatic-pbr/blob/master/local_modules/glsl-envmap-cube/index.glsl\n */\n\nexport default `\n/**\n * Samples cubemap environment map\n * @param  {vec3} wcNormal - normal in the world coordinate space\n * @param  {float} - flipEnvMap    -1.0 for left handed coorinate system oriented texture (usual case)\n *                                  1.0 for right handed coorinate system oriented texture\n * @return {vec4} - cubemap texture coordinate\n */\nvec3 envMapCube(vec3 wcNormal, float flipEnvMap) {\n\treturn vec3(flipEnvMap * wcNormal.x, wcNormal.y, wcNormal.z);\n}\n\nvec3 envMapCube(vec3 wcNormal) {\n //-1.0 for left handed coorinate system oriented texture (usual case)\n return envMapCube(wcNormal, -1.0);\n}\n`;\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/EnvMapCube.glsl.ts","// https://github.com/hughsk/glsl-fog\n\nexport const linear = `\nfloat fogLinear(const float dist, const float start, const float end) {\n  return 1.0 - clamp((end - dist) / (end - start), 0.0, 1.0);\n}\n`;\n\nexport const exp = `\nfloat fogExp(\n  const float dist,\n  const float density\n) {\n  return 1.0 - clamp(exp(-density * dist), 0.0, 1.0);\n}\n`;\n\nexport const exp2 = `\nfloat fogExp2(\n  const float dist,\n  const float density\n) {\n  const float LOG2 = -1.442695;\n  float d = density * dist;\n  return 1.0 - clamp(exp2(d * d * LOG2), 0.0, 1.0);\n}\n`;\n\nexport default {\n  linear,\n  exp,\n  exp2\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/Fog.glsl.ts","// https://raw.githubusercontent.com/stackgl/glsl-gamma/master/out.glsl\n\nexport default `\n\tconst float gamma = 2.2;\n\n\tfloat toGamma(float v) {\n\t  return pow(v, 1.0 / gamma);\n\t}\n\n\tvec2 toGamma(vec2 v) {\n\t  return pow(v, vec2(1.0 / gamma));\n\t}\n\n\tvec3 toGamma(vec3 v) {\n\t  return pow(v, vec3(1.0 / gamma));\n\t}\n\n\tvec4 toGamma(vec4 v) {\n\t  return vec4(toGamma(v.rgb), v.a);\n\t}\n`;\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/Gamma.glsl.ts","// https://github.com/hughsk/matcap/blob/master/matcap.glsl\n\nexport default `\nvec2 matcap(vec3 eye, vec3 normal) {\n  vec3 reflected = reflect(eye, normal);\n  float m = 2.8284271247461903 * sqrt( reflected.z+1.0 );\n  return reflected.xy / m + 0.5;\n}\n`;\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/Matcap.glsl.ts","// https://github.com/hughsk/glsl-noise\n\nexport const classicNoise2D = `\n//\n// GLSL textureless classic 2D noise \"cnoise\",\n// with an RSL-style periodic variant \"pnoise\".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec2 fade(vec2 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat classicNoise2D(vec2 P)\n{\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod289(Pi); // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n\n  vec4 i = permute(permute(ix) + iy);\n\n  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n  vec4 gy = abs(gx) - 0.5 ;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n\n  vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n`;\n\nexport const classicNoise3D = `\n//\n// GLSL textureless classic 3D noise \"cnoise\",\n// with an RSL-style periodic variant \"pnoise\".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat classicNoise3D(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n`;\n\nexport const classicNoise4D = `\n//\n// GLSL textureless classic 4D noise \"cnoise\",\n// with an RSL-style periodic variant \"pnoise\".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 fade(vec4 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat classicNoise4D(vec4 P)\n{\n  vec4 Pi0 = floor(P); // Integer part for indexing\n  vec4 Pi1 = Pi0 + 1.0; // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec4 Pf0 = fract(P); // Fractional part for interpolation\n  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = vec4(Pi0.zzzz);\n  vec4 iz1 = vec4(Pi1.zzzz);\n  vec4 iw0 = vec4(Pi0.wwww);\n  vec4 iw1 = vec4(Pi1.wwww);\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n  vec4 ixy00 = permute(ixy0 + iw0);\n  vec4 ixy01 = permute(ixy0 + iw1);\n  vec4 ixy10 = permute(ixy1 + iw0);\n  vec4 ixy11 = permute(ixy1 + iw1);\n\n  vec4 gx00 = ixy00 * (1.0 / 7.0);\n  vec4 gy00 = floor(gx00) * (1.0 / 7.0);\n  vec4 gz00 = floor(gy00) * (1.0 / 6.0);\n  gx00 = fract(gx00) - 0.5;\n  gy00 = fract(gy00) - 0.5;\n  gz00 = fract(gz00) - 0.5;\n  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n  vec4 sw00 = step(gw00, vec4(0.0));\n  gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n  gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n  vec4 gx01 = ixy01 * (1.0 / 7.0);\n  vec4 gy01 = floor(gx01) * (1.0 / 7.0);\n  vec4 gz01 = floor(gy01) * (1.0 / 6.0);\n  gx01 = fract(gx01) - 0.5;\n  gy01 = fract(gy01) - 0.5;\n  gz01 = fract(gz01) - 0.5;\n  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n  vec4 sw01 = step(gw01, vec4(0.0));\n  gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n  gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n  vec4 gx10 = ixy10 * (1.0 / 7.0);\n  vec4 gy10 = floor(gx10) * (1.0 / 7.0);\n  vec4 gz10 = floor(gy10) * (1.0 / 6.0);\n  gx10 = fract(gx10) - 0.5;\n  gy10 = fract(gy10) - 0.5;\n  gz10 = fract(gz10) - 0.5;\n  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n  vec4 sw10 = step(gw10, vec4(0.0));\n  gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n  gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n  vec4 gx11 = ixy11 * (1.0 / 7.0);\n  vec4 gy11 = floor(gx11) * (1.0 / 7.0);\n  vec4 gz11 = floor(gy11) * (1.0 / 6.0);\n  gx11 = fract(gx11) - 0.5;\n  gy11 = fract(gy11) - 0.5;\n  gz11 = fract(gz11) - 0.5;\n  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n  vec4 sw11 = step(gw11, vec4(0.0));\n  gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n  gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n  vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n  g0000 *= norm00.x;\n  g0100 *= norm00.y;\n  g1000 *= norm00.z;\n  g1100 *= norm00.w;\n\n  vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n  g0001 *= norm01.x;\n  g0101 *= norm01.y;\n  g1001 *= norm01.z;\n  g1101 *= norm01.w;\n\n  vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n  g0010 *= norm10.x;\n  g0110 *= norm10.y;\n  g1010 *= norm10.z;\n  g1110 *= norm10.w;\n\n  vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n  g0011 *= norm11.x;\n  g0111 *= norm11.y;\n  g1011 *= norm11.z;\n  g1111 *= norm11.w;\n\n  float n0000 = dot(g0000, Pf0);\n  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n  float n1111 = dot(g1111, Pf1);\n\n  vec4 fade_xyzw = fade(Pf0);\n  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n  return 2.2 * n_xyzw;\n}\n`;\n\nexport const periodicNoise2D = `\n//\n// GLSL textureless classic 2D noise \"cnoise\",\n// with an RSL-style periodic variant \"pnoise\".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec2 fade(vec2 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise, periodic variant\nfloat periodicNoise2D(vec2 P, vec2 rep)\n{\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod(Pi, rep.xyxy); // To create noise with explicit period\n  Pi = mod289(Pi);        // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n\n  vec4 i = permute(permute(ix) + iy);\n\n  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n  vec4 gy = abs(gx) - 0.5 ;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n\n  vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n`;\n\nexport const periodicNoise3D = `\n//\n// GLSL textureless classic 3D noise \"cnoise\",\n// with an RSL-style periodic variant \"pnoise\".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise, periodic variant\nfloat periodicNoise3D(vec3 P, vec3 rep)\n{\n  vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n  vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n`;\n\nexport const periodicNoise4D = `\n//\n// GLSL textureless classic 4D noise \"cnoise\",\n// with an RSL-style periodic variant \"pnoise\".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 fade(vec4 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise, periodic version\nfloat periodicNoise4D(vec4 P, vec4 rep)\n{\n  vec4 Pi0 = mod(floor(P), rep); // Integer part modulo rep\n  vec4 Pi1 = mod(Pi0 + 1.0, rep); // Integer part + 1 mod rep\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec4 Pf0 = fract(P); // Fractional part for interpolation\n  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = vec4(Pi0.zzzz);\n  vec4 iz1 = vec4(Pi1.zzzz);\n  vec4 iw0 = vec4(Pi0.wwww);\n  vec4 iw1 = vec4(Pi1.wwww);\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n  vec4 ixy00 = permute(ixy0 + iw0);\n  vec4 ixy01 = permute(ixy0 + iw1);\n  vec4 ixy10 = permute(ixy1 + iw0);\n  vec4 ixy11 = permute(ixy1 + iw1);\n\n  vec4 gx00 = ixy00 * (1.0 / 7.0);\n  vec4 gy00 = floor(gx00) * (1.0 / 7.0);\n  vec4 gz00 = floor(gy00) * (1.0 / 6.0);\n  gx00 = fract(gx00) - 0.5;\n  gy00 = fract(gy00) - 0.5;\n  gz00 = fract(gz00) - 0.5;\n  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n  vec4 sw00 = step(gw00, vec4(0.0));\n  gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n  gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n  vec4 gx01 = ixy01 * (1.0 / 7.0);\n  vec4 gy01 = floor(gx01) * (1.0 / 7.0);\n  vec4 gz01 = floor(gy01) * (1.0 / 6.0);\n  gx01 = fract(gx01) - 0.5;\n  gy01 = fract(gy01) - 0.5;\n  gz01 = fract(gz01) - 0.5;\n  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n  vec4 sw01 = step(gw01, vec4(0.0));\n  gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n  gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n  vec4 gx10 = ixy10 * (1.0 / 7.0);\n  vec4 gy10 = floor(gx10) * (1.0 / 7.0);\n  vec4 gz10 = floor(gy10) * (1.0 / 6.0);\n  gx10 = fract(gx10) - 0.5;\n  gy10 = fract(gy10) - 0.5;\n  gz10 = fract(gz10) - 0.5;\n  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n  vec4 sw10 = step(gw10, vec4(0.0));\n  gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n  gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n  vec4 gx11 = ixy11 * (1.0 / 7.0);\n  vec4 gy11 = floor(gx11) * (1.0 / 7.0);\n  vec4 gz11 = floor(gy11) * (1.0 / 6.0);\n  gx11 = fract(gx11) - 0.5;\n  gy11 = fract(gy11) - 0.5;\n  gz11 = fract(gz11) - 0.5;\n  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n  vec4 sw11 = step(gw11, vec4(0.0));\n  gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n  gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n  vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n  g0000 *= norm00.x;\n  g0100 *= norm00.y;\n  g1000 *= norm00.z;\n  g1100 *= norm00.w;\n\n  vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n  g0001 *= norm01.x;\n  g0101 *= norm01.y;\n  g1001 *= norm01.z;\n  g1101 *= norm01.w;\n\n  vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n  g0010 *= norm10.x;\n  g0110 *= norm10.y;\n  g1010 *= norm10.z;\n  g1110 *= norm10.w;\n\n  vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n  g0011 *= norm11.x;\n  g0111 *= norm11.y;\n  g1011 *= norm11.z;\n  g1111 *= norm11.w;\n\n  float n0000 = dot(g0000, Pf0);\n  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n  float n1111 = dot(g1111, Pf1);\n\n  vec4 fade_xyzw = fade(Pf0);\n  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n  return 2.2 * n_xyzw;\n}\n`;\n\nexport const simplexNoise2D = `\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat simplexNoise2D(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289(i); // Avoid truncation effects in permutation\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n    + i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n`;\n\nexport const simplexNoise3D = `\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat simplexNoise3D(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n`;\n\nexport const simplexNoise4D = `\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n  }\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat simplexNoise4D(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289(i);\n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n`;\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/Noise.glsl.ts","export const packNormalToRGB = `\n\tvec3 packNormalToRGB(const in vec3 normal) {\n\t  return normalize(normal) * 0.5 + 0.5;\n\t}\n`;\n\nexport default {\n  packNormalToRGB\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/Packing.glsl.ts","// https://raw.githubusercontent.com/stackgl/glsl-gamma/master/out.glsl\n\nexport const tonemapReinhard = `\n\tvec3 tonemapReinhard(vec3 color) {\n\t  return color / (color + vec3(1.0));\n\t}\n`;\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/Tonemap.glsl.ts","/**\n * https://github.com/stackgl/glsl-transpose/blob/master/index.glsl\n */\n\nexport default `\n\tfloat transpose(float m) {\n\t  return m;\n\t}\n\n\tmat2 transpose(mat2 m) {\n\t  return mat2(m[0][0], m[1][0],\n\t              m[0][1], m[1][1]);\n\t}\n\n\tmat3 transpose(mat3 m) {\n\t  return mat3(m[0][0], m[1][0], m[2][0],\n\t              m[0][1], m[1][1], m[2][1],\n\t              m[0][2], m[1][2], m[2][2]);\n\t}\n\n\tmat4 transpose(mat4 m) {\n\t  return mat4(m[0][0], m[1][0], m[2][0], m[3][0],\n\t              m[0][1], m[1][1], m[2][1], m[3][1],\n\t              m[0][2], m[1][2], m[2][2], m[3][2],\n\t              m[0][3], m[1][3], m[2][3], m[3][3]);\n\t}\n`;\n\n\n\n// WEBPACK FOOTER //\n// ./src/shaders/chunks/Transpose.glsl.ts","import Bezier from 'bezier-js';\nimport { GUI } from 'dat-gui';\nimport uuid from 'uuid/v1';\nimport PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport { DRAW_LINES } from '../core/Constants';\nimport EventDispatcher from '../core/EventDispatcher';\nimport Mesh from '../core/Mesh';\nimport Scene from '../core/Scene';\nimport Shader from '../core/Shader';\nimport LineGeometry from '../geometry/LineGeometry';\nimport SphereGeometry from '../geometry/SphereGeometry';\n\ninterface DollyCurves {\n  origin: Bezier;\n  lookat: Bezier;\n}\n\nclass Dolly {\n  public curves: DollyCurves;\n  public origin: object[];\n  public lookat: object[];\n  constructor(origin, lookat, steps = 50) {\n    this.origin = origin;\n    this.lookat = lookat;\n    let originPoints = [];\n    let lookatPoints = [];\n\n    origin.forEach(point => {\n      originPoints = originPoints.concat(point);\n    });\n\n    lookat.forEach(point => {\n      lookatPoints = lookatPoints.concat(point);\n    });\n\n    this.curves = {\n      origin: new Bezier(originPoints),\n      lookat: new Bezier(lookatPoints)\n    };\n  }\n\n  public get(time = 0) {\n    const origin = this.curves.origin.get(time);\n    const lookat = this.curves.lookat.get(time);\n    return {\n      origin,\n      lookat\n    };\n  }\n\n  public rebuild() {\n    this.curves.origin.update();\n    this.curves.lookat.update();\n  }\n\n  public destroy() {\n    this.curves.origin = null;\n    this.curves.lookat = null;\n  }\n}\n\ninterface IDollyHelperLines {\n  origin: Mesh;\n  lookat: Mesh;\n}\n\ninterface IDollyHelperPoints {\n  origin: Mesh[];\n  lookat: Mesh[];\n}\n\nclass DollyHelper extends EventDispatcher {\n  public id: string;\n  public dolly: Dolly;\n  public scene: Scene;\n  public gui: GUI;\n  public guiOrigin: GUI;\n  public guiLookat: GUI;\n  public steps: number;\n  public range: number;\n  public lines: IDollyHelperLines;\n  public points: IDollyHelperPoints;\n  constructor(\n    dolly: Dolly,\n    scene: Scene,\n    gui: GUI,\n    steps = 50,\n    range = 100,\n    guiOpen = false,\n    guiOpenOrigin = false,\n    guiOpenLookat = false\n  ) {\n    super();\n    this.id = uuid();\n    this.dolly = dolly;\n    this.scene = scene;\n    this.gui = gui.addFolder(`Dolly ${this.id}`);\n    if (guiOpen) {\n      this.gui.open();\n    }\n    this.steps = steps;\n    this.range = range;\n    this.lines = {\n      origin: null,\n      lookat: null\n    };\n    this.points = {\n      origin: [],\n      lookat: []\n    };\n    this.createPoints('origin', this.dolly.origin);\n    this.createPoints('lookat', this.dolly.lookat);\n    this.createLine('origin', this.dolly.curves.origin.getLUT(this.steps));\n    this.createLine('lookat', this.dolly.curves.lookat.getLUT(this.steps));\n\n    // Create gui folders\n    this.guiOrigin = this.gui.addFolder(`origin`);\n    this.guiLookat = this.gui.addFolder(`lookat`);\n\n    if (guiOpenOrigin) {\n      this.guiOrigin.open();\n    }\n\n    if (guiOpenLookat) {\n      this.guiLookat.open();\n    }\n    this.guiLookat.open();\n\n    this.dolly.curves.origin.points.forEach((point, i) => {\n      const folder = this.guiOrigin.addFolder(`${i}`);\n      folder.open();\n      folder.add(point, 'x', -this.range, this.range).onChange(this._rebuild);\n      folder.add(point, 'y', -this.range, this.range).onChange(this._rebuild);\n      folder.add(point, 'z', -this.range, this.range).onChange(this._rebuild);\n    });\n\n    this.dolly.curves.lookat.points.forEach((point, i) => {\n      const folder = this.guiLookat.addFolder(`${i}`);\n      folder.open();\n      folder.add(point, 'x', -this.range, this.range).onChange(this._rebuild);\n      folder.add(point, 'y', -this.range, this.range).onChange(this._rebuild);\n      folder.add(point, 'z', -this.range, this.range).onChange(this._rebuild);\n    });\n  }\n\n  public _rebuild = () => {\n    this.dolly.rebuild();\n    this.updateLine('origin', this.dolly.curves.origin.getLUT(this.steps));\n    this.updateLine('lookat', this.dolly.curves.lookat.getLUT(this.steps));\n    this.updatePoints('origin', this.dolly.curves.origin.points);\n    this.updatePoints('lookat', this.dolly.curves.lookat.points);\n    this.emit('rebuild');\n  };\n\n  public flatten(points) {\n    let pointsFlat = [];\n    points.forEach(point => {\n      pointsFlat = pointsFlat.concat([point.x, point.y, point.z]);\n    });\n    return pointsFlat;\n  }\n\n  public createPoints(id: string, points: object[]) {\n    points.forEach((point: any, i) => {\n      this.points[id][i] = new Mesh(\n        new SphereGeometry(0.2, 4, 5),\n        new Shader({\n          drawType: DRAW_LINES\n        })\n      );\n      this.points[id][i].position.set(point.x, point.y, point.z);\n      this.scene.add(this.points[id][i]);\n    });\n  }\n\n  public updatePoints(id: string, points: object[]) {\n    points.forEach((point: any, i) => {\n      this.points[id][i].position.set(point.x, point.y, point.z);\n    });\n  }\n\n  public updateLine(id: string, points: object[]) {\n    const length = this.lines[id].geometry.vertices.length / 2;\n    let i2 = 0;\n    let point0;\n    let point1;\n    for (let i = 0; i < length; i += 1) {\n      i2 = i * 2;\n      if (i < length) {\n        point0 = points[i];\n        point1 = points[i + 1];\n        this.lines[id].geometry.vertices[i2].set(point0.x, point0.y, point0.z);\n        this.lines[id].geometry.vertices[i2 + 1].set(\n          point1.x,\n          point1.y,\n          point1.z\n        );\n      }\n    }\n    this.lines[id].geometry.updateVertices();\n  }\n\n  public createLine(id: string, points: object[]) {\n    const bufferVertices = new Float32Array(this.flatten(points));\n    this.lines[id] = new Mesh(\n      new LineGeometry(bufferVertices),\n      new Shader({\n        drawType: DRAW_LINES\n      })\n    );\n    this.scene.add(this.lines[id]);\n  }\n\n  public destroy() {\n    Object.keys(this.lines).forEach(id => {\n      this.scene.remove(this.lines[id], true);\n    });\n    Object.keys(this.points).forEach(id => {\n      this.points[id].forEach(mesh => {\n        this.scene.remove(mesh, true);\n      });\n    });\n    this.scene = null;\n  }\n}\n\ninterface CameraDollyOptions {\n  camera: PerspectiveCamera;\n  scene: Scene;\n  gui: GUI;\n  curveSteps: number;\n  guiSliderRange: number;\n  guiOpen: boolean;\n  guiOpenOrigin: boolean;\n  guiOpenLookat: boolean;\n}\n\nexport default class CameraDolly {\n  public id: string;\n  public camera: PerspectiveCamera;\n  public scene: Scene;\n  public gui: GUI;\n  public guiFolder: GUI;\n  public curveSteps: number;\n  public guiSliderRange: number;\n  public guiOpen: boolean;\n  public guiOpenOrigin: boolean;\n  public guiOpenLookat: boolean;\n  public dollies: Dolly[];\n  public helpers: DollyHelper[];\n  public dolly: string;\n  public time: number;\n\n  constructor(options: CameraDollyOptions) {\n    this.id = uuid();\n    Object.assign(this, options);\n    this.dollies = [];\n    this.helpers = [];\n    this.dolly = '';\n    this.time = 0;\n\n    if (this.gui) {\n      this.guiFolder = this.gui.addFolder(`Camera Dolly ${this.id}`);\n      this.guiFolder.open();\n      this.guiFolder.add(this, 'export');\n    }\n  }\n\n  public add(id, data) {\n    this.dollies[id] = new Dolly(data.origin, data.lookat, this.curveSteps);\n    this.set(id);\n    if (this.guiFolder) {\n      this.helpers[id] = new DollyHelper(\n        this.dollies[id],\n        this.scene,\n        this.gui,\n        this.curveSteps,\n        this.guiSliderRange,\n        this.guiOpen,\n        this.guiOpenOrigin,\n        this.guiOpenLookat\n      );\n      this.helpers[id].on('rebuild', this.update);\n    }\n  }\n\n  public export() {\n    const data = JSON.stringify(\n      {\n        origin: this.dollies[this.dolly].curves.origin.points,\n        lookat: this.dollies[this.dolly].curves.lookat.points\n      },\n      undefined,\n      2\n    );\n    window.prompt('Copy to clipboard: Ctrl+C, Enter', data);\n  }\n\n  public set(id) {\n    this.dolly = id;\n  }\n\n  public update = () => {\n    const { origin, lookat } = this.dollies[this.dolly].get(this.time);\n    this.camera.position.set(origin.x, origin.y, origin.z);\n    this.camera.lookAt(lookat.x, lookat.y, lookat.z);\n  };\n\n  public destroy() {\n    Object.keys(this.dollies).forEach(id => {\n      this.dollies[id].destroy();\n    });\n    Object.keys(this.helpers).forEach(id => {\n      this.helpers[id].destroy();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/CameraDolly.ts","module.exports = require('./lib/bezier');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/bezier-js/index.js\n// module id = 90\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","(function() {\n  \"use strict\";\n\n  var utils = require('./utils.js');\n\n  /**\n   * Poly Bezier\n   * @param {[type]} curves [description]\n   */\n  var PolyBezier = function(curves) {\n    this.curves = [];\n    this._3d = false;\n    if(!!curves) {\n      this.curves = curves;\n      this._3d = this.curves[0]._3d;\n    }\n  }\n\n  PolyBezier.prototype = {\n    valueOf: function() {\n      return this.toString();\n    },\n    toString: function() {\n      return \"[\" + this.curves.map(function(curve) {\n        return utils.pointsToString(curve.points);\n      }).join(\", \") + \"]\";\n    },\n    addCurve: function(curve) {\n      this.curves.push(curve);\n      this._3d = this._3d || curve._3d;\n    },\n    length: function() {\n      return this.curves.map(function(v) { return v.length(); }).reduce(function(a,b) { return a+b; });\n    },\n    curve: function(idx) {\n      return this.curves[idx];\n    },\n    bbox: function() {\n      var c = this.curves;\n      var bbox = c[0].bbox();\n      for(var i=1; i<c.length; i++) {\n        utils.expandbox(bbox, c[i].bbox());\n      }\n      return bbox;\n    },\n    offset: function(d) {\n      var offset = [];\n      this.curves.forEach(function(v) {\n        offset = offset.concat(v.offset(d));\n      });\n      return new PolyBezier(offset);\n    }\n  };\n\n  module.exports = PolyBezier;\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/bezier-js/lib/poly-bezier.js\n// module id = 91\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/uuid/v1.js\n// module id = 92\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/uuid/lib/rng-browser.js\n// module id = 93\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 94\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/uuid/lib/bytesToUuid.js\n// module id = 95\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/**\n * @author alteredq / http://alteredqualia.com/\n * https://github.com/mrdoob/three.js/blob/master/src/core/Clock.js\n */\n\nlet diff: number;\nlet newTime: number;\nconst dateType = window.performance || Date;\n\nexport default class Clock {\n  public autoStart: boolean;\n  public startTime: number;\n  public oldTime: number;\n  public elapsedTime: number;\n  public isRunning: boolean;\n\n  constructor(autoStart = false) {\n    this.startTime = 0;\n    this.oldTime = 0;\n    this.elapsedTime = 0;\n    this.isRunning = autoStart;\n  }\n\n  public start() {\n    this.startTime = dateType.now();\n    this.oldTime = this.startTime;\n    this.elapsedTime = 0;\n    this.isRunning = true;\n  }\n\n  public stop() {\n    this.getElapsedTime();\n    this.isRunning = false;\n  }\n\n  public getElapsedTime() {\n    this.getDelta();\n    return this.elapsedTime;\n  }\n\n  public getDelta() {\n    diff = 0;\n    if (this.autoStart && !this.isRunning) {\n      this.start();\n    }\n\n    if (this.isRunning) {\n      newTime = dateType.now();\n\n      diff = (newTime - this.oldTime) / 1000;\n      this.oldTime = newTime;\n\n      this.elapsedTime += diff;\n    }\n\n    return diff;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/Clock.ts","(function (undefined) {\n  'use strict';\n\n  var OBJ = {};\n\n  if (typeof module !== 'undefined') {\n    module.exports = OBJ;\n  } else {\n    window.OBJ = OBJ;\n  }\n\n  /**\n   * The main Mesh class. The constructor will parse through the OBJ file data\n   * and collect the vertex, vertex normal, texture, and face information. This\n   * information can then be used later on when creating your VBOs. See\n   * OBJ.initMeshBuffers for an example of how to use the newly created Mesh\n   *\n   * @class Mesh\n   * @constructor\n   *\n   * @param {String} objectData a string representation of an OBJ file with newlines preserved.\n   */\n  OBJ.Mesh = function (objectData) {\n    /*\n     The OBJ file format does a sort of compression when saving a model in a\n     program like Blender. There are at least 3 sections (4 including textures)\n     within the file. Each line in a section begins with the same string:\n       * 'v': indicates vertex section\n       * 'vn': indicates vertex normal section\n       * 'f': indicates the faces section\n       * 'vt': indicates vertex texture section (if textures were used on the model)\n     Each of the above sections (except for the faces section) is a list/set of\n     unique vertices.\n\n     Each line of the faces section contains a list of\n     (vertex, [texture], normal) groups\n     Some examples:\n         // the texture index is optional, both formats are possible for models\n         // without a texture applied\n         f 1/25 18/46 12/31\n         f 1//25 18//46 12//31\n\n         // A 3 vertex face with texture indices\n         f 16/92/11 14/101/22 1/69/1\n\n         // A 4 vertex face\n         f 16/92/11 40/109/40 38/114/38 14/101/22\n\n     The first two lines are examples of a 3 vertex face without a texture applied.\n     The second is an example of a 3 vertex face with a texture applied.\n     The third is an example of a 4 vertex face. Note: a face can contain N\n     number of vertices.\n\n     Each number that appears in one of the groups is a 1-based index\n     corresponding to an item from the other sections (meaning that indexing\n     starts at one and *not* zero).\n\n     For example:\n         `f 16/92/11` is saying to\n           - take the 16th element from the [v] vertex array\n           - take the 92nd element from the [vt] texture array\n           - take the 11th element from the [vn] normal array\n         and together they make a unique vertex.\n     Using all 3+ unique Vertices from the face line will produce a polygon.\n\n     Now, you could just go through the OBJ file and create a new vertex for\n     each face line and WebGL will draw what appears to be the same model.\n     However, vertices will be overlapped and duplicated all over the place.\n\n     Consider a cube in 3D space centered about the origin and each side is\n     2 units long. The front face (with the positive Z-axis pointing towards\n     you) would have a Top Right vertex (looking orthogonal to its normal)\n     mapped at (1,1,1) The right face would have a Top Left vertex (looking\n     orthogonal to its normal) at (1,1,1) and the top face would have a Bottom\n     Right vertex (looking orthogonal to its normal) at (1,1,1). Each face\n     has a vertex at the same coordinates, however, three distinct vertices\n     will be drawn at the same spot.\n\n     To solve the issue of duplicate Vertices (the `(vertex, [texture], normal)`\n     groups), while iterating through the face lines, when a group is encountered\n     the whole group string ('16/92/11') is checked to see if it exists in the\n     packed.hashindices object, and if it doesn't, the indices it specifies\n     are used to look up each attribute in the corresponding attribute arrays\n     already created. The values are then copied to the corresponding unpacked\n     array (flattened to play nice with WebGL's ELEMENT_ARRAY_BUFFER indexing),\n     the group string is added to the hashindices set and the current unpacked\n     index is used as this hashindices value so that the group of elements can\n     be reused. The unpacked index is incremented. If the group string already\n     exists in the hashindices object, its corresponding value is the index of\n     that group and is appended to the unpacked indices array.\n     */\n    var verts = [], vertNormals = [], textures = [], unpacked = {};\n    // unpacking stuff\n    unpacked.verts = [];\n    unpacked.norms = [];\n    unpacked.textures = [];\n    unpacked.hashindices = {};\n    unpacked.indices = [];\n    unpacked.index = 0;\n    // array of lines separated by the newline\n    var lines = objectData.split('\\n');\n    \n    var VERTEX_RE = /^v\\s/;\n    var NORMAL_RE = /^vn\\s/;\n    var TEXTURE_RE = /^vt\\s/;\n    var FACE_RE = /^f\\s/;\n    var WHITESPACE_RE = /\\s+/;\n    \n    for (var i = 0; i < lines.length; i++) {\n      var line = lines[i].trim();\n      var elements = line.split(WHITESPACE_RE);\n      elements.shift();\n      \n      if (VERTEX_RE.test(line)) {\n        // if this is a vertex\n        verts.push.apply(verts, elements);\n      } else if (NORMAL_RE.test(line)) {\n        // if this is a vertex normal\n        vertNormals.push.apply(vertNormals, elements);\n      } else if (TEXTURE_RE.test(line)) {\n        // if this is a texture\n        textures.push.apply(textures, elements);\n      } else if (FACE_RE.test(line)) {\n        // if this is a face\n        /*\n        split this face into an array of vertex groups\n        for example:\n           f 16/92/11 14/101/22 1/69/1\n        becomes:\n          ['16/92/11', '14/101/22', '1/69/1'];\n        */\n        var quad = false;\n        for (var j = 0, eleLen = elements.length; j < eleLen; j++){\n            // Triangulating quads\n            // quad: 'f v0/t0/vn0 v1/t1/vn1 v2/t2/vn2 v3/t3/vn3/'\n            // corresponding triangles:\n            //      'f v0/t0/vn0 v1/t1/vn1 v2/t2/vn2'\n            //      'f v2/t2/vn2 v3/t3/vn3 v0/t0/vn0'\n            if(j === 3 && !quad) {\n                // add v2/t2/vn2 in again before continuing to 3\n                j = 2;\n                quad = true;\n            }\n            if(elements[j] in unpacked.hashindices){\n                unpacked.indices.push(unpacked.hashindices[elements[j]]);\n            }\n            else{\n                /*\n                Each element of the face line array is a vertex which has its\n                attributes delimited by a forward slash. This will separate\n                each attribute into another array:\n                    '19/92/11'\n                becomes:\n                    vertex = ['19', '92', '11'];\n                where\n                    vertex[0] is the vertex index\n                    vertex[1] is the texture index\n                    vertex[2] is the normal index\n                 Think of faces having Vertices which are comprised of the\n                 attributes location (v), texture (vt), and normal (vn).\n                 */\n                var vertex = elements[ j ].split( '/' );\n                /*\n                 The verts, textures, and vertNormals arrays each contain a\n                 flattend array of coordinates.\n\n                 Because it gets confusing by referring to vertex and then\n                 vertex (both are different in my descriptions) I will explain\n                 what's going on using the vertexNormals array:\n\n                 vertex[2] will contain the one-based index of the vertexNormals\n                 section (vn). One is subtracted from this index number to play\n                 nice with javascript's zero-based array indexing.\n\n                 Because vertexNormal is a flattened array of x, y, z values,\n                 simple pointer arithmetic is used to skip to the start of the\n                 vertexNormal, then the offset is added to get the correct\n                 component: +0 is x, +1 is y, +2 is z.\n\n                 This same process is repeated for verts and textures.\n                 */\n                // vertex position\n                unpacked.verts.push(+verts[(vertex[0] - 1) * 3 + 0]);\n                unpacked.verts.push(+verts[(vertex[0] - 1) * 3 + 1]);\n                unpacked.verts.push(+verts[(vertex[0] - 1) * 3 + 2]);\n                // vertex textures\n                if (textures.length) {\n                  unpacked.textures.push(+textures[(vertex[1] - 1) * 2 + 0]);\n                  unpacked.textures.push(+textures[(vertex[1] - 1) * 2 + 1]);\n                }\n                // vertex normals\n                unpacked.norms.push(+vertNormals[(vertex[2] - 1) * 3 + 0]);\n                unpacked.norms.push(+vertNormals[(vertex[2] - 1) * 3 + 1]);\n                unpacked.norms.push(+vertNormals[(vertex[2] - 1) * 3 + 2]);\n                // add the newly created vertex to the list of indices\n                unpacked.hashindices[elements[j]] = unpacked.index;\n                unpacked.indices.push(unpacked.index);\n                // increment the counter\n                unpacked.index += 1;\n            }\n            if(j === 3 && quad) {\n                // add v0/t0/vn0 onto the second triangle\n                unpacked.indices.push( unpacked.hashindices[elements[0]]);\n            }\n        }\n      }\n    }\n    this.vertices = unpacked.verts;\n    this.vertexNormals = unpacked.norms;\n    this.textures = unpacked.textures;\n    this.indices = unpacked.indices;\n  }\n\n  var Ajax = function(){\n    // this is just a helper class to ease ajax calls\n    var _this = this;\n    this.xmlhttp = new XMLHttpRequest();\n\n    this.get = function(url, callback){\n      _this.xmlhttp.onreadystatechange = function(){\n        if(_this.xmlhttp.readyState === 4){\n          callback(_this.xmlhttp.responseText, _this.xmlhttp.status);\n        }\n      };\n      _this.xmlhttp.open('GET', url, true);\n      _this.xmlhttp.send();\n    }\n  };\n\n  /**\n   * Takes in an object of `mesh_name`, `'/url/to/OBJ/file'` pairs and a callback\n   * function. Each OBJ file will be ajaxed in and automatically converted to\n   * an OBJ.Mesh. When all files have successfully downloaded the callback\n   * function provided will be called and passed in an object containing\n   * the newly created meshes.\n   *\n   * **Note:** In order to use this function as a way to download meshes, a\n   * webserver of some sort must be used.\n   *\n   * @param {Object} nameAndURLs an object where the key is the name of the mesh and the value is the url to that mesh's OBJ file\n   *\n   * @param {Function} completionCallback should contain a function that will take one parameter: an object array where the keys will be the unique object name and the value will be a Mesh object\n   *\n   * @param {Object} meshes In case other meshes are loaded separately or if a previously declared variable is desired to be used, pass in a (possibly empty) json object of the pattern: { '<mesh_name>': OBJ.Mesh }\n   *\n   */\n  OBJ.downloadMeshes = function (nameAndURLs, completionCallback, meshes){\n    // the total number of meshes. this is used to implement \"blocking\"\n    var semaphore = Object.keys(nameAndURLs).length;\n    // if error is true, an alert will given\n    var error = false;\n    // this is used to check if all meshes have been downloaded\n    // if meshes is supplied, then it will be populated, otherwise\n    // a new object is created. this will be passed into the completionCallback\n    if(meshes === undefined) meshes = {};\n    // loop over the mesh_name,url key,value pairs\n    for(var mesh_name in nameAndURLs){\n      if(nameAndURLs.hasOwnProperty(mesh_name)){\n        new Ajax().get(nameAndURLs[mesh_name], (function(name) {\n          return function (data, status) {\n            if (status === 200) {\n              meshes[name] = new OBJ.Mesh(data);\n            }\n            else {\n              error = true;\n              console.error('An error has occurred and the mesh \"' +\n                name + '\" could not be downloaded.');\n            }\n            // the request has finished, decrement the counter\n            semaphore--;\n            if (semaphore === 0) {\n              if (error) {\n                // if an error has occurred, the user is notified here and the\n                // callback is not called\n                console.error('An error has occurred and one or meshes has not been ' +\n                  'downloaded. The execution of the script has terminated.');\n                throw '';\n              }\n              // there haven't been any errors in retrieving the meshes\n              // call the callback\n              completionCallback(meshes);\n            }\n          }\n        })(mesh_name));\n      }\n    }\n  };\n\n  var _buildBuffer = function( gl, type, data, itemSize ){\n    var buffer = gl.createBuffer();\n    var arrayView = type === gl.ARRAY_BUFFER ? Float32Array : Uint16Array;\n    gl.bindBuffer(type, buffer);\n    gl.bufferData(type, new arrayView(data), gl.STATIC_DRAW);\n    buffer.itemSize = itemSize;\n    buffer.numItems = data.length / itemSize;\n    return buffer;\n  }\n\n  /**\n   * Takes in the WebGL context and a Mesh, then creates and appends the buffers\n   * to the mesh object as attributes.\n   *\n   * @param {WebGLRenderingContext} gl the `canvas.getContext('webgl')` context instance\n   * @param {Mesh} mesh a single `OBJ.Mesh` instance\n   *\n   * The newly created mesh attributes are:\n   *\n   * Attrbute | Description\n   * :--- | ---\n   * **normalBuffer**       |contains the model&#39;s Vertex Normals\n   * normalBuffer.itemSize  |set to 3 items\n   * normalBuffer.numItems  |the total number of vertex normals\n   * |\n   * **textureBuffer**      |contains the model&#39;s Texture Coordinates\n   * textureBuffer.itemSize |set to 2 items\n   * textureBuffer.numItems |the number of texture coordinates\n   * |\n   * **vertexBuffer**       |contains the model&#39;s Vertex Position Coordinates (does not include w)\n   * vertexBuffer.itemSize  |set to 3 items\n   * vertexBuffer.numItems  |the total number of vertices\n   * |\n   * **indexBuffer**        |contains the indices of the faces\n   * indexBuffer.itemSize   |is set to 1\n   * indexBuffer.numItems   |the total number of indices\n   *\n   * A simple example (a lot of steps are missing, so don't copy and paste):\n   *\n   *     var gl   = canvas.getContext('webgl'),\n   *         mesh = OBJ.Mesh(obj_file_data);\n   *     // compile the shaders and create a shader program\n   *     var shaderProgram = gl.createProgram();\n   *     // compilation stuff here\n   *     ...\n   *     // make sure you have vertex, vertex normal, and texture coordinate\n   *     // attributes located in your shaders and attach them to the shader program\n   *     shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, \"aVertexPosition\");\n   *     gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);\n   *\n   *     shaderProgram.vertexNormalAttribute = gl.getAttribLocation(shaderProgram, \"aVertexNormal\");\n   *     gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute);\n   *\n   *     shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, \"aTextureCoord\");\n   *     gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);\n   *\n   *     // create and initialize the vertex, vertex normal, and texture coordinate buffers\n   *     // and save on to the mesh object\n   *     OBJ.initMeshBuffers(gl, mesh);\n   *\n   *     // now to render the mesh\n   *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.vertexBuffer);\n   *     gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, mesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);\n   *\n   *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.textureBuffer);\n   *     gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, mesh.textureBuffer.itemSize, gl.FLOAT, false, 0, 0);\n   *\n   *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.normalBuffer);\n   *     gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute, mesh.normalBuffer.itemSize, gl.FLOAT, false, 0, 0);\n   *\n   *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.mesh.indexBuffer);\n   *     gl.drawElements(gl.TRIANGLES, model.mesh.indexBuffer.numItems, gl.UNSIGNED_SHORT, 0);\n   */\n  OBJ.initMeshBuffers = function( gl, mesh ){\n    mesh.normalBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertexNormals, 3);\n    mesh.textureBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.textures, 2);\n    mesh.vertexBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertices, 3);\n    mesh.indexBuffer = _buildBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, mesh.indices, 1);\n  }\n\n  OBJ.deleteMeshBuffers = function( gl, mesh ){\n    gl.deleteBuffer(mesh.normalBuffer);\n    gl.deleteBuffer(mesh.textureBuffer);\n    gl.deleteBuffer(mesh.vertexBuffer);\n    gl.deleteBuffer(mesh.indexBuffer);\n  }\n})();\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/webgl-obj-loader/webgl-obj-loader.js\n// module id = 97\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","import PerspectiveCamera from '../cameras/PerspectiveCamera';\nimport { clamp } from '../math/Utils';\nimport Vector3 from '../math/Vector3';\n\nconst MODE_DRAG = 'MODE_DRAG';\nconst MODE_PAN = 'MODE_PAN';\nconst MODE_ZOOM = 'MODE_ZOOM';\nconst UP = new Vector3(0, 1, 0);\nconst EASE_THRESHOLD = 0.0001;\n\nexport default class OrbitControls {\n  public rotationSpeed: number;\n  public panSpeed: number;\n  public zoom: boolean;\n  public pan: boolean;\n  public smoothing: boolean;\n  public easing: number;\n  public _camera: PerspectiveCamera;\n  public _element: HTMLElement;\n  public _zoomMin: number;\n  public _zoomMax: number;\n  public _radius: number;\n  public _radiusOffset: number;\n  public _defaultRadius: number;\n  public _rotationX: number;\n  public _rotationY: number;\n  public _defaultRotationX: number;\n  public _defaultRotationY: number;\n  public _x: number;\n  public _y: number;\n  public _z: number;\n  public _offsetX: number;\n  public _offsetY: number;\n  public _offsetPanX: number;\n  public _offsetPanY: number;\n  public target: Vector3;\n  public _targetOffset: Vector3;\n  public _direction: Vector3;\n  public _lastZoomDistance: number;\n  public _width: number;\n  public _height: number;\n  public _mode: string;\n  public isDown: boolean;\n  public _startX: number;\n  public _startY: number;\n\n  constructor(\n    camera: PerspectiveCamera,\n    element: HTMLCanvasElement | HTMLDivElement\n  ) {\n    this.rotationSpeed = 5;\n    this.panSpeed = 10;\n    this.zoom = true;\n    this.pan = true;\n    this.smoothing = false;\n    this.easing = 0.1;\n    this._camera = camera;\n    this._element = element;\n    this._zoomMin = 0.1;\n    this._zoomMax = Infinity;\n    this._radius = Math.max(camera.position.x, camera.position.z);\n    this._radiusOffset = 0;\n    this._defaultRadius = Math.max(camera.position.x, camera.position.z);\n    this._rotationX = Math.atan2(camera.position.y - 0, +this._radius - 0);\n    this._rotationY = Math.atan2(camera.position.z - 0, camera.position.x - 0);\n    this._defaultRotationX = Math.atan2(\n      camera.position.y - 0,\n      +this._radius - 0\n    );\n    this._defaultRotationY = Math.atan2(\n      camera.position.z - 0,\n      camera.position.x - 0\n    );\n\n    const y = this._radius * Math.sin(this._rotationX);\n    const r = this._radius * Math.cos(this._rotationX);\n    const x = Math.sin(this._rotationY) * r;\n    const z = Math.cos(this._rotationY) * r;\n\n    this._x = x;\n    this._y = y;\n    this._z = z;\n    this._offsetX = 0;\n    this._offsetY = 0;\n    this._offsetPanX = 0;\n    this._offsetPanY = 0;\n    this.target = new Vector3();\n    this._targetOffset = new Vector3();\n    this._direction = new Vector3();\n    this._lastZoomDistance = 0;\n    this._width = window.innerWidth;\n    this._height = window.innerHeight;\n\n    this._element.addEventListener('mousedown', this._onTouchStart, false);\n    this._element.addEventListener('mousemove', this._onTouchMove, false);\n    this._element.addEventListener('mouseup', this._onTouchEnd, false);\n    this._element.addEventListener('touchstart', this._onTouchStart, false);\n    this._element.addEventListener('touchmove', this._onTouchMove, false);\n    this._element.addEventListener('touchend', this._onTouchEnd, false);\n    this._element.addEventListener('contextmenu', this._onContextMenu, false);\n    window.addEventListener('mousewheel', this._onMouseWheel, false);\n    window.addEventListener('keypress', this._onKeypress, false);\n  }\n\n  public _onTouchStart = event => {\n    event.preventDefault();\n\n    if (event.touches) {\n      // Device\n      switch (event.touches.length) {\n        case 1:\n          this._mode = MODE_DRAG;\n          this._offsetY = this._rotationY;\n          this._offsetX = this._rotationX;\n          break;\n        case 2: {\n          this._mode = MODE_ZOOM;\n          this._radiusOffset = this._radius;\n          break;\n        }\n        default: {\n          this._mode = MODE_PAN;\n          this._offsetY = this.target.y;\n          this._offsetX = this.target.x;\n        }\n      }\n    } else {\n      // Desktop\n      switch (event.which) {\n        case 3:\n          this._mode = MODE_PAN;\n          this._offsetY = this.target.y;\n          this._offsetX = this.target.x;\n          break;\n        default: {\n          this._mode = MODE_DRAG;\n          this._offsetY = this._rotationY;\n          this._offsetX = this._rotationX;\n        }\n      }\n    }\n\n    this._startY = event.pageX / this._width;\n    this._startX = event.pageY / this._height;\n    this._targetOffset.copy(this.target);\n    this._radiusOffset = this._radius;\n    this.isDown = true;\n  };\n\n  public _onTouchMove = event => {\n    if (this.isDown) {\n      switch (this._mode) {\n        case MODE_PAN: {\n          if (!this.pan) return;\n          const y = event.pageX / this._width;\n          const x = event.pageY / this._height;\n          this._direction\n            .copy(this._camera.position)\n            .subtract(this.target)\n            .normalize();\n          const cross = this._direction.cross(UP);\n          const tx =\n            this._targetOffset.x +\n            -(this._startY - y) * this.panSpeed * cross.x;\n          const ty = this._targetOffset.y + -(this._startX - x) * this.panSpeed;\n          const tz =\n            this._targetOffset.z +\n            -(this._startY - y) * this.panSpeed * cross.z;\n          this.target.set(tx, ty, tz);\n          break;\n        }\n        case MODE_ZOOM: {\n          if (!this.zoom) return;\n          const dx = event.touches[0].pageX - event.touches[1].pageX;\n          const dy = event.touches[0].pageY - event.touches[1].pageY;\n          const distance = Math.sqrt(dx * dx + dy * dy);\n          const sign = this._lastZoomDistance > distance ? 1 : -1;\n          // Simulate the same data as the scroll\n          this._zoomConstraint(sign * 100);\n          this._lastZoomDistance = distance;\n          break;\n        }\n        default: {\n          // Drag\n          const y = event.pageX / this._width;\n          const x = event.pageY / this._height;\n          this._rotationX =\n            this._offsetX + -(this._startX - x) * this.rotationSpeed;\n          this._rotationY =\n            this._offsetY + (this._startY - y) * this.rotationSpeed;\n          this._rotationX = clamp(this._rotationX, -Math.PI / 2, Math.PI / 2);\n        }\n      }\n\n      this.update();\n    }\n  };\n\n  public _onTouchEnd = () => {\n    this.isDown = false;\n  };\n\n  public _onContextMenu = event => {\n    event.preventDefault();\n  };\n\n  public _zoomConstraint(delta) {\n    if (!this.zoom) return;\n    const value = delta / 1000;\n    const speed = 3;\n    this._radius += value * speed;\n    this._radius = clamp(this._radius, this._zoomMin, this._zoomMax);\n    this.update();\n  }\n\n  public update() {\n    const y = this._radius * Math.sin(this._rotationX);\n    const r = this._radius * Math.cos(this._rotationX); // radius of the sphere\n    const x = Math.sin(this._rotationY) * r;\n    const z = Math.cos(this._rotationY) * r;\n\n    if (this.smoothing) {\n      this._x += (x - this._x) * this.easing;\n      this._y += (y - this._y) * this.easing;\n      this._z += (z - this._z) * this.easing;\n\n      if (Math.abs(this._x - x) < EASE_THRESHOLD) {\n        this._x = x;\n      }\n\n      if (Math.abs(this._y - y) < EASE_THRESHOLD) {\n        this._y = y;\n      }\n\n      if (Math.abs(this._z - z) < EASE_THRESHOLD) {\n        this._z = z;\n      }\n    } else {\n      this._x = x;\n      this._y = y;\n      this._z = z;\n    }\n\n    this._camera.position.set(this._x, this._y, this._z).add(this.target);\n    this._camera.lookAt(this.target.x, this.target.y, this.target.z);\n  }\n\n  public _onMouseWheel = event => {\n    let delta = 0;\n\n    if (event.wheelDelta) {\n      // Webkit, Opera, Explorer\n      delta = event.wheelDelta;\n    } else if (event.detail) {\n      // Firefox\n      delta = event.detail;\n    }\n\n    this._zoomConstraint(-delta);\n  };\n\n  public _onKeypress = event => {\n    switch (event.keyCode) {\n      case 114: // r\n        // Reset\n        this.reset();\n        break;\n      default:\n    }\n  };\n\n  public reset() {\n    this.target.set(0, 0, 0);\n    this._rotationY = this._defaultRotationY;\n    this._rotationX = this._defaultRotationX;\n    this._radius = this._defaultRadius;\n    this.update();\n  }\n\n  public dispose() {\n    this._element.removeEventListener('mousedown', this._onTouchStart);\n    this._element.removeEventListener('mousemove', this._onTouchMove);\n    this._element.removeEventListener('mouseup', this._onTouchEnd);\n    this._element.removeEventListener('touchstart', this._onTouchStart);\n    this._element.removeEventListener('touchmove', this._onTouchMove);\n    this._element.removeEventListener('touchend', this._onTouchEnd);\n    this._element.removeEventListener('contextmenu', this._onContextMenu);\n    window.removeEventListener('mousewheel', this._onMouseWheel);\n    window.removeEventListener('keypress', this._onKeypress);\n    this._camera = null;\n    this._element = null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/controls/OrbitControls.ts","import FileLoader from './FileLoader';\n\nexport default function(file) {\n  return new Promise((resolve, reject) => {\n    FileLoader(file)\n      .then(response => {\n        const data = JSON.parse(response);\n        resolve(data);\n      })\n      .catch(reject);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/JsonLoader.ts","import ObjParser from '../utils/ObjParser';\nimport FileLoader from './FileLoader';\n\nexport default function(file) {\n  return new Promise((resolve, reject) => {\n    FileLoader(file)\n      .then(response => {\n        const data = ObjParser(response);\n        resolve(data);\n      })\n      .catch(reject);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/loaders/ObjLoader.ts","import dat from 'dat-gui';\nimport queryString from 'query-string';\n\nconst gui = new dat.GUI();\n// dat.GUI.toggleHide();\n\nmodule.exports = modes => {\n  const options = modes !== undefined ? modes : ['webgl2', 'webgl'];\n\n  const queries = queryString.parse(location.search);\n\n\t\tconst getQuery = (query) => {\n\t\t\treturn queries[query];\n\t\t}\n\n\t\tconst setQuery = (query, val) => {\n\t\t\tconst newQueries = Object.assign({}, queries, {\n\t\t\t\t[query]: val,\n\t\t\t});\n\t\t\tconst stringified = queryString.stringify(newQueries);\n\n\t\t\tconst url = `${window.location.pathname}?${stringified}`;\n\t\t\twindow.location.href = url;\n\t\t}\n\n  const guiController = {\n    context: getQuery('context') || options[0]\n  };\n\n  gui.add(guiController, 'context', options).onChange(val => {\n    setQuery('context', val);\n  });\n\n  return {\n    gui,\n    guiController,\n\t\t\t\tgetQuery,\n\t\t\t\tsetQuery,\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./examples/src/js/gui.js","module.exports = require('./vendor/dat.gui')\nmodule.exports.color = require('./vendor/dat.color')\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dat-gui/index.js\n// module id = 102\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/** @namespace */\nvar dat = module.exports = dat || {};\n\n/** @namespace */\ndat.gui = dat.gui || {};\n\n/** @namespace */\ndat.utils = dat.utils || {};\n\n/** @namespace */\ndat.controllers = dat.controllers || {};\n\n/** @namespace */\ndat.dom = dat.dom || {};\n\n/** @namespace */\ndat.color = dat.color || {};\n\ndat.utils.css = (function () {\n  return {\n    load: function (url, doc) {\n      doc = doc || document;\n      var link = doc.createElement('link');\n      link.type = 'text/css';\n      link.rel = 'stylesheet';\n      link.href = url;\n      doc.getElementsByTagName('head')[0].appendChild(link);\n    },\n    inject: function(css, doc) {\n      doc = doc || document;\n      var injected = document.createElement('style');\n      injected.type = 'text/css';\n      injected.innerHTML = css;\n      doc.getElementsByTagName('head')[0].appendChild(injected);\n    }\n  }\n})();\n\n\ndat.utils.common = (function () {\n  \n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    \n    BREAK: {},\n  \n    extend: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (!this.isUndefined(obj[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n      \n    },\n    \n    defaults: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (this.isUndefined(target[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n    \n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n            return function() {\n              var args = ARR_SLICE.call(arguments);\n              for (var i = toCall.length -1; i >= 0; i--) {\n                args = [toCall[i].apply(this, args)];\n              }\n              return args[0];\n            }\n    },\n    \n    each: function(obj, itr, scope) {\n\n      \n      if (ARR_EACH && obj.forEach === ARR_EACH) { \n        \n        obj.forEach(itr, scope);\n        \n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        \n        for (var key = 0, l = obj.length; key < l; key++)\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) \n            return;\n            \n      } else {\n\n        for (var key in obj) \n          if (itr.call(scope, obj[key], key) === this.BREAK)\n            return;\n            \n      }\n            \n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) return obj.toArray();\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === obj+0;\n    },\n    \n    isString: function(obj) {\n      return obj === obj+'';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n  \n  };\n    \n})();\n\n\ndat.controllers.Controller = (function (common) {\n\n  /**\n   * @class An \"abstract\" class that represents a given property of an object.\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var Controller = function(object, property) {\n\n    this.initialValue = object[property];\n\n    /**\n     * Those who extend this class will put their DOM elements in here.\n     * @type {DOMElement}\n     */\n    this.domElement = document.createElement('div');\n\n    /**\n     * The object to manipulate\n     * @type {Object}\n     */\n    this.object = object;\n\n    /**\n     * The name of the property to manipulate\n     * @type {String}\n     */\n    this.property = property;\n\n    /**\n     * The function to be called on change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onChange = undefined;\n\n    /**\n     * The function to be called on finishing change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onFinishChange = undefined;\n\n  };\n\n  common.extend(\n\n      Controller.prototype,\n\n      /** @lends dat.controllers.Controller.prototype */\n      {\n\n        /**\n         * Specify that a function fire every time someone changes the value with\n         * this Controller.\n         *\n         * @param {Function} fnc This function will be called whenever the value\n         * is modified via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onChange: function(fnc) {\n          this.__onChange = fnc;\n          return this;\n        },\n\n        /**\n         * Specify that a function fire every time someone \"finishes\" changing\n         * the value wih this Controller. Useful for values that change\n         * incrementally like numbers or strings.\n         *\n         * @param {Function} fnc This function will be called whenever\n         * someone \"finishes\" changing the value via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onFinishChange: function(fnc) {\n          this.__onFinishChange = fnc;\n          return this;\n        },\n\n        /**\n         * Change the value of <code>object[property]</code>\n         *\n         * @param {Object} newValue The new value of <code>object[property]</code>\n         */\n        setValue: function(newValue) {\n          this.object[this.property] = newValue;\n          if (this.__onChange) {\n            this.__onChange.call(this, newValue);\n          }\n          this.updateDisplay();\n          return this;\n        },\n\n        /**\n         * Gets the value of <code>object[property]</code>\n         *\n         * @returns {Object} The current value of <code>object[property]</code>\n         */\n        getValue: function() {\n          return this.object[this.property];\n        },\n\n        /**\n         * Refreshes the visual display of a Controller in order to keep sync\n         * with the object's current value.\n         * @returns {dat.controllers.Controller} this\n         */\n        updateDisplay: function() {\n          return this;\n        },\n\n        /**\n         * @returns {Boolean} true if the value has deviated from initialValue\n         */\n        isModified: function() {\n          return this.initialValue !== this.getValue()\n        }\n\n      }\n\n  );\n\n  return Controller;\n\n\n})(dat.utils.common);\n\n\ndat.dom.dom = (function (common) {\n\n  var EVENT_MAP = {\n    'HTMLEvents': ['change'],\n    'MouseEvents': ['click','mousemove','mousedown','mouseup', 'mouseover'],\n    'KeyboardEvents': ['keydown']\n  };\n\n  var EVENT_MAP_INV = {};\n  common.each(EVENT_MAP, function(v, k) {\n    common.each(v, function(e) {\n      EVENT_MAP_INV[e] = k;\n    });\n  });\n\n  var CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n\n  function cssValueToPixels(val) {\n\n    if (val === '0' || common.isUndefined(val)) return 0;\n\n    var match = val.match(CSS_VALUE_PIXELS);\n\n    if (!common.isNull(match)) {\n      return parseFloat(match[1]);\n    }\n\n    // TODO ...ems? %?\n\n    return 0;\n\n  }\n\n  /**\n   * @namespace\n   * @member dat.dom\n   */\n  var dom = {\n\n    /**\n     * \n     * @param elem\n     * @param selectable\n     */\n    makeSelectable: function(elem, selectable) {\n\n      if (elem === undefined || elem.style === undefined) return;\n\n      elem.onselectstart = selectable ? function() {\n        return false;\n      } : function() {\n      };\n\n      elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n      elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n      elem.unselectable = selectable ? 'on' : 'off';\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param horizontal\n     * @param vertical\n     */\n    makeFullscreen: function(elem, horizontal, vertical) {\n\n      if (common.isUndefined(horizontal)) horizontal = true;\n      if (common.isUndefined(vertical)) vertical = true;\n\n      elem.style.position = 'absolute';\n\n      if (horizontal) {\n        elem.style.left = 0;\n        elem.style.right = 0;\n      }\n      if (vertical) {\n        elem.style.top = 0;\n        elem.style.bottom = 0;\n      }\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param eventType\n     * @param params\n     */\n    fakeEvent: function(elem, eventType, params, aux) {\n      params = params || {};\n      var className = EVENT_MAP_INV[eventType];\n      if (!className) {\n        throw new Error('Event type ' + eventType + ' not supported.');\n      }\n      var evt = document.createEvent(className);\n      switch (className) {\n        case 'MouseEvents':\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false,\n              params.cancelable || true, window, params.clickCount || 1,\n              0, //screen X\n              0, //screen Y\n              clientX, //client X\n              clientY, //client Y\n              false, false, false, false, 0, null);\n          break;\n        case 'KeyboardEvents':\n          var init = evt.initKeyboardEvent || evt.initKeyEvent; // webkit || moz\n          common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false,\n              params.cancelable, window,\n              params.ctrlKey, params.altKey,\n              params.shiftKey, params.metaKey,\n              params.keyCode, params.charCode);\n          break;\n        default:\n          evt.initEvent(eventType, params.bubbles || false,\n              params.cancelable || true);\n          break;\n      }\n      common.defaults(evt, aux);\n      elem.dispatchEvent(evt);\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    bind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.addEventListener)\n        elem.addEventListener(event, func, bool);\n      else if (elem.attachEvent)\n        elem.attachEvent('on' + event, func);\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    unbind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.removeEventListener)\n        elem.removeEventListener(event, func, bool);\n      else if (elem.detachEvent)\n        elem.detachEvent('on' + event, func);\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    addClass: function(elem, className) {\n      if (elem.className === undefined) {\n        elem.className = className;\n      } else if (elem.className !== className) {\n        var classes = elem.className.split(/ +/);\n        if (classes.indexOf(className) == -1) {\n          classes.push(className);\n          elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n        }\n      }\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    removeClass: function(elem, className) {\n      if (className) {\n        if (elem.className === undefined) {\n          // elem.className = className;\n        } else if (elem.className === className) {\n          elem.removeAttribute('class');\n        } else {\n          var classes = elem.className.split(/ +/);\n          var index = classes.indexOf(className);\n          if (index != -1) {\n            classes.splice(index, 1);\n            elem.className = classes.join(' ');\n          }\n        }\n      } else {\n        elem.className = undefined;\n      }\n      return dom;\n    },\n\n    hasClass: function(elem, className) {\n      return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getWidth: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-left-width']) +\n          cssValueToPixels(style['border-right-width']) +\n          cssValueToPixels(style['padding-left']) +\n          cssValueToPixels(style['padding-right']) +\n          cssValueToPixels(style['width']);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getHeight: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-top-width']) +\n          cssValueToPixels(style['border-bottom-width']) +\n          cssValueToPixels(style['padding-top']) +\n          cssValueToPixels(style['padding-bottom']) +\n          cssValueToPixels(style['height']);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getOffset: function(elem) {\n      var offset = {left: 0, top:0};\n      if (elem.offsetParent) {\n        do {\n          offset.left += elem.offsetLeft;\n          offset.top += elem.offsetTop;\n        } while (elem = elem.offsetParent);\n      }\n      return offset;\n    },\n\n    // http://stackoverflow.com/posts/2684561/revisions\n    /**\n     * \n     * @param elem\n     */\n    isActive: function(elem) {\n      return elem === document.activeElement && ( elem.type || elem.href );\n    }\n\n  };\n\n  return dom;\n\n})(dat.utils.common);\n\n\ndat.controllers.OptionController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a select input to alter the property of an object, using a\n   * list of accepted values.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object|string[]} options A map of labels to acceptable values, or\n   * a list of acceptable string values.\n   *\n   * @member dat.controllers\n   */\n  var OptionController = function(object, property, options) {\n\n    OptionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    /**\n     * The drop down menu\n     * @ignore\n     */\n    this.__select = document.createElement('select');\n\n    if (common.isArray(options)) {\n      var map = {};\n      common.each(options, function(element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n\n    common.each(options, function(value, key) {\n\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n\n    });\n\n    // Acknowledge original value\n    this.updateDisplay();\n\n    dom.bind(this.__select, 'change', function() {\n      var desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n\n    this.domElement.appendChild(this.__select);\n\n  };\n\n  OptionController.superclass = Controller;\n\n  common.extend(\n\n      OptionController.prototype,\n      Controller.prototype,\n\n      {\n\n        setValue: function(v) {\n          var toReturn = OptionController.superclass.prototype.setValue.call(this, v);\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          this.__select.value = this.getValue();\n          return OptionController.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  return OptionController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.NumberController = (function (Controller, common) {\n\n  /**\n   * @class Represents a given property of an object that is a number.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberController = function(object, property, params) {\n\n    NumberController.superclass.call(this, object, property);\n\n    params = params || {};\n\n    this.__min = params.min;\n    this.__max = params.max;\n    this.__step = params.step;\n\n    if (common.isUndefined(this.__step)) {\n\n      if (this.initialValue == 0) {\n        this.__impliedStep = 1; // What are we, psychics?\n      } else {\n        // Hey Doug, check this out.\n        this.__impliedStep = Math.pow(10, Math.floor(Math.log(this.initialValue)/Math.LN10))/10;\n      }\n\n    } else {\n\n      this.__impliedStep = this.__step;\n\n    }\n\n    this.__precision = numDecimals(this.__impliedStep);\n\n\n  };\n\n  NumberController.superclass = Controller;\n\n  common.extend(\n\n      NumberController.prototype,\n      Controller.prototype,\n\n      /** @lends dat.controllers.NumberController.prototype */\n      {\n\n        setValue: function(v) {\n\n          if (this.__min !== undefined && v < this.__min) {\n            v = this.__min;\n          } else if (this.__max !== undefined && v > this.__max) {\n            v = this.__max;\n          }\n\n          if (this.__step !== undefined && v % this.__step != 0) {\n            v = Math.round(v / this.__step) * this.__step;\n          }\n\n          return NumberController.superclass.prototype.setValue.call(this, v);\n\n        },\n\n        /**\n         * Specify a minimum value for <code>object[property]</code>.\n         *\n         * @param {Number} minValue The minimum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        min: function(v) {\n          this.__min = v;\n          return this;\n        },\n\n        /**\n         * Specify a maximum value for <code>object[property]</code>.\n         *\n         * @param {Number} maxValue The maximum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        max: function(v) {\n          this.__max = v;\n          return this;\n        },\n\n        /**\n         * Specify a step value that dat.controllers.NumberController\n         * increments by.\n         *\n         * @param {Number} stepValue The step value for\n         * dat.controllers.NumberController\n         * @default if minimum and maximum specified increment is 1% of the\n         * difference otherwise stepValue is 1\n         * @returns {dat.controllers.NumberController} this\n         */\n        step: function(v) {\n          this.__step = v;\n          return this;\n        }\n\n      }\n\n  );\n\n  function numDecimals(x) {\n    x = x.toString();\n    if (x.indexOf('.') > -1) {\n      return x.length - x.indexOf('.') - 1;\n    } else {\n      return 0;\n    }\n  }\n\n  return NumberController;\n\n})(dat.controllers.Controller,\ndat.utils.common);\n\n\ndat.controllers.NumberControllerBox = (function (NumberController, dom, common) {\n\n  /**\n   * @class Represents a given property of an object that is a number and\n   * provides an input element with which to manipulate it.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerBox = function(object, property, params) {\n\n    this.__truncationSuspended = false;\n\n    NumberControllerBox.superclass.call(this, object, property, params);\n\n    var _this = this;\n\n    /**\n     * {Number} Previous mouse y position\n     * @ignore\n     */\n    var prev_y;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    // Makes it so manually specified values are not truncated.\n\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'mousedown', onMouseDown);\n    dom.bind(this.__input, 'keydown', function(e) {\n\n      // When pressing entire, you can be as precise as you want.\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n      }\n\n    });\n\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!common.isNaN(attempted)) _this.setValue(attempted);\n    }\n\n    function onBlur() {\n      onChange();\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prev_y = e.clientY;\n    }\n\n    function onMouseDrag(e) {\n\n      var diff = prev_y - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prev_y = e.clientY;\n\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n\n  };\n\n  NumberControllerBox.superclass = NumberController;\n\n  common.extend(\n\n      NumberControllerBox.prototype,\n      NumberController.prototype,\n\n      {\n\n        updateDisplay: function() {\n\n          this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n          return NumberControllerBox.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  function roundToDecimal(value, decimals) {\n    var tenTo = Math.pow(10, decimals);\n    return Math.round(value * tenTo) / tenTo;\n  }\n\n  return NumberControllerBox;\n\n})(dat.controllers.NumberController,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.NumberControllerSlider = (function (NumberController, dom, css, common, styleSheet) {\n\n  /**\n   * @class Represents a given property of an object that is a number, contains\n   * a minimum and maximum, and provides a slider element with which to\n   * manipulate it. It should be noted that the slider element is made up of\n   * <code>&lt;div&gt;</code> tags, <strong>not</strong> the html5\n   * <code>&lt;slider&gt;</code> element.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   * \n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Number} minValue Minimum allowed value\n   * @param {Number} maxValue Maximum allowed value\n   * @param {Number} stepValue Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerSlider = function(object, property, min, max, step) {\n\n    NumberControllerSlider.superclass.call(this, object, property, { min: min, max: max, step: step });\n\n    var _this = this;\n\n    this.__background = document.createElement('div');\n    this.__foreground = document.createElement('div');\n    \n\n\n    dom.bind(this.__background, 'mousedown', onMouseDown);\n    \n    dom.addClass(this.__background, 'slider');\n    dom.addClass(this.__foreground, 'slider-fg');\n\n    function onMouseDown(e) {\n\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n\n      onMouseDrag(e);\n    }\n\n    function onMouseDrag(e) {\n\n      e.preventDefault();\n\n      var offset = dom.getOffset(_this.__background);\n      var width = dom.getWidth(_this.__background);\n      \n      _this.setValue(\n        map(e.clientX, offset.left, offset.left + width, _this.__min, _this.__max)\n      );\n\n      return false;\n\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.__background.appendChild(this.__foreground);\n    this.domElement.appendChild(this.__background);\n\n  };\n\n  NumberControllerSlider.superclass = NumberController;\n\n  /**\n   * Injects default stylesheet for slider elements.\n   */\n  NumberControllerSlider.useDefaultStyles = function() {\n    css.inject(styleSheet);\n  };\n\n  common.extend(\n\n      NumberControllerSlider.prototype,\n      NumberController.prototype,\n\n      {\n\n        updateDisplay: function() {\n          var pct = (this.getValue() - this.__min)/(this.__max - this.__min);\n          this.__foreground.style.width = pct*100+'%';\n          return NumberControllerSlider.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n\n\n  );\n\n  function map(v, i1, i2, o1, o2) {\n    return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n  }\n\n  return NumberControllerSlider;\n  \n})(dat.controllers.NumberController,\ndat.dom.dom,\ndat.utils.css,\ndat.utils.common,\n\".slider {\\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\\n  height: 1em;\\n  border-radius: 1em;\\n  background-color: #eee;\\n  padding: 0 0.5em;\\n  overflow: hidden;\\n}\\n\\n.slider-fg {\\n  padding: 1px 0 2px 0;\\n  background-color: #aaa;\\n  height: 1em;\\n  margin-left: -0.5em;\\n  padding-right: 0.5em;\\n  border-radius: 1em 0 0 1em;\\n}\\n\\n.slider-fg:after {\\n  display: inline-block;\\n  border-radius: 1em;\\n  background-color: #fff;\\n  border:  1px solid #aaa;\\n  content: '';\\n  float: right;\\n  margin-right: -1em;\\n  margin-top: -1px;\\n  height: 0.9em;\\n  width: 0.9em;\\n}\");\n\n\ndat.controllers.FunctionController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a GUI interface to fire a specified method, a property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var FunctionController = function(object, property, text) {\n\n    FunctionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__button = document.createElement('div');\n    this.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(this.__button, 'click', function(e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n\n    dom.addClass(this.__button, 'button');\n\n    this.domElement.appendChild(this.__button);\n\n\n  };\n\n  FunctionController.superclass = Controller;\n\n  common.extend(\n\n      FunctionController.prototype,\n      Controller.prototype,\n      {\n        \n        fire: function() {\n          if (this.__onChange) {\n            this.__onChange.call(this);\n          }\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          this.getValue().call(this.object);\n        }\n      }\n\n  );\n\n  return FunctionController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.controllers.BooleanController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a checkbox input to alter the boolean property of an object.\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var BooleanController = function(object, property) {\n\n    BooleanController.superclass.call(this, object, property);\n\n    var _this = this;\n    this.__prev = this.getValue();\n\n    this.__checkbox = document.createElement('input');\n    this.__checkbox.setAttribute('type', 'checkbox');\n\n\n    dom.bind(this.__checkbox, 'change', onChange, false);\n\n    this.domElement.appendChild(this.__checkbox);\n\n    // Match original value\n    this.updateDisplay();\n\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n\n  };\n\n  BooleanController.superclass = Controller;\n\n  common.extend(\n\n      BooleanController.prototype,\n      Controller.prototype,\n\n      {\n\n        setValue: function(v) {\n          var toReturn = BooleanController.superclass.prototype.setValue.call(this, v);\n          if (this.__onFinishChange) {\n            this.__onFinishChange.call(this, this.getValue());\n          }\n          this.__prev = this.getValue();\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          \n          if (this.getValue() === true) {\n            this.__checkbox.setAttribute('checked', 'checked');\n            this.__checkbox.checked = true;    \n          } else {\n              this.__checkbox.checked = false;\n          }\n\n          return BooleanController.superclass.prototype.updateDisplay.call(this);\n\n        }\n\n\n      }\n\n  );\n\n  return BooleanController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common);\n\n\ndat.color.toString = (function (common) {\n\n  return function(color) {\n\n    if (color.a == 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  }\n\n})(dat.utils.common);\n\n\ndat.color.interpret = (function (toString, common) {\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            }\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length != 3) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length != 4) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            }\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            }\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            }\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            }\n          }\n\n        }\n\n      }\n\n    }\n\n\n  ];\n\n  return interpret;\n\n\n})(dat.color.toString,\ndat.utils.common);\n\n\ndat.GUI = dat.gui.GUI = (function (css, saveDialogueContents, styleSheet, controllerFactory, Controller, BooleanController, FunctionController, NumberControllerBox, NumberControllerSlider, OptionController, ColorController, requestAnimationFrame, CenteredDiv, dom, common) {\n\n  css.inject(styleSheet);\n\n  /** Outer-most className for GUI's */\n  var CSS_NAMESPACE = 'dg';\n\n  var HIDE_KEY_CODE = 72;\n\n  /** The only value shared between the JS and SCSS. Use caution. */\n  var CLOSE_BUTTON_HEIGHT = 20;\n\n  var DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\n  var SUPPORTS_LOCAL_STORAGE = (function() {\n    try {\n      return 'localStorage' in window && window['localStorage'] !== null;\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  var SAVE_DIALOGUE;\n\n  /** Have we yet to create an autoPlace GUI? */\n  var auto_place_virgin = true;\n\n  /** Fixed position div that auto place GUI's go inside */\n  var auto_place_container;\n\n  /** Are we hiding the GUI's ? */\n  var hide = false;\n\n  /** GUI's which should be hidden */\n  var hideable_guis = [];\n\n  /**\n   * A lightweight controller library for JavaScript. It allows you to easily\n   * manipulate variables and fire functions on the fly.\n   * @class\n   *\n   * @member dat.gui\n   *\n   * @param {Object} [params]\n   * @param {String} [params.name] The name of this GUI.\n   * @param {Object} [params.load] JSON object representing the saved state of\n   * this GUI.\n   * @param {Boolean} [params.auto=true]\n   * @param {dat.gui.GUI} [params.parent] The GUI I'm nested in.\n   * @param {Boolean} [params.closed] If true, starts closed\n   */\n  var GUI = function(params) {\n\n    var _this = this;\n\n    /**\n     * Outermost DOM Element\n     * @type DOMElement\n     */\n    this.domElement = document.createElement('div');\n    this.__ul = document.createElement('ul');\n    this.domElement.appendChild(this.__ul);\n\n    dom.addClass(this.domElement, CSS_NAMESPACE);\n\n    /**\n     * Nested GUI's by name\n     * @ignore\n     */\n    this.__folders = {};\n\n    this.__controllers = [];\n\n    /**\n     * List of objects I'm remembering for save, only used in top level GUI\n     * @ignore\n     */\n    this.__rememberedObjects = [];\n\n    /**\n     * Maps the index of remembered objects to a map of controllers, only used\n     * in top level GUI.\n     *\n     * @private\n     * @ignore\n     *\n     * @example\n     * [\n     *  {\n     *    propertyName: Controller,\n     *    anotherPropertyName: Controller\n     *  },\n     *  {\n     *    propertyName: Controller\n     *  }\n     * ]\n     */\n    this.__rememberedObjectIndecesToControllers = [];\n\n    this.__listening = [];\n\n    params = params || {};\n\n    // Default parameters\n    params = common.defaults(params, {\n      autoPlace: true,\n      width: GUI.DEFAULT_WIDTH\n    });\n\n    params = common.defaults(params, {\n      resizable: params.autoPlace,\n      hideable: params.autoPlace\n    });\n\n\n    if (!common.isUndefined(params.load)) {\n\n      // Explicit preset\n      if (params.preset) params.load.preset = params.preset;\n\n    } else {\n\n      params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n\n    }\n\n    if (common.isUndefined(params.parent) && params.hideable) {\n      hideable_guis.push(this);\n    }\n\n    // Only root level GUI's are resizable.\n    params.resizable = common.isUndefined(params.parent) && params.resizable;\n\n\n    if (params.autoPlace && common.isUndefined(params.scrollable)) {\n      params.scrollable = true;\n    }\n//    params.scrollable = common.isUndefined(params.parent) && params.scrollable === true;\n\n    // Not part of params because I don't want people passing this in via\n    // constructor. Should be a 'remembered' value.\n    var use_local_storage =\n        SUPPORTS_LOCAL_STORAGE &&\n            localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n\n    Object.defineProperties(this,\n\n        /** @lends dat.gui.GUI.prototype */\n        {\n\n          /**\n           * The parent <code>GUI</code>\n           * @type dat.gui.GUI\n           */\n          parent: {\n            get: function() {\n              return params.parent;\n            }\n          },\n\n          scrollable: {\n            get: function() {\n              return params.scrollable;\n            }\n          },\n\n          /**\n           * Handles <code>GUI</code>'s element placement for you\n           * @type Boolean\n           */\n          autoPlace: {\n            get: function() {\n              return params.autoPlace;\n            }\n          },\n\n          /**\n           * The identifier for a set of saved values\n           * @type String\n           */\n          preset: {\n\n            get: function() {\n              if (_this.parent) {\n                return _this.getRoot().preset;\n              } else {\n                return params.load.preset;\n              }\n            },\n\n            set: function(v) {\n              if (_this.parent) {\n                _this.getRoot().preset = v;\n              } else {\n                params.load.preset = v;\n              }\n              setPresetSelectIndex(this);\n              _this.revert();\n            }\n\n          },\n\n          /**\n           * The width of <code>GUI</code> element\n           * @type Number\n           */\n          width: {\n            get: function() {\n              return params.width;\n            },\n            set: function(v) {\n              params.width = v;\n              setWidth(_this, v);\n            }\n          },\n\n          /**\n           * The name of <code>GUI</code>. Used for folders. i.e\n           * a folder's name\n           * @type String\n           */\n          name: {\n            get: function() {\n              return params.name;\n            },\n            set: function(v) {\n              // TODO Check for collisions among sibling folders\n              params.name = v;\n              if (title_row_name) {\n                title_row_name.innerHTML = params.name;\n              }\n            }\n          },\n\n          /**\n           * Whether the <code>GUI</code> is collapsed or not\n           * @type Boolean\n           */\n          closed: {\n            get: function() {\n              return params.closed;\n            },\n            set: function(v) {\n              params.closed = v;\n              if (params.closed) {\n                dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n              } else {\n                dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n              }\n              // For browsers that aren't going to respect the CSS transition,\n              // Lets just check our height against the window height right off\n              // the bat.\n              this.onResize();\n\n              if (_this.__closeButton) {\n                _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n              }\n            }\n          },\n\n          /**\n           * Contains all presets\n           * @type Object\n           */\n          load: {\n            get: function() {\n              return params.load;\n            }\n          },\n\n          /**\n           * Determines whether or not to use <a href=\"https://developer.mozilla.org/en/DOM/Storage#localStorage\">localStorage</a> as the means for\n           * <code>remember</code>ing\n           * @type Boolean\n           */\n          useLocalStorage: {\n\n            get: function() {\n              return use_local_storage;\n            },\n            set: function(bool) {\n              if (SUPPORTS_LOCAL_STORAGE) {\n                use_local_storage = bool;\n                if (bool) {\n                  dom.bind(window, 'unload', saveToLocalStorage);\n                } else {\n                  dom.unbind(window, 'unload', saveToLocalStorage);\n                }\n                localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n              }\n            }\n\n          }\n\n        });\n\n    // Are we a root level GUI?\n    if (common.isUndefined(params.parent)) {\n\n      params.closed = false;\n\n      dom.addClass(this.domElement, GUI.CLASS_MAIN);\n      dom.makeSelectable(this.domElement, false);\n\n      // Are we supposed to be loading locally?\n      if (SUPPORTS_LOCAL_STORAGE) {\n\n        if (use_local_storage) {\n\n          _this.useLocalStorage = true;\n\n          var saved_gui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n          if (saved_gui) {\n            params.load = JSON.parse(saved_gui);\n          }\n\n        }\n\n      }\n\n      this.__closeButton = document.createElement('div');\n      this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n      this.domElement.appendChild(this.__closeButton);\n\n      dom.bind(this.__closeButton, 'click', function() {\n\n        _this.closed = !_this.closed;\n\n\n      });\n\n\n      // Oh, you're a nested GUI!\n    } else {\n\n      if (params.closed === undefined) {\n        params.closed = true;\n      }\n\n      var title_row_name = document.createTextNode(params.name);\n      dom.addClass(title_row_name, 'controller-name');\n\n      var title_row = addRow(_this, title_row_name);\n\n      var on_click_title = function(e) {\n        e.preventDefault();\n        _this.closed = !_this.closed;\n        return false;\n      };\n\n      dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n\n      dom.addClass(title_row, 'title');\n      dom.bind(title_row, 'click', on_click_title);\n\n      if (!params.closed) {\n        this.closed = false;\n      }\n\n    }\n\n    if (params.autoPlace) {\n\n      if (common.isUndefined(params.parent)) {\n\n        if (auto_place_virgin) {\n          auto_place_container = document.createElement('div');\n          dom.addClass(auto_place_container, CSS_NAMESPACE);\n          dom.addClass(auto_place_container, GUI.CLASS_AUTO_PLACE_CONTAINER);\n          document.body.appendChild(auto_place_container);\n          auto_place_virgin = false;\n        }\n\n        // Put it in the dom for you.\n        auto_place_container.appendChild(this.domElement);\n\n        // Apply the auto styles\n        dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n\n      }\n\n\n      // Make it not elastic.\n      if (!this.parent) setWidth(_this, params.width);\n\n    }\n\n    dom.bind(window, 'resize', function() { _this.onResize() });\n    dom.bind(this.__ul, 'webkitTransitionEnd', function() { _this.onResize(); });\n    dom.bind(this.__ul, 'transitionend', function() { _this.onResize() });\n    dom.bind(this.__ul, 'oTransitionEnd', function() { _this.onResize() });\n    this.onResize();\n\n\n    if (params.resizable) {\n      addResizeHandle(this);\n    }\n\n    function saveToLocalStorage() {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n\n    var root = _this.getRoot();\n    function resetWidth() {\n        var root = _this.getRoot();\n        root.width += 1;\n        common.defer(function() {\n          root.width -= 1;\n        });\n      }\n\n      if (!params.parent) {\n        resetWidth();\n      }\n\n  };\n\n  GUI.toggleHide = function() {\n\n    hide = !hide;\n    common.each(hideable_guis, function(gui) {\n      gui.domElement.style.zIndex = hide ? -999 : 999;\n      gui.domElement.style.opacity = hide ? 0 : 1;\n    });\n  };\n\n  GUI.CLASS_AUTO_PLACE = 'a';\n  GUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\n  GUI.CLASS_MAIN = 'main';\n  GUI.CLASS_CONTROLLER_ROW = 'cr';\n  GUI.CLASS_TOO_TALL = 'taller-than-window';\n  GUI.CLASS_CLOSED = 'closed';\n  GUI.CLASS_CLOSE_BUTTON = 'close-button';\n  GUI.CLASS_DRAG = 'drag';\n\n  GUI.DEFAULT_WIDTH = 245;\n  GUI.TEXT_CLOSED = 'Close Controls';\n  GUI.TEXT_OPEN = 'Open Controls';\n\n  dom.bind(window, 'keydown', function(e) {\n\n    if (document.activeElement.type !== 'text' &&\n        (e.which === HIDE_KEY_CODE || e.keyCode == HIDE_KEY_CODE)) {\n      GUI.toggleHide();\n    }\n\n  }, false);\n\n  common.extend(\n\n      GUI.prototype,\n\n      /** @lends dat.gui.GUI */\n      {\n\n        /**\n         * @param object\n         * @param property\n         * @returns {dat.controllers.Controller} The new controller that was added.\n         * @instance\n         */\n        add: function(object, property) {\n\n          return add(\n              this,\n              object,\n              property,\n              {\n                factoryArgs: Array.prototype.slice.call(arguments, 2)\n              }\n          );\n\n        },\n\n        /**\n         * @param object\n         * @param property\n         * @returns {dat.controllers.ColorController} The new controller that was added.\n         * @instance\n         */\n        addColor: function(object, property) {\n\n          return add(\n              this,\n              object,\n              property,\n              {\n                color: true\n              }\n          );\n\n        },\n\n        /**\n         * @param controller\n         * @instance\n         */\n        remove: function(controller) {\n\n          // TODO listening?\n          this.__ul.removeChild(controller.__li);\n          this.__controllers.slice(this.__controllers.indexOf(controller), 1);\n          var _this = this;\n          common.defer(function() {\n            _this.onResize();\n          });\n\n        },\n\n        destroy: function() {\n\n          if (this.autoPlace) {\n            auto_place_container.removeChild(this.domElement);\n          }\n\n        },\n\n        /**\n         * @param name\n         * @returns {dat.gui.GUI} The new folder.\n         * @throws {Error} if this GUI already has a folder by the specified\n         * name\n         * @instance\n         */\n        addFolder: function(name) {\n\n          // We have to prevent collisions on names in order to have a key\n          // by which to remember saved values\n          if (this.__folders[name] !== undefined) {\n            throw new Error('You already have a folder in this GUI by the' +\n                ' name \"' + name + '\"');\n          }\n\n          var new_gui_params = { name: name, parent: this };\n\n          // We need to pass down the autoPlace trait so that we can\n          // attach event listeners to open/close folder actions to\n          // ensure that a scrollbar appears if the window is too short.\n          new_gui_params.autoPlace = this.autoPlace;\n\n          // Do we have saved appearance data for this folder?\n\n          if (this.load && // Anything loaded?\n              this.load.folders && // Was my parent a dead-end?\n              this.load.folders[name]) { // Did daddy remember me?\n\n            // Start me closed if I was closed\n            new_gui_params.closed = this.load.folders[name].closed;\n\n            // Pass down the loaded data\n            new_gui_params.load = this.load.folders[name];\n\n          }\n\n          var gui = new GUI(new_gui_params);\n          this.__folders[name] = gui;\n\n          var li = addRow(this, gui.domElement);\n          dom.addClass(li, 'folder');\n          return gui;\n\n        },\n\n        open: function() {\n          this.closed = false;\n        },\n\n        close: function() {\n          this.closed = true;\n        },\n\n        onResize: function() {\n\n          var root = this.getRoot();\n\n          if (root.scrollable) {\n\n            var top = dom.getOffset(root.__ul).top;\n            var h = 0;\n\n            common.each(root.__ul.childNodes, function(node) {\n              if (! (root.autoPlace && node === root.__save_row))\n                h += dom.getHeight(node);\n            });\n\n            if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n              dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n              root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n            } else {\n              dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n              root.__ul.style.height = 'auto';\n            }\n\n          }\n\n          if (root.__resize_handle) {\n            common.defer(function() {\n              root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n            });\n          }\n\n          if (root.__closeButton) {\n            root.__closeButton.style.width = root.width + 'px';\n          }\n\n        },\n\n        /**\n         * Mark objects for saving. The order of these objects cannot change as\n         * the GUI grows. When remembering new objects, append them to the end\n         * of the list.\n         *\n         * @param {Object...} objects\n         * @throws {Error} if not called on a top level GUI.\n         * @instance\n         */\n        remember: function() {\n\n          if (common.isUndefined(SAVE_DIALOGUE)) {\n            SAVE_DIALOGUE = new CenteredDiv();\n            SAVE_DIALOGUE.domElement.innerHTML = saveDialogueContents;\n          }\n\n          if (this.parent) {\n            throw new Error(\"You can only call remember on a top level GUI.\");\n          }\n\n          var _this = this;\n\n          common.each(Array.prototype.slice.call(arguments), function(object) {\n            if (_this.__rememberedObjects.length == 0) {\n              addSaveMenu(_this);\n            }\n            if (_this.__rememberedObjects.indexOf(object) == -1) {\n              _this.__rememberedObjects.push(object);\n            }\n          });\n\n          if (this.autoPlace) {\n            // Set save row width\n            setWidth(this, this.width);\n          }\n\n        },\n\n        /**\n         * @returns {dat.gui.GUI} the topmost parent GUI of a nested GUI.\n         * @instance\n         */\n        getRoot: function() {\n          var gui = this;\n          while (gui.parent) {\n            gui = gui.parent;\n          }\n          return gui;\n        },\n\n        /**\n         * @returns {Object} a JSON object representing the current state of\n         * this GUI as well as its remembered properties.\n         * @instance\n         */\n        getSaveObject: function() {\n\n          var toReturn = this.load;\n\n          toReturn.closed = this.closed;\n\n          // Am I remembering any values?\n          if (this.__rememberedObjects.length > 0) {\n\n            toReturn.preset = this.preset;\n\n            if (!toReturn.remembered) {\n              toReturn.remembered = {};\n            }\n\n            toReturn.remembered[this.preset] = getCurrentPreset(this);\n\n          }\n\n          toReturn.folders = {};\n          common.each(this.__folders, function(element, key) {\n            toReturn.folders[key] = element.getSaveObject();\n          });\n\n          return toReturn;\n\n        },\n\n        save: function() {\n\n          if (!this.load.remembered) {\n            this.load.remembered = {};\n          }\n\n          this.load.remembered[this.preset] = getCurrentPreset(this);\n          markPresetModified(this, false);\n\n        },\n\n        saveAs: function(presetName) {\n\n          if (!this.load.remembered) {\n\n            // Retain default values upon first save\n            this.load.remembered = {};\n            this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n\n          }\n\n          this.load.remembered[presetName] = getCurrentPreset(this);\n          this.preset = presetName;\n          addPresetOption(this, presetName, true);\n\n        },\n\n        revert: function(gui) {\n\n          common.each(this.__controllers, function(controller) {\n            // Make revert work on Default.\n            if (!this.getRoot().load.remembered) {\n              controller.setValue(controller.initialValue);\n            } else {\n              recallSavedValue(gui || this.getRoot(), controller);\n            }\n          }, this);\n\n          common.each(this.__folders, function(folder) {\n            folder.revert(folder);\n          });\n\n          if (!gui) {\n            markPresetModified(this.getRoot(), false);\n          }\n\n\n        },\n\n        listen: function(controller) {\n\n          var init = this.__listening.length == 0;\n          this.__listening.push(controller);\n          if (init) updateDisplays(this.__listening);\n\n        }\n\n      }\n\n  );\n\n  function add(gui, object, property, params) {\n\n    if (object[property] === undefined) {\n      throw new Error(\"Object \" + object + \" has no property \\\"\" + property + \"\\\"\");\n    }\n\n    var controller;\n\n    if (params.color) {\n\n      controller = new ColorController(object, property);\n\n    } else {\n\n      var factoryArgs = [object,property].concat(params.factoryArgs);\n      controller = controllerFactory.apply(gui, factoryArgs);\n\n    }\n\n    if (params.before instanceof Controller) {\n      params.before = params.before.__li;\n    }\n\n    recallSavedValue(gui, controller);\n\n    dom.addClass(controller.domElement, 'c');\n\n    var name = document.createElement('span');\n    dom.addClass(name, 'property-name');\n    name.innerHTML = controller.property;\n\n    var container = document.createElement('div');\n    container.appendChild(name);\n    container.appendChild(controller.domElement);\n\n    var li = addRow(gui, container, params.before);\n\n    dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n    dom.addClass(li, typeof controller.getValue());\n\n    augmentController(gui, li, controller);\n\n    gui.__controllers.push(controller);\n\n    return controller;\n\n  }\n\n  /**\n   * Add a row to the end of the GUI or before another row.\n   *\n   * @param gui\n   * @param [dom] If specified, inserts the dom content in the new row\n   * @param [liBefore] If specified, places the new row before another row\n   */\n  function addRow(gui, dom, liBefore) {\n    var li = document.createElement('li');\n    if (dom) li.appendChild(dom);\n    if (liBefore) {\n      gui.__ul.insertBefore(li, params.before);\n    } else {\n      gui.__ul.appendChild(li);\n    }\n    gui.onResize();\n    return li;\n  }\n\n  function augmentController(gui, li, controller) {\n\n    controller.__li = li;\n    controller.__gui = gui;\n\n    common.extend(controller, {\n\n      options: function(options) {\n\n        if (arguments.length > 1) {\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [common.toArray(arguments)]\n              }\n          );\n\n        }\n\n        if (common.isArray(options) || common.isObject(options)) {\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [options]\n              }\n          );\n\n        }\n\n      },\n\n      name: function(v) {\n        controller.__li.firstElementChild.firstElementChild.innerHTML = v;\n        return controller;\n      },\n\n      listen: function() {\n        controller.__gui.listen(controller);\n        return controller;\n      },\n\n      remove: function() {\n        controller.__gui.remove(controller);\n        return controller;\n      }\n\n    });\n\n    // All sliders should be accompanied by a box.\n    if (controller instanceof NumberControllerSlider) {\n\n      var box = new NumberControllerBox(controller.object, controller.property,\n          { min: controller.__min, max: controller.__max, step: controller.__step });\n\n      common.each(['updateDisplay', 'onChange', 'onFinishChange'], function(method) {\n        var pc = controller[method];\n        var pb = box[method];\n        controller[method] = box[method] = function() {\n          var args = Array.prototype.slice.call(arguments);\n          pc.apply(controller, args);\n          return pb.apply(box, args);\n        }\n      });\n\n      dom.addClass(li, 'has-slider');\n      controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n\n    }\n    else if (controller instanceof NumberControllerBox) {\n\n      var r = function(returned) {\n\n        // Have we defined both boundaries?\n        if (common.isNumber(controller.__min) && common.isNumber(controller.__max)) {\n\n          // Well, then lets just replace this with a slider.\n          controller.remove();\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [controller.__min, controller.__max, controller.__step]\n              });\n\n        }\n\n        return returned;\n\n      };\n\n      controller.min = common.compose(r, controller.min);\n      controller.max = common.compose(r, controller.max);\n\n    }\n    else if (controller instanceof BooleanController) {\n\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__checkbox, 'click');\n      });\n\n      dom.bind(controller.__checkbox, 'click', function(e) {\n        e.stopPropagation(); // Prevents double-toggle\n      })\n\n    }\n    else if (controller instanceof FunctionController) {\n\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__button, 'click');\n      });\n\n      dom.bind(li, 'mouseover', function() {\n        dom.addClass(controller.__button, 'hover');\n      });\n\n      dom.bind(li, 'mouseout', function() {\n        dom.removeClass(controller.__button, 'hover');\n      });\n\n    }\n    else if (controller instanceof ColorController) {\n\n      dom.addClass(li, 'color');\n      controller.updateDisplay = common.compose(function(r) {\n        li.style.borderLeftColor = controller.__color.toString();\n        return r;\n      }, controller.updateDisplay);\n\n      controller.updateDisplay();\n\n    }\n\n    controller.setValue = common.compose(function(r) {\n      if (gui.getRoot().__preset_select && controller.isModified()) {\n        markPresetModified(gui.getRoot(), true);\n      }\n      return r;\n    }, controller.setValue);\n\n  }\n\n  function recallSavedValue(gui, controller) {\n\n    // Find the topmost GUI, that's where remembered objects live.\n    var root = gui.getRoot();\n\n    // Does the object we're controlling match anything we've been told to\n    // remember?\n    var matched_index = root.__rememberedObjects.indexOf(controller.object);\n\n    // Why yes, it does!\n    if (matched_index != -1) {\n\n      // Let me fetch a map of controllers for thcommon.isObject.\n      var controller_map =\n          root.__rememberedObjectIndecesToControllers[matched_index];\n\n      // Ohp, I believe this is the first controller we've created for this\n      // object. Lets make the map fresh.\n      if (controller_map === undefined) {\n        controller_map = {};\n        root.__rememberedObjectIndecesToControllers[matched_index] =\n            controller_map;\n      }\n\n      // Keep track of this controller\n      controller_map[controller.property] = controller;\n\n      // Okay, now have we saved any values for this controller?\n      if (root.load && root.load.remembered) {\n\n        var preset_map = root.load.remembered;\n\n        // Which preset are we trying to load?\n        var preset;\n\n        if (preset_map[gui.preset]) {\n\n          preset = preset_map[gui.preset];\n\n        } else if (preset_map[DEFAULT_DEFAULT_PRESET_NAME]) {\n\n          // Uhh, you can have the default instead?\n          preset = preset_map[DEFAULT_DEFAULT_PRESET_NAME];\n\n        } else {\n\n          // Nada.\n\n          return;\n\n        }\n\n\n        // Did the loaded object remember thcommon.isObject?\n        if (preset[matched_index] &&\n\n          // Did we remember this particular property?\n            preset[matched_index][controller.property] !== undefined) {\n\n          // We did remember something for this guy ...\n          var value = preset[matched_index][controller.property];\n\n          // And that's what it is.\n          controller.initialValue = value;\n          controller.setValue(value);\n\n        }\n\n      }\n\n    }\n\n  }\n\n  function getLocalStorageHash(gui, key) {\n    // TODO how does this deal with multiple GUI's?\n    return document.location.href + '.' + key;\n\n  }\n\n  function addSaveMenu(gui) {\n\n    var div = gui.__save_row = document.createElement('li');\n\n    dom.addClass(gui.domElement, 'has-save');\n\n    gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n    dom.addClass(div, 'save-row');\n\n    var gears = document.createElement('span');\n    gears.innerHTML = '&nbsp;';\n    dom.addClass(gears, 'button gears');\n\n    // TODO replace with FunctionController\n    var button = document.createElement('span');\n    button.innerHTML = 'Save';\n    dom.addClass(button, 'button');\n    dom.addClass(button, 'save');\n\n    var button2 = document.createElement('span');\n    button2.innerHTML = 'New';\n    dom.addClass(button2, 'button');\n    dom.addClass(button2, 'save-as');\n\n    var button3 = document.createElement('span');\n    button3.innerHTML = 'Revert';\n    dom.addClass(button3, 'button');\n    dom.addClass(button3, 'revert');\n\n    var select = gui.__preset_select = document.createElement('select');\n\n    if (gui.load && gui.load.remembered) {\n\n      common.each(gui.load.remembered, function(value, key) {\n        addPresetOption(gui, key, key == gui.preset);\n      });\n\n    } else {\n      addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n    }\n\n    dom.bind(select, 'change', function() {\n\n\n      for (var index = 0; index < gui.__preset_select.length; index++) {\n        gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n      }\n\n      gui.preset = this.value;\n\n    });\n\n    div.appendChild(select);\n    div.appendChild(gears);\n    div.appendChild(button);\n    div.appendChild(button2);\n    div.appendChild(button3);\n\n    if (SUPPORTS_LOCAL_STORAGE) {\n\n      var saveLocally = document.getElementById('dg-save-locally');\n      var explain = document.getElementById('dg-local-explain');\n\n      saveLocally.style.display = 'block';\n\n      var localStorageCheckBox = document.getElementById('dg-local-storage');\n\n      if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n        localStorageCheckBox.setAttribute('checked', 'checked');\n      }\n\n      function showHideExplain() {\n        explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n      }\n\n      showHideExplain();\n\n      // TODO: Use a boolean controller, fool!\n      dom.bind(localStorageCheckBox, 'change', function() {\n        gui.useLocalStorage = !gui.useLocalStorage;\n        showHideExplain();\n      });\n\n    }\n\n    var newConstructorTextArea = document.getElementById('dg-new-constructor');\n\n    dom.bind(newConstructorTextArea, 'keydown', function(e) {\n      if (e.metaKey && (e.which === 67 || e.keyCode == 67)) {\n        SAVE_DIALOGUE.hide();\n      }\n    });\n\n    dom.bind(gears, 'click', function() {\n      newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n      SAVE_DIALOGUE.show();\n      newConstructorTextArea.focus();\n      newConstructorTextArea.select();\n    });\n\n    dom.bind(button, 'click', function() {\n      gui.save();\n    });\n\n    dom.bind(button2, 'click', function() {\n      var presetName = prompt('Enter a new preset name.');\n      if (presetName) gui.saveAs(presetName);\n    });\n\n    dom.bind(button3, 'click', function() {\n      gui.revert();\n    });\n\n//    div.appendChild(button2);\n\n  }\n\n  function addResizeHandle(gui) {\n\n    gui.__resize_handle = document.createElement('div');\n\n    common.extend(gui.__resize_handle.style, {\n\n      width: '6px',\n      marginLeft: '-3px',\n      height: '200px',\n      cursor: 'ew-resize',\n      position: 'absolute'\n//      border: '1px solid blue'\n\n    });\n\n    var pmouseX;\n\n    dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n    dom.bind(gui.__closeButton, 'mousedown', dragStart);\n\n    gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n\n    function dragStart(e) {\n\n      e.preventDefault();\n\n      pmouseX = e.clientX;\n\n      dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.bind(window, 'mousemove', drag);\n      dom.bind(window, 'mouseup', dragStop);\n\n      return false;\n\n    }\n\n    function drag(e) {\n\n      e.preventDefault();\n\n      gui.width += pmouseX - e.clientX;\n      gui.onResize();\n      pmouseX = e.clientX;\n\n      return false;\n\n    }\n\n    function dragStop() {\n\n      dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.unbind(window, 'mousemove', drag);\n      dom.unbind(window, 'mouseup', dragStop);\n\n    }\n\n  }\n\n  function setWidth(gui, w) {\n    gui.domElement.style.width = w + 'px';\n    // Auto placed save-rows are position fixed, so we have to\n    // set the width manually if we want it to bleed to the edge\n    if (gui.__save_row && gui.autoPlace) {\n      gui.__save_row.style.width = w + 'px';\n    }if (gui.__closeButton) {\n      gui.__closeButton.style.width = w + 'px';\n    }\n  }\n\n  function getCurrentPreset(gui, useInitialValues) {\n\n    var toReturn = {};\n\n    // For each object I'm remembering\n    common.each(gui.__rememberedObjects, function(val, index) {\n\n      var saved_values = {};\n\n      // The controllers I've made for thcommon.isObject by property\n      var controller_map =\n          gui.__rememberedObjectIndecesToControllers[index];\n\n      // Remember each value for each property\n      common.each(controller_map, function(controller, property) {\n        saved_values[property] = useInitialValues ? controller.initialValue : controller.getValue();\n      });\n\n      // Save the values for thcommon.isObject\n      toReturn[index] = saved_values;\n\n    });\n\n    return toReturn;\n\n  }\n\n  function addPresetOption(gui, name, setSelected) {\n    var opt = document.createElement('option');\n    opt.innerHTML = name;\n    opt.value = name;\n    gui.__preset_select.appendChild(opt);\n    if (setSelected) {\n      gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n    }\n  }\n\n  function setPresetSelectIndex(gui) {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      if (gui.__preset_select[index].value == gui.preset) {\n        gui.__preset_select.selectedIndex = index;\n      }\n    }\n  }\n\n  function markPresetModified(gui, modified) {\n    var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n//    console.log('mark', modified, opt);\n    if (modified) {\n      opt.innerHTML = opt.value + \"*\";\n    } else {\n      opt.innerHTML = opt.value;\n    }\n  }\n\n  function updateDisplays(controllerArray) {\n\n\n    if (controllerArray.length != 0) {\n\n      requestAnimationFrame(function() {\n        updateDisplays(controllerArray);\n      });\n\n    }\n\n    common.each(controllerArray, function(c) {\n      c.updateDisplay();\n    });\n\n  }\n\n  return GUI;\n\n})(dat.utils.css,\n\"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n      \\n    </div>\\n    \\n  </div>\\n\\n</div>\",\n\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\",\ndat.controllers.factory = (function (OptionController, NumberControllerBox, NumberControllerSlider, StringController, FunctionController, BooleanController, common) {\n\n      return function(object, property) {\n\n        var initialValue = object[property];\n\n        // Providing options?\n        if (common.isArray(arguments[2]) || common.isObject(arguments[2])) {\n          return new OptionController(object, property, arguments[2]);\n        }\n\n        // Providing a map?\n\n        if (common.isNumber(initialValue)) {\n\n          if (common.isNumber(arguments[2]) && common.isNumber(arguments[3])) {\n\n            // Has min and max.\n            return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n\n          } else {\n\n            return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n\n          }\n\n        }\n\n        if (common.isString(initialValue)) {\n          return new StringController(object, property);\n        }\n\n        if (common.isFunction(initialValue)) {\n          return new FunctionController(object, property, '');\n        }\n\n        if (common.isBoolean(initialValue)) {\n          return new BooleanController(object, property);\n        }\n\n      }\n\n    })(dat.controllers.OptionController,\ndat.controllers.NumberControllerBox,\ndat.controllers.NumberControllerSlider,\ndat.controllers.StringController = (function (Controller, dom, common) {\n\n  /**\n   * @class Provides a text input to alter the string property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var StringController = function(object, property) {\n\n    StringController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    dom.bind(this.__input, 'keyup', onChange);\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n    \n\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n\n  };\n\n  StringController.superclass = Controller;\n\n  common.extend(\n\n      StringController.prototype,\n      Controller.prototype,\n\n      {\n\n        updateDisplay: function() {\n          // Stops the caret from moving on account of:\n          // keyup -> setValue -> updateDisplay\n          if (!dom.isActive(this.__input)) {\n            this.__input.value = this.getValue();\n          }\n          return StringController.superclass.prototype.updateDisplay.call(this);\n        }\n\n      }\n\n  );\n\n  return StringController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.utils.common),\ndat.controllers.FunctionController,\ndat.controllers.BooleanController,\ndat.utils.common),\ndat.controllers.Controller,\ndat.controllers.BooleanController,\ndat.controllers.FunctionController,\ndat.controllers.NumberControllerBox,\ndat.controllers.NumberControllerSlider,\ndat.controllers.OptionController,\ndat.controllers.ColorController = (function (Controller, dom, Color, interpret, common) {\n\n  var ColorController = function(object, property) {\n\n    ColorController.superclass.call(this, object, property);\n\n    this.__color = new Color(this.getValue());\n    this.__temp = new Color(0);\n\n    var _this = this;\n\n    this.domElement = document.createElement('div');\n\n    dom.makeSelectable(this.domElement, false);\n\n    this.__selector = document.createElement('div');\n    this.__selector.className = 'selector';\n\n    this.__saturation_field = document.createElement('div');\n    this.__saturation_field.className = 'saturation-field';\n\n    this.__field_knob = document.createElement('div');\n    this.__field_knob.className = 'field-knob';\n    this.__field_knob_border = '2px solid ';\n\n    this.__hue_knob = document.createElement('div');\n    this.__hue_knob.className = 'hue-knob';\n\n    this.__hue_field = document.createElement('div');\n    this.__hue_field.className = 'hue-field';\n\n    this.__input = document.createElement('input');\n    this.__input.type = 'text';\n    this.__input_textShadow = '0 1px 1px ';\n\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) { // on enter\n        onBlur.call(this);\n      }\n    });\n\n    dom.bind(this.__input, 'blur', onBlur);\n\n    dom.bind(this.__selector, 'mousedown', function(e) {\n\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'mouseup', function(e) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n\n    });\n\n    var value_field = document.createElement('div');\n\n    common.extend(this.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n\n    common.extend(this.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: this.__field_knob_border + (this.__color.v < .5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    \n    common.extend(this.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n\n    common.extend(this.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n\n    common.extend(value_field.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    \n    linearGradient(value_field, 'top', 'rgba(0,0,0,0)', '#000');\n\n    common.extend(this.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      display: 'inline-block',\n      border: '1px solid #555',\n      cursor: 'ns-resize'\n    });\n\n    hueGradient(this.__hue_field);\n\n    common.extend(this.__input.style, {\n      outline: 'none',\n//      width: '120px',\n      textAlign: 'center',\n//      padding: '4px',\n//      marginBottom: '6px',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: this.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n\n    dom.bind(this.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(this.__field_knob, 'mousedown', fieldDown);\n\n    dom.bind(this.__hue_field, 'mousedown', function(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'mouseup', unbindH);\n    });\n\n    function fieldDown(e) {\n      setSV(e);\n      // document.body.style.cursor = 'none';\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'mouseup', unbindSV);\n    }\n\n    function unbindSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'mouseup', unbindSV);\n      // document.body.style.cursor = 'default';\n    }\n\n    function onBlur() {\n      var i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n\n    function unbindH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'mouseup', unbindH);\n    }\n\n    this.__saturation_field.appendChild(value_field);\n    this.__selector.appendChild(this.__field_knob);\n    this.__selector.appendChild(this.__saturation_field);\n    this.__selector.appendChild(this.__hue_field);\n    this.__hue_field.appendChild(this.__hue_knob);\n\n    this.domElement.appendChild(this.__input);\n    this.domElement.appendChild(this.__selector);\n\n    this.updateDisplay();\n\n    function setSV(e) {\n\n      e.preventDefault();\n\n      var w = dom.getWidth(_this.__saturation_field);\n      var o = dom.getOffset(_this.__saturation_field);\n      var s = (e.clientX - o.left + document.body.scrollLeft) / w;\n      var v = 1 - (e.clientY - o.top + document.body.scrollTop) / w;\n\n      if (v > 1) v = 1;\n      else if (v < 0) v = 0;\n\n      if (s > 1) s = 1;\n      else if (s < 0) s = 0;\n\n      _this.__color.v = v;\n      _this.__color.s = s;\n\n      _this.setValue(_this.__color.toOriginal());\n\n\n      return false;\n\n    }\n\n    function setH(e) {\n\n      e.preventDefault();\n\n      var s = dom.getHeight(_this.__hue_field);\n      var o = dom.getOffset(_this.__hue_field);\n      var h = 1 - (e.clientY - o.top + document.body.scrollTop) / s;\n\n      if (h > 1) h = 1;\n      else if (h < 0) h = 0;\n\n      _this.__color.h = h * 360;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n\n    }\n\n  };\n\n  ColorController.superclass = Controller;\n\n  common.extend(\n\n      ColorController.prototype,\n      Controller.prototype,\n\n      {\n\n        updateDisplay: function() {\n\n          var i = interpret(this.getValue());\n\n          if (i !== false) {\n\n            var mismatch = false;\n\n            // Check for mismatch on the interpreted value.\n\n            common.each(Color.COMPONENTS, function(component) {\n              if (!common.isUndefined(i[component]) &&\n                  !common.isUndefined(this.__color.__state[component]) &&\n                  i[component] !== this.__color.__state[component]) {\n                mismatch = true;\n                return {}; // break\n              }\n            }, this);\n\n            // If nothing diverges, we keep our previous values\n            // for statefulness, otherwise we recalculate fresh\n            if (mismatch) {\n              common.extend(this.__color.__state, i);\n            }\n\n          }\n\n          common.extend(this.__temp.__state, this.__color.__state);\n\n          this.__temp.a = 1;\n\n          var flip = (this.__color.v < .5 || this.__color.s > .5) ? 255 : 0;\n          var _flip = 255 - flip;\n\n          common.extend(this.__field_knob.style, {\n            marginLeft: 100 * this.__color.s - 7 + 'px',\n            marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n            backgroundColor: this.__temp.toString(),\n            border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip +')'\n          });\n\n          this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px'\n\n          this.__temp.s = 1;\n          this.__temp.v = 1;\n\n          linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toString());\n\n          common.extend(this.__input.style, {\n            backgroundColor: this.__input.value = this.__color.toString(),\n            color: 'rgb(' + flip + ',' + flip + ',' + flip +')',\n            textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip +',.7)'\n          });\n\n        }\n\n      }\n\n  );\n  \n  var vendors = ['-moz-','-o-','-webkit-','-ms-',''];\n  \n  function linearGradient(elem, x, a, b) {\n    elem.style.background = '';\n    common.each(vendors, function(vendor) {\n      elem.style.cssText += 'background: ' + vendor + 'linear-gradient('+x+', '+a+' 0%, ' + b + ' 100%); ';\n    });\n  }\n  \n  function hueGradient(elem) {\n    elem.style.background = '';\n    elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);'\n    elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n  }\n\n\n  return ColorController;\n\n})(dat.controllers.Controller,\ndat.dom.dom,\ndat.color.Color = (function (interpret, math, toString, common) {\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (!this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV')\n          return this.__state[component];\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n})(dat.color.interpret,\ndat.color.math = (function () {\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max != 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r == max) {\n        h = (g - b) / delta;\n      } else if (g == max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  }\n\n})(),\ndat.color.toString,\ndat.utils.common),\ndat.color.interpret,\ndat.utils.common),\ndat.utils.requestAnimationFrame = (function () {\n\n  /**\n   * requirejs version of Paul Irish's RequestAnimationFrame\n   * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n   */\n\n  return window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.oRequestAnimationFrame ||\n      window.msRequestAnimationFrame ||\n      function(callback, element) {\n\n        window.setTimeout(callback, 1000 / 60);\n\n      };\n})(),\ndat.dom.CenteredDiv = (function (dom, common) {\n\n\n  var CenteredDiv = function() {\n\n    this.backgroundElement = document.createElement('div');\n    common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear'\n    });\n\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n\n    this.domElement = document.createElement('div');\n    common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear'\n    });\n\n\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function() {\n      _this.hide();\n    });\n\n\n  };\n\n  CenteredDiv.prototype.show = function() {\n\n    var _this = this;\n    \n\n\n    this.backgroundElement.style.display = 'block';\n\n    this.domElement.style.display = 'block';\n    this.domElement.style.opacity = 0;\n//    this.domElement.style.top = '52%';\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n    this.layout();\n\n    common.defer(function() {\n      _this.backgroundElement.style.opacity = 1;\n      _this.domElement.style.opacity = 1;\n      _this.domElement.style.webkitTransform = 'scale(1)';\n    });\n\n  };\n\n  CenteredDiv.prototype.hide = function() {\n\n    var _this = this;\n\n    var hide = function() {\n\n      _this.domElement.style.display = 'none';\n      _this.backgroundElement.style.display = 'none';\n\n      dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n      dom.unbind(_this.domElement, 'transitionend', hide);\n      dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n\n    };\n\n    dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n    dom.bind(this.domElement, 'transitionend', hide);\n    dom.bind(this.domElement, 'oTransitionEnd', hide);\n\n    this.backgroundElement.style.opacity = 0;\n//    this.domElement.style.top = '48%';\n    this.domElement.style.opacity = 0;\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n  };\n\n  CenteredDiv.prototype.layout = function() {\n    this.domElement.style.left = window.innerWidth/2 - dom.getWidth(this.domElement) / 2 + 'px';\n    this.domElement.style.top = window.innerHeight/2 - dom.getHeight(this.domElement) / 2 + 'px';\n  };\n  \n  function lockScroll(e) {\n    console.log(e);\n  }\n\n  return CenteredDiv;\n\n})(dat.dom.dom,\ndat.utils.common),\ndat.dom.dom,\ndat.utils.common);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dat-gui/vendor/dat.gui.js\n// module id = 103\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/** @namespace */\nvar dat = module.exports = dat || {};\n\n/** @namespace */\ndat.color = dat.color || {};\n\n/** @namespace */\ndat.utils = dat.utils || {};\n\ndat.utils.common = (function () {\n  \n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    \n    BREAK: {},\n  \n    extend: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (!this.isUndefined(obj[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n      \n    },\n    \n    defaults: function(target) {\n      \n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        \n        for (var key in obj)\n          if (this.isUndefined(target[key])) \n            target[key] = obj[key];\n        \n      }, this);\n      \n      return target;\n    \n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n            return function() {\n              var args = ARR_SLICE.call(arguments);\n              for (var i = toCall.length -1; i >= 0; i--) {\n                args = [toCall[i].apply(this, args)];\n              }\n              return args[0];\n            }\n    },\n    \n    each: function(obj, itr, scope) {\n\n      \n      if (ARR_EACH && obj.forEach === ARR_EACH) { \n        \n        obj.forEach(itr, scope);\n        \n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        \n        for (var key = 0, l = obj.length; key < l; key++)\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) \n            return;\n            \n      } else {\n\n        for (var key in obj) \n          if (itr.call(scope, obj[key], key) === this.BREAK)\n            return;\n            \n      }\n            \n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) return obj.toArray();\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === obj+0;\n    },\n    \n    isString: function(obj) {\n      return obj === obj+'';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    }\n  \n  };\n    \n})();\n\n\ndat.color.toString = (function (common) {\n\n  return function(color) {\n\n    if (color.a == 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  }\n\n})(dat.utils.common);\n\n\ndat.Color = dat.color.Color = (function (interpret, math, toString, common) {\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (!this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV')\n          return this.__state[component];\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n})(dat.color.interpret = (function (toString, common) {\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) return false;\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString())\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) return false;\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            }\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length != 3) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length != 4) return false;\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            }\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            }\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            }\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              }\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            }\n          }\n\n        }\n\n      }\n\n    }\n\n\n  ];\n\n  return interpret;\n\n\n})(dat.color.toString,\ndat.utils.common),\ndat.color.math = (function () {\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max != 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r == max) {\n        h = (g - b) / delta;\n      } else if (g == max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  }\n\n})(),\ndat.color.toString,\ndat.utils.common);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dat-gui/vendor/dat.color.js\n// module id = 104\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","'use strict';\nvar strictUriEncode = require('strict-uri-encode');\nvar objectAssign = require('object-assign');\nvar decodeComponent = require('decode-uri-component');\n\nfunction encoderForArrayFormat(opts) {\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, index) {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, opts),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(opts) {\n\tvar result;\n\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t} else if (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, opts) {\n\tif (opts.encode) {\n\t\treturn opts.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t} else if (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input)).sort(function (a, b) {\n\t\t\treturn Number(a) - Number(b);\n\t\t}).map(function (key) {\n\t\t\treturn input[key];\n\t\t});\n\t}\n\n\treturn input;\n}\n\nexports.extract = function (str) {\n\treturn str.split('?')[1] || '';\n};\n\nexports.parse = function (str, opts) {\n\topts = objectAssign({arrayFormat: 'none'}, opts);\n\n\tvar formatter = parserForArrayFormat(opts);\n\n\t// Create an object with no prototype\n\t// https://github.com/sindresorhus/query-string/issues/47\n\tvar ret = Object.create(null);\n\n\tif (typeof str !== 'string') {\n\t\treturn ret;\n\t}\n\n\tstr = str.trim().replace(/^(\\?|#|&)/, '');\n\n\tif (!str) {\n\t\treturn ret;\n\t}\n\n\tstr.split('&').forEach(function (param) {\n\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t// Firefox (pre 40) decodes `%3D` to `=`\n\t\t// https://github.com/sindresorhus/query-string/pull/37\n\t\tvar key = parts.shift();\n\t\tvar val = parts.length > 0 ? parts.join('=') : undefined;\n\n\t\t// missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tval = val === undefined ? null : decodeComponent(val);\n\n\t\tformatter(decodeComponent(key), val, ret);\n\t});\n\n\treturn Object.keys(ret).sort().reduce(function (result, key) {\n\t\tvar val = ret[key];\n\t\tif (Boolean(val) && typeof val === 'object' && !Array.isArray(val)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(val);\n\t\t} else {\n\t\t\tresult[key] = val;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n};\n\nexports.stringify = function (obj, opts) {\n\tvar defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\topts = objectAssign(defaults, opts);\n\n\tvar formatter = encoderForArrayFormat(opts);\n\n\treturn obj ? Object.keys(obj).sort().map(function (key) {\n\t\tvar val = obj[key];\n\n\t\tif (val === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (val === null) {\n\t\t\treturn encode(key, opts);\n\t\t}\n\n\t\tif (Array.isArray(val)) {\n\t\t\tvar result = [];\n\n\t\t\tval.slice().forEach(function (val2) {\n\t\t\t\tif (val2 === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, val2, result.length));\n\t\t\t});\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, opts) + '=' + encode(val, opts);\n\t}).filter(function (x) {\n\t\treturn x.length > 0;\n\t}).join('&') : '';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/query-string/index.js\n// module id = 105\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","'use strict';\nmodule.exports = function (str) {\n\treturn encodeURIComponent(str).replace(/[!'()*]/g, function (c) {\n\t\treturn '%' + c.charCodeAt(0).toString(16).toUpperCase();\n\t});\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/strict-uri-encode/index.js\n// module id = 106\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/object-assign/index.js\n// module id = 107\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/decode-uri-component/index.js\n// module id = 108\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","import {\n  GL,\n  Renderer,\n  Scene,\n  PerspectiveCamera,\n  OrbitControls,\n  SphereGeometry,\n  Shader,\n  Mesh,\n  TextureCube,\n  ShaderChunks\n} from '../../../../src/index.ts';\n\nconst { gui, guiController } = require('../gui')(['webgl2']);\n\n// Renderer\nconst renderer = new Renderer({\n  ratio: window.innerWidth / window.innerHeight,\n  prefferedContext: guiController.context\n});\nrenderer.setDevicePixelRatio(window.devicePixelRatio);\ndocument.body.appendChild(renderer.canvas);\n\n// Scene\nconst scene = new Scene();\n\n// Camera\nconst camera = new PerspectiveCamera({\n  fov: 45\n});\n\ncamera.position.set(10, 0, 10);\ncamera.lookAt();\n\n// Helpers\nconst controls = new OrbitControls(camera, renderer.canvas);\ncontrols.update();\n\nconst environmentMap = new TextureCube({\n  src: [\n    '/assets/textures/cube/pisa-hdr/px.hdr',\n    '/assets/textures/cube/pisa-hdr/nx.hdr',\n    '/assets/textures/cube/pisa-hdr/py.hdr',\n    '/assets/textures/cube/pisa-hdr/ny.hdr',\n    '/assets/textures/cube/pisa-hdr/pz.hdr',\n    '/assets/textures/cube/pisa-hdr/nz.hdr'\n  ]\n});\n\n// const environmentMap = new TextureCube({\n// \tsrc: [\n// \t\t'/assets/textures/cube/pisa/px.png',\n// \t\t'/assets/textures/cube/pisa/nx.png',\n// \t\t'/assets/textures/cube/pisa/py.png',\n// \t\t'/assets/textures/cube/pisa/ny.png',\n// \t\t'/assets/textures/cube/pisa/pz.png',\n// \t\t'/assets/textures/cube/pisa/nz.png',\n// \t],\n// });\n\nguiController.exposure = 2.0;\n\ngui.add(guiController, 'exposure', 0, 2);\n\nconst hdrObjects = [];\n\nfunction skybox() {\n  const material = new Shader({\n    hookFragmentPre: `\n\t\t\tuniform samplerCube uEnvironment;\n\t\t\tuniform float uGamma;\n\t\t\tuniform float uExposure;\n\n\t\t\t${ShaderChunks.EnvMapCube}\n\t\t\t${ShaderChunks.Tonemap.tonemapReinhard}\n\t\t\t${ShaderChunks.Gamma}\n\t\t`,\n    hookFragmentEnd: `\n\t\t\tcolor = texture(uEnvironment, envMapCube(vPosition)).rgb;\n\t\t\tcolor *= uExposure;\n\n\t\t\t// white balance\n\t\t\tcolor\t= tonemapReinhard(color);\n\n\t\t\t// gamma correction\n\t\t\tcolor\t= toGamma(color);\n\n\t\t\toutgoingColor = vec4(color, 1.0);\n\t\t`,\n    uniforms: {\n      uEnvironment: {\n        type: 'tc',\n        value: environmentMap.texture\n      },\n      uGamma: {\n        type: 'f',\n        value: guiController.gamma\n      },\n      uExposure: {\n        type: 'f',\n        value: guiController.exposure\n      }\n    }\n  });\n\n  const geometry = new SphereGeometry(40, 64, 64);\n  const mesh = new Mesh(geometry, material);\n\n  scene.add(mesh);\n\n  hdrObjects.push(mesh);\n}\nskybox();\n\nfunction reflectiveObjects() {\n  const material = new Shader({\n    hookVertexPre: `\n\t\t\tout vec3 vReflect;\n\t\t`,\n    hookVertexEnd: `\n\t\t\t// Calculate world normal position (of surface)\n\n\t\t\t// This is wrong, we don't want to apply model transformations to normal\n\t\t\t// vec3 worldNormal = (uModelMatrix * vec4(vNormal, 1.0)).xyz;\n\n\t\t\tvec3 worldNormal = vNormal;\n\n\t\t\t// Calculate eye ray (from camera to surface)\n\t\t\tvec3 eye = normalize(vWorldPosition.xyz - uCameraPosition);\n\n\t\t\t// Angle of reflection\n\t\t\tvReflect = reflect(eye, worldNormal);\n\t\t`,\n    hookFragmentPre: `\n\t\t\tuniform samplerCube uEnvironment;\n\t\t\tin vec3 vReflect;\n\t\t\tuniform float uGamma;\n\t\t\tuniform float uExposure;\n\n\t\t\t${ShaderChunks.EnvMapCube}\n\t\t\t${ShaderChunks.Tonemap.tonemapReinhard}\n\t\t\t${ShaderChunks.Gamma}\n\t\t`,\n    hookFragmentEnd: `\n\t\t\tcolor = texture(uEnvironment, envMapCube(vReflect)).rgb;\n\t\t\tcolor *= uExposure;\n\n\t\t\t// white balance\n\t\t\tcolor\t= tonemapReinhard(color);\n\n\t\t\t// gamma correction\n\t\t\tcolor\t= toGamma(color);\n\n\t\t\toutgoingColor = vec4(color, 1.0);\n\t\t`,\n    uniforms: {\n      tex: {\n        type: 'tc',\n        value: environmentMap.texture\n      },\n      uGamma: {\n        type: 'f',\n        value: guiController.gamma\n      },\n      uExposure: {\n        type: 'f',\n        value: guiController.exposure\n      },\n      uCameraPosition: {\n        type: '3f',\n        value: [0, 0, 0]\n      }\n    }\n  });\n\n  const geometry0 = new SphereGeometry(2, 64, 64);\n  const mesh0 = new Mesh(geometry0, material);\n  scene.add(mesh0);\n\n  // const geometry1 = new BoxGeometry(2, 2, 2);\n  // const mesh1 = new Mesh(geometry1, material);\n  // scene.add(mesh1);\n\n  // mesh0.position.z = -3;\n  // mesh1.position.z = 3;\n\n  hdrObjects.push(mesh0);\n  // hdrObjects.push(mesh1);\n}\nreflectiveObjects();\n\nfunction resize() {\n  const width = window.innerWidth;\n  const height = window.innerHeight;\n  renderer.setSize(width, height);\n  camera.ratio = width / height;\n  camera.updateProjectionMatrix();\n}\nresize();\n\nwindow.addEventListener('resize', resize);\n\nfunction update() {\n  requestAnimationFrame(update);\n\n  camera.updateMatrixWorld();\n\n  hdrObjects.forEach(object => {\n    object.shader.uniforms.uGamma.value = guiController.gamma;\n    object.shader.uniforms.uExposure.value = guiController.exposure;\n  });\n\n  renderer.render(scene, camera);\n}\nupdate();\n\n\n\n// WEBPACK FOOTER //\n// ./examples/src/js/hdrcube/index.js"],"sourceRoot":""}