module.exports=function(e){function t(i){if(a[i])return a[i].exports;var r=a[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,i){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var a=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(a,'a',a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=41)}([function(e,t,a){'use strict';function i(e,t,a=!1){const i=n.createBuffer(),r=a?n.DYNAMIC_DRAW:n.STATIC_DRAW,o=e===n.ARRAY_BUFFER?Float32Array:Uint16Array;return n.bindBuffer(e,i),n instanceof WebGL2RenderingContext?n.bufferData(e,new o(t),r,0):n.bufferData(e,new o(t),r),n.bindBuffer(e,null),i}function r(e){const t=n.createBuffer();return!!(n instanceof WebGL2RenderingContext)&&(n.bindBuffer(n.UNIFORM_BUFFER,t),n.bufferData(n.UNIFORM_BUFFER,new Float32Array(e),n.DYNAMIC_DRAW),n.bindBuffer(n.UNIFORM_BUFFER,null),t)}Object.defineProperty(t,'__esModule',{value:!0}),t.set=function(e,t){n=e,s=t,l=s===o.WEBGL2_CONTEXT},t.get=function(){return n},a.d(t,'webgl2',function(){return l}),a.d(t,'createBuffer',function(){return i}),a.d(t,'createUniformBuffer',function(){return r});var o=a(3);let n,s,l},function(e,t,a){t.glMatrix=a(7),t.mat2=a(42),t.mat2d=a(43),t.mat3=a(27),t.mat4=a(44),t.quat=a(45),t.vec2=a(46),t.vec3=a(28),t.vec4=a(29)},function(e,t,a){'use strict';var i=a(1),r=a.n(i);class o{constructor(e=0,t=0,a=0){return this.v=i.vec3.create(),this.set(e,t,a),this}set x(e){this.v[0]=e}get x(){return this.v[0]}set y(e){this.v[1]=e}get y(){return this.v[1]}set z(e){this.v[2]=e}get z(){return this.v[2]}set(e,t,a){return i.vec3.set(this.v,e,t,a),this}clone(){return new o(this.v[0],this.v[1],this.v[2])}copy(e){return i.vec3.copy(this.v,e.v),this}add(e){return i.vec3.add(this.v,this.v,e.v),this}subtract(e){return i.vec3.subtract(this.v,this.v,e.v),this}subtractVectors(e,t){const a=i.vec3.create();return i.vec3.subtract(a,e.v,t.v),a}scale(e){return i.vec3.scale(this.v,this.v,e),this}distance(e){return i.vec3.distance(this.v,e.v)}length(){return i.vec3.length(this.v)}negate(){return i.vec3.negate(this.v,this.v),this}normalize(){return i.vec3.normalize(this.v,this.v),this}dot(e){return i.vec3.dot(this.v,e.v)}cross(e){return i.vec3.cross(this.v,this.v,e.v),this}crossVectors(e,t){const a=i.vec3.create();return i.vec3.cross(a,e.v,t.v),a}lerp(e,t){return i.vec3.lerp(this.v,this.v,e.v,t),this}equals(e){return i.vec3.equals(this.v,e.v)}}t.a=o},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});t.WEBGL_CONTEXT='webgl';const a='webgl2';t.WEBGL2_CONTEXT=a;t.RENDERER_DEFAULT_CONTEXT=a;const i=1280;t.RENDERER_DEFAULT_WIDTH=i;const r=720;t.RENDERER_DEFAULT_HEIGHT=r;t.RENDERER_DEFAULT_RATIO=i/r;t.PRECISION='highp';t.CULL_NONE=-1;t.CULL_BACK=1029;t.CULL_FRONT=1028;t.CULL_FRONT_AND_BACK=1032;t.DRAW_POINTS=0;t.DRAW_LINES=1;t.DRAW_LINE_LOOP=2;t.DRAW_LINE_STRIP=3;t.DRAW_TRIANGLES=4;t.UNIFORM_PROJECTION_VIEW_LOCATION=0;t.UNIFORM_AMBIENT_LIGHT_LOCATION=1;t.UNIFORM_DIRECTIONAL_LIGHTS_LOCATION=2;t.UNIFORM_POINT_LIGHTS_LOCATION=3;t.SHADER_BASIC='basic';t.SHADER_LAMBERT='lambert';t.SHADER_PHONG='phong';t.LIGHT_AMBIENT='ambient';t.LIGHT_DIRECTIONAL='directional';t.LIGHT_POINT='point'},function(e,t){'use strict';t.a='#version 300 es'},function(e,t,a){'use strict';function i(e,t){if('highp'===t){if(0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision)return'highp';t='mediump'}return'mediump'===t&&0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision?'mediump':'lowp'}function r(e){let t=s.PRECISION;const a=i(e,t);a!==t&&(l.b('Capabilities:',t,'not supported, using',a,'instead.'),t=a);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),o=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),n=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),u=e.getParameter(e.MAX_VERTEX_ATTRIBS),c=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),x=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS);return{precision:t,maxTextures:r,maxPrecision:a,maxVertexTextures:o,maxTextureSize:n,maxCubemapSize:d,maxAttributes:u,maxVertexUniforms:c,maxVaryings:m,maxFragmentUniforms:x}}function o(e){const t=n.webgl2||e.getExtension('OES_vertex_array_object')||!1,a=e.getExtension('ANGLE_instanced_arrays')||!1,i=e.getExtension('OES_texture_float')||!1;return{angleInstancedArrays:a,vertexArrayObject:t,textureFloat:i}}Object.defineProperty(t,'__esModule',{value:!0}),t.set=function(e){d=r(e),u=o(e)},a.d(t,'capabilities',function(){return d}),a.d(t,'extensions',function(){return u});var n=a(0),s=a(3),l=a(13);let d={},u={}},function(e,t,a){'use strict';var i=a(0),r=a(35),o=a(67),n=a(2),s=a(15);let l=[],d;t.a=class{constructor(e,t,a,r,o){d=i.get(),this.bufferVertices=e,this.bufferIndices=t,this.bufferNormals=a,this.bufferUvs=r,this.bufferColors=o,this.attributes={},this.attributesInstanced={},this.bufferVertices&&(this.addAttribute('aVertexPosition',d.ARRAY_BUFFER,this.bufferVertices,3),this.generateVertices()),this.bufferIndices&&(this.addAttribute('aIndex',d.ELEMENT_ARRAY_BUFFER,this.bufferIndices,1,!1),this.generateFaces()),this.bufferNormals&&this.addAttribute('aVertexNormal',d.ARRAY_BUFFER,this.bufferNormals,3),this.bufferUvs&&(this.addAttribute('aUv',d.ARRAY_BUFFER,this.bufferUvs,2),this.generateUvs()),this.bufferColors&&this.addAttribute('aVertexColor',d.ARRAY_BUFFER,this.bufferColors,3)}addAttribute(e,t,a,i,o){this.attributes[e]=new r.a(t,a,i,o)}addInstancedBufferAttribute(e,t,a){this.attributesInstanced[e]=new r.a(d.ARRAY_BUFFER,t,a)}generateVertices(){this.vertices=[];for(let e=0;e<this.bufferVertices.length;e+=3){const t=this.bufferVertices[e],a=this.bufferVertices[e+1],i=this.bufferVertices[e+2],r=new n.a(t,a,i);this.vertices.push(r)}}generateFaces(){this.faces=[];for(let e=0;e<this.bufferIndices.length;e+=3){const t=this.bufferIndices[e],i=this.bufferIndices[e+1],r=this.bufferIndices[e+2],n=this.vertices[t],a=this.vertices[i],s=this.vertices[r],l=new o.a(t,i,r,n,a,s);this.faces.push(l)}}generateUvs(){this.uvs=[];for(let e=0;e<this.bufferUvs.length;e+=2){const t=this.bufferUvs[e],a=this.bufferUvs[e+1],i=new s.a(t,a);this.uvs.push(i)}}updateVertices(){d=i.get(),this.vertices.forEach((e,t)=>{this.bufferVertices.set(e.v,t*e.v.length)}),this.attributes.aVertexPosition.update(this.bufferVertices)}updateNormals(){const e=[];this.faces.forEach((t)=>{t.updateFaceNormal(),e[t.indices[0]]=t.normal.v,e[t.indices[1]]=t.normal.v,e[t.indices[2]]=t.normal.v}),l=[],e.forEach((e)=>{l=l.concat(...e)}),this.bufferNormals.set(l),this.attributes.aVertexNormal.update(this.bufferNormals)}dispose(){d=i.get(),Object.keys(this.attributes).forEach((e)=>{this.attributes[e].dispose(d),delete this.attributes[e]}),Object.keys(this.attributesInstanced).forEach((e)=>{this.attributesInstanced[e].dispose(d),delete this.attributesInstanced[e]}),delete this.attributes,delete this.attributesInstanced,this.bufferVertices=null,this.bufferIndices=null,this.bufferNormals=null,this.bufferUvs=null,this.bufferColors=null}}},function(e){var t=Math.abs,i={};i.EPSILON=1e-6,i.ARRAY_TYPE='undefined'==typeof Float32Array?Array:Float32Array,i.RANDOM=Math.random,i.ENABLE_SIMD=!1,i.SIMD_AVAILABLE=i.ARRAY_TYPE===Float32Array&&'SIMD'in this,i.USE_SIMD=i.ENABLE_SIMD&&i.SIMD_AVAILABLE,i.setMatrixArrayType=function(e){i.ARRAY_TYPE=e};var r=Math.PI/180;i.toRadian=function(e){return e*r},i.equals=function(e,a){return t(e-a)<=i.EPSILON*Math.max(1,t(e),t(a))},e.exports=i},function(e,t,a){'use strict';var i=a(0),r=a(26),o=a(30),n=a(5);let s;class l extends r.a{constructor(e,t){super(),this.geometry=e,this.shader=t,this.vao=new o.a,this.visible=!0,this.instanceCount=0,this.shader.program.created||this.shader.create(this.geometry),this.isInstanced=!1,s=i.get(),this.vao.bind(),this.bindAttributes(),this.bindAttributesInstanced(),this.bindIndexBuffer(),this.vao.unbind()}setInstanceCount(e){s=i.get(),this.instanceCount=e,this.isInstanced=!0}bindAttributes(){Object.keys(this.geometry.attributes).forEach((e)=>{'aIndex'!==e&&(this.shader.program.setAttributeLocation(e),this.geometry.attributes[e].bind(),this.shader.program.setAttributePointer(e,this.geometry.attributes[e].itemSize))})}bindAttributesInstanced(){Object.keys(this.geometry.attributesInstanced).forEach((e)=>{'aIndex'!==e&&(this.shader.program.setAttributeLocation(e),this.geometry.attributesInstanced[e].bind(),this.shader.program.setAttributeInstancedPointer(e,this.geometry.attributesInstanced[e].itemSize),s instanceof WebGL2RenderingContext?s.vertexAttribDivisor(this.shader.program.attributeLocations[e],1):n.extensions.angleInstancedArrays.vertexAttribDivisorANGLE(this.shader.program.attributeLocations[e],1))})}bindIndexBuffer(){this.geometry.bufferIndices&&this.geometry.attributes.aIndex.bind()}draw(e,t,a){this.visible&&(s=i.get(),this.updateMatrix(),this.shader.program.bind(),-1!==this.shader.culling&&(s.enable(s.CULL_FACE),s.cullFace(this.shader.culling)),this.shader.setUniforms(e,t,this.modelMatrix,a),n.extensions.vertexArrayObject?this.vao.bind():(this.bindAttributes(),this.bindAttributesInstanced(),this.bindIndexBuffer()),this.geometry.attributes.aIndex?s.drawElements(this.shader.drawType,this.geometry.attributes.aIndex.numItems,s.UNSIGNED_SHORT,0):s.drawArrays(this.shader.drawType,0,this.geometry.attributes.aVertexPosition.numItems),n.extensions.vertexArrayObject&&this.vao.unbind(),-1!==this.shader.culling&&s.disable(s.CULL_FACE))}drawInstance(e,t,a){this.visible&&(s=i.get(),this.updateMatrix(),this.shader.program.bind(),this.shader.setUniforms(e,t,this.modelMatrix,a),-1!==this.shader.culling&&(s.enable(s.CULL_FACE),s.cullFace(this.shader.culling)),n.extensions.vertexArrayObject?this.vao.bind():(this.bindAttributes(),this.bindAttributesInstanced(),this.bindIndexBuffer()),s instanceof WebGL2RenderingContext?s.drawElementsInstanced(this.shader.drawType,this.geometry.attributes.aIndex.numItems,s.UNSIGNED_SHORT,0,this.instanceCount):n.extensions.angleInstancedArrays.drawElementsInstancedANGLE(this.shader.drawType,this.geometry.attributes.aIndex.numItems,s.UNSIGNED_SHORT,0,this.instanceCount),n.extensions.vertexArrayObject&&this.vao.unbind(),-1!==this.shader.culling&&s.disable(s.CULL_FACE))}dispose(){this.shader.dispose(),this.geometry.dispose(),this.vao.dispose(),this.geometry=null,this.shader=null,super.dispose()}}t.a=l},function(e,t,a){'use strict';var i=a(0),r=a(3),o=a(1),n=a.n(o),s=a(54),l=a(55),d=a(56),u=a(57),c=a(59),m=a(12),x=a(5),f=a(16),p=a(60);let g;const h=o.mat3.create(),E=o.mat4.create(),v=o.mat4.create();t.a=class{constructor(e){const t=i.webgl2?s.b:s.a;let a;switch(e.type){case r.SHADER_LAMBERT:{a=i.webgl2?d.b:d.a;break}case r.SHADER_PHONG:{a=i.webgl2?u.b:u.a;break}default:a=i.webgl2?l.b:l.a;}this.name='',this.type=r.SHADER_BASIC,this.uniforms={},this.hookVertexPre='',this.hookVertexMain='',this.hookVertexEnd='',this.hookFragmentPre='',this.hookFragmentMain='',this.hookFragmentEnd='',this.vertexShader=t,this.fragmentShader=a,this.drawType=r.DRAW_TRIANGLES,this.directionalLights=void 0,this.pointLights=void 0,this.culling=r.CULL_NONE,Object.assign(this,e),this.program=new p.a}create(e,t){g=i.get(),this.vertexShader=this._processShader(this.vertexShader,'vertex',e),this.fragmentShader=this._processShader(this.fragmentShader,'fragment',e),this.program.link(this.vertexShader,this.fragmentShader,t),this.customUniforms=this.uniforms||{},i.webgl2&&this.program.setUniformBlockLocation('ProjectionView',f['default'].projectionView.buffer,r.UNIFORM_PROJECTION_VIEW_LOCATION),this.ambientLight&&(i.webgl2?this.program.setUniformBlockLocation('AmbientLight',this.ambientLight.uniformBuffer.buffer,r.UNIFORM_AMBIENT_LIGHT_LOCATION):this.ambientLight.get().forEach((e)=>{Object.keys(e.uniforms).forEach((t)=>{const a=e.uniforms[t];this.customUniforms[`uAmbientLight.${t}`]=a})})),this.directionalLights&&(i.webgl2?this.program.setUniformBlockLocation('DirectionalLights',this.directionalLights.uniformBuffer.buffer,r.UNIFORM_DIRECTIONAL_LIGHTS_LOCATION):this.directionalLights.get().forEach((e,t)=>{Object.keys(e.uniforms).forEach((a)=>{const i=e.uniforms[a];this.customUniforms[`uDirectionalLights[${t}].${a}`]=i})})),this.pointLights&&(i.webgl2?this.program.setUniformBlockLocation('PointLights',this.pointLights.uniformBuffer.buffer,r.UNIFORM_POINT_LIGHTS_LOCATION):this.pointLights.get().forEach((e,t)=>{Object.keys(e.uniforms).forEach((a)=>{const i=e.uniforms[a];this.customUniforms[`uPointLights[${t}].${a}`]=i})}));const a=[g.TEXTURE0,g.TEXTURE1,g.TEXTURE2,g.TEXTURE3,g.TEXTURE4,g.TEXTURE5];Object.keys(this.uniforms).forEach((e,t)=>{switch(this.uniforms[e].type){case't':case'tc':case't3d':{this.uniforms[e].textureIndex=t,this.uniforms[e].activeTexture=a[t];break}default:}}),this.uniforms.uCameraPosition===void 0&&this.pointLights&&(this.uniforms.uCameraPosition={type:'3f',value:[0,0,0]});const n=i.webgl2?{}:{uProjectionMatrix:{type:'4fv',value:o.mat4.create(),location:null},uViewMatrix:{type:'4fv',value:o.mat4.create(),location:null}};this.uniforms=Object.assign({uViewMatrixInverse:{type:'4fv',value:o.mat4.create(),location:null},uModelMatrix:{type:'4fv',value:o.mat4.create(),location:null},uModelMatrixInverse:{type:'4fv',value:o.mat4.create(),location:null},uNormalMatrix:{type:'4fv',value:o.mat4.create(),location:null},uDiffuse:{type:'3f',value:new m.a().v,location:null}},this.customUniforms,n),Object.keys(this.uniforms).forEach((e)=>{this.program.setUniformLocation(this.uniforms,e)})}_processShader(e,t,a){function r(e){o+=`#define ${e} \n`}g=i.get();let o='';const n=`precision ${x.capabilities.precision} float;`;return a.bufferUvs&&r('uv'),a.bufferColors&&r('vertexColors'),a.bufferNormals&&r('normals'),this.ambientLight&&r('ambientLight'),this.directionalLights&&r('directionalLights'),this.pointLights&&r('pointLights'),e=e.replace(/#HOOK_PRECISION/g,n),e=e.replace(/#HOOK_DEFINES/g,o),e=e.replace(/#HOOK_VERTEX_PRE/g,this.hookVertexPre),e=e.replace(/#HOOK_VERTEX_MAIN/g,this.hookVertexMain),e=e.replace(/#HOOK_VERTEX_END/g,this.hookVertexEnd),e=e.replace(/#HOOK_FRAGMENT_PRE/g,this.hookFragmentPre),e=e.replace(/#HOOK_FRAGMENT_MAIN/g,this.hookFragmentMain),e=e.replace(/#HOOK_FRAGMENT_END/g,this.hookFragmentEnd),this.pointLights&&(e=e.replace(/#HOOK_POINT_LIGHTS/g,this.pointLights.length+'')),this.directionalLights&&(e=e.replace(/#HOOK_DIRECTIONAL_LIGHTS/g,this.directionalLights.length+'')),c.a(e,t)}setUniforms(e,t,a,r){g=i.get(),Object.keys(this.customUniforms).forEach((e)=>{const t=this.uniforms[e];switch(t.type){case't':{g.uniform1i(t.location,t.textureIndex),g.activeTexture(t.activeTexture),g.bindTexture(g.TEXTURE_2D,t.value);break}case'tc':{g.uniform1i(t.location,t.textureIndex),g.activeTexture(t.activeTexture),g.bindTexture(g.TEXTURE_CUBE_MAP,t.value);break}case't3d':{g instanceof WebGL2RenderingContext&&(g.uniform1i(t.location,t.textureIndex),g.activeTexture(t.activeTexture),g.bindTexture(g.TEXTURE_3D,t.value));break}case'i':{g.uniform1i(t.location,t.value);break}case'f':{g.uniform1f(t.location,t.value);break}case'2f':{g.uniform2f(t.location,t.value[0],t.value[1]);break}case'3f':{g.uniform3f(t.location,t.value[0],t.value[1],t.value[2]);break}case'4f':{g.uniform4f(t.location,t.value[0],t.value[1],t.value[2],t.value[3]);break}case'1iv':{g.uniform1iv(t.location,t.value);break}case'2iv':{g.uniform2iv(t.location,t.value);break}case'1fv':{g.uniform1fv(t.location,t.value);break}case'2fv':{g.uniform2fv(t.location,t.value);break}case'3fv':{g.uniform3fv(t.location,t.value);break}case'4fv':{g.uniform4fv(t.location,t.value);break}case'Matrix3fv':{g.uniformMatrix3fv(t.location,!1,t.value);break}case'Matrix4fv':{g.uniformMatrix4fv(t.location,!1,t.value);break}default:}}),i.webgl2||(g.uniformMatrix4fv(this.uniforms.uProjectionMatrix.location,!1,t),g.uniformMatrix4fv(this.uniforms.uViewMatrix.location,!1,e)),o.mat4.identity(E),o.mat4.invert(E,e),g.uniformMatrix4fv(this.uniforms.uViewMatrixInverse.location,!1,E),g.uniformMatrix4fv(this.uniforms.uModelMatrix.location,!1,a),o.mat4.identity(v),o.mat4.invert(v,a),g.uniformMatrix4fv(this.uniforms.uModelMatrixInverse.location,!1,v),o.mat3.identity(h),o.mat3.fromMat4(h,v),o.mat3.transpose(h,h),g.uniformMatrix3fv(this.uniforms.uNormalMatrix.location,!1,h),g.uniform3f(this.uniforms.uDiffuse.location,this.uniforms.uDiffuse.value[0],this.uniforms.uDiffuse.value[1],this.uniforms.uDiffuse.value[2]),r&&this.uniforms.uCameraPosition&&g.uniform3f(this.uniforms.uCameraPosition.location,r.position.v[0],r.position.v[1],r.position.v[2])}dispose(){Object.keys(this.customUniforms).forEach((e)=>{const t=this.uniforms[e];switch(t.type){case't':case'tc':{g.deleteTexture(t.value);break}default:}}),this.program.dispose()}}},function(e,t){'use strict';t.a=`
	uniform ProjectionView {
		mat4 projectionMatrix;
		mat4 viewMatrix;
	} uProjectionView;
`},function(e,t,a){'use strict';var i=Math.cos,r=Math.sin,o=Math.PI;Object.defineProperty(t,'__esModule',{value:!0}),t.degToRad=function(e){return e*(o/180)},t.radToDeg=function(e){return e*(180/o)},t.clamp=function(e,t,a){return Math.max(Math.min(e,a),t)},t.lerp=function(e,t,a){return e+(t-e)*a},t.barycoordFromPoint=function(e,t,a,i){const r=n.vec3.create(),o=n.vec3.create(),s=n.vec3.create();n.vec3.sub(r,i,t),n.vec3.sub(o,a,t),n.vec3.sub(s,e,t);const l=n.vec3.dot(r,r),c=n.vec3.dot(r,o),m=n.vec3.dot(r,s),x=n.vec3.dot(o,o),f=n.vec3.dot(o,s),p=l*x-c*c,g=new d.a;if(0==p)return g.set(-2,-1,-1);const h=1/p,E=(x*m-c*f)*h,u=(l*f-c*m)*h;return g.set(1-E-u,u,E)},t.randomSpherePoint=function(e,t,a,n){const s=Math.random(),l=Math.random(),d=2*o*s,u=Math.acos(2*l-1),c=e+n*r(u)*i(d),m=t+n*r(u)*r(d),x=a+n*i(u);return[c,m,x]},t.from3DTo2D=function(e,t){const a=e.x,i=e.y,r=e.z,o=t[0]*a+t[4]*i+t[8]*r+t[12],n=t[1]*a+t[5]*i+t[9]*r+t[13],s=t[3]*a+t[7]*i+t[11]*r+t[15],d=new l.a;return d.x=(o/s+1)/2,d.y=1-(n/s+1)/2,d},t.lookAt=function(e,t,a){const i=n.quat.create(),r=n.vec3.create(),o=n.vec3.create(),s=n.vec3.create();return n.vec3.sub(s,e,t),0===n.vec3.squaredLength(s)&&(s[2]=1),n.vec3.normalize(s,s),n.vec3.cross(r,a,s),0===n.vec3.squaredLength(r)&&(s[2]+=1e-4,n.vec3.cross(r,a,s)),n.vec3.normalize(r,r),n.vec3.cross(o,s,r),n.quat.setAxes(i,s,r,o),n.quat.invert(i,i),i};var n=a(1),s=a.n(n),l=a(15),d=a(2)},function(e,t,a){'use strict';var i=a(1),r=a.n(i);class o{constructor(e=16777215){return this.v=i.vec3.create(),this.convert(e),this}set r(e){this.v[0]=e}get r(){return this.v[0]}set g(e){this.v[1]=e}get g(){return this.v[1]}set b(e){this.v[2]=e}get b(){return this.v[2]}set(e,t,a){return i.vec3.set(this.v,e,t,a),this}copy(e){return i.vec3.copy(this.v,i.vec3.fromValues(e[0],e[1],e[2])),this}convert(e){let t;return'number'==typeof e&&(t=this.hexIntToRgb(e)),'string'==typeof e&&(t=this.hexStringToRgb(e)),i.vec3.copy(this.v,this.normalize(t)),this}normalize(e){return i.vec3.fromValues(e[0]/255,e[1]/255,e[2]/255)}fromArray(e){this.set(e[0],e[1],e[2])}componentToHex(e){const t=e.toString(16);return 1===t.length?`0${t}`:t}rgbToHex(e,t,a){const i=this.componentToHex(e),r=this.componentToHex(t),o=this.componentToHex(a);return`#${i}${r}${o}`}hexIntToRgb(e){return i.vec3.fromValues(e>>16,255&e>>8,255&e)}hexStringToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?i.vec3.fromValues(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):null}}t.a=o},function(e,t){'use strict';const a=function(){return window.console&&console.log?Function.prototype.bind.call(console.log,console):function(){}}();t.a=a;const i=function(){return window.console&&console.clear?Function.prototype.bind.call(console.clear,console):function(){}}(),r=function(){return window.console&&console.debug?Function.prototype.bind.call(console.debug,console):function(){}}(),o=function(){return window.console&&console.info?Function.prototype.bind.call(console.info,console):function(){}}(),n=function(){return window.console&&console.warn?Function.prototype.bind.call(console.warn,console):function(){}}();t.b=n;(function(){return window.console&&console.error?Function.prototype.bind.call(console.error,console):function(){}})()},function(e){(function(t,a){e.exports=a()})(this,function(){'use strict';function e(t){var a=this instanceof e;if(t){if(!a)for(var i in e.prototype)t[i]=e.prototype[i];else throw new Error('You can\'t pass a target when instantiating with the `new` keyword');}else if(!a)return new e}function t(e){if(!(e&&e instanceof Function))throw new Error(e+' is not a Function')}return e.prototype.__init=function(e){var t=this.__listeners||(this.__listeners=[]);return t[e]||(t[e]=[])},e.prototype.on=function(e,a){t(a),this.__init(e).push(a)},e.prototype.off=function(e,t){var a=this.__init(e);a.splice(a.indexOf(t),1)},e.prototype.once=function(e,a){t(a);var i=this,r=function(){i.off(e,r),a.apply(this,arguments)};this.on(e,r)},e.prototype.emit=function(e){var t=this.__init(e).slice(0),a;for(a in t)t[a].apply(this,[].slice.call(arguments,1))},e})},function(e,t,a){'use strict';var i=a(1),r=a.n(i);class o{constructor(e=0,t=0){return this.v=i.vec2.create(),this.set(e,t),this}set x(e){this.v[0]=e}get x(){return this.v[0]}set y(e){this.v[1]=e}get y(){return this.v[1]}set(e,t){return i.vec2.set(this.v,e,t),this}clone(){return new o(this.v[0],this.v[1])}copy(e){return i.vec2.copy(this.v,e.v),this}add(e){return i.vec2.add(this.v,this.v,e.v),this}subtract(e){return i.vec2.subtract(this.v,this.v,e.v),this}subtractVectors(e,t){const a=i.vec2.create();return i.vec2.subtract(a,e.v,t.v),a}scale(e){return i.vec2.scale(this.v,this.v,e),this}distance(e){return i.vec2.distance(this.v,e.v)}length(){return i.vec2.length(this.v)}negate(){return i.vec2.negate(this.v,this.v),this}normalize(){return i.vec2.normalize(this.v,this.v),this}lerp(e,t){return i.vec2.lerp(this.v,this.v,e.v,t),this}equals(e){return i.vec2.equals(this.v,e.v)}}t.a=o},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.setup=function(){const e=new Float32Array([...i.mat4.create(),...i.mat4.create()]);n.projectionView=new o.a(e)},t.updateProjectionView=function(e,t,a){e.bindBufferBase(e.UNIFORM_BUFFER,0,n.projectionView.buffer),e.bindBuffer(e.UNIFORM_BUFFER,n.projectionView.buffer),s=[...t,...a],n.projectionView.data.set(s,0),e.bufferSubData(e.UNIFORM_BUFFER,0,n.projectionView.data),e.bindBuffer(e.UNIFORM_BUFFER,null)};var i=a(1),r=a.n(i),o=a(17);const n={};let s;t['default']=n},function(e,t,a){'use strict';var i=a(0);t.a=class{constructor(e){this.data=e,this.buffer=i.createUniformBuffer(e)}setValues(e,t=0){this.data.set(e,t)}}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),a.d(t,'ambientLightEs300',function(){return i}),a.d(t,'ambientLightEs100',function(){return r});const i=`
	uniform AmbientLight {
		vec4 color;
		vec4 intensity;
	} uAmbientLight;
`,r=`
	struct AmbientLight {
		vec3 color;
		float intensity;
	};
	uniform AmbientLight uAmbientLight;
`},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),a.d(t,'lambertEs300',function(){return i}),a.d(t,'lambertEs100',function(){return r});const i=`
	vec3 CalculateDirectionalLight(DirectionalLight light, vec3 normal) {
		vec3 lightDirection = normalize(light.position.xyz);
		// diffuse shading
		float diff = max(dot(lightDirection, normal), 0.0);

		vec3 ambientColor = vec3(0.5);
		float ambientIntensity = 0.5;

		#ifdef ambientLight
		ambientColor = uAmbientLight.color.rgb;
		ambientIntensity = uAmbientLight.intensity.x;
		#endif

		// combine results
		vec3 ambient = (ambientColor * ambientIntensity) * vDiffuse;
		vec3 diffuse = light.color.rgb * diff * vDiffuse;
		return (ambient + diffuse * light.intensity.x);
	}
`,r=`
	vec3 CalculateDirectionalLight(DirectionalLight light, vec3 normal) {
		vec3 lightDirection = normalize(light.position);
		// diffuse shading
		float diff = max(dot(lightDirection, normal), 0.0);

			vec3 ambientColor = vec3(0.5);
			float ambientIntensity = 0.5;

			#ifdef ambientLight
			ambientColor = uAmbientLight.color;
			ambientIntensity = uAmbientLight.intensity;
			#endif

			// combine results
		vec3 ambient = (ambientColor * ambientIntensity) * vDiffuse;
			vec3 diffuse = light.color * diff * vDiffuse;
		return (ambient + diffuse * light.intensity);
	}
`},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),a.d(t,'directionalLightsEs300',function(){return i}),a.d(t,'directionalLightsEs100',function(){return r});const i=`
	struct DirectionalLight {
		vec4 position;
		vec4 color;
		vec4 intensity;
	};
	uniform DirectionalLights {
		DirectionalLight uDirectionalLights[#HOOK_DIRECTIONAL_LIGHTS];
	};
`,r=`
	struct DirectionalLight {
		vec3 position;
		vec3 color;
		float intensity;
	};
	uniform DirectionalLight uDirectionalLights[#HOOK_DIRECTIONAL_LIGHTS];
`},function(e,t){'use strict';t.a=function(e){return new Promise((t,a)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=()=>{a(`Failed to load ${e}`)},i.src=e})}},function(e,t,a){'use strict';t.a=function(e){return new Promise((t,a)=>{const i=new XMLHttpRequest;i.responseType='arraybuffer',i.onreadystatechange=()=>{if(4===i.readyState)if(4===i.readyState&&200===i.status){const e=r.a(i.response),a=new o.a(e.shape[0],e.shape[1],e.data);t(a)}else a(i.status)},i.open('GET',e,!0),i.send()})};var i=a(62),r=a.n(i),o=a(23)},function(e,t){'use strict';t.a=class{constructor(e,t,a){this.width=e,this.height=t,this.data=a}}},function(e,t){'use strict';t.a=class{update(){}setValues(e,t=0){this.data.set(e,t)}}},function(e,t){'use strict';t.a=function(e){return new Promise((t,a)=>{const i=new XMLHttpRequest;i.onreadystatechange=()=>{4!==i.readyState||(4===i.readyState&&200===i.status?t(i.responseText,i.status):a('error',i.status))},i.open('GET',e,!0),i.send()})}},function(e,t,a){'use strict';var i=a(1),r=a.n(i),o=a(2),n=a(11);let s=0;const l=i.vec3.create();t.a=class{constructor(){this.children=[],this.localMatrix=i.mat4.create(),this.modelMatrix=i.mat4.create(),this.position=new o.a,this.rotation=new o.a,this.scale=new o.a(1,1,1),this.isObject3D=!0,this._quaternion=i.quat.create(),this._quaternionLookAt=i.quat.create(),this._lookAtUp=i.vec3.create()}updateMatrix(){i.mat4.identity(this.localMatrix),i.mat4.identity(this.modelMatrix),i.quat.identity(this._quaternion),this.parent&&(i.mat4.copy(this.localMatrix,this.parent.modelMatrix),i.mat4.multiply(this.modelMatrix,this.modelMatrix,this.localMatrix)),i.quat.copy(this._quaternion,this._quaternionLookAt),i.mat4.translate(this.modelMatrix,this.modelMatrix,this.position.v),i.quat.rotateX(this._quaternion,this._quaternion,this.rotation.x),i.quat.rotateY(this._quaternion,this._quaternion,this.rotation.y),i.quat.rotateZ(this._quaternion,this._quaternion,this.rotation.z),s=i.quat.getAxisAngle(l,this._quaternion),i.mat4.rotate(this.modelMatrix,this.modelMatrix,s,l),i.mat4.scale(this.modelMatrix,this.modelMatrix,this.scale.v)}lookAt(e){i.quat.identity(this._quaternionLookAt),this._quaternionLookAt=n.lookAt(this.position.v,e.v,this._lookAtUp)}setParent(e){this.unParent(),e.isObject3D&&(e.children.push(this),this.parent=e)}unParent(){if(void 0!==this.parent){const e=this.parent.children.indexOf(this);-1!==e&&(this.parent.children.splice(e,1),this.parent=null)}}dispose(){this.unParent(),this.children=[],this.localMatrix=null,this.modelMatrix=null,this.position=null,this.rotation=null,this.scale=null,this._quaternion=null,this.isObject3D=null}}},function(e,t,a){var i=Math.pow,r=Math.cos,o=Math.sin,n=Math.max,s=Math.abs,l=a(7),d={};d.create=function(){var e=new l.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},d.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},d.clone=function(e){var t=new l.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},d.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},d.fromValues=function(e,t,a,i,r,o,n,s,d){var u=new l.ARRAY_TYPE(9);return u[0]=e,u[1]=t,u[2]=a,u[3]=i,u[4]=r,u[5]=o,u[6]=n,u[7]=s,u[8]=d,u},d.set=function(e,t,a,i,r,o,n,s,l,d){return e[0]=t,e[1]=a,e[2]=i,e[3]=r,e[4]=o,e[5]=n,e[6]=s,e[7]=l,e[8]=d,e},d.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},d.transpose=function(e,t){if(e===t){var a=t[1],i=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=a,e[5]=t[7],e[6]=i,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},d.invert=function(e,t){var a=t[0],i=t[1],r=t[2],o=t[3],n=t[4],s=t[5],l=t[6],d=t[7],u=t[8],c=u*n-s*d,m=-u*o+s*l,x=d*o-n*l,f=a*c+i*m+r*x;return f?(f=1/f,e[0]=c*f,e[1]=(-u*i+r*d)*f,e[2]=(s*i-r*n)*f,e[3]=m*f,e[4]=(u*a-r*l)*f,e[5]=(-s*a+r*o)*f,e[6]=x*f,e[7]=(-d*a+i*l)*f,e[8]=(n*a-i*o)*f,e):null},d.adjoint=function(e,t){var a=t[0],i=t[1],r=t[2],o=t[3],n=t[4],s=t[5],l=t[6],d=t[7],u=t[8];return e[0]=n*u-s*d,e[1]=r*d-i*u,e[2]=i*s-r*n,e[3]=s*l-o*u,e[4]=a*u-r*l,e[5]=r*o-a*s,e[6]=o*d-n*l,e[7]=i*l-a*d,e[8]=a*n-i*o,e},d.determinant=function(e){var t=e[0],a=e[1],i=e[2],r=e[3],o=e[4],n=e[5],s=e[6],l=e[7],d=e[8];return t*(d*o-n*l)+a*(-d*r+n*s)+i*(l*r-o*s)},d.multiply=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=t[3],s=t[4],l=t[5],d=t[6],u=t[7],c=t[8],m=a[0],x=a[1],f=a[2],p=a[3],g=a[4],h=a[5],E=a[6],v=a[7],_=a[8];return e[0]=m*i+x*n+f*d,e[1]=m*r+x*s+f*u,e[2]=m*o+x*l+f*c,e[3]=p*i+g*n+h*d,e[4]=p*r+g*s+h*u,e[5]=p*o+g*l+h*c,e[6]=E*i+v*n+_*d,e[7]=E*r+v*s+_*u,e[8]=E*o+v*l+_*c,e},d.mul=d.multiply,d.translate=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=t[3],s=t[4],l=t[5],d=t[6],u=t[7],c=t[8],m=a[0],x=a[1];return e[0]=i,e[1]=r,e[2]=o,e[3]=n,e[4]=s,e[5]=l,e[6]=m*i+x*n+d,e[7]=m*r+x*s+u,e[8]=m*o+x*l+c,e},d.rotate=function(e,t,a){var i=t[0],n=t[1],l=t[2],d=t[3],u=t[4],m=t[5],x=t[6],f=t[7],p=t[8],g=o(a),s=r(a);return e[0]=s*i+g*d,e[1]=s*n+g*u,e[2]=s*l+g*m,e[3]=s*d-g*i,e[4]=s*u-g*n,e[5]=s*m-g*l,e[6]=x,e[7]=f,e[8]=p,e},d.scale=function(e,t,a){var i=a[0],r=a[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},d.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},d.fromRotation=function(e,t){var a=o(t),i=r(t);return e[0]=i,e[1]=a,e[2]=0,e[3]=-a,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},d.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},d.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},d.fromQuat=function(e,t){var a=t[0],i=t[1],r=t[2],o=t[3],n=a+a,s=i+i,l=r+r,d=a*n,u=i*n,c=i*s,m=r*n,x=r*s,f=r*l,p=o*n,g=o*s,h=o*l;return e[0]=1-c-f,e[3]=u-h,e[6]=m+g,e[1]=u+h,e[4]=1-d-f,e[7]=x-p,e[2]=m-g,e[5]=x+p,e[8]=1-d-c,e},d.normalFromMat4=function(e,t){var a=t[0],i=t[1],r=t[2],o=t[3],n=t[4],s=t[5],l=t[6],d=t[7],u=t[8],c=t[9],m=t[10],x=t[11],f=t[12],p=t[13],g=t[14],h=t[15],E=a*s-i*n,v=a*l-r*n,_=a*d-o*n,b=i*l-r*s,y=i*d-o*s,T=r*d-o*l,F=u*p-c*f,R=u*g-m*f,A=u*h-x*f,I=c*g-m*p,L=c*h-x*p,S=m*h-x*g,w=E*S-v*L+_*I+b*A-y*R+T*F;return w?(w=1/w,e[0]=(s*S-l*L+d*I)*w,e[1]=(l*A-n*S-d*R)*w,e[2]=(n*L-s*A+d*F)*w,e[3]=(r*L-i*S-o*I)*w,e[4]=(a*S-r*A+o*R)*w,e[5]=(i*A-a*L-o*F)*w,e[6]=(p*T-g*y+h*b)*w,e[7]=(g*_-f*T-h*v)*w,e[8]=(f*y-p*_+h*E)*w,e):null},d.str=function(e){return'mat3('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+', '+e[4]+', '+e[5]+', '+e[6]+', '+e[7]+', '+e[8]+')'},d.frob=function(e){return Math.sqrt(i(e[0],2)+i(e[1],2)+i(e[2],2)+i(e[3],2)+i(e[4],2)+i(e[5],2)+i(e[6],2)+i(e[7],2)+i(e[8],2))},d.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e[8]=t[8]+a[8],e},d.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e[6]=t[6]-a[6],e[7]=t[7]-a[7],e[8]=t[8]-a[8],e},d.sub=d.subtract,d.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*a,e},d.multiplyScalarAndAdd=function(e,t,a,i){return e[0]=t[0]+a[0]*i,e[1]=t[1]+a[1]*i,e[2]=t[2]+a[2]*i,e[3]=t[3]+a[3]*i,e[4]=t[4]+a[4]*i,e[5]=t[5]+a[5]*i,e[6]=t[6]+a[6]*i,e[7]=t[7]+a[7]*i,e[8]=t[8]+a[8]*i,e},d.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},d.equals=function(e,t){var a=e[0],i=e[1],r=e[2],o=e[3],d=e[4],u=e[5],c=e[6],m=e[7],x=e[8],f=t[0],p=t[1],g=t[2],h=t[3],E=t[4],v=t[5],_=e[6],b=t[7],y=t[8];return s(a-f)<=l.EPSILON*n(1,s(a),s(f))&&s(i-p)<=l.EPSILON*n(1,s(i),s(p))&&s(r-g)<=l.EPSILON*n(1,s(r),s(g))&&s(o-h)<=l.EPSILON*n(1,s(o),s(h))&&s(d-E)<=l.EPSILON*n(1,s(d),s(E))&&s(u-v)<=l.EPSILON*n(1,s(u),s(v))&&s(c-_)<=l.EPSILON*n(1,s(c),s(_))&&s(m-b)<=l.EPSILON*n(1,s(m),s(b))&&s(x-y)<=l.EPSILON*n(1,s(x),s(y))},e.exports=d},function(e,t,a){var i=Math.round,r=Math.floor,o=Math.ceil,n=Math.sqrt,s=Math.cos,l=Math.sin,d=Math.min,u=Math.max,c=Math.abs,m=a(7),x={};x.create=function(){var e=new m.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},x.clone=function(e){var t=new m.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},x.fromValues=function(e,t,a){var i=new m.ARRAY_TYPE(3);return i[0]=e,i[1]=t,i[2]=a,i},x.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},x.set=function(e,t,a,i){return e[0]=t,e[1]=a,e[2]=i,e},x.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e},x.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e},x.sub=x.subtract,x.multiply=function(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e},x.mul=x.multiply,x.divide=function(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],e},x.div=x.divide,x.ceil=function(e,t){return e[0]=o(t[0]),e[1]=o(t[1]),e[2]=o(t[2]),e},x.floor=function(e,t){return e[0]=r(t[0]),e[1]=r(t[1]),e[2]=r(t[2]),e},x.min=function(e,t,a){return e[0]=d(t[0],a[0]),e[1]=d(t[1],a[1]),e[2]=d(t[2],a[2]),e},x.max=function(e,t,a){return e[0]=u(t[0],a[0]),e[1]=u(t[1],a[1]),e[2]=u(t[2],a[2]),e},x.round=function(e,t){return e[0]=i(t[0]),e[1]=i(t[1]),e[2]=i(t[2]),e},x.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e},x.scaleAndAdd=function(e,t,a,i){return e[0]=t[0]+a[0]*i,e[1]=t[1]+a[1]*i,e[2]=t[2]+a[2]*i,e},x.distance=function(e,t){var a=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2];return n(a*a+i*i+r*r)},x.dist=x.distance,x.squaredDistance=function(e,t){var a=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2];return a*a+i*i+r*r},x.sqrDist=x.squaredDistance,x.length=function(e){var t=e[0],a=e[1],i=e[2];return n(t*t+a*a+i*i)},x.len=x.length,x.squaredLength=function(e){var t=e[0],a=e[1],i=e[2];return t*t+a*a+i*i},x.sqrLen=x.squaredLength,x.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},x.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},x.normalize=function(e,t){var a=t[0],i=t[1],r=t[2],o=a*a+i*i+r*r;return 0<o&&(o=1/n(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},x.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},x.cross=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=a[0],s=a[1],l=a[2];return e[0]=r*l-o*s,e[1]=o*n-i*l,e[2]=i*s-r*n,e},x.lerp=function(e,i,a,r){var t=i[0],o=i[1],n=i[2];return e[0]=t+r*(a[0]-t),e[1]=o+r*(a[1]-o),e[2]=n+r*(a[2]-n),e},x.hermite=function(e,i,a,r,o,n){var t=n*n,s=t*(2*n-3)+1,l=t*(n-2)+n,d=t*(n-1),u=t*(3-2*n);return e[0]=i[0]*s+a[0]*l+r[0]*d+o[0]*u,e[1]=i[1]*s+a[1]*l+r[1]*d+o[1]*u,e[2]=i[2]*s+a[2]*l+r[2]*d+o[2]*u,e},x.bezier=function(e,i,a,r,o,n){var t=1-n,s=t*t,l=n*n,d=s*t,u=3*n*s,c=3*l*t,m=l*n;return e[0]=i[0]*d+a[0]*u+r[0]*c+o[0]*m,e[1]=i[1]*d+a[1]*u+r[1]*c+o[1]*m,e[2]=i[2]*d+a[2]*u+r[2]*c+o[2]*m,e},x.random=function(e,t){t=t||1;var a=2*m.RANDOM()*Math.PI,i=2*m.RANDOM()-1,r=n(1-i*i)*t;return e[0]=s(a)*r,e[1]=l(a)*r,e[2]=i*t,e},x.transformMat4=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=a[3]*i+a[7]*r+a[11]*o+a[15];return n=n||1,e[0]=(a[0]*i+a[4]*r+a[8]*o+a[12])/n,e[1]=(a[1]*i+a[5]*r+a[9]*o+a[13])/n,e[2]=(a[2]*i+a[6]*r+a[10]*o+a[14])/n,e},x.transformMat3=function(e,t,a){var i=t[0],r=t[1],o=t[2];return e[0]=i*a[0]+r*a[3]+o*a[6],e[1]=i*a[1]+r*a[4]+o*a[7],e[2]=i*a[2]+r*a[5]+o*a[8],e},x.transformQuat=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=a[0],s=a[1],l=a[2],d=a[3],u=d*i+s*o-l*r,c=d*r+l*i-n*o,m=d*o+n*r-s*i,x=-n*i-s*r-l*o;return e[0]=u*d+x*-n+c*-l-m*-s,e[1]=c*d+x*-s+m*-n-u*-l,e[2]=m*d+x*-l+u*-s-c*-n,e},x.rotateX=function(e,t,a,i){var o=[],n=[];return o[0]=t[0]-a[0],o[1]=t[1]-a[1],o[2]=t[2]-a[2],n[0]=o[0],n[1]=o[1]*s(i)-o[2]*l(i),n[2]=o[1]*l(i)+o[2]*s(i),e[0]=n[0]+a[0],e[1]=n[1]+a[1],e[2]=n[2]+a[2],e},x.rotateY=function(e,t,a,i){var o=[],n=[];return o[0]=t[0]-a[0],o[1]=t[1]-a[1],o[2]=t[2]-a[2],n[0]=o[2]*l(i)+o[0]*s(i),n[1]=o[1],n[2]=o[2]*s(i)-o[0]*l(i),e[0]=n[0]+a[0],e[1]=n[1]+a[1],e[2]=n[2]+a[2],e},x.rotateZ=function(e,t,a,i){var o=[],n=[];return o[0]=t[0]-a[0],o[1]=t[1]-a[1],o[2]=t[2]-a[2],n[0]=o[0]*s(i)-o[1]*l(i),n[1]=o[0]*l(i)+o[1]*s(i),n[2]=o[2],e[0]=n[0]+a[0],e[1]=n[1]+a[1],e[2]=n[2]+a[2],e},x.forEach=function(){var e=x.create();return function(t,a,r,o,n,s){var u,i;for(a||(a=3),r||(r=0),i=o?d(o*a+r,t.length):t.length,u=r;u<i;u+=a)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],n(e,e,s),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}(),x.angle=function(e,t){var a=x.fromValues(e[0],e[1],e[2]),i=x.fromValues(t[0],t[1],t[2]);x.normalize(a,a),x.normalize(i,i);var r=x.dot(a,i);return 1<r?0:Math.acos(r)},x.str=function(e){return'vec3('+e[0]+', '+e[1]+', '+e[2]+')'},x.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},x.equals=function(e,t){var a=e[0],i=e[1],r=e[2],o=t[0],n=t[1],s=t[2];return c(a-o)<=m.EPSILON*u(1,c(a),c(o))&&c(i-n)<=m.EPSILON*u(1,c(i),c(n))&&c(r-s)<=m.EPSILON*u(1,c(r),c(s))},e.exports=x},function(e,t,a){var i=Math.round,r=Math.floor,o=Math.ceil,n=Math.sqrt,s=Math.min,l=Math.max,d=Math.abs,u=a(7),c={};c.create=function(){var e=new u.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},c.clone=function(e){var t=new u.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},c.fromValues=function(e,t,a,i){var r=new u.ARRAY_TYPE(4);return r[0]=e,r[1]=t,r[2]=a,r[3]=i,r},c.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},c.set=function(e,t,a,i,r){return e[0]=t,e[1]=a,e[2]=i,e[3]=r,e},c.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e},c.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e},c.sub=c.subtract,c.multiply=function(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e[3]=t[3]*a[3],e},c.mul=c.multiply,c.divide=function(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],e[3]=t[3]/a[3],e},c.div=c.divide,c.ceil=function(e,t){return e[0]=o(t[0]),e[1]=o(t[1]),e[2]=o(t[2]),e[3]=o(t[3]),e},c.floor=function(e,t){return e[0]=r(t[0]),e[1]=r(t[1]),e[2]=r(t[2]),e[3]=r(t[3]),e},c.min=function(e,t,a){return e[0]=s(t[0],a[0]),e[1]=s(t[1],a[1]),e[2]=s(t[2],a[2]),e[3]=s(t[3],a[3]),e},c.max=function(e,t,a){return e[0]=l(t[0],a[0]),e[1]=l(t[1],a[1]),e[2]=l(t[2],a[2]),e[3]=l(t[3],a[3]),e},c.round=function(e,t){return e[0]=i(t[0]),e[1]=i(t[1]),e[2]=i(t[2]),e[3]=i(t[3]),e},c.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e},c.scaleAndAdd=function(e,t,a,i){return e[0]=t[0]+a[0]*i,e[1]=t[1]+a[1]*i,e[2]=t[2]+a[2]*i,e[3]=t[3]+a[3]*i,e},c.distance=function(e,t){var a=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2],o=t[3]-e[3];return n(a*a+i*i+r*r+o*o)},c.dist=c.distance,c.squaredDistance=function(e,t){var a=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2],o=t[3]-e[3];return a*a+i*i+r*r+o*o},c.sqrDist=c.squaredDistance,c.length=function(e){var t=e[0],a=e[1],i=e[2],r=e[3];return n(t*t+a*a+i*i+r*r)},c.len=c.length,c.squaredLength=function(e){var t=e[0],a=e[1],i=e[2],r=e[3];return t*t+a*a+i*i+r*r},c.sqrLen=c.squaredLength,c.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},c.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},c.normalize=function(e,t){var a=t[0],i=t[1],r=t[2],o=t[3],s=a*a+i*i+r*r+o*o;return 0<s&&(s=1/n(s),e[0]=a*s,e[1]=i*s,e[2]=r*s,e[3]=o*s),e},c.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},c.lerp=function(e,i,a,r){var t=i[0],o=i[1],n=i[2],s=i[3];return e[0]=t+r*(a[0]-t),e[1]=o+r*(a[1]-o),e[2]=n+r*(a[2]-n),e[3]=s+r*(a[3]-s),e},c.random=function(e,t){return t=t||1,e[0]=u.RANDOM(),e[1]=u.RANDOM(),e[2]=u.RANDOM(),e[3]=u.RANDOM(),c.normalize(e,e),c.scale(e,e,t),e},c.transformMat4=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=t[3];return e[0]=a[0]*i+a[4]*r+a[8]*o+a[12]*n,e[1]=a[1]*i+a[5]*r+a[9]*o+a[13]*n,e[2]=a[2]*i+a[6]*r+a[10]*o+a[14]*n,e[3]=a[3]*i+a[7]*r+a[11]*o+a[15]*n,e},c.transformQuat=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=a[0],s=a[1],l=a[2],d=a[3],u=d*i+s*o-l*r,c=d*r+l*i-n*o,m=d*o+n*r-s*i,x=-n*i-s*r-l*o;return e[0]=u*d+x*-n+c*-l-m*-s,e[1]=c*d+x*-s+m*-n-u*-l,e[2]=m*d+x*-l+u*-s-c*-n,e[3]=t[3],e},c.forEach=function(){var e=c.create();return function(t,a,r,o,n,d){var u,i;for(a||(a=4),r||(r=0),i=o?s(o*a+r,t.length):t.length,u=r;u<i;u+=a)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],n(e,e,d),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}(),c.str=function(e){return'vec4('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+')'},c.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},c.equals=function(e,t){var a=e[0],i=e[1],r=e[2],o=e[3],n=t[0],s=t[1],c=t[2],m=t[3];return d(a-n)<=u.EPSILON*l(1,d(a),d(n))&&d(i-s)<=u.EPSILON*l(1,d(i),d(s))&&d(r-c)<=u.EPSILON*l(1,d(r),d(c))&&d(o-m)<=u.EPSILON*l(1,d(o),d(m))},e.exports=c},function(e,t,a){'use strict';var i=a(0),r=a(5);let o;t.a=class{constructor(){o=i.get(),o instanceof WebGL2RenderingContext?this.vao=o.createVertexArray():r.extensions.vertexArrayObject&&(this.vao=r.extensions.vertexArrayObject.createVertexArrayOES())}bind(){o instanceof WebGL2RenderingContext?o.bindVertexArray(this.vao):r.extensions.vertexArrayObject&&r.extensions.vertexArrayObject.bindVertexArrayOES(this.vao)}unbind(){o instanceof WebGL2RenderingContext?o.bindVertexArray(null):r.extensions.vertexArrayObject&&r.extensions.vertexArrayObject.bindVertexArrayOES(null)}dispose(){o instanceof WebGL2RenderingContext?o.deleteVertexArray(this.vao):r.extensions.vertexArrayObject&&r.extensions.vertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null}}},function(e,t,a){'use strict';var i=a(2),r=a(1),o=a.n(r);const n=r.vec3.create(),s=r.vec3.create(),l=r.vec3.create(),d=r.vec3.create();t.a=class{constructor(){this.origin=new i.a,this.direction=new i.a}set(e,t){this.origin.copy(e),this.direction.copy(t)}intersectTriangle(e,t,a,o=!0){r.vec3.sub(s,t.v,e.v),r.vec3.sub(l,a.v,e.v),r.vec3.cross(d,s,l);let u=r.vec3.dot(this.direction.v,d),c;if(0<u){if(o)return null;c=1}else if(0>u)c=-1,u=-u;else return null;r.vec3.sub(n,this.origin.v,e.v),r.vec3.cross(l,n,l);const m=c*r.vec3.dot(this.direction.v,l);if(0>m)return null;r.vec3.cross(s,s,n);const x=c*r.vec3.dot(this.direction.v,s);if(0>x)return null;if(m+x>u)return null;const f=-c*r.vec3.dot(n,d);if(0>f)return null;const p=new i.a;return p.copy(this.direction).scale(f/u).add(this.origin),p}}},function(e,t){'use strict';t.a=function(){try{const e=WebGLRenderingContext,t=document.createElement('canvas'),a=document.createElement('canvas'),i=a.getContext('webgl2'),r=t.getContext('webgl')||t.getContext('experimental-webgl');return void 0!==e&&{webgl:!!r,webgl2:!!i}}catch(e){return!1}}},function(e,t){'use strict';const a=`
#define PI 3.141592653589793
`;t.b=a;const i=`
#define TWO_PI 6.283185307179586
`;t.c=i;const r=`
float mapLinear(float value, float in_min, float in_max, float out_min, float out_max) {
	return (value - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
}
`;t.a={definePI:a,definePITwo:i,mapLinear:r}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),a.d(t,'pointLightsEs300',function(){return i}),a.d(t,'pointLightsEs100',function(){return r});const i=`
	struct PointLight {
		vec4 position;
		vec4 color;
		vec4 specularColor;
		vec4 shininess;
		vec4 intensity;
	};
	uniform PointLights {
		PointLight uPointLights[#HOOK_POINT_LIGHTS];
	};
`,r=`
	struct PointLight {
		vec3 position;
		vec3 color;
		vec3 specularColor;
		float shininess;
		float intensity;
	};
	uniform PointLight uPointLights[#HOOK_POINT_LIGHTS];
`},function(e,t,a){'use strict';var i=a(0);let r;t.a=class{constructor(e,t,a,r=!0){this.type=e,this.itemSize=a,this.numItems=t.length/a,this.buffer=i.createBuffer(e,t),this.shaderAttribute=r}bind(){r=i.get(),r.bindBuffer(this.type,this.buffer)}unbind(){r=i.get(),r.bindBuffer(this.type,null)}update(e){this.bind(),r=i.get(),r.bufferSubData(this.type,0,e),this.unbind()}dispose(){r=i.get(),r.deleteBuffer(this.buffer),this.buffer=null}}},function(e,t,a){'use strict';var i=a(6);class r extends i.a{constructor(e){const t=[];let a=0,r=0,o=e.length/3;for(let n=0;n<o;n+=1)a=3*n,r=6*n,n<o-1&&(t[r]=e[a],t[r+1]=e[a+1],t[r+2]=e[a+2],t[r+3]=e[a+3],t[r+4]=e[a+4],t[r+5]=e[a+5]);super(new Float32Array(t))}}t.a=r},function(e,t,a){'use strict';var i=Math.cos,r=Math.sin,o=Math.PI,n=a(6);class s extends n.a{constructor(e=1,t=8,a=8,n){const s=[],l=[],d=[];for(let c=0;c<=t;c+=1){const n=c*o/t,m=r(n),f=i(n);for(let n=0;n<=a;n+=1){const p=2*n*o/a,g=r(p),h=i(p),E=h*m,x=f,_=g*m,b=1-n/a,u=1-c/t;l.push(E),l.push(x),l.push(_),d.push(b),d.push(u),s.push(e*E),s.push(e*x),s.push(e*_)}}const u=[];for(let i=0;i<t;i+=1)for(let e=0;e<a;e+=1){const t=i*(a+1)+e,r=t+a+1;u.push(t),u.push(r),u.push(t+1),u.push(r),u.push(r+1),u.push(t+1)}super(new Float32Array(s),new Uint16Array(u),new Float32Array(l),new Float32Array(d),n)}}t.a=s},function(e,t,a){(function(){'use strict';function i(e,a,i,r,o){'undefined'==typeof o&&(o=0.5);var n=x.projectionratio(o,e),l=1-n,d={x:n*a.x+l*r.x,y:n*a.y+l*r.y},u=x.abcratio(o,e),s={x:i.x+(i.x-d.x)/u,y:i.y+(i.y-d.y)/u};return{A:s,B:i,C:d}}var t=Math.abs,r=Math.min,o=Math.max,n=Math.acos,s=Math.sqrt,l=Math.PI,u={x:0,y:0,z:0},x=a(39),d=a(94),c=function(e){var a=e&&e.forEach?e:[].slice.call(arguments),i=!1;if('object'==typeof a[0]){i=a.length;var r=[];a.forEach(function(e){['x','y','z'].forEach(function(t){'undefined'!=typeof e[t]&&r.push(e[t])})}),a=r}var o=!1,n=a.length;if(i){if(4<i){if(1!==arguments.length)throw new Error('Only new Bezier(point[]) is accepted for 4th and higher order curves');o=!0}}else if(6!==n&&8!==n&&9!==n&&12!==n&&1!==arguments.length)throw new Error('Only new Bezier(point[]) is accepted for 4th and higher order curves');var s=!o&&(9===n||12===n)||e&&e[0]&&'undefined'!=typeof e[0].z;this._3d=s;for(var l=[],d=0,u=s?3:2,c;d<n;d+=u)c={x:a[d],y:a[d+1]},s&&(c.z=a[d+2]),l.push(c);this.order=l.length-1,this.points=l;var m=['x','y'];s&&m.push('z'),this.dims=m,this.dimlen=m.length,function(e){for(var r=e.order,o=e.points,n=x.align(o,{p1:o[0],p2:o[r]}),a=0;a<n.length;a++)if(1e-4<t(n[a].y))return void(e._linear=!1);e._linear=!0}(this),this._t1=0,this._t2=1,this.update()};c.fromSVG=function(e){var t=e.match(/[-+]?\d*\.?\d+(?:[eE][-+]?\d+)?/g).map(parseFloat),a=/[cq]/.test(e);return a?(t=t.map(function(e,a){return 2>a?e:e+t[a%2]}),new c(t)):new c(t)},c.quadraticFromPoints=function(e,a,r,o){if('undefined'==typeof o&&(o=0.5),0===o)return new c(a,a,r);if(1===o)return new c(e,a,a);var n=i(2,e,a,r,o);return new c(e,n.A,r)},c.cubicFromPoints=function(e,a,r,o,n){'undefined'==typeof o&&(o=0.5);var s=i(3,e,a,r,o);'undefined'==typeof n&&(n=x.dist(a,s.C));var l=n*(1-o)/o,d=x.dist(e,r),u=(r.x-e.x)/d,m=(r.y-e.y)/d,f=n*u,p=n*m,g={x:a.x-f,y:a.y-p},h={x:a.x+l*u,y:a.y+l*m},E=s.A,v={x:E.x+(g.x-E.x)/(1-o),y:E.y+(g.y-E.y)/(1-o)},_={x:E.x+(h.x-E.x)/o,y:E.y+(h.y-E.y)/o},b={x:e.x+(v.x-e.x)/o,y:e.y+(v.y-e.y)/o},y={x:r.x+(_.x-r.x)/(1-o),y:r.y+(_.y-r.y)/(1-o)};return new c(e,b,y,r)};var m=function(){return x};c.getUtils=m,c.prototype={getUtils:m,valueOf:function(){return this.toString()},toString:function(){return x.pointsToString(this.points)},toSVG:function(){if(this._3d)return!1;for(var e=this.points,t=e[0].x,a=e[0].y,r=['M',t,a,2===this.order?'Q':'C'],o=1,i=e.length;o<i;o++)r.push(e[o].x),r.push(e[o].y);return r.join(' ')},update:function(){this.dpoints=[];for(var e=this.points,t=e.length,a=t-1,i;1<t;t--,a--){i=[];for(var r=0,o;r<a;r++)o={x:a*(e[r+1].x-e[r].x),y:a*(e[r+1].y-e[r].y)},this._3d&&(o.z=a*(e[r+1].z-e[r].z)),i.push(o);this.dpoints.push(i),e=i}this.computedirection()},computedirection:function(){var e=this.points,t=x.angle(e[0],e[this.order],e[1]);this.clockwise=0<t},length:function(){return x.length(this.derivative.bind(this))},_lut:[],getLUT:function(e){if(e=e||100,this._lut.length===e)return this._lut;this._lut=[];for(var a=0;a<=e;a++)this._lut.push(this.compute(a/e));return this._lut},on:function(e,a){a=a||5;for(var r=this.getLUT(),o=[],n=0,t=0,i;t<r.length;t++)i=r[t],x.dist(i,e)<a&&(o.push(i),n+=t/r.length);return!!o.length&&(n/=o.length)},project:function(e){var a=this.getLUT(),i=a.length-1,r=x.closest(a,e),o=r.mdist,n=r.mpos;if(0===n||n===i){var s=n/i,t=this.compute(s);return t.t=s,t.d=o,t}var l=0.1/i,u,s,c,m;for(o+=1,s=(n-1)/i,u=s;s<(n+1)/i+l;s+=l)c=this.compute(s),m=x.dist(e,c),m<o&&(o=m,u=s);return c=this.compute(u),c.t=u,c.d=o,c},get:function(e){return this.compute(e)},point:function(e){return this.points[e]},compute:function(e){if(0===e)return this.points[0];if(1===e)return this.points[this.order];var t=this.points,r=1-e;if(1===this.order)return c={x:r*t[0].x+e*t[1].x,y:r*t[0].y+e*t[1].y},this._3d&&(c.z=r*t[0].z+e*t[1].z),c;if(4>this.order){var o=r*r,n=e*e,s=0,l,a,d;2===this.order?(t=[t[0],t[1],t[2],u],l=o,a=2*(r*e),d=n):3===this.order&&(l=o*r,a=3*(o*e),d=3*(r*n),s=e*n);var c={x:l*t[0].x+a*t[1].x+d*t[2].x+s*t[3].x,y:l*t[0].y+a*t[1].y+d*t[2].y+s*t[3].y};return this._3d&&(c.z=l*t[0].z+a*t[1].z+d*t[2].z+s*t[3].z),c}for(var m=JSON.parse(JSON.stringify(this.points));1<m.length;){for(var x=0;x<m.length-1;x++)m[x]={x:m[x].x+(m[x+1].x-m[x].x)*e,y:m[x].y+(m[x+1].y-m[x].y)*e},'undefined'!=typeof m[x].z&&(m[x]=m[x].z+(m[x+1].z-m[x].z)*e);m.splice(m.length-1,1)}return m[0]},raise:function(){for(var e=this.points,t=[e[0]],a=e.length,r=1,r,i,o;r<a;r++)i=e[r],o=e[r-1],t[r]={x:(a-r)/a*i.x+r/a*o.x,y:(a-r)/a*i.y+r/a*o.y};return t[a]=e[a-1],new c(t)},derivative:function(e){var t=1-e,i=0,r=this.dpoints[0],o,a;2===this.order&&(r=[r[0],r[1],u],o=t,a=e),3===this.order&&(o=t*t,a=2*(t*e),i=e*e);var n={x:o*r[0].x+a*r[1].x+i*r[2].x,y:o*r[0].y+a*r[1].y+i*r[2].y};return this._3d&&(n.z=o*r[0].z+a*r[1].z+i*r[2].z),n},inflections:function(){return x.inflections(this.points)},normal:function(e){return this._3d?this.__normal3(e):this.__normal2(e)},__normal2:function(e){var t=this.derivative(e),a=s(t.x*t.x+t.y*t.y);return{x:-t.y/a,y:t.x/a}},__normal3:function(e){var t=this.derivative(e),a=this.derivative(e+0.01),i=s(t.x*t.x+t.y*t.y+t.z*t.z),r=s(a.x*a.x+a.y*a.y+a.z*a.z);t.x/=i,t.y/=i,t.z/=i,a.x/=r,a.y/=r,a.z/=r;var o={x:a.y*t.z-a.z*t.y,y:a.z*t.x-a.x*t.z,z:a.x*t.y-a.y*t.x},l=s(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=l,o.y/=l,o.z/=l;var d=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z],u={x:d[0]*t.x+d[1]*t.y+d[2]*t.z,y:d[3]*t.x+d[4]*t.y+d[5]*t.z,z:d[6]*t.x+d[7]*t.y+d[8]*t.z};return u},hull:function(e){var t=this.points,a=[],r=[],o=0,n=0,i=0,s;for(r[o++]=t[0],r[o++]=t[1],r[o++]=t[2],3===this.order&&(r[o++]=t[3]);1<t.length;){for(a=[],n=0,i=t.length-1;n<i;n++)s=x.lerp(e,t[n],t[n+1]),r[o++]=s,a.push(s);t=a}return r},split:function(e,t){if(0===e&&!!t)return this.split(t).left;if(1===t)return this.split(e).right;var a=this.hull(e),i={left:2===this.order?new c([a[0],a[3],a[5]]):new c([a[0],a[4],a[7],a[9]]),right:2===this.order?new c([a[5],a[4],a[2]]):new c([a[9],a[8],a[6],a[3]]),span:a};if(i.left._t1=x.map(0,0,1,this._t1,this._t2),i.left._t2=x.map(e,0,1,this._t1,this._t2),i.right._t1=x.map(e,0,1,this._t1,this._t2),i.right._t2=x.map(1,0,1,this._t1,this._t2),!t)return i;t=x.map(t,e,1,0,1);var r=i.right.split(t);return r.left},extrema:function(){var e=this.dims,t={},a=[],i,r;return e.forEach(function(e){r=function(t){return t[e]},i=this.dpoints[0].map(r),t[e]=x.droots(i),3===this.order&&(i=this.dpoints[1].map(r),t[e]=t[e].concat(x.droots(i))),t[e]=t[e].filter(function(e){return 0<=e&&1>=e}),a=a.concat(t[e].sort())}.bind(this)),a=a.sort().filter(function(e,t){return a.indexOf(e)===t}),t.values=a,t},bbox:function(){var e=this.extrema(),t={};return this.dims.forEach(function(a){t[a]=x.getminmax(this,a,e[a])}.bind(this)),t},overlaps:function(e){var t=this.bbox(),a=e.bbox();return x.bboxoverlap(t,a)},offset:function(e,t){if('undefined'!=typeof t){var a=this.get(e),i=this.normal(e),r={c:a,n:i,x:a.x+i.x*t,y:a.y+i.y*t};return this._3d&&(r.z=a.z+i.z*t),r}if(this._linear){var o=this.normal(0),s=this.points.map(function(t){var a={x:t.x+e*o.x,y:t.y+e*o.y};return t.z&&i.z&&(a.z=t.z+e*o.z),a});return[new c(s)]}var l=this.reduce();return l.map(function(t){return t.scale(e)})},simple:function(){if(3===this.order){var e=x.angle(this.points[0],this.points[3],this.points[1]),a=x.angle(this.points[0],this.points[3],this.points[2]);if(0<e&&0>a||0>e&&0<a)return!1}var i=this.normal(0),r=this.normal(1),o=i.x*r.x+i.y*r.y;this._3d&&(o+=i.z*r.z);var s=t(n(o));return s<l/3},reduce:function(){var e=0,a=0,r=0.01,o=[],n=[],s=this.extrema().values,l,i;for(-1===s.indexOf(0)&&(s=[0].concat(s)),-1===s.indexOf(1)&&s.push(1),(e=s[0],l=1);l<s.length;l++)a=s[l],i=this.split(e,a),i._t1=e,i._t2=a,o.push(i),e=a;return o.forEach(function(o){for(e=0,a=0;1>=a;)for(a=e+r;a<=1+r;a+=r)if(i=o.split(e,a),!i.simple()){if(a-=r,t(e-a)<r)return[];i=o.split(e,a),i._t1=x.map(e,0,1,o._t1,o._t2),i._t2=x.map(a,0,1,o._t1,o._t2),n.push(i),e=a;break}1>e&&(i=o.split(e,1),i._t1=x.map(e,0,1,o._t1,o._t2),i._t2=o._t2,n.push(i))}),n},scale:function(e){var a=this.order,i=!1;if('function'==typeof e&&(i=e),i&&2===a)return this.raise().scale(i);var r=this.clockwise,n=i?i(0):e,l=i?i(1):e,u=[this.offset(0,10),this.offset(1,10)],f=x.lli4(u[0],u[0].c,u[1],u[1].c);if(!f)throw new Error('cannot scale this curve. Try reducing it first.');var g=this.points,h=[];return([0,1].forEach(function(e){var t=h[e*a]=x.copy(g[e*a]);t.x+=(e?l:n)*u[e].n.x,t.y+=(e?l:n)*u[e].n.y}.bind(this)),!i)?([0,1].forEach(function(e){if(2!==this.order||!e){var i=h[e*a],r=this.derivative(e),o={x:i.x+r.x,y:i.y+r.y};h[e+1]=x.lli4(i,o,f,g[e+1])}}.bind(this)),new c(h)):([0,1].forEach(function(o){if(2!==this.order||!o){var n=g[o+1],l={x:n.x-f.x,y:n.y-f.y},d=i?i((o+1)/a):e;i&&!r&&(d=-d);var u=s(l.x*l.x+l.y*l.y);l.x/=u,l.y/=u,h[o+1]={x:n.x+d*l.x,y:n.y+d*l.y}}}.bind(this)),new c(h))},outline:function(e,t,a,i){function r(t,a,e,i,r){return function(o){var n=a-t;return x.map(o,0,1,t+i/e*n,t+(i+r)/e*n)}}t='undefined'==typeof t?e:t;var o=this.reduce(),n=o.length,s=[],l=[],u=0,c=this.length(),m;o.forEach(function(o){b=o.length(),'undefined'!=typeof a&&'undefined'!=typeof i?(s.push(o.scale(r(e,a,c,u,b))),l.push(o.scale(r(-t,-i,c,u,b)))):(s.push(o.scale(e)),l.push(o.scale(-t))),u+=b}),l=l.map(function(e){return m=e.points,e.points=m[3]?[m[3],m[2],m[1],m[0]]:[m[2],m[1],m[0]],e}).reverse();var f=s[0].points[0],p=s[n-1].points[s[n-1].points.length-1],g=l[n-1].points[l[n-1].points.length-1],h=l[0].points[0],E=x.makeline(g,f),v=x.makeline(p,h),_=[E].concat(s).concat([v]).concat(l),b=_.length;return new d(_)},outlineshapes:function(e,t,a){t=t||e;for(var r=this.outline(e,t).curves,o=[],n=1,i=r.length,s;n<i/2;n++)s=x.makeshape(r[n],r[i-n],a),s.startcap.virtual=1<n,s.endcap.virtual=n<i/2-1,o.push(s);return o},intersects:function(e,t){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof c&&(e=e.reduce()),this.curveintersects(this.reduce(),e,t)):this.selfintersects(t)},lineIntersects:function(e){var a=r(e.p1.x,e.p2.x),i=r(e.p1.y,e.p2.y),n=o(e.p1.x,e.p2.x),s=o(e.p1.y,e.p2.y),l=this;return x.roots(this.points,e).filter(function(e){var t=l.get(e);return x.between(t.x,a,n)&&x.between(t.y,i,s)})},selfintersects:function(e){var t=this.reduce(),a=t.length-2,r=[],o,i,n,s;for(o=0;o<a;o++)n=t.slice(o,o+1),s=t.slice(o+2),i=this.curveintersects(n,s,e),r=r.concat(i);return r},curveintersects:function(e,t,a){var i=[];e.forEach(function(e){t.forEach(function(t){e.overlaps(t)&&i.push({left:e,right:t})})});var r=[];return i.forEach(function(e){var t=x.pairiteration(e.left,e.right,a);0<t.length&&(r=r.concat(t))}),r},arcs:function(e){e=e||0.5;return this._iterate(e,[])},_error:function(a,i,r,o){var e=(o-r)/4,n=this.get(r+e),s=this.get(o-e),l=x.dist(a,i),d=x.dist(a,n),u=x.dist(a,s);return t(d-l)+t(u-l)},_iterate:function(t,a){var i=0,r=1,o;do{o=0,r=1;var n=this.get(i),l=!1,d=!1,u=r,c=1,m=0,f,p,g,h,E;do{d=l,h=g,u=(i+r)/2,m++,f=this.get(u),p=this.get(r),g=x.getccenter(n,f,p),g.interval={start:i,end:r};var v=this._error(g,n,i,r);if(l=v<=t,E=d&&!l,E||(c=r),l){if(1<=r){g.interval.end=c=1,h=g;break}r+=(r-i)/2}else r=u}while(!E&&100>o++);if(100<=o)break;h=h?h:g,a.push(h),i=c}while(1>r);return a}},e.exports=c})()},function(e,t,a){var i=Math.sqrt;(function(){'use strict';var r=Math.abs,o=Math.cos,t=Math.sin,n=Math.acos,l=Math.atan2,s=i,u=Math.pow,m=function(e){return 0>e?-u(-e,1/3):u(e,1/3)},d=Math.PI,c=2*d,x=d/2,f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER,g={Tvalues:[-0.06405689286260563,0.06405689286260563,-0.1911188674736163,0.1911188674736163,-0.3150426796961634,0.3150426796961634,-0.4337935076260451,0.4337935076260451,-0.5454214713888396,0.5454214713888396,-0.6480936519369755,0.6480936519369755,-0.7401241915785544,0.7401241915785544,-0.820001985973903,0.820001985973903,-0.8864155270044011,0.8864155270044011,-0.9382745520027328,0.9382745520027328,-0.9747285559713095,0.9747285559713095,-0.9951872199970213,0.9951872199970213],Cvalues:[0.12793819534675216,0.12793819534675216,0.1258374563468283,0.1258374563468283,0.12167047292780339,0.12167047292780339,0.1155056680537256,0.1155056680537256,0.10744427011596563,0.10744427011596563,0.09761865210411388,0.09761865210411388,0.08619016153195327,0.08619016153195327,0.0733464814110803,0.0733464814110803,0.05929858491543678,0.05929858491543678,0.04427743881741981,0.04427743881741981,0.028531388628933663,0.028531388628933663,0.0123412297999872,0.0123412297999872],arcfn:function(e,t){var a=t(e),i=a.x*a.x+a.y*a.y;return'undefined'!=typeof a.z&&(i+=a.z*a.z),s(i)},between:function(e,t,a){return t<=e&&e<=a||g.approximately(e,t)||g.approximately(e,a)},approximately:function(e,t,a){return r(e-t)<=(a||1e-6)},length:function(e){var a=0.5,r=0,o=g.Tvalues.length,n,i;for(n=0;n<o;n++)i=a*g.Tvalues[n]+a,r+=g.Cvalues[n]*g.arcfn(i,e);return a*r},map:function(e,t,a,i,r){return i+(r-i)*((e-t)/(a-t))},lerp:function(e,t,a){var i={x:t.x+e*(a.x-t.x),y:t.y+e*(a.y-t.y)};return!t.z||!a.z||(i.z=t.z+e*(a.z-t.z)),i},pointToString:function(e){var t=e.x+'/'+e.y;return'undefined'!=typeof e.z&&(t+='/'+e.z),t},pointsToString:function(e){return'['+e.map(g.pointToString).join(', ')+']'},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,t,a){var i=t.x-e.x,r=t.y-e.y,o=a.x-e.x,n=a.y-e.y;return l(i*n-r*o,i*o+r*n)},round:function(e,t){var a=''+e,i=a.indexOf('.');return parseFloat(a.substring(0,i+1+t))},dist:function(e,t){var a=e.x-t.x,i=e.y-t.y;return s(a*a+i*i)},closest:function(e,t){var a=u(2,63),i,r;return e.forEach(function(e,o){r=g.dist(t,e),r<a&&(a=r,i=o)}),{mdist:a,mpos:i}},abcratio:function(e,a){if(2!==a&&3!==a)return!1;if('undefined'==typeof e)e=0.5;else if(0===e||1===e)return e;var i=u(e,a)+u(1-e,a);return r((i-1)/i)},projectionratio:function(e,a){if(2!==a&&3!==a)return!1;if('undefined'==typeof e)e=0.5;else if(0===e||1===e)return e;var i=u(1-e,a),r=u(e,a)+i;return i/r},lli8:function(e,t,a,i,r,o,n,s){var l=(e-a)*(o-s)-(t-i)*(r-n);return 0!=l&&{x:((e*i-t*a)*(r-n)-(e-a)*(r*s-o*n))/l,y:((e*i-t*a)*(o-s)-(t-i)*(r*s-o*n))/l}},lli4:function(e,t,a,i){var r=e.x,o=e.y,n=t.x,s=t.y,l=a.x,d=a.y,u=i.x,c=i.y;return g.lli8(r,o,n,s,l,d,u,c)},lli:function(e,t){return g.lli4(e,e.c,t,t.c)},makeline:function(e,t){var i=a(38),r=e.x,o=e.y,n=t.x,s=t.y,l=(n-r)/3,d=(s-o)/3;return new i(r,o,r+l,o+d,r+2*l,o+2*d,n,s)},findbbox:function(e){var t=f,a=f,i=p,r=p;return e.forEach(function(e){var o=e.bbox();t>o.x.min&&(t=o.x.min),a>o.y.min&&(a=o.y.min),i<o.x.max&&(i=o.x.max),r<o.y.max&&(r=o.y.max)}),{x:{min:t,mid:(t+i)/2,max:i,size:i-t},y:{min:a,mid:(a+r)/2,max:r,size:r-a}}},shapeintersections:function(e,t,a,i,r){if(!g.bboxoverlap(t,i))return[];var o=[],n=[e.startcap,e.forward,e.back,e.endcap],s=[a.startcap,a.forward,a.back,a.endcap];return n.forEach(function(t){t.virtual||s.forEach(function(i){if(!i.virtual){var n=t.intersects(i,r);0<n.length&&(n.c1=t,n.c2=i,n.s1=e,n.s2=a,o.push(n))}})}),o},makeshape:function(e,t,a){var i=t.points.length,r=e.points.length,o=g.makeline(t.points[i-1],e.points[0]),n=g.makeline(e.points[r-1],t.points[0]),s={startcap:o,forward:e,back:t,endcap:n,bbox:g.findbbox([o,e,t,n])};return s.intersections=function(e){return g.shapeintersections(s,s.bbox,e,e.bbox,a)},s},getminmax:function(e,a,r){if(!r)return{min:0,max:0};var o=f,n=p,s,t;-1===r.indexOf(0)&&(r=[0].concat(r)),-1===r.indexOf(1)&&r.push(1);for(var l=0,i=r.length;l<i;l++)s=r[l],t=e.get(s),t[a]<o&&(o=t[a]),t[a]>n&&(n=t[a]);return{min:o,mid:(o+n)/2,max:n,size:n-o}},align:function(e,i){var r=i.p1.x,n=i.p1.y,s=-l(i.p2.y-n,i.p2.x-r);return e.map(function(e){return{x:(e.x-r)*o(s)-(e.y-n)*t(s),y:(e.x-r)*t(s)+(e.y-n)*o(s)}})},roots:function(e,i){i=i||{p1:{x:0,y:0},p2:{x:1,y:0}};var l=e.length-1,u=g.align(e,i),x=function(e){return 0<=e&&1>=e};if(2==l){var f=u[0].y,h=u[1].y,E=u[2].y,v=f-2*h+E;if(0!==v){var d=-s(h*h-f*E),_=-f+h,b=-(d+_)/v;return[b,-(-d+_)/v].filter(x)}return h!==E&&0===v?[(2*h-E)/2*(h-E)].filter(x):[]}var y=u[0].y,T=u[1].y,F=u[2].y,R=u[3].y,v=-y+3*T-3*F+R,f=(3*y-6*T+3*F)/v,h=(-3*y+3*T)/v,E=y/v,u=(3*h-f*f)/3,A=u/3,I=(2*f*f*f-9*f*h+27*E)/27,L=I/2,S=L*L+A*A*A,w,b,M,z,N;if(0>S){var P=-u/3,U=s(P*P*P),r=-I/(2*U),t=-1>r?-1:1<r?1:r,D=n(t),O=m(U),B=2*O;return M=B*o(D/3)-f/3,z=B*o((D+c)/3)-f/3,N=B*o((D+2*c)/3)-f/3,[M,z,N].filter(x)}if(0==S)return w=0>L?m(-L):-m(L),M=2*w-f/3,z=-w-f/3,[M,z].filter(x);var C=s(S);return w=m(-L+C),b=m(L+C),[w-b-f/3].filter(x)},droots:function(e){if(3===e.length){var t=e[0],i=e[1],r=e[2],o=t-2*i+r;if(0!==o){var n=-s(i*i-t*r),l=-t+i;return[-(n+l)/o,-(-n+l)/o]}return i!==r&&0===o?[(2*i-r)/(2*(i-r))]:[]}if(2===e.length){var t=e[0],i=e[1];return t===i?[]:[t/(t-i)]}},inflections:function(e){if(4>e.length)return[];var r=g.align(e,{p1:e[0],p2:e.slice(-1)[0]}),o=r[2].x*r[1].y,a=r[3].x*r[1].y,n=r[1].x*r[2].y,s=r[3].x*r[2].y,l=18*(-3*o+2*a+3*n-s),d=18*(3*o-a-3*n),u=18*(n-o);if(g.approximately(l,0)){if(!g.approximately(d,0)){var c=-u/d;if(0<=c&&1>=c)return[c]}return[]}var t=i(d*d-4*l*u),s=2*l;return g.approximately(s,0)?[]:[(t-d)/s,-(d+t)/s].filter(function(e){return 0<=e&&1>=e})},bboxoverlap:function(e,a){var o=['x','y'],n=o.length,s,i,u,l,t;for(s=0;s<n;s++)if(i=o[s],u=e[i].mid,l=a[i].mid,t=(e[i].size+a[i].size)/2,r(u-l)>=t)return!1;return!0},expandbox:function(e,t){t.x.min<e.x.min&&(e.x.min=t.x.min),t.y.min<e.y.min&&(e.y.min=t.y.min),t.z&&t.z.min<e.z.min&&(e.z.min=t.z.min),t.x.max>e.x.max&&(e.x.max=t.x.max),t.y.max>e.y.max&&(e.y.max=t.y.max),t.z&&t.z.max>e.z.max&&(e.z.max=t.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,t,a){var i=e.bbox(),o=t.bbox(),n=1e5,r=a||0.5;if(i.x.size+i.y.size<r&&o.x.size+o.y.size<r)return[(0|n*(e._t1+e._t2)/2)/n+'/'+(0|n*(t._t1+t._t2)/2)/n];var s=e.split(0.5),l=t.split(0.5),d=[{left:s.left,right:l.left},{left:s.left,right:l.right},{left:s.right,right:l.right},{left:s.right,right:l.left}];d=d.filter(function(e){return g.bboxoverlap(e.left.bbox(),e.right.bbox())});var u=[];return 0===d.length?u:(d.forEach(function(e){u=u.concat(g.pairiteration(e.left,e.right,r))}),u=u.filter(function(e,t){return u.indexOf(e)===t}),u)},getccenter:function(a,i,n){var d=i.x-a.x,u=i.y-a.y,f=n.x-i.x,p=n.y-i.y,h=d*o(x)-u*t(x),E=d*t(x)+u*o(x),v=f*o(x)-p*t(x),b=f*t(x)+p*o(x),y=(a.x+i.x)/2,T=(a.y+i.y)/2,F=(i.x+n.x)/2,R=(i.y+n.y)/2,A=g.lli8(y,T,y+h,T+E,F,R,F+v,R+b),I=g.dist(A,a),r=l(a.y-A.y,a.x-A.x),s=l(i.y-A.y,i.x-A.x),m=l(n.y-A.y,n.x-A.x),e;return r<m?((r>s||s>m)&&(r+=c),r>m&&(e=m,m=r,r=e)):m<s&&s<r?(e=m,m=r,r=e):m+=c,A.s=r,A.e=m,A.r=I,A}};e.exports=g})()},function(e,t,a){'use strict';var i=a(96),r=a.n(i);t.a=function(e){const t=new r.a.Mesh(e);return{vertices:new Float32Array(t.vertices),normals:new Float32Array(t.vertexNormals),indices:new Uint16Array(t.indices),uvs:new Float32Array(t.textures)}}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var i=a(5),r=a(3),o=a(0),n=a(8),s=a(26),l=a(47),d=a(48),u=a(49),c=a(50),m=a(52),x=a(53),f=a(9),p=a(61),g=a(63),h=a(64),E=a(65),v=a(17),_=a(16),b=a(30),y=a(66),T=a(35),F=a(6),R=a(36),A=a(68),I=a(37),L=a(69),S=a(70),w=a(71),M=a(72),z=a(73),N=a(74),P=a(75),U=a(76),D=a(77),O=a(12),B=a(2),C=a(15),X=a(31),V=a(11),k=a(78),Y=a(88),G=a(95),j=a(32),q=a(40),H=a(97),W=a(25),Z=a(22),K=a(21),Q=a(98),J=a(99);a.d(t,'Capabilities',function(){return i}),a.d(t,'Constants',function(){return r}),a.d(t,'GL',function(){return o}),a.d(t,'Mesh',function(){return n.a}),a.d(t,'Object3D',function(){return s.a}),a.d(t,'OrthographicCamera',function(){return l.a}),a.d(t,'PerspectiveCamera',function(){return d.a}),a.d(t,'RayCaster',function(){return u.a}),a.d(t,'Renderer',function(){return c.a}),a.d(t,'RenderTarget',function(){return m.a}),a.d(t,'Scene',function(){return x.a}),a.d(t,'Shader',function(){return f.a}),a.d(t,'Texture',function(){return p.a}),a.d(t,'Texture3d',function(){return g.a}),a.d(t,'TextureCube',function(){return h.a}),a.d(t,'TextureVideo',function(){return E.a}),a.d(t,'UniformBuffer',function(){return v.a}),a.d(t,'UniformBuffers',function(){return _}),a.d(t,'Vao',function(){return b.a}),a.d(t,'Clock',function(){return G.a}),a.d(t,'CameraDolly',function(){return Y.a}),a.d(t,'Detect',function(){return j.a}),a.d(t,'ObjParser',function(){return q.a}),a.d(t,'BoxGeometry',function(){return y.a}),a.d(t,'LineGeometry',function(){return R.a}),a.d(t,'BufferAttribute',function(){return T.a}),a.d(t,'Geometry',function(){return F.a}),a.d(t,'PlaneGeometry',function(){return A.a}),a.d(t,'SphereGeometry',function(){return I.a}),a.d(t,'AxisHelper',function(){return L.a}),a.d(t,'CameraHelper',function(){return S.a}),a.d(t,'GridHelper',function(){return w.a}),a.d(t,'NormalsHelper',function(){return M.a}),a.d(t,'VerticesHelper',function(){return z.a}),a.d(t,'Lights',function(){return N.a}),a.d(t,'AmbientLight',function(){return P.a}),a.d(t,'DirectionalLight',function(){return U.a}),a.d(t,'PointLight',function(){return D.a}),a.d(t,'Color',function(){return O.a}),a.d(t,'Vector3',function(){return B.a}),a.d(t,'Vector2',function(){return C.a}),a.d(t,'Ray',function(){return X.a}),a.d(t,'MathUtils',function(){return V}),a.d(t,'ShaderChunks',function(){return k.a}),a.d(t,'OrbitControls',function(){return H.a}),a.d(t,'FileLoader',function(){return W.a}),a.d(t,'HdrLoader',function(){return Z.a}),a.d(t,'ImageLoader',function(){return K.a}),a.d(t,'JsonLoader',function(){return Q.a}),a.d(t,'ObjLoader',function(){return J.a})},function(e,t,a){var i=Math.pow,r=Math.cos,o=Math.sin,n=Math.max,s=Math.abs,l=a(7),d={};d.create=function(){var e=new l.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},d.clone=function(e){var t=new l.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},d.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},d.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},d.fromValues=function(e,t,a,i){var r=new l.ARRAY_TYPE(4);return r[0]=e,r[1]=t,r[2]=a,r[3]=i,r},d.set=function(e,t,a,i,r){return e[0]=t,e[1]=a,e[2]=i,e[3]=r,e},d.transpose=function(e,t){if(e===t){var a=t[1];e[1]=t[2],e[2]=a}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},d.invert=function(e,t){var a=t[0],i=t[1],r=t[2],o=t[3],n=a*o-r*i;return n?(n=1/n,e[0]=o*n,e[1]=-i*n,e[2]=-r*n,e[3]=a*n,e):null},d.adjoint=function(e,t){var a=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=a,e},d.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},d.multiply=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=t[3],s=a[0],l=a[1],d=a[2],u=a[3];return e[0]=i*s+o*l,e[1]=r*s+n*l,e[2]=i*d+o*u,e[3]=r*d+n*u,e},d.mul=d.multiply,d.rotate=function(e,t,a){var i=t[0],n=t[1],l=t[2],d=t[3],u=o(a),m=r(a);return e[0]=i*m+l*u,e[1]=n*m+d*u,e[2]=i*-u+l*m,e[3]=n*-u+d*m,e},d.scale=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=t[3],s=a[0],l=a[1];return e[0]=i*s,e[1]=r*s,e[2]=o*l,e[3]=n*l,e},d.fromRotation=function(e,t){var a=o(t),i=r(t);return e[0]=i,e[1]=a,e[2]=-a,e[3]=i,e},d.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},d.str=function(e){return'mat2('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+')'},d.frob=function(e){return Math.sqrt(i(e[0],2)+i(e[1],2)+i(e[2],2)+i(e[3],2))},d.LDU=function(e,t,i,r){return e[2]=r[2]/r[0],i[0]=r[0],i[1]=r[1],i[3]=r[3]-e[2]*i[1],[e,t,i]},d.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e},d.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e},d.sub=d.subtract,d.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},d.equals=function(e,t){var a=e[0],i=e[1],r=e[2],o=e[3],d=t[0],u=t[1],c=t[2],m=t[3];return s(a-d)<=l.EPSILON*n(1,s(a),s(d))&&s(i-u)<=l.EPSILON*n(1,s(i),s(u))&&s(r-c)<=l.EPSILON*n(1,s(r),s(c))&&s(o-m)<=l.EPSILON*n(1,s(o),s(m))},d.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e},d.multiplyScalarAndAdd=function(e,t,a,i){return e[0]=t[0]+a[0]*i,e[1]=t[1]+a[1]*i,e[2]=t[2]+a[2]*i,e[3]=t[3]+a[3]*i,e},e.exports=d},function(e,t,a){var i=Math.pow,r=Math.cos,o=Math.sin,n=Math.max,s=Math.abs,l=a(7),d={};d.create=function(){var e=new l.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},d.clone=function(e){var t=new l.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},d.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},d.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},d.fromValues=function(e,t,a,i,r,o){var n=new l.ARRAY_TYPE(6);return n[0]=e,n[1]=t,n[2]=a,n[3]=i,n[4]=r,n[5]=o,n},d.set=function(e,t,a,i,r,o,n){return e[0]=t,e[1]=a,e[2]=i,e[3]=r,e[4]=o,e[5]=n,e},d.invert=function(e,t){var a=t[0],i=t[1],r=t[2],o=t[3],n=t[4],s=t[5],l=a*o-i*r;return l?(l=1/l,e[0]=o*l,e[1]=-i*l,e[2]=-r*l,e[3]=a*l,e[4]=(r*s-o*n)*l,e[5]=(i*n-a*s)*l,e):null},d.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},d.multiply=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=t[3],s=t[4],l=t[5],d=a[0],u=a[1],c=a[2],m=a[3],x=a[4],f=a[5];return e[0]=i*d+o*u,e[1]=r*d+n*u,e[2]=i*c+o*m,e[3]=r*c+n*m,e[4]=i*x+o*f+s,e[5]=r*x+n*f+l,e},d.mul=d.multiply,d.rotate=function(e,t,a){var i=t[0],n=t[1],l=t[2],d=t[3],u=t[4],m=t[5],x=o(a),f=r(a);return e[0]=i*f+l*x,e[1]=n*f+d*x,e[2]=i*-x+l*f,e[3]=n*-x+d*f,e[4]=u,e[5]=m,e},d.scale=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=t[3],s=t[4],l=t[5],d=a[0],u=a[1];return e[0]=i*d,e[1]=r*d,e[2]=o*u,e[3]=n*u,e[4]=s,e[5]=l,e},d.translate=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=t[3],s=t[4],l=t[5],d=a[0],u=a[1];return e[0]=i,e[1]=r,e[2]=o,e[3]=n,e[4]=i*d+o*u+s,e[5]=r*d+n*u+l,e},d.fromRotation=function(e,t){var a=o(t),i=r(t);return e[0]=i,e[1]=a,e[2]=-a,e[3]=i,e[4]=0,e[5]=0,e},d.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},d.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},d.str=function(e){return'mat2d('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+', '+e[4]+', '+e[5]+')'},d.frob=function(e){return Math.sqrt(i(e[0],2)+i(e[1],2)+i(e[2],2)+i(e[3],2)+i(e[4],2)+i(e[5],2)+1)},d.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e},d.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e},d.sub=d.subtract,d.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e},d.multiplyScalarAndAdd=function(e,t,a,i){return e[0]=t[0]+a[0]*i,e[1]=t[1]+a[1]*i,e[2]=t[2]+a[2]*i,e[3]=t[3]+a[3]*i,e[4]=t[4]+a[4]*i,e[5]=t[5]+a[5]*i,e},d.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},d.equals=function(e,t){var a=e[0],i=e[1],r=e[2],o=e[3],d=e[4],u=e[5],c=t[0],m=t[1],x=t[2],f=t[3],p=t[4],g=t[5];return s(a-c)<=l.EPSILON*n(1,s(a),s(c))&&s(i-m)<=l.EPSILON*n(1,s(i),s(m))&&s(r-x)<=l.EPSILON*n(1,s(r),s(x))&&s(o-f)<=l.EPSILON*n(1,s(o),s(f))&&s(d-p)<=l.EPSILON*n(1,s(d),s(p))&&s(u-g)<=l.EPSILON*n(1,s(u),s(g))},e.exports=d},function(e,t,a){var i=Math.tan,r=Math.sqrt,o=Math.pow,n=Math.cos,l=Math.sin,s=Math.max,d=Math.abs,u=Math.PI,m=a(7),c={scalar:{},SIMD:{}};c.create=function(){var e=new m.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},c.clone=function(e){var t=new m.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},c.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},c.fromValues=function(e,t,a,i,r,o,n,s,l,d,u,c,x,f,p,g){var h=new m.ARRAY_TYPE(16);return h[0]=e,h[1]=t,h[2]=a,h[3]=i,h[4]=r,h[5]=o,h[6]=n,h[7]=s,h[8]=l,h[9]=d,h[10]=u,h[11]=c,h[12]=x,h[13]=f,h[14]=p,h[15]=g,h},c.set=function(e,t,a,i,r,o,n,s,l,d,u,c,m,x,f,p,g){return e[0]=t,e[1]=a,e[2]=i,e[3]=r,e[4]=o,e[5]=n,e[6]=s,e[7]=l,e[8]=d,e[9]=u,e[10]=c,e[11]=m,e[12]=x,e[13]=f,e[14]=p,e[15]=g,e},c.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},c.scalar.transpose=function(e,t){if(e===t){var a=t[1],i=t[2],r=t[3],o=t[6],n=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=a,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=o,e[11]=t[14],e[12]=r,e[13]=n,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},c.SIMD.transpose=function(e,t){var a,i,r,o,n,s,l,d,u,c;return a=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4),r=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),n=SIMD.Float32x4.shuffle(a,i,0,1,4,5),s=SIMD.Float32x4.shuffle(r,o,0,1,4,5),l=SIMD.Float32x4.shuffle(n,s,0,2,4,6),d=SIMD.Float32x4.shuffle(n,s,1,3,5,7),SIMD.Float32x4.store(e,0,l),SIMD.Float32x4.store(e,4,d),n=SIMD.Float32x4.shuffle(a,i,2,3,6,7),s=SIMD.Float32x4.shuffle(r,o,2,3,6,7),u=SIMD.Float32x4.shuffle(n,s,0,2,4,6),c=SIMD.Float32x4.shuffle(n,s,1,3,5,7),SIMD.Float32x4.store(e,8,u),SIMD.Float32x4.store(e,12,c),e},c.transpose=m.USE_SIMD?c.SIMD.transpose:c.scalar.transpose,c.scalar.invert=function(e,t){var a=t[0],i=t[1],r=t[2],o=t[3],n=t[4],s=t[5],l=t[6],d=t[7],u=t[8],c=t[9],m=t[10],x=t[11],f=t[12],p=t[13],g=t[14],h=t[15],E=a*s-i*n,v=a*l-r*n,_=a*d-o*n,b=i*l-r*s,y=i*d-o*s,T=r*d-o*l,F=u*p-c*f,R=u*g-m*f,A=u*h-x*f,I=c*g-m*p,L=c*h-x*p,S=m*h-x*g,w=E*S-v*L+_*I+b*A-y*R+T*F;return w?(w=1/w,e[0]=(s*S-l*L+d*I)*w,e[1]=(r*L-i*S-o*I)*w,e[2]=(p*T-g*y+h*b)*w,e[3]=(m*y-c*T-x*b)*w,e[4]=(l*A-n*S-d*R)*w,e[5]=(a*S-r*A+o*R)*w,e[6]=(g*_-f*T-h*v)*w,e[7]=(u*T-m*_+x*v)*w,e[8]=(n*L-s*A+d*F)*w,e[9]=(i*A-a*L-o*F)*w,e[10]=(f*y-p*_+h*E)*w,e[11]=(c*_-u*y-x*E)*w,e[12]=(s*R-n*I-l*F)*w,e[13]=(a*I-i*R+r*F)*w,e[14]=(p*v-f*b-g*E)*w,e[15]=(u*b-c*v+m*E)*w,e):null},c.SIMD.invert=function(e,t){var a=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4),r=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),n,s,l,d,u,c,m,x,f,p;return(u=SIMD.Float32x4.shuffle(a,i,0,1,4,5),s=SIMD.Float32x4.shuffle(r,o,0,1,4,5),n=SIMD.Float32x4.shuffle(u,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,u,1,3,5,7),u=SIMD.Float32x4.shuffle(a,i,2,3,6,7),d=SIMD.Float32x4.shuffle(r,o,2,3,6,7),l=SIMD.Float32x4.shuffle(u,d,0,2,4,6),d=SIMD.Float32x4.shuffle(d,u,1,3,5,7),u=SIMD.Float32x4.mul(l,d),u=SIMD.Float32x4.swizzle(u,1,0,3,2),c=SIMD.Float32x4.mul(s,u),m=SIMD.Float32x4.mul(n,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,u),c),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),u=SIMD.Float32x4.mul(s,l),u=SIMD.Float32x4.swizzle(u,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,u),c),f=SIMD.Float32x4.mul(n,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(d,u)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),u=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),d),u=SIMD.Float32x4.swizzle(u,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,u),c),x=SIMD.Float32x4.mul(n,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,u)),x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),x),x=SIMD.Float32x4.swizzle(x,2,3,0,1),u=SIMD.Float32x4.mul(n,s),u=SIMD.Float32x4.swizzle(u,1,0,3,2),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,u),x),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,u),f),u=SIMD.Float32x4.swizzle(u,2,3,0,1),x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,u),x),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,u)),u=SIMD.Float32x4.mul(n,d),u=SIMD.Float32x4.swizzle(u,1,0,3,2),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(l,u)),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,u),x),u=SIMD.Float32x4.swizzle(u,2,3,0,1),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,u),m),x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(s,u)),u=SIMD.Float32x4.mul(n,l),u=SIMD.Float32x4.swizzle(u,1,0,3,2),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,u),m),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,u)),u=SIMD.Float32x4.swizzle(u,2,3,0,1),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(d,u)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,u),f),p=SIMD.Float32x4.mul(n,c),p=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(p,2,3,0,1),p),p=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(p,1,0,3,2),p),u=SIMD.Float32x4.reciprocalApproximation(p),p=SIMD.Float32x4.sub(SIMD.Float32x4.add(u,u),SIMD.Float32x4.mul(p,SIMD.Float32x4.mul(u,u))),p=SIMD.Float32x4.swizzle(p,0,0,0,0),!p)?null:(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(p,c)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(p,m)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(p,x)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(p,f)),e)},c.invert=m.USE_SIMD?c.SIMD.invert:c.scalar.invert,c.scalar.adjoint=function(e,t){var a=t[0],i=t[1],r=t[2],o=t[3],n=t[4],s=t[5],l=t[6],d=t[7],u=t[8],c=t[9],m=t[10],x=t[11],f=t[12],p=t[13],g=t[14],h=t[15];return e[0]=s*(m*h-x*g)-c*(l*h-d*g)+p*(l*x-d*m),e[1]=-(i*(m*h-x*g)-c*(r*h-o*g)+p*(r*x-o*m)),e[2]=i*(l*h-d*g)-s*(r*h-o*g)+p*(r*d-o*l),e[3]=-(i*(l*x-d*m)-s*(r*x-o*m)+c*(r*d-o*l)),e[4]=-(n*(m*h-x*g)-u*(l*h-d*g)+f*(l*x-d*m)),e[5]=a*(m*h-x*g)-u*(r*h-o*g)+f*(r*x-o*m),e[6]=-(a*(l*h-d*g)-n*(r*h-o*g)+f*(r*d-o*l)),e[7]=a*(l*x-d*m)-n*(r*x-o*m)+u*(r*d-o*l),e[8]=n*(c*h-x*p)-u*(s*h-d*p)+f*(s*x-d*c),e[9]=-(a*(c*h-x*p)-u*(i*h-o*p)+f*(i*x-o*c)),e[10]=a*(s*h-d*p)-n*(i*h-o*p)+f*(i*d-o*s),e[11]=-(a*(s*x-d*c)-n*(i*x-o*c)+u*(i*d-o*s)),e[12]=-(n*(c*g-m*p)-u*(s*g-l*p)+f*(s*m-l*c)),e[13]=a*(c*g-m*p)-u*(i*g-r*p)+f*(i*m-r*c),e[14]=-(a*(s*g-l*p)-n*(i*g-r*p)+f*(i*l-r*s)),e[15]=a*(s*m-l*c)-n*(i*m-r*c)+u*(i*l-r*s),e},c.SIMD.adjoint=function(e,t){var a=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4),r=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),a,i,r,o,n,s,l,d,u,c,m,x,f;return u=SIMD.Float32x4.shuffle(a,i,0,1,4,5),s=SIMD.Float32x4.shuffle(r,o,0,1,4,5),n=SIMD.Float32x4.shuffle(u,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,u,1,3,5,7),u=SIMD.Float32x4.shuffle(a,i,2,3,6,7),d=SIMD.Float32x4.shuffle(r,o,2,3,6,7),l=SIMD.Float32x4.shuffle(u,d,0,2,4,6),d=SIMD.Float32x4.shuffle(d,u,1,3,5,7),u=SIMD.Float32x4.mul(l,d),u=SIMD.Float32x4.swizzle(u,1,0,3,2),c=SIMD.Float32x4.mul(s,u),m=SIMD.Float32x4.mul(n,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,u),c),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),u=SIMD.Float32x4.mul(s,l),u=SIMD.Float32x4.swizzle(u,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,u),c),f=SIMD.Float32x4.mul(n,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(d,u)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),u=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),d),u=SIMD.Float32x4.swizzle(u,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,u),c),x=SIMD.Float32x4.mul(n,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,u)),x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),x),x=SIMD.Float32x4.swizzle(x,2,3,0,1),u=SIMD.Float32x4.mul(n,s),u=SIMD.Float32x4.swizzle(u,1,0,3,2),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,u),x),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,u),f),u=SIMD.Float32x4.swizzle(u,2,3,0,1),x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,u),x),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,u)),u=SIMD.Float32x4.mul(n,d),u=SIMD.Float32x4.swizzle(u,1,0,3,2),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(l,u)),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,u),x),u=SIMD.Float32x4.swizzle(u,2,3,0,1),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,u),m),x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(s,u)),u=SIMD.Float32x4.mul(n,l),u=SIMD.Float32x4.swizzle(u,1,0,3,2),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,u),m),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,u)),u=SIMD.Float32x4.swizzle(u,2,3,0,1),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(d,u)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,u),f),SIMD.Float32x4.store(e,0,c),SIMD.Float32x4.store(e,4,m),SIMD.Float32x4.store(e,8,x),SIMD.Float32x4.store(e,12,f),e},c.adjoint=m.USE_SIMD?c.SIMD.adjoint:c.scalar.adjoint,c.determinant=function(e){var t=e[0],a=e[1],i=e[2],r=e[3],o=e[4],n=e[5],s=e[6],l=e[7],d=e[8],u=e[9],c=e[10],m=e[11],x=e[12],f=e[13],p=e[14],g=e[15];return(t*n-a*o)*(c*g-m*p)-(t*s-i*o)*(u*g-m*f)+(t*l-r*o)*(u*p-c*f)+(a*s-i*n)*(d*g-m*x)-(a*l-r*n)*(d*p-c*x)+(i*l-r*s)*(d*f-u*x)},c.SIMD.multiply=function(e,t,a){var i=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),n=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4.load(a,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),n))));SIMD.Float32x4.store(e,0,l);var d=SIMD.Float32x4.load(a,4),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),n))));SIMD.Float32x4.store(e,4,u);var c=SIMD.Float32x4.load(a,8),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),n))));SIMD.Float32x4.store(e,8,m);var x=SIMD.Float32x4.load(a,12),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(x,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(x,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(x,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(x,3,3,3,3),n))));return SIMD.Float32x4.store(e,12,f),e},c.scalar.multiply=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=t[3],s=t[4],l=t[5],d=t[6],u=t[7],c=t[8],m=t[9],x=t[10],f=t[11],p=t[12],g=t[13],h=t[14],E=t[15],v=a[0],_=a[1],b=a[2],y=a[3];return e[0]=v*i+_*s+b*c+y*p,e[1]=v*r+_*l+b*m+y*g,e[2]=v*o+_*d+b*x+y*h,e[3]=v*n+_*u+b*f+y*E,v=a[4],_=a[5],b=a[6],y=a[7],e[4]=v*i+_*s+b*c+y*p,e[5]=v*r+_*l+b*m+y*g,e[6]=v*o+_*d+b*x+y*h,e[7]=v*n+_*u+b*f+y*E,v=a[8],_=a[9],b=a[10],y=a[11],e[8]=v*i+_*s+b*c+y*p,e[9]=v*r+_*l+b*m+y*g,e[10]=v*o+_*d+b*x+y*h,e[11]=v*n+_*u+b*f+y*E,v=a[12],_=a[13],b=a[14],y=a[15],e[12]=v*i+_*s+b*c+y*p,e[13]=v*r+_*l+b*m+y*g,e[14]=v*o+_*d+b*x+y*h,e[15]=v*n+_*u+b*f+y*E,e},c.multiply=m.USE_SIMD?c.SIMD.multiply:c.scalar.multiply,c.mul=c.multiply,c.scalar.translate=function(e,t,a){var i=a[0],r=a[1],o=a[2],n,s,l,d,u,c,m,x,f,p,g,h;return t===e?(e[12]=t[0]*i+t[4]*r+t[8]*o+t[12],e[13]=t[1]*i+t[5]*r+t[9]*o+t[13],e[14]=t[2]*i+t[6]*r+t[10]*o+t[14],e[15]=t[3]*i+t[7]*r+t[11]*o+t[15]):(n=t[0],s=t[1],l=t[2],d=t[3],u=t[4],c=t[5],m=t[6],x=t[7],f=t[8],p=t[9],g=t[10],h=t[11],e[0]=n,e[1]=s,e[2]=l,e[3]=d,e[4]=u,e[5]=c,e[6]=m,e[7]=x,e[8]=f,e[9]=p,e[10]=g,e[11]=h,e[12]=n*i+u*r+f*o+t[12],e[13]=s*i+c*r+p*o+t[13],e[14]=l*i+m*r+g*o+t[14],e[15]=d*i+x*r+h*o+t[15]),e},c.SIMD.translate=function(e,t,a){var i=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),n=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4(a[0],a[1],a[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,0,0,0,0)),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,2,2,2,2));var l=SIMD.Float32x4.add(i,SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,n)));return SIMD.Float32x4.store(e,12,l),e},c.translate=m.USE_SIMD?c.SIMD.translate:c.scalar.translate,c.scalar.scale=function(e,t,a){var i=a[0],r=a[1],o=a[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},c.SIMD.scale=function(e,t,a){var i=SIMD.Float32x4(a[0],a[1],a[2],0),r,o,n;return r=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,0,0,0,0))),o=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,1,1,1,1))),n=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},c.scale=m.USE_SIMD?c.SIMD.scale:c.scalar.scale,c.rotate=function(e,i,a,o){var u=o[0],x=o[1],f=o[2],p=r(u*u+x*x+f*f),g,s,c,t,h,E,v,_,b,y,T,F,R,A,I,L,S,w,M,z,N,P,U,D;return d(p)<m.EPSILON?null:(p=1/p,u*=p,x*=p,f*=p,g=l(a),s=n(a),c=1-s,t=i[0],h=i[1],E=i[2],v=i[3],_=i[4],b=i[5],y=i[6],T=i[7],F=i[8],R=i[9],A=i[10],I=i[11],L=u*u*c+s,S=x*u*c+f*g,w=f*u*c-x*g,M=u*x*c-f*g,z=x*x*c+s,N=f*x*c+u*g,P=u*f*c+x*g,U=x*f*c-u*g,D=f*f*c+s,e[0]=t*L+_*S+F*w,e[1]=h*L+b*S+R*w,e[2]=E*L+y*S+A*w,e[3]=v*L+T*S+I*w,e[4]=t*M+_*z+F*N,e[5]=h*M+b*z+R*N,e[6]=E*M+y*z+A*N,e[7]=v*M+T*z+I*N,e[8]=t*P+_*U+F*D,e[9]=h*P+b*U+R*D,e[10]=E*P+y*U+A*D,e[11]=v*P+T*U+I*D,i!==e&&(e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15]),e)},c.scalar.rotateX=function(e,t,a){var i=l(a),r=n(a),o=t[4],s=t[5],d=t[6],u=t[7],c=t[8],m=t[9],x=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*r+c*i,e[5]=s*r+m*i,e[6]=d*r+x*i,e[7]=u*r+f*i,e[8]=c*r-o*i,e[9]=m*r-s*i,e[10]=x*r-d*i,e[11]=f*r-u*i,e},c.SIMD.rotateX=function(e,t,a){var i=SIMD.Float32x4.splat(l(a)),r=SIMD.Float32x4.splat(n(a));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,4),s=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(s,i))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,r),SIMD.Float32x4.mul(o,i))),e},c.rotateX=m.USE_SIMD?c.SIMD.rotateX:c.scalar.rotateX,c.scalar.rotateY=function(e,t,a){var i=l(a),r=n(a),o=t[0],s=t[1],d=t[2],u=t[3],c=t[8],m=t[9],x=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r-c*i,e[1]=s*r-m*i,e[2]=d*r-x*i,e[3]=u*r-f*i,e[8]=o*i+c*r,e[9]=s*i+m*r,e[10]=d*i+x*r,e[11]=u*i+f*r,e},c.SIMD.rotateY=function(e,t,a){var i=SIMD.Float32x4.splat(l(a)),r=SIMD.Float32x4.splat(n(a));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,0),s=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(s,i))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(s,r))),e},c.rotateY=m.USE_SIMD?c.SIMD.rotateY:c.scalar.rotateY,c.scalar.rotateZ=function(e,t,a){var i=l(a),r=n(a),o=t[0],s=t[1],d=t[2],u=t[3],c=t[4],m=t[5],x=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*r+c*i,e[1]=s*r+m*i,e[2]=d*r+x*i,e[3]=u*r+f*i,e[4]=c*r-o*i,e[5]=m*r-s*i,e[6]=x*r-d*i,e[7]=f*r-u*i,e},c.SIMD.rotateZ=function(e,t,a){var i=SIMD.Float32x4.splat(l(a)),r=SIMD.Float32x4.splat(n(a));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,0),s=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(s,i))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,r),SIMD.Float32x4.mul(o,i))),e},c.rotateZ=m.USE_SIMD?c.SIMD.rotateZ:c.scalar.rotateZ,c.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},c.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},c.fromRotation=function(e,a,i){var o=i[0],u=i[1],x=i[2],f=r(o*o+u*u+x*x),p,s,c;return d(f)<m.EPSILON?null:(f=1/f,o*=f,u*=f,x*=f,p=l(a),s=n(a),c=1-s,e[0]=o*o*c+s,e[1]=u*o*c+x*p,e[2]=x*o*c-u*p,e[3]=0,e[4]=o*u*c-x*p,e[5]=u*u*c+s,e[6]=x*u*c+o*p,e[7]=0,e[8]=o*x*c+u*p,e[9]=u*x*c-o*p,e[10]=x*x*c+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},c.fromXRotation=function(e,t){var a=l(t),i=n(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=a,e[7]=0,e[8]=0,e[9]=-a,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},c.fromYRotation=function(e,t){var a=l(t),i=n(t);return e[0]=i,e[1]=0,e[2]=-a,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=a,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},c.fromZRotation=function(e,t){var a=l(t),i=n(t);return e[0]=i,e[1]=a,e[2]=0,e[3]=0,e[4]=-a,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},c.fromRotationTranslation=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=t[3],s=i+i,l=r+r,d=o+o,u=i*s,c=i*l,m=i*d,x=r*l,f=r*d,p=o*d,g=n*s,h=n*l,E=n*d;return e[0]=1-(x+p),e[1]=c+E,e[2]=m-h,e[3]=0,e[4]=c-E,e[5]=1-(u+p),e[6]=f+g,e[7]=0,e[8]=m+h,e[9]=f-g,e[10]=1-(u+x),e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e},c.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},c.getRotation=function(e,t){var a=t[0]+t[5]+t[10],i=0;return 0<a?(i=2*r(a+1),e[3]=0.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&t[0]>t[10]?(i=2*r(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=0.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*r(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=0.25*i,e[2]=(t[6]+t[9])/i):(i=2*r(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=0.25*i),e},c.fromRotationTranslationScale=function(e,t,a,i){var r=t[0],o=t[1],n=t[2],s=t[3],l=r+r,d=o+o,u=n+n,c=r*l,m=r*d,x=r*u,f=o*d,p=o*u,g=n*u,h=s*l,E=s*d,v=s*u,_=i[0],b=i[1],y=i[2];return e[0]=(1-(f+g))*_,e[1]=(m+v)*_,e[2]=(x-E)*_,e[3]=0,e[4]=(m-v)*b,e[5]=(1-(c+g))*b,e[6]=(p+h)*b,e[7]=0,e[8]=(x+E)*y,e[9]=(p-h)*y,e[10]=(1-(c+f))*y,e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e},c.fromRotationTranslationScaleOrigin=function(e,t,a,i,r){var o=t[0],n=t[1],s=t[2],l=t[3],d=o+o,u=n+n,c=s+s,m=o*d,x=o*u,f=o*c,p=n*u,g=n*c,h=s*c,E=l*d,v=l*u,_=l*c,b=i[0],y=i[1],T=i[2],F=r[0],R=r[1],A=r[2];return e[0]=(1-(p+h))*b,e[1]=(x+_)*b,e[2]=(f-v)*b,e[3]=0,e[4]=(x-_)*y,e[5]=(1-(m+h))*y,e[6]=(g+E)*y,e[7]=0,e[8]=(f+v)*T,e[9]=(g-E)*T,e[10]=(1-(m+p))*T,e[11]=0,e[12]=a[0]+F-(e[0]*F+e[4]*R+e[8]*A),e[13]=a[1]+R-(e[1]*F+e[5]*R+e[9]*A),e[14]=a[2]+A-(e[2]*F+e[6]*R+e[10]*A),e[15]=1,e},c.fromQuat=function(e,t){var a=t[0],i=t[1],r=t[2],o=t[3],n=a+a,s=i+i,l=r+r,d=a*n,u=i*n,c=i*s,m=r*n,x=r*s,f=r*l,p=o*n,g=o*s,h=o*l;return e[0]=1-c-f,e[1]=u+h,e[2]=m-g,e[3]=0,e[4]=u-h,e[5]=1-d-f,e[6]=x+p,e[7]=0,e[8]=m+g,e[9]=x-p,e[10]=1-d-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},c.frustum=function(e,t,a,i,r,o,n){var s=1/(a-t),l=1/(r-i),d=1/(o-n);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(a+t)*s,e[9]=(r+i)*l,e[10]=(n+o)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*(n*o)*d,e[15]=0,e},c.perspective=function(e,t,a,r,o){var n=1/i(t/2),s=1/(r-o);return e[0]=n/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*s,e[15]=0,e},c.perspectiveFromFieldOfView=function(e,t,a,r){var o=i(t.upDegrees*u/180),n=i(t.downDegrees*u/180),s=i(t.leftDegrees*u/180),l=i(t.rightDegrees*u/180),d=2/(s+l),c=2/(o+n);return e[0]=d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(0.5*((s-l)*d)),e[9]=0.5*((o-n)*c),e[10]=r/(a-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*a/(a-r),e[15]=0,e},c.ortho=function(e,t,a,i,r,o,n){var s=1/(t-a),l=1/(i-r),d=1/(o-n);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(t+a)*s,e[13]=(r+i)*l,e[14]=(n+o)*d,e[15]=1,e},c.lookAt=function(e,t,a,i){var o=t[0],n=t[1],s=t[2],l=i[0],u=i[1],x=i[2],f=a[0],p=a[1],g=a[2],h,E,v,_,b,y,T,F,R,A;return d(o-f)<m.EPSILON&&d(n-p)<m.EPSILON&&d(s-g)<m.EPSILON?c.identity(e):(T=o-f,F=n-p,R=s-g,A=1/r(T*T+F*F+R*R),T*=A,F*=A,R*=A,h=u*R-x*F,E=x*T-l*R,v=l*F-u*T,A=r(h*h+E*E+v*v),A?(A=1/A,h*=A,E*=A,v*=A):(h=0,E=0,v=0),_=F*v-R*E,b=R*h-T*v,y=T*E-F*h,A=r(_*_+b*b+y*y),A?(A=1/A,_*=A,b*=A,y*=A):(_=0,b=0,y=0),e[0]=h,e[1]=_,e[2]=T,e[3]=0,e[4]=E,e[5]=b,e[6]=F,e[7]=0,e[8]=v,e[9]=y,e[10]=R,e[11]=0,e[12]=-(h*o+E*n+v*s),e[13]=-(_*o+b*n+y*s),e[14]=-(T*o+F*n+R*s),e[15]=1,e)},c.str=function(e){return'mat4('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+', '+e[4]+', '+e[5]+', '+e[6]+', '+e[7]+', '+e[8]+', '+e[9]+', '+e[10]+', '+e[11]+', '+e[12]+', '+e[13]+', '+e[14]+', '+e[15]+')'},c.frob=function(e){return r(o(e[0],2)+o(e[1],2)+o(e[2],2)+o(e[3],2)+o(e[4],2)+o(e[5],2)+o(e[6],2)+o(e[7],2)+o(e[8],2)+o(e[9],2)+o(e[10],2)+o(e[11],2)+o(e[12],2)+o(e[13],2)+o(e[14],2)+o(e[15],2))},c.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e[8]=t[8]+a[8],e[9]=t[9]+a[9],e[10]=t[10]+a[10],e[11]=t[11]+a[11],e[12]=t[12]+a[12],e[13]=t[13]+a[13],e[14]=t[14]+a[14],e[15]=t[15]+a[15],e},c.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e[6]=t[6]-a[6],e[7]=t[7]-a[7],e[8]=t[8]-a[8],e[9]=t[9]-a[9],e[10]=t[10]-a[10],e[11]=t[11]-a[11],e[12]=t[12]-a[12],e[13]=t[13]-a[13],e[14]=t[14]-a[14],e[15]=t[15]-a[15],e},c.sub=c.subtract,c.multiplyScalar=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12]*a,e[13]=t[13]*a,e[14]=t[14]*a,e[15]=t[15]*a,e},c.multiplyScalarAndAdd=function(e,t,a,i){return e[0]=t[0]+a[0]*i,e[1]=t[1]+a[1]*i,e[2]=t[2]+a[2]*i,e[3]=t[3]+a[3]*i,e[4]=t[4]+a[4]*i,e[5]=t[5]+a[5]*i,e[6]=t[6]+a[6]*i,e[7]=t[7]+a[7]*i,e[8]=t[8]+a[8]*i,e[9]=t[9]+a[9]*i,e[10]=t[10]+a[10]*i,e[11]=t[11]+a[11]*i,e[12]=t[12]+a[12]*i,e[13]=t[13]+a[13]*i,e[14]=t[14]+a[14]*i,e[15]=t[15]+a[15]*i,e},c.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},c.equals=function(e,t){var a=e[0],i=e[1],r=e[2],o=e[3],n=e[4],l=e[5],u=e[6],c=e[7],x=e[8],f=e[9],p=e[10],g=e[11],h=e[12],E=e[13],v=e[14],_=e[15],b=t[0],y=t[1],T=t[2],F=t[3],R=t[4],A=t[5],I=t[6],L=t[7],S=t[8],w=t[9],M=t[10],z=t[11],N=t[12],P=t[13],U=t[14],D=t[15];return d(a-b)<=m.EPSILON*s(1,d(a),d(b))&&d(i-y)<=m.EPSILON*s(1,d(i),d(y))&&d(r-T)<=m.EPSILON*s(1,d(r),d(T))&&d(o-F)<=m.EPSILON*s(1,d(o),d(F))&&d(n-R)<=m.EPSILON*s(1,d(n),d(R))&&d(l-A)<=m.EPSILON*s(1,d(l),d(A))&&d(u-I)<=m.EPSILON*s(1,d(u),d(I))&&d(c-L)<=m.EPSILON*s(1,d(c),d(L))&&d(x-S)<=m.EPSILON*s(1,d(x),d(S))&&d(f-w)<=m.EPSILON*s(1,d(f),d(w))&&d(p-M)<=m.EPSILON*s(1,d(p),d(M))&&d(g-z)<=m.EPSILON*s(1,d(g),d(z))&&d(h-N)<=m.EPSILON*s(1,d(h),d(N))&&d(E-P)<=m.EPSILON*s(1,d(E),d(P))&&d(v-U)<=m.EPSILON*s(1,d(v),d(U))&&d(_-D)<=m.EPSILON*s(1,d(_),d(D))},e.exports=c},function(e,t,a){var r=Math.sqrt,i=Math.cos,o=Math.sin,n=Math.acos,s=a(7),l=a(27),d=a(28),u=a(29),m={};m.create=function(){var e=new s.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},m.rotationTo=function(){var e=d.create(),t=d.fromValues(1,0,0),i=d.fromValues(0,1,0);return function(r,o,a){var n=d.dot(o,a);return-0.999999>n?(d.cross(e,t,o),1e-6>d.length(e)&&d.cross(e,i,o),d.normalize(e,e),m.setAxisAngle(r,e,Math.PI),r):0.999999<n?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(d.cross(e,o,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+n,m.normalize(r,r))}}(),m.setAxes=function(){var e=l.create();return function(t,a,i,r){return e[0]=i[0],e[3]=i[1],e[6]=i[2],e[1]=r[0],e[4]=r[1],e[7]=r[2],e[2]=-a[0],e[5]=-a[1],e[8]=-a[2],m.normalize(t,m.fromMat3(t,e))}}(),m.clone=u.clone,m.fromValues=u.fromValues,m.copy=u.copy,m.set=u.set,m.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},m.setAxisAngle=function(e,t,a){a*=0.5;var r=o(a);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i(a),e},m.getAxisAngle=function(e,t){var a=2*n(t[3]),i=o(a/2);return 0==i?(e[0]=1,e[1]=0,e[2]=0):(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i),a},m.add=u.add,m.multiply=function(e,t,a){var i=t[0],r=t[1],o=t[2],n=t[3],s=a[0],l=a[1],d=a[2],u=a[3];return e[0]=i*u+n*s+r*d-o*l,e[1]=r*u+n*l+o*s-i*d,e[2]=o*u+n*d+i*l-r*s,e[3]=n*u-i*s-r*l-o*d,e},m.mul=m.multiply,m.scale=u.scale,m.rotateX=function(e,t,a){a*=0.5;var r=t[0],n=t[1],s=t[2],l=t[3],d=o(a),u=i(a);return e[0]=r*u+l*d,e[1]=n*u+s*d,e[2]=s*u-n*d,e[3]=l*u-r*d,e},m.rotateY=function(e,t,a){a*=0.5;var r=t[0],n=t[1],s=t[2],l=t[3],d=o(a),u=i(a);return e[0]=r*u-s*d,e[1]=n*u+l*d,e[2]=s*u+r*d,e[3]=l*u-n*d,e},m.rotateZ=function(e,t,a){a*=0.5;var r=t[0],n=t[1],s=t[2],l=t[3],d=o(a),u=i(a);return e[0]=r*u+n*d,e[1]=n*u-r*d,e[2]=s*u+l*d,e[3]=l*u-s*d,e},m.calculateW=function(e,t){var a=t[0],i=t[1],o=t[2];return e[0]=a,e[1]=i,e[2]=o,e[3]=r(Math.abs(1-a*a-i*i-o*o)),e},m.dot=u.dot,m.lerp=u.lerp,m.slerp=function(e,i,a,r){var t=i[0],s=i[1],l=i[2],d=i[3],u=a[0],c=a[1],m=a[2],x=a[3],f,p,g,h,E;return p=t*u+s*c+l*m+d*x,0>p&&(p=-p,u=-u,c=-c,m=-m,x=-x),1e-6<1-p?(f=n(p),g=o(f),h=o((1-r)*f)/g,E=o(r*f)/g):(h=1-r,E=r),e[0]=h*t+E*u,e[1]=h*s+E*c,e[2]=h*l+E*m,e[3]=h*d+E*x,e},m.sqlerp=function(){var e=m.create(),i=m.create();return function(r,o,a,n,s,l){return m.slerp(e,o,s,l),m.slerp(i,a,n,l),m.slerp(r,e,i,2*l*(1-l)),r}}(),m.invert=function(e,t){var a=t[0],i=t[1],r=t[2],o=t[3],n=a*a+i*i+r*r+o*o,s=n?1/n:0;return e[0]=-a*s,e[1]=-i*s,e[2]=-r*s,e[3]=o*s,e},m.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},m.length=u.length,m.len=m.length,m.squaredLength=u.squaredLength,m.sqrLen=m.squaredLength,m.normalize=u.normalize,m.fromMat3=function(e,t){var a=t[0]+t[4]+t[8],o;if(0<a)o=r(a+1),e[3]=0.5*o,o=0.5/o,e[0]=(t[5]-t[7])*o,e[1]=(t[6]-t[2])*o,e[2]=(t[1]-t[3])*o;else{var n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);var i=(n+1)%3,s=(n+2)%3;o=r(t[3*n+n]-t[3*i+i]-t[3*s+s]+1),e[n]=0.5*o,o=0.5/o,e[3]=(t[3*i+s]-t[3*s+i])*o,e[i]=(t[3*i+n]+t[3*n+i])*o,e[s]=(t[3*s+n]+t[3*n+s])*o}return e},m.str=function(e){return'quat('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+')'},m.exactEquals=u.exactEquals,m.equals=u.equals,e.exports=m},function(e,t,a){var i=Math.round,r=Math.floor,o=Math.ceil,n=Math.sqrt,s=Math.min,l=Math.max,d=Math.abs,u=a(7),c={};c.create=function(){var e=new u.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},c.clone=function(e){var t=new u.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},c.fromValues=function(e,t){var a=new u.ARRAY_TYPE(2);return a[0]=e,a[1]=t,a},c.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},c.set=function(e,t,a){return e[0]=t,e[1]=a,e},c.add=function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e},c.subtract=function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e},c.sub=c.subtract,c.multiply=function(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e},c.mul=c.multiply,c.divide=function(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e},c.div=c.divide,c.ceil=function(e,t){return e[0]=o(t[0]),e[1]=o(t[1]),e},c.floor=function(e,t){return e[0]=r(t[0]),e[1]=r(t[1]),e},c.min=function(e,t,a){return e[0]=s(t[0],a[0]),e[1]=s(t[1],a[1]),e},c.max=function(e,t,a){return e[0]=l(t[0],a[0]),e[1]=l(t[1],a[1]),e},c.round=function(e,t){return e[0]=i(t[0]),e[1]=i(t[1]),e},c.scale=function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e},c.scaleAndAdd=function(e,t,a,i){return e[0]=t[0]+a[0]*i,e[1]=t[1]+a[1]*i,e},c.distance=function(e,t){var a=t[0]-e[0],i=t[1]-e[1];return n(a*a+i*i)},c.dist=c.distance,c.squaredDistance=function(e,t){var a=t[0]-e[0],i=t[1]-e[1];return a*a+i*i},c.sqrDist=c.squaredDistance,c.length=function(e){var t=e[0],a=e[1];return n(t*t+a*a)},c.len=c.length,c.squaredLength=function(e){var t=e[0],a=e[1];return t*t+a*a},c.sqrLen=c.squaredLength,c.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},c.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},c.normalize=function(e,t){var a=t[0],i=t[1],r=a*a+i*i;return 0<r&&(r=1/n(r),e[0]=t[0]*r,e[1]=t[1]*r),e},c.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},c.cross=function(e,t,a){var i=t[0]*a[1]-t[1]*a[0];return e[0]=e[1]=0,e[2]=i,e},c.lerp=function(e,i,a,r){var t=i[0],o=i[1];return e[0]=t+r*(a[0]-t),e[1]=o+r*(a[1]-o),e},c.random=function(e,t){t=t||1;var a=2*u.RANDOM()*Math.PI;return e[0]=Math.cos(a)*t,e[1]=Math.sin(a)*t,e},c.transformMat2=function(e,t,a){var i=t[0],r=t[1];return e[0]=a[0]*i+a[2]*r,e[1]=a[1]*i+a[3]*r,e},c.transformMat2d=function(e,t,a){var i=t[0],r=t[1];return e[0]=a[0]*i+a[2]*r+a[4],e[1]=a[1]*i+a[3]*r+a[5],e},c.transformMat3=function(e,t,a){var i=t[0],r=t[1];return e[0]=a[0]*i+a[3]*r+a[6],e[1]=a[1]*i+a[4]*r+a[7],e},c.transformMat4=function(e,t,a){var i=t[0],r=t[1];return e[0]=a[0]*i+a[4]*r+a[12],e[1]=a[1]*i+a[5]*r+a[13],e},c.forEach=function(){var e=c.create();return function(t,a,r,o,n,d){var u,i;for(a||(a=2),r||(r=0),i=o?s(o*a+r,t.length):t.length,u=r;u<i;u+=a)e[0]=t[u],e[1]=t[u+1],n(e,e,d),t[u]=e[0],t[u+1]=e[1];return t}}(),c.str=function(e){return'vec2('+e[0]+', '+e[1]+')'},c.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},c.equals=function(e,t){var a=e[0],i=e[1],r=t[0],o=t[1];return d(a-r)<=u.EPSILON*l(1,d(a),d(r))&&d(i-o)<=u.EPSILON*l(1,d(i),d(o))},e.exports=c},function(e,t,a){'use strict';var i=a(1),r=a.n(i),o=a(2);t.a=class{constructor(e){this.projectionMatrix=i.mat4.create(),this.isOrthographicCamera=!0,this.isPespectiveCamera=!1,this.near=0.1,this.far=100,this.fov=65,this.position=new o.a,this.target=new o.a,this.up=new o.a(0,1,0),Object.assign(this,e)}lookAt(e=0,t=0,a=0){this.target.set(e,t,a)}updateProjectionMatrix(){i.mat4.ortho(this.projectionMatrix,-1,1,-1,1,this.near,this.far)}}},function(e,t,a){'use strict';var i=a(1),r=a.n(i),o=a(3),n=a(2);t.a=class{constructor(e){this.projectionMatrix=i.mat4.create(),this.isPespectiveCamera=!0,this.isOrthographicCamera=!1,this.near=0.1,this.far=100,this.fov=70,this.ratio=o.RENDERER_DEFAULT_RATIO,this.position=new n.a,this.target=new n.a,this.up=new n.a(0,1,0),Object.assign(this,e)}lookAt(e=0,t=0,a=0){this.target.set(e,t,a)}updateProjectionMatrix(){i.mat4.perspective(this.projectionMatrix,this.fov,this.ratio,this.near,this.far)}}},function(e,t,a){'use strict';var r=a(1),i=a.n(r),o=a(2),n=a(15),s=a(31),l=a(11);const d=r.mat4.create(),u=r.vec3.create(),c=new o.a;let m,x;const f=new o.a,p=new o.a,g=new o.a,h=new n.a,E=new n.a,v=new n.a;t.a=class{constructor(e,t,a,i){this.ray=new s.a,this.near=a||0,this.far=i||Infinity}setFromCamera(e,t,a){a&&a.isPespectiveCamera&&(this.ray.origin.copy(a.position),r.vec3.copy(u,[e.x,e.y,0.5]),r.mat4.multiply(d,a.projectionMatrix,t.modelViewMatrix),r.mat4.invert(d,d),r.vec3.transformMat4(u,u,d),r.vec3.sub(u,u,a.position.v),r.vec3.normalize(u,u),c.set(u[0],u[1],u[2]),this.ray.direction.copy(c))}uvIntersection(e,t,a,i){return x=l.barycoordFromPoint(e.v,t.v,a.v,i.v),h.scale(x.x),E.scale(x.y),v.scale(x.z),h.add(E).add(v),h.clone()}intersectObject(e){let t,a;for(let o=0;o<e.geometry.faces.length;o+=1)if(m=e.geometry.faces[o],r.vec3.copy(f.v,m.vertices[0].v),r.vec3.copy(p.v,m.vertices[1].v),r.vec3.copy(g.v,m.vertices[2].v),r.vec3.transformMat4(f.v,f.v,e.modelMatrix),r.vec3.transformMat4(p.v,p.v,e.modelMatrix),r.vec3.transformMat4(g.v,g.v,e.modelMatrix),t=this.ray.intersectTriangle(f,p,g),t){r.vec2.copy(h.v,e.geometry.uvs[m.uvs[0]].v),r.vec2.copy(E.v,e.geometry.uvs[m.uvs[1]].v),r.vec2.copy(v.v,e.geometry.uvs[m.uvs[2]].v),a=this.uvIntersection(t,f,p,g);break}return t?{point:t,uv:a}:null}}},function(e,t,a){'use strict';var i=a(0),r=a(1),o=a.n(r),n=a(13),s=a(3),l=a(5),d=a(16),u=a(32);const c=a(51);let m;t.a=class{constructor(e){this.width=s.RENDERER_DEFAULT_WIDTH,this.height=s.RENDERER_DEFAULT_HEIGHT,this.ratio=s.RENDERER_DEFAULT_WIDTH/s.RENDERER_DEFAULT_HEIGHT,this.preserveDrawingBuffer=!1,this.pixelRatio=1,this.prefferedContext=s.RENDERER_DEFAULT_CONTEXT,this.autoClear=!0,Object.assign(this,e),this.canvas=document.createElement('canvas'),this.canvas.width=this.width,this.canvas.height=this.height;const t={preserveDrawingBuffer:this.preserveDrawingBuffer},a=u.a();if(a){let e;if(a.webgl2&&this.prefferedContext===s.WEBGL2_CONTEXT){e=s.WEBGL2_CONTEXT;const a=this.canvas.getContext('webgl2',t);i.set(a,e)}else{e=s.WEBGL_CONTEXT;const a=this.canvas.getContext('webgl',t)||this.canvas.getContext('experimental-webgl',t);i.set(a,e)}}else return void n.b('Webgl not supported');n.a(`%c${c.name} ${c.version} webgl${i.webgl2?2:''}`,'padding: 1px; background: #222; color: #ff00ff'),m=i.get(),l.set(m),i.webgl2&&d.setup(),this.viewport={x:0,y:0,width:m.drawingBufferWidth,height:m.drawingBufferHeight},this.setClearColor(),m.enable(m.DEPTH_TEST)}setClearColor(e=0,t=0,r=0,o=1){m=i.get(),m.clearColor(e,t,r,o)}setSize(e,t){const a=e*this.pixelRatio,i=t*this.pixelRatio;(a!==this.width||i!==this.height)&&(this.width=e*this.pixelRatio,this.height=t*this.pixelRatio,this.ratio=this.width/this.height,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=`${e}px`,this.canvas.style.height=`${t}px`,this.setViewport(0,0,e,t))}setDevicePixelRatio(e=1){this.pixelRatio=e||1,this.setSize(this.width,this.height)}setSissorTest(e=!1){m=i.get(),e?m.enable(m.SCISSOR_TEST):m.disable(m.SCISSOR_TEST)}setSissor(e,t,a,r){m=i.get(),m.scissor(e*this.pixelRatio,t*this.pixelRatio,a*this.pixelRatio,r*this.pixelRatio)}setViewport(e,t,a,i){this.viewport.x=e*this.pixelRatio,this.viewport.y=t*this.pixelRatio,this.viewport.width=a*this.pixelRatio,this.viewport.height=i*this.pixelRatio}render(e,t){m=i.get(),m.viewport(this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height),this.autoClear&&m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT),r.mat4.identity(e.modelViewMatrix),r.mat4.lookAt(e.modelViewMatrix,t.position.v,t.target.v,t.up.v),e.update(),m instanceof WebGL2RenderingContext&&d.updateProjectionView(m,t.projectionMatrix,e.modelViewMatrix),e.objects.forEach((a)=>{a.isInstanced?a.drawInstance(e.modelViewMatrix,t.projectionMatrix,t):a.draw(e.modelViewMatrix,t.projectionMatrix,t)})}}},function(e){e.exports={name:'ixviii.medium',version:'0.2.0',description:'Personal webgl toolkit.',main:'lib/ixviii.medium.js',scripts:{start:'concurrently \'npm run server\' \'npm run examples:js\' \'npm run examples:html\'',server:'live-server ./examples --port 3000 --quiet --watch ./examples --watch ./src --wait 0',"examples:js":'webpack --config webpack.config.examples.js --colors --watch',"examples:html":'node ./pug.config.js',"examples:build":'webpack --config webpack.config.examples.js --colors; node ./pug.config.js',build:'NODE_ENV=production npm run lint; webpack --config webpack.config.build.js --colors; NODE_ENV=production webpack --config webpack.config.build.js --colors',prepublish:'npm run docs; npm run build',"prettier:examples":'prettier --write --single-quote --print-width 80 \'./examples/src/js/**/*.js\'',"lint:examples":'eslint --ext .js ./examples/src ./internals --cache',"lint:src":'tslint ./src/**/*.ts',lint:'npm run lint:src; npm run lint:examples;',docs:'typedoc --target es6 --tsconfig ./tsconfig.json --ignoreCompilerErrors --theme default --name Medium --out ./docs ./src',precommit:'npm run lint'},repository:{type:'git',url:'https://github.com/amelierosser/medium.git'},author:'Amelie Rosser <amelierosser1986@gmail.com> (https://www.ixviii.io)',license:'MIT',bugs:{url:'https://github.com/amelierosser/medium/issues'},homepage:'https://github.com/amelierosser/medium',devDependencies:{"@types/gl-matrix":'^2.2.34',"@types/webgl2":'^0.0.1',"babel-cli":'^6.6.5',"babel-eslint":'^7.2.3',"babel-loader":'^7.1.0',"babel-plugin-module-resolver":'^2.7.1',"babel-plugin-transform-class-properties":'^6.24.1',"babel-preset-env":'^1.5.2',"babili-webpack-plugin":'^0.1.1',concurrently:'^3.5.0',eslint:'^4.1.0',"eslint-config-airbnb":'^15.0.1',"eslint-config-prettier":'^2.2.0',"eslint-plugin-compat":'^1.0.4',"eslint-plugin-import":'^2.6.0',"eslint-plugin-jsx-a11y":'^5.0.3',"eslint-plugin-prettier":'^2.1.2',"eslint-plugin-react":'^7.1.0',"eslint-plugin-redux-saga":'^0.4.0',husky:'^0.14.1',install:'^0.10.1',"json-loader":'^0.5.4',"live-server":'^1.2.0',prettier:'^1.4.4',"pug-cli":'^1.0.0-alpha6',"redux-saga":'^0.15.4',"ts-loader":'^2.2.0',tslint:'^5.4.3',typedoc:'^0.7.1',typescript:'^2.3.4',webpack:'^3.0.0'},dependencies:{"@types/dat-gui":'^0.6.3',"bezier-js":'^2.2.3',"dat-gui":'^0.5.0',"file-name":'^0.1.0',"gl-matrix":'^2.3.2',happens:'^0.6.0',"parse-hdr":'^1.0.0',"query-string":'^4.3.4',shelljs:'^0.7.8',"simplex-noise":'^2.3.0',uuid:'^3.1.0',"webgl-obj-loader":'^0.1.1'}}},function(e,t,a){'use strict';var i=a(0),r=a(1),o=a.n(r),n=a(16);let s;t.a=class{constructor(e){this.pixelRatio=e.pixelRatio||1,this.width=e.width*this.pixelRatio,this.height=e.height*this.pixelRatio,this.ratio=this.width/this.height,this.viewport={x:0,y:0,width:this.width,height:this.height},this.autoClear=!0,this.setClearColor(),s=i.get(),this._frameBuffer=s.createFramebuffer(),s.bindFramebuffer(s.FRAMEBUFFER,this._frameBuffer),this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR_MIPMAP_NEAREST),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,this.width,this.height,0,s.RGBA,s.UNSIGNED_BYTE,null),this._renderBuffer=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,this._renderBuffer),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,this.width,this.height),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.texture,0),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,this._renderBuffer),s.bindTexture(s.TEXTURE_2D,null),s.bindRenderbuffer(s.RENDERBUFFER,null),s.bindFramebuffer(s.FRAMEBUFFER,null)}setClearColor(e=0,t=0,r=0,o=1){s=i.get(),s.clearColor(e,t,r,o)}setSize(e,t){const a=e*this.pixelRatio,i=t*this.pixelRatio;(a!==this.width||i!==this.height)&&(this.width=e*this.pixelRatio,this.height=t*this.pixelRatio,this.ratio=this.width/this.height,s.bindTexture(s.TEXTURE_2D,this.texture),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,this.width,this.height,0,s.RGBA,s.UNSIGNED_BYTE,null),s.bindTexture(s.TEXTURE_2D,null),s.bindRenderbuffer(s.RENDERBUFFER,this._renderBuffer),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,this.width,this.height),s.bindRenderbuffer(s.RENDERBUFFER,null),this.setViewport(0,0,e,t))}setSissorTest(e=!1){s=i.get(),e?s.enable(s.SCISSOR_TEST):s.disable(s.SCISSOR_TEST)}setSissor(e,t,a,r){s=i.get(),s.scissor(e*this.pixelRatio,t*this.pixelRatio,a*this.pixelRatio,r*this.pixelRatio)}setViewport(e,t,a,i){this.viewport.x=e*this.pixelRatio,this.viewport.y=t*this.pixelRatio,this.viewport.width=a*this.pixelRatio,this.viewport.height=i*this.pixelRatio}render(e,t){s=i.get(),s.viewport(this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height),s.bindFramebuffer(s.FRAMEBUFFER,this._frameBuffer),this.autoClear&&s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),r.mat4.identity(e.modelViewMatrix),r.mat4.lookAt(e.modelViewMatrix,t.position.v,t.target.v,t.up.v),e.update(),s instanceof WebGL2RenderingContext&&n.updateProjectionView(s,t.projectionMatrix,e.modelViewMatrix),e.objects.forEach((a)=>{a.isInstanced?a.drawInstance(e.modelViewMatrix,t.projectionMatrix,t):a.draw(e.modelViewMatrix,t.projectionMatrix,t)}),s.bindTexture(s.TEXTURE_2D,this.texture),s.generateMipmap(s.TEXTURE_2D),s.bindTexture(s.TEXTURE_2D,null),s.bindFramebuffer(s.FRAMEBUFFER,null)}}},function(e,t,a){'use strict';var i=a(1),r=a.n(i);t.a=class{constructor(){this.objects=[],this.pointLights=void 0,this.directionalLights=void 0,this.modelViewMatrix=i.mat4.create()}add(e){this.objects.push(e)}remove(e,t=!1){const a=this.objects.indexOf(e);-1!==a&&(this.objects.splice(a,1),t&&(e.dispose(),e=void 0))}update(){this.ambientLight&&(this.ambientLight.update(),this.ambientLight.bind()),this.directionalLights&&(this.directionalLights.update(),this.directionalLights.bind()),this.pointLights&&(this.pointLights.update(),this.pointLights.bind())}}},function(e,t,a){'use strict';a.d(t,'b',function(){return n}),a.d(t,'a',function(){return s});var i=a(4),r=a(33),o=a(10);const n=`${i.a}
	${r.b}
	${r.c}
	#HOOK_DEFINES

	layout(std140) uniform;

	${o.a}

	uniform mat4 uProjectionMatrix;
	uniform mat4 uViewMatrix;
	uniform mat4 uViewMatrixInverse;
	uniform mat4 uModelMatrix;
	uniform mat4 uModelMatrixInverse;
	uniform mat3 uNormalMatrix;

	in vec3 aVertexPosition;
	out vec3 vPosition;
	out vec4 vWorldPosition;

	// Camera
	uniform vec3 uCameraPosition;

	#ifdef vertexColors
	in vec3 aVertexColor;
	#endif

	// Color
	uniform vec3 uDiffuse;
	out vec3 vDiffuse;

	// Normal
	#ifdef normals
	in vec3 aVertexNormal;
	out vec3 vNormal;
	#endif

	// Uv
	#ifdef uv
	in vec2 aUv;
	out vec2 vUv;
	#endif

	#HOOK_VERTEX_PRE

	void main(void){

		vDiffuse = uDiffuse;

		// Override for custom positioning
		vec3 transformed = vec3(0.0);

		#ifdef vertexColors
		vDiffuse = aVertexColor;
		#endif

		#ifdef uv
		vUv = aUv;
		#endif

		#HOOK_VERTEX_MAIN

		#ifdef normals
		vNormal = uNormalMatrix * aVertexNormal;
		#endif

		// Vertex position + offset
		vPosition = aVertexPosition + transformed;

		// Calculate world position of vertex with transformed
		vWorldPosition = uModelMatrix * vec4(aVertexPosition + transformed, 1.0);

		gl_Position = uProjectionView.projectionMatrix * uProjectionView.viewMatrix * uModelMatrix * vec4(vPosition, 1.0);

		#HOOK_VERTEX_END
	}
`,s=`

	${r.b}
	${r.c}
	#HOOK_DEFINES

	// Position
	uniform mat4 uProjectionMatrix;
	uniform mat4 uViewMatrix;
	uniform mat4 uViewMatrixInverse;
	uniform mat4 uModelMatrix;
	uniform mat4 uModelMatrixInverse;
	uniform mat3 uNormalMatrix;
	attribute vec3 aVertexPosition;
	varying vec3 vPosition;
	varying vec4 vWorldPosition;

	// Camera
	uniform vec3 uCameraPosition;

	#ifdef vertexColors
	attribute vec3 aVertexColor;
	#endif

	// Color
	uniform vec3 uDiffuse;
	varying vec3 vDiffuse;

	// Normal
	#ifdef normals
	attribute vec3 aVertexNormal;
	varying vec3 vNormal;
	#endif

	// Uv
	#ifdef uv
	attribute vec2 aUv;
	varying vec2 vUv;
	#endif

	#HOOK_VERTEX_PRE

	void main(void){

		vDiffuse = uDiffuse;

		// Override for custom positioning
		vec3 transformed = vec3(0.0);

		#ifdef vertexColors
		vDiffuse = aVertexColor;
		#endif

		#ifdef uv
		vUv = aUv;
		#endif

		#HOOK_VERTEX_MAIN

		#ifdef normals
		vNormal = uNormalMatrix * aVertexNormal;
		#endif

		// Vertex position + offset
		vPosition = aVertexPosition + transformed;

		// Calculate world position of vertex with transformed
		vWorldPosition = uModelMatrix * vec4(aVertexPosition + transformed, 1.0);

		gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(vPosition, 1.0);

		#HOOK_VERTEX_END
	}
`},function(e,t,a){'use strict';a.d(t,'b',function(){return r}),a.d(t,'a',function(){return o});var i=a(4);const r=`${i.a}
	#HOOK_PRECISION
	#HOOK_DEFINES

	layout(std140) uniform;

	in vec3 vDiffuse;
	in vec3 vPosition;

	#ifdef normals
	in vec3 vNormal;
	#endif

	#ifdef uv
	in vec2 vUv;
	#endif

	out vec4 outgoingColor;

	#HOOK_FRAGMENT_PRE

	void main(void){

		vec3 color = vDiffuse;

		#ifdef normals
		vec3 normal = normalize(vNormal);
		#endif

		#HOOK_FRAGMENT_MAIN

		outgoingColor = vec4(color.rgb, 1.0);

		#HOOK_FRAGMENT_END
	}
`,o=`
	#HOOK_PRECISION
	#HOOK_DEFINES

	varying vec3 vDiffuse;
	varying vec3 vPosition;

	#ifdef normals
	varying vec3 vNormal;
	#endif

	#ifdef uv
	varying vec2 vUv;
	#endif

	#HOOK_FRAGMENT_PRE

	void main(void){

		vec3 color = vDiffuse;

		#ifdef normals
		vec3 normal = normalize(vNormal);
		#endif

		#HOOK_FRAGMENT_MAIN

		gl_FragColor = vec4(color.rgb, 1.0);

		#HOOK_FRAGMENT_END
	}
`},function(e,t,a){'use strict';a.d(t,'b',function(){return s}),a.d(t,'a',function(){return l});var i=a(4),r=a(18),o=a(19),n=a(20);const s=`${i.a}
	#HOOK_PRECISION
	#HOOK_DEFINES

	layout(std140) uniform;

	in vec3 vDiffuse;
	in vec3 vPosition;

	#ifdef normals
	in vec3 vNormal;
	#endif

	#ifdef uv
	in vec2 vUv;
	#endif

	#ifdef ambientLight
	${r.ambientLightEs300}
	#endif

	#ifdef directionalLights
	${n.directionalLightsEs300}
	${o.lambertEs300}
	#endif

	out vec4 outgoingColor;


	#HOOK_FRAGMENT_PRE

	void main(void){

		vec3 color = vec3(0.0);

		#ifdef normals
		vec3 normal = normalize(vNormal);
		#endif

		#HOOK_FRAGMENT_MAIN

		#ifdef directionalLights
		for (int i = 0; i < #HOOK_DIRECTIONAL_LIGHTS; i++) {
			color += CalculateDirectionalLight(uDirectionalLights[i], normal);
		}
		#endif

		outgoingColor = vec4(color.rgb, 1.0);

		#HOOK_FRAGMENT_END
	}
`,l=`
	#HOOK_PRECISION
	#HOOK_DEFINES

	varying vec3 vDiffuse;
	varying vec3 vPosition;

	#ifdef normals
	varying vec3 vNormal;
	#endif

	#ifdef uv
	varying vec2 vUv;
	#endif

	#ifdef ambientLight
	${r.ambientLightEs100}
	#endif

	#ifdef directionalLights
	${n.directionalLightsEs100}
	${o.lambertEs100}
	#endif

	#HOOK_FRAGMENT_PRE

	void main(void){

		vec3 color = vec3(0.0);

		#ifdef normals
		vec3 normal = normalize(vNormal);
		#endif

		#HOOK_FRAGMENT_MAIN

		#ifdef directionalLights
		for (int i = 0; i < #HOOK_DIRECTIONAL_LIGHTS; i++) {
			color += CalculateDirectionalLight(uDirectionalLights[i], normal);
		}
		#endif

		gl_FragColor = vec4(color.rgb, 1.0);

		#HOOK_FRAGMENT_END
	}
`},function(e,t,a){'use strict';a.d(t,'b',function(){return d}),a.d(t,'a',function(){return u});var i=a(4),r=a(18),o=a(20),n=a(19),s=a(34),l=a(58);const d=`${i.a}
	#HOOK_PRECISION
	#HOOK_DEFINES

	layout(std140) uniform;

	in vec3 vDiffuse;
	in vec3 vPosition;
	in vec4 vWorldPosition;

	uniform vec3 uCameraPosition;

	#ifdef normals
	in vec3 vNormal;
	#endif

	#ifdef uv
	in vec2 vUv;
	#endif

	#ifdef ambientLight
	${r.ambientLightEs300}
	#endif

	#ifdef directionalLights
	${o.directionalLightsEs300}
	${n.lambertEs300}
	#endif

	#ifdef pointLights
	${s.pointLightsEs300}
	${l.b}
	#endif

	out vec4 outgoingColor;

	#HOOK_FRAGMENT_PRE

	void main(void){

		vec3 color = vec3(0.0);

		#ifdef normals
		vec3 normal = normalize(vNormal);
		#endif

		#HOOK_FRAGMENT_MAIN

		#ifdef directionalLights
		for (int i = 0; i < #HOOK_DIRECTIONAL_LIGHTS; i++) {
			color += CalculateDirectionalLight(uDirectionalLights[i], normal);
		}
		#endif

		#ifdef pointLights
		for (int i = 0; i < #HOOK_POINT_LIGHTS; i++) {
			color += CalculatePointLight(uPointLights[i], normal);
		}
		#endif

		outgoingColor = vec4(color.rgb, 1.0);

		#HOOK_FRAGMENT_END
	}
`,u=`
	#HOOK_PRECISION
	#HOOK_DEFINES

	varying vec3 vDiffuse;
	varying vec3 vPosition;
	varying vec4 vWorldPosition;

	#ifdef normals
	varying vec3 vNormal;
	#endif

	#ifdef uv
	varying vec2 vUv;
	#endif

	#ifdef ambientLight
	${r.ambientLightEs100}
	#endif

	#ifdef directionalLights
	${o.directionalLightsEs100}
	${n.lambertEs100}
	#endif

	#ifdef pointLights
	${s.pointLightsEs100}
	${l.a}
	#endif

	#HOOK_FRAGMENT_PRE

	void main(void){

		vec3 color = vec3(0.0);

		#ifdef normals
		vec3 normal = normalize(vNormal);
		#endif

		#HOOK_FRAGMENT_MAIN

		#ifdef directionalLights
		for (int i = 0; i < #HOOK_DIRECTIONAL_LIGHTS; i++) {
			color += CalculateDirectionalLight(uDirectionalLights[i], normal);
		}
		#endif

		#ifdef pointLights
		for (int i = 0; i < #HOOK_POINT_LIGHTS; i++) {
			color += CalculatePointLight(uPointLights[i], normal);
		}
		#endif

		gl_FragColor = vec4(color.rgb, 1.0);

		#HOOK_FRAGMENT_END
	}
`},function(e,t,a){'use strict';a.d(t,'b',function(){return i}),a.d(t,'a',function(){return r});const i=`
	vec3 CalculatePointLight(PointLight light, vec3 normal) {
		vec3 lightDirection = normalize(light.position.xyz - vWorldPosition.xyz);

		// diffuse shading
		float diff = max(dot(normal, lightDirection), 0.0);
		// specular shading
		vec3 reflectDirection = reflect(-lightDirection, normal);

		// Fix the spec from showing on the backside by multiplying it by the lambert term
		float spec = diff * pow(max(dot(lightDirection, reflectDirection), 0.0), light.shininess.x);
		// attenuation
		float constant = 1.0;
		float linear = 0.09;
		float quadratic = 0.032;

		float dist = length(light.position.xyz);
		float attenuation = 1.0 / (constant + linear * dist + quadratic * (dist * dist));

		vec3 ambientColor = vec3(0.5);
		float ambientIntensity = 0.5;

		#ifdef ambientLight
		ambientColor = uAmbientLight.color.rgb;
		ambientIntensity = uAmbientLight.intensity.x;
		#endif

		// combine results
		vec3 ambient = (ambientColor * ambientIntensity) * vDiffuse;
		vec3 diffuse = diff * vDiffuse;
		vec3 specular = light.specularColor.rgb * spec * light.shininess.x;
		ambient  *= attenuation;
		diffuse  *= attenuation;
		specular *= attenuation;
		return (ambient + diffuse + specular);
	}
`,r=`
	vec3 CalculatePointLight(PointLight light, vec3 normal) {
		vec3 lightDirection = normalize(light.position - vWorldPosition.xyz);

		// diffuse shading
		float diff = max(dot(normal, lightDirection), 0.0);
		// specular shading
		vec3 reflectDirection = reflect(-lightDirection, normal);

		// Fix the spec from showing on the backside by multiplying it by the lambert term
		float spec = diff * pow(max(dot(lightDirection, reflectDirection), 0.0), light.shininess);
		// attenuation
		float constant = 1.0;
		float linear = 0.09;
		float quadratic = 0.032;

		float dist = length(light.position);
		float attenuation = 1.0 / (constant + linear * dist + quadratic * (dist * dist));

		vec3 ambientColor = vec3(0.5);
		float ambientIntensity = 0.5;

		#ifdef ambientLight
		ambientColor = uAmbientLight.color;
		ambientIntensity = uAmbientLight.intensity;
		#endif

		// combine results
		vec3 ambient = (ambientColor * ambientIntensity) * vDiffuse;
		vec3 diffuse = diff * vDiffuse;
		vec3 specular = light.specularColor * spec * light.shininess;
		ambient  *= attenuation;
		diffuse  *= attenuation;
		specular *= attenuation;
		return (ambient + diffuse + specular);
	}
`},function(e,t,a){'use strict';t.a=function(e,t){if(i.webgl2)return e;const a='vertex'===t?u:c;return a.forEach((t)=>{e='function'==typeof t.replace?t.replace(e):e.replace(t.match,t.replace)}),e};var i=a(0),r=a(4);const o=(e)=>{return new RegExp(`\\b${e}\\b`,'gi')},n=(e)=>{return new RegExp(`${e}`,'gi')},s=[{match:o('in'),replace:'attribute'},{match:o('out'),replace:'varying'}],l=[{match:o('in'),replace:'varying'},{match:n('out vec4 outgoingColor;'),replace:''},{match:o('outgoingColor'),replace:'gl_FragColor'},{match:o('texture'),replace:function(e){const t=/\btexture\b/gi,a=/\btexture\b/i,i=new RegExp(/texture\(([^)]+)\)/,'i'),r=e.match(t);let o='';if(null===r)return e;for(let t=0,n;t<r.length;t++){if(n=e.match(i)[0],n){const t=n.replace('texture(','').split(',')[0];let a=e.match(`(.*?) ${t}`,'i')[1];switch(a=a.split(' ')[1],a){case'sampler2D':{o='texture2D';break}case'samplerCube':{o='textureCube';break}default:}}e=e.replace(a,o)}return e}}],d=[{match:n(r.a),replace:''}],u=[...d,...s],c=[...d,...l]},function(e,t,a){'use strict';var i=a(0),r=a(13);let o;t.a=class{constructor(){o=i.get(),this.program=o.createProgram(),this.created=!1,this.uniformBlocks={},this.attributeLocations={}}link(e,t,a){if(this.compiledVertexShader=this.compile('vs',e),this.compiledFragmentShader=this.compile('fs',t),this.compiledVertexShader&&this.compiledFragmentShader){if(o.attachShader(this.program,this.compiledVertexShader),o.attachShader(this.program,this.compiledFragmentShader),a instanceof Array&&o instanceof WebGL2RenderingContext&&o.transformFeedbackVaryings(this.program,a,o.SEPARATE_ATTRIBS),o.linkProgram(this.program),o.validateProgram(this.program),!o.getProgramParameter(this.program,o.LINK_STATUS)){const e=o.getProgramInfoLog(this.program);r.b('Failed to initialise shaders',e)}this.created=!0}}compile(e,t){o=i.get();let a;return a='vs'===e?o.createShader(o.VERTEX_SHADER):o.createShader(o.FRAGMENT_SHADER),o.shaderSource(a,t),o.compileShader(a),o.getShaderParameter(a,o.COMPILE_STATUS)?a:(r.b('Failed to compile shader:',o.getShaderInfoLog(a)),!1)}setAttributeLocation(e){o=i.get(),this.attributeLocations[e]=o.getAttribLocation(this.program,e),o.enableVertexAttribArray(this.attributeLocations[e])}setAttributePointer(e,t){o=i.get(),o.vertexAttribPointer(this.attributeLocations[e],t,o.FLOAT,!1,0,0)}setAttributeInstancedPointer(e,t){o=i.get(),o.vertexAttribPointer(this.attributeLocations[e],t,o.FLOAT,!1,0,0)}setUniformLocation(e,t){o=i.get(),e[t].location=o.getUniformLocation(this.program,t)}setUniformBlockLocation(e,t){o=i.get(),o instanceof WebGL2RenderingContext&&(this.uniformBlocks[e]=o.getUniformBlockIndex(this.program,e),o.uniformBlockBinding(this.program,this.uniformBlocks[e],this.uniformBlocks[e]),o.bindBufferBase(o.UNIFORM_BUFFER,this.uniformBlocks[e],t))}bind(){o=i.get(),o.useProgram(this.program)}dispose(){o=i.get();let e;Object.keys(this.attributeLocations).forEach((t)=>{e=this.attributeLocations[t],o.disableVertexAttribArray(e)}),o.detachShader(this.program,this.compiledVertexShader),o.detachShader(this.program,this.compiledFragmentShader),o.deleteProgram(this.program)}}},function(e,t,a){'use strict';var i=Math.abs,r=a(0),o=a(14),n=a.n(o),s=a(21),l=a(22),d=a(23),u=a(13);let c;t.a=class{constructor(e){this.onTextureLoaded=(e)=>{this.image=e,this.update(this.image),this.emit('loaded')},this.onTextureError=(e)=>{u.b(e),this.emit('error',e)},n.a(this),c=r.get(),this.src='',this.magFilter=c.NEAREST,this.minFilter=c.NEAREST,this.wrapS=c.CLAMP_TO_EDGE,this.wrapT=c.CLAMP_TO_EDGE,this.resizeToPow2=!1,Object.assign(this,e),this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,this.placeholder()),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this.magFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this.minFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,this.wrapS),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this.wrapT),c.bindTexture(c.TEXTURE_2D,null),this._isHdr='hdr'===this.src.split('.').pop(),this.load(this.src)}load(e){this._isHdr?l.a(e).then(this.onTextureLoaded).catch(this.onTextureError):s.a(e).then(this.onTextureLoaded).catch(this.onTextureError)}updateImage(e){this.src=e||this.src,this.load(this.src)}update(e){c=r.get(),c.bindTexture(c.TEXTURE_2D,this.texture),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0),e instanceof d.a&&c instanceof WebGL2RenderingContext?c.texImage2D(c.TEXTURE_2D,0,c.RGBA16F,e.width,e.height,0,c.RGBA,c.FLOAT,e.data):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,this._resizeImage()),c.bindTexture(c.TEXTURE_2D,null)}placeholder(){const e=document.createElement('canvas');return e.width=1,e.height=1,e}_resizeImage(){if(!this.resizeToPow2||this.image instanceof d.a)return this.image;const e=Array(12).fill(0).map((e,t)=>{return Math.pow(2,t+1)});e.forEach((e)=>{return this.image.width===e&&this.image.height===e&&this.image});const t=Math.max(this.image.width,this.image.height),a=e.reduce((e,a)=>{return i(a-t)<i(e-t)?a:e}),r=document.createElement('canvas'),o=r.getContext('2d');return r.width=a,r.height=a,o.drawImage(this.image,0,0,a,a),r}dispose(){c=r.get(),c.deleteTexture(this.texture),this.texture=null}}},function(e){function t(e,t,a,r,o,n){function s(t){var a=0;do t[a++]=e[r];while(++r<x&&a<t.length);return a}function l(t,a,i){var o=0;do t[a+o++]=e[r];while(++r<x&&o<i);return o}function d(e,t,a,i){var r=4*i,o=l(t,a,r);if(o<r)throw new Error('Error reading raw pixels: got '+o+' bytes, expected '+r)}for(var u=[,,,,],c=null,m=[,,],x=e.length,f,p,g;0<n;){if(s(u)<u.length)throw new Error('Error reading bytes: expected '+u.length);if(2!=u[0]||2!=u[1]||0!=(128&u[2]))return t[a++]=u[0],t[a++]=u[1],t[a++]=u[2],t[a++]=u[3],void d(e,t,a,o*n-1);if(((255&u[2])<<8|255&u[3])!=o)throw new Error('Wrong scanline width '+((255&u[2])<<8|255&u[3])+', expected '+o);null==c&&(c=Array(4*o)),f=0;for(var h=0;4>h;h++)for(p=(h+1)*o;f<p;){if(s(m)<m.length)throw new Error('Error reading 2-byte buffer');if(128<(255&m[0])){if(g=(255&m[0])-128,0==g||g>p-f)throw new Error('Bad scanline data');for(;0<g--;)c[f++]=m[1]}else{if(g=255&m[0],0==g||g>p-f)throw new Error('Bad scanline data');if(c[f++]=m[1],0<--g){if(l(c,f,g)<g)throw new Error('Error reading non-run data');f+=g}}}for(var h=0;h<o;h++)t[a+0]=c[h],t[a+1]=c[h+o],t[a+2]=c[h+2*o],t[a+3]=c[h+3*o],a+=4;n--}}var a=Math.pow;e.exports=function(o){function n(){var e='';do{var t=o[s];if(t==d){++s;break}e+=String.fromCharCode(t)}while(++s<l);return e}o instanceof ArrayBuffer&&(o=new Uint8Array(o));for(var s=0,l=o.length,d=10,u=0,c=0,m=1,x=1,p=!1,h=0;20>h;h++){var i=n(),E;if(E=i.match('#\\?RADIANCE'));else if(E=i.match('FORMAT=32-bit_rle_rgbe'))p=!0;else if(E=i.match('EXPOSURE=\\s*([0-9]*[.][0-9]*)'))m=+E[1];else if(E=i.match('#.*'));else if(E=i.match('-Y ([0-9]+) \\+X ([0-9]+)')){c=+E[1],u=+E[2];break}}if(!p)throw new Error('File is not run length encoded!');var v=new Uint8Array(4*(u*c)),_=u,y=c;t(o,v,0,s,_,y);for(var T=new Float32Array(4*(u*c)),F=0;F<v.length;F+=4){var R=v[F+0]/255,r=v[F+1]/255,g=v[F+2]/255,b=v[F+3],e=a(2,b-128);R*=e,r*=e,g*=e;var f=F;T[f+0]=R,T[f+1]=r,T[f+2]=g,T[f+3]=1}return{shape:[u,c],exposure:m,gamma:x,data:T}}},function(e,t,a){'use strict';var i=a(0),r=a(14),o=a.n(r);let n;t.a=class{constructor(e){o.a(this),n=i.get();n instanceof WebGL2RenderingContext&&(this.src=null,this.size=null,Object.assign(this,e),this.texture=n.createTexture(),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_3D,this.texture),n.texParameteri(n.TEXTURE_3D,n.TEXTURE_BASE_LEVEL,0),n.texParameteri(n.TEXTURE_3D,n.TEXTURE_MAX_LEVEL,Math.log2(this.size)),n.texParameteri(n.TEXTURE_3D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_3D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texImage3D(n.TEXTURE_3D,0,n.R8,this.size,this.size,this.size,0,n.RED,n.UNSIGNED_BYTE,this.src),n.generateMipmap(n.TEXTURE_3D))}dispose(){n=i.get();n instanceof WebGL2RenderingContext&&(n.deleteTexture(this.texture),this.texture=null)}}},function(e,t,a){'use strict';var i=Math.abs,r=a(0),o=a(14),n=a.n(o),s=a(21),l=a(22),d=a(23),u=a(13);let c;t.a=class{constructor(e){this.onTextureLoaded=(e)=>{this.images=e,this.update(this.images),this.emit('loaded')},this.onTextureError=(e)=>{u.b(e),this.emit('error',e)},n.a(this),c=r.get(),this.src=[,,,,,,].fill(''),this.magFilter=c.LINEAR,this.minFilter=c.LINEAR,this.wrapS=c.CLAMP_TO_EDGE,this.wrapT=c.CLAMP_TO_EDGE,this.resizeToPow2=!1,Object.assign(this,e),this.texture=c.createTexture(),this.images=[],this.loaders=[],this.update(this.placeholder()),this._isHdr='hdr'===this.src[0].split('.').pop(),this.src.forEach((e,t)=>{this.loaders[t]=this.load(this.src[t])}),Promise.all(this.loaders).then(this.onTextureLoaded).catch(this.onTextureError)}load(e){return this._isHdr?l.a(e):s.a(e)}update(e){c=r.get(),c.bindTexture(c.TEXTURE_CUBE_MAP,this.texture);const t=[c.TEXTURE_CUBE_MAP_POSITIVE_X,c.TEXTURE_CUBE_MAP_NEGATIVE_X,c.TEXTURE_CUBE_MAP_POSITIVE_Y,c.TEXTURE_CUBE_MAP_NEGATIVE_Y,c.TEXTURE_CUBE_MAP_POSITIVE_Z,c.TEXTURE_CUBE_MAP_NEGATIVE_Z];for(let a=0;6>a;a+=1){const i=this._isHdr?e[a]:this._resizeImage(e[a]);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),i instanceof d.a?c instanceof WebGL2RenderingContext&&c.texImage2D(t[a],0,c.RGBA16F,i.width,i.height,0,c.RGBA,c.FLOAT,i.data):c.texImage2D(t[a],0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,i),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,this.magFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,this.minFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,this.wrapS),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,this.wrapT)}c.bindTexture(c.TEXTURE_CUBE_MAP,null)}placeholder(){const e=[];for(let t=0;6>t;t+=1){const t=document.createElement('canvas');t.width=128,t.height=128,e.push(t)}return e}_resizeImage(e){if(!this.resizeToPow2||e instanceof d.a)return e;const t=Array(12).fill(0).map((e,t)=>{return Math.pow(2,t+1)});t.forEach((t)=>{return e.width===t&&e.height===t&&e});const a=Math.max(e.width,e.height),r=t.reduce((e,t)=>{return i(t-a)<i(e-a)?t:e}),o=document.createElement('canvas'),n=o.getContext('2d');return o.width=r,o.height=r,n.drawImage(e,0,0,r,r),o}}},function(e,t,a){'use strict';var i=a(0),r=a(14),o=a.n(r);let n;t.a=class{constructor(e){this._onCanPlayThrough=()=>{this.emit('canplaythrough')},this._onEnded=()=>{this.emit('ended')},o.a(this),n=i.get(),this.src='',this.magFilter=n.NEAREST,this.minFilter=n.NEAREST,this.wrapS=n.CLAMP_TO_EDGE,this.wrapT=n.CLAMP_TO_EDGE,this.loop=!1,this.autoplay=!0,Object.assign(this,e),this.video=document.createElement('video'),this.video.src=this.src,this.video.loop=this.loop,this.video.autoplay=this.autoplay,this.video.setAttribute('webkitplaysinline','webkitplaysinline'),this.video.setAttribute('playsinline','playsinline'),this.video.addEventListener('canplaythrough',this._onCanPlayThrough,!0),this.video.addEventListener('ended',this._onEnded,!0),this._currentTime=0,this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this.placeholder()),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.magFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.minFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this.wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this.wrapT),n.bindTexture(n.TEXTURE_2D,null)}update(){n=i.get(),this.video.readyState>=this.video.HAVE_CURRENT_DATA&&(this.video.currentTime!==this._currentTime&&(n.bindTexture(n.TEXTURE_2D,this.texture),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,this.video),n.bindTexture(n.TEXTURE_2D,null)),this._currentTime=this.video.currentTime)}placeholder(){const e=document.createElement('canvas');return e.width=1,e.height=1,e}}},function(e,t,a){'use strict';var i=a(6);class r extends i.a{constructor(e=1,t=1,a=1,i){const r=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1];for(let o=0;o<r.length;o+=3)r[o]*=e,r[o+1]*=t,r[o+2]*=a;super(new Float32Array(r),new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),i)}}t.a=r},function(e,t,a){'use strict';var i=a(1),r=a.n(i),o=a(2);let n=i.vec3.create(),s=i.vec3.create();t.a=class{constructor(e,t,a,i,r,n){this.indices=[e,t,a],this.vertices=[i,r,n],this.uvs=[e,t,a],this.normal=new o.a,this.updateFaceNormal()}updateFaceNormal(){i.vec3.set(n,0,0,0),i.vec3.set(s,0,0,0),i.vec3.subtract(n,this.vertices[2].v,this.vertices[1].v),i.vec3.subtract(s,this.vertices[0].v,this.vertices[1].v),i.vec3.cross(n,n,s),i.vec3.normalize(n,n),this.normal.set(n[0],n[1],n[2])}}},function(e,t,a){'use strict';var i=a(6);class r extends i.a{constructor(e=1,t=1,a=1,i=1,r='XY',o){let n=[],s=[],l=[],d=[],c=0;const m=e/a,f=t/i,x=1/a,p=1/i;for(let g=0;g<i;g+=1)for(let o=0;o<a;o+=1){const h=m*o+0.5*-e,E=f*g+0.5*-t,_=o/a,u=g/i;switch(r){case'XZ':{n=n.concat([h,0,E]),n=n.concat([h+m,0,E]),n=n.concat([h+m,0,E+f]),n=n.concat([h,0,E+f]),l=l.concat([0,1,0]),l=l.concat([0,1,0]),l=l.concat([0,1,0]),l=l.concat([0,1,0]),d=d.concat([_,1-u]),d=d.concat([_+x,1-u]),d=d.concat([_+x,1-(u+p)]),d=d.concat([_,1-(u+p)]);break}case'YZ':{n=n.concat([0,E,h]),n=n.concat([0,E,h+m]),n=n.concat([0,E+f,h+m]),n=n.concat([0,E+f,h]),l=l.concat([1,0,0]),l=l.concat([1,0,0]),l=l.concat([1,0,0]),l=l.concat([1,0,0]),d=d.concat([1-_,u]),d=d.concat([1-(_+x),u]),d=d.concat([1-(_+x),u+p]),d=d.concat([1-_,u+p]);break}default:n=n.concat([h,E,0]),n=n.concat([h+m,E,0]),n=n.concat([h+m,E+f,0]),n=n.concat([h,E+f,0]),l=l.concat([0,0,1]),l=l.concat([0,0,1]),l=l.concat([0,0,1]),l=l.concat([0,0,1]),d=d.concat([_,u]),d=d.concat([_+x,u]),d=d.concat([_+x,u+p]),d=d.concat([_,u+p]);}s.push(4*c+0),s.push(4*c+1),s.push(4*c+2),s.push(4*c+0),s.push(4*c+2),s.push(4*c+3),c+=1}super(new Float32Array(n),new Uint16Array(s),new Float32Array(l),new Float32Array(d),o)}}t.a=r},function(e,t,a){'use strict';function i(){return`${u.a}
	precision ${l.capabilities.precision} float;
	in vec3 vColor;
	out vec4 outgoingColor;

	void main(void){
		outgoingColor = vec4(vColor, 1.0);
	}
	`}function r(){return`
	precision ${l.capabilities.precision} float;
	varying vec3 vColor;

	void main(void){
		gl_FragColor = vec4(vColor, 1.0);
	}
	`}var o=a(8),n=a(9),s=a(0),l=a(5),d=a(6),u=a(4),c=a(10);let m;const x=`${u.a}
	layout (location = 0) in vec3 aVertexPosition;
	layout (location = 1) in vec3 aVertexColor;

	${c.a}

	uniform mat4 uModelMatrix;

	out vec3 vColor;

	void main(void){
		vColor = aVertexColor;
		gl_Position = uProjectionView.projectionMatrix * uProjectionView.viewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);
	}
`,f=`
	attribute vec3 aVertexPosition;
	attribute vec3 aVertexColor;

	uniform mat4 uProjectionMatrix;
	uniform mat4 uViewMatrix;
	uniform mat4 uModelMatrix;

	varying vec3 vColor;

	void main(void){
		vColor = aVertexColor;
		gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);
	}
`;class p extends d.a{constructor(e){let t=[];t=t.concat([0,0,0,e,0,0]),t=t.concat([0,0,0,0,e,0]),t=t.concat([0,0,0,0,0,e]);const a=new Float32Array([1,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,1]);super(new Float32Array(t),null,null,null,a)}}class g extends o.a{constructor(e=1){const t=s.webgl2?x:f,a=s.webgl2?i():r();super(new p(e),new n.a({name:'AxisHelper',vertexShader:t,fragmentShader:a}))}draw(e,t){this.visible&&(m=s.get(),this.updateMatrix(),this.shader.program.bind(),this.shader.setUniforms(e,t,this.modelMatrix),l.extensions.vertexArrayObject?this.vao.bind():(this.bindAttributes(),this.bindAttributesInstanced(),this.bindIndexBuffer()),m.drawArrays(m.LINES,0,this.geometry.attributes.aVertexPosition.numItems),l.extensions.vertexArrayObject&&this.vao.unbind())}}t.a=g},function(e,t,a){'use strict';function i(){return`${u.a}
	precision ${l.capabilities.precision} float;
	out vec4 outgoingColor;

	void main(void){
		outgoingColor = vec4(1.0, 1.0, 0.0, 1.0);
	}
	`}function r(){return`
	precision ${l.capabilities.precision} float;

	void main(void){
		gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);
	}
	`}var o=a(8),n=a(9),s=a(0),l=a(5),d=a(6),u=a(4),c=a(10),m=a(3);let x;const f=`${u.a}
	${c.a}

	in vec3 aVertexPosition;

	uniform mat4 uModelMatrix;
	uniform mat3 uNormalMatrix;

	void main(void){
		gl_Position = uProjectionView.projectionMatrix * uProjectionView.viewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);
	}
`,p=`
	attribute vec3 aVertexPosition;

	uniform mat4 uProjectionMatrix;
	uniform mat4 uViewMatrix;
	uniform mat4 uModelMatrix;
	uniform mat3 uNormalMatrix;

	void main(void){
		gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);
	}
`;class g extends d.a{constructor(e=0.5){function t(e,t=1){i(-1*t,-1*t,e),i(-1*t,1*t,e),i(-1*t,1*t,e),i(1*t,1*t,e),i(1*t,1*t,e),i(1*t,-1*t,e),i(1*t,-1*t,e),i(-1*t,-1*t,e)}let a=[];const i=(e,t,i)=>{a=a.concat([e,t,i])},r=3.5,o=0.5,n=3;t(0,o),t(r,n),i(-1*o,-1*o,0),i(-1*n,-1*n,r),i(-1*o,1*o,0),i(-1*n,1*n,r),i(1*o,1*o,0),i(1*n,1*n,r),i(1*o,-1*o,0),i(1*n,-1*n,r),super(new Float32Array(a))}}class h extends o.a{constructor(e){const t=s.webgl2?f:p,a=s.webgl2?i():r();super(new g(e),new n.a({name:'CameraHelper',vertexShader:t,fragmentShader:a,drawType:m.DRAW_LINE_STRIP})),this.camera=e}update(){this.position.copy(this.camera.position),this.lookAt(this.camera.target)}draw(e,t){this.visible&&(x=s.get(),this.updateMatrix(),this.shader.program.bind(),this.shader.setUniforms(e,t,this.modelMatrix),l.extensions.vertexArrayObject?this.vao.bind():(this.bindAttributes(),this.bindAttributesInstanced(),this.bindIndexBuffer()),x.drawArrays(x.LINES,0,this.geometry.attributes.aVertexPosition.numItems),l.extensions.vertexArrayObject&&this.vao.unbind())}}t.a=h},function(e,t,a){'use strict';function i(){return`${c.a}
	precision ${d.capabilities.precision} float;
	out vec4 outgoingColor;

	void main(void){
		outgoingColor = vec4(vec3(0.5), 1.0);
	}
	`}function r(){return`
	precision ${d.capabilities.precision} float;

	void main(void){
		gl_FragColor = vec4(vec3(0.5), 1.0);
	}
	`}var o=a(11),n=a(8),s=a(9),l=a(0),d=a(5),u=a(6),c=a(4),m=a(10);let x;const f=`${c.a}
	${m.a}

	in vec3 aVertexPosition;

	uniform mat4 uModelMatrix;

	void main(void){
		gl_Position = uProjectionView.projectionMatrix * uProjectionView.viewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);
	}
`,p=`
	attribute vec3 aVertexPosition;

	uniform mat4 uProjectionMatrix;
	uniform mat4 uViewMatrix;
	uniform mat4 uModelMatrix;

	void main(void){
		gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);
	}
`;class g extends u.a{constructor(e,t){let a=[];const r=0.5*e;for(let n=0;n<t+1;n+=1){const e=o.lerp(-r,r,n/t),i=o.lerp(-r,r,n/t);a=a.concat([e,0,-r,i,0,r])}for(let n=0;n<t+1;n+=1){const e=o.lerp(-r,r,n/t),i=o.lerp(-r,r,n/t);a=a.concat([-r,0,e,r,0,i])}super(new Float32Array(a))}}class h extends n.a{constructor(e=1,t=10){const a=l.webgl2?f:p,o=l.webgl2?i():r();super(new g(e,t),new s.a({name:'GridHelper',vertexShader:a,fragmentShader:o}))}draw(e,t){this.visible&&(x=l.get(),this.updateMatrix(),this.shader.program.bind(),this.shader.setUniforms(e,t,this.modelMatrix),d.extensions.vertexArrayObject?this.vao.bind():(this.bindAttributes(),this.bindAttributesInstanced(),this.bindIndexBuffer()),x.drawArrays(x.LINES,0,this.geometry.attributes.aVertexPosition.numItems),d.extensions.vertexArrayObject&&this.vao.unbind())}}t.a=h},function(e,t,a){'use strict';function i(){return`${u.a}
	precision ${l.capabilities.precision} float;
	out vec4 outgoingColor;

	void main(void){
		outgoingColor = vec4(1.0);
	}
	`}function r(){return`
	precision ${l.capabilities.precision} float;

	void main(void){
		gl_FragColor = vec4(1.0);
	}
	`}var o=a(8),n=a(9),s=a(0),l=a(5),d=a(6),u=a(4),c=a(10);let m;const x=`${u.a}
	${c.a}

	in vec3 aVertexPosition;

	uniform mat4 uModelMatrix;
	uniform mat3 uNormalMatrix;

	void main(void){
		gl_Position = uProjectionView.projectionMatrix * uProjectionView.viewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);
	}
`,f=`
	attribute vec3 aVertexPosition;

	uniform mat4 uProjectionMatrix;
	uniform mat4 uViewMatrix;
	uniform mat4 uModelMatrix;
	uniform mat3 uNormalMatrix;

	void main(void){
		gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);
	}
`;class p extends d.a{constructor(e,t=0.5){let a=[];const r=e.scale.x,o=e.scale.y,n=e.scale.z,s=e.geometry.bufferNormals.length/3;for(let l=0;l<s;l+=1){const i=3*l,s=r*e.geometry.bufferVertices[i],d=o*e.geometry.bufferVertices[i+1],u=n*e.geometry.bufferVertices[i+2],c=e.geometry.bufferNormals[i],m=e.geometry.bufferNormals[i+1],x=e.geometry.bufferNormals[i+2];a=a.concat([s,d,u,s+t*c,d+t*m,u+t*x])}super(new Float32Array(a))}}class g extends o.a{constructor(e,t=1){const a=s.webgl2?x:f,o=s.webgl2?i():r();super(new p(e,t),new n.a({name:'NormalsHelper',vertexShader:a,fragmentShader:o}))}draw(e,t){this.visible&&(m=s.get(),this.updateMatrix(),this.shader.program.bind(),this.shader.setUniforms(e,t,this.modelMatrix),l.extensions.vertexArrayObject?this.vao.bind():(this.bindAttributes(),this.bindAttributesInstanced(),this.bindIndexBuffer()),m.drawArrays(m.LINES,0,this.geometry.attributes.aVertexPosition.numItems),l.extensions.vertexArrayObject&&this.vao.unbind())}}t.a=g},function(e,t,a){'use strict';function i(){return`${m.a}
	precision ${u.capabilities.precision} float;
	uniform vec3 uColor;
	out vec4 outgoingColor;

	void main(void){
		if(length(gl_PointCoord - 0.5) > 0.5) {
			discard;
		}
		outgoingColor = vec4(uColor, 1.0);
	}
	`}function r(){return`
	precision ${u.capabilities.precision} float;
	uniform vec3 uColor;

	void main(void){
		if(length(gl_PointCoord - 0.5) > 0.5) {
			discard;
		}
		gl_FragColor = vec4(uColor, 1.0);
	}
	`}var o=a(1),n=a.n(o),s=a(8),l=a(9),d=a(0),u=a(5),c=a(6),m=a(4),x=a(10),f=a(12),p=a(11);let g;const h=`${m.a}
	${x.a}

	in vec3 aVertexPosition;

	uniform mat4 uModelMatrix;
	uniform float uSize;

	void main(void){
		vec4 mvPosition = uProjectionView.projectionMatrix * uProjectionView.viewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);
		gl_PointSize = uSize * (100.0 / length(mvPosition.xyz));
		gl_Position = mvPosition;
	}
`,E=`
	attribute vec3 aVertexPosition;

	uniform mat4 uProjectionMatrix;
	uniform mat4 uViewMatrix;
	uniform mat4 uModelMatrix;
	uniform float uSize;

	void main(void){
		vec4 mvPosition = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);
		gl_PointSize = uSize * (100.0 / length(mvPosition.xyz));
		gl_Position = mvPosition;
	}
`;class v extends c.a{constructor(e,t=0.5){let a=[];const r=e.geometry.bufferVertices.length;for(let o=0;o<r;o+=1)a[o]=e.geometry.bufferVertices[o];super(new Float32Array(a))}}const _=o.mat4.create(),b=o.mat4.create();class y extends s.a{constructor(e,t=1,a=65280,o='#ffffff'){const n=d.webgl2?h:E,s=d.webgl2?i():r();super(new v(e,t),new l.a({name:'VerticesHelper',vertexShader:n,fragmentShader:s,uniforms:{uSize:{type:'f',value:t},uColor:{type:'3f',value:new f.a(a).v}}})),this._labels=[],this._parentMesh=e;let u;const c=(e)=>{u=document.createElement('div'),u.style.position='absolute',u.style.pointerEvents='none',u.style.color=o,u.style.fontSize='16px',this._labels.push({indice:e,element:u}),document.body.appendChild(u)};this._parentMesh.geometry.faces.forEach((e)=>{c(e.indices[0]),c(e.indices[1]),c(e.indices[2])})}draw(e,t){if(!this.visible)return;g=d.get(),this.updateMatrix(),o.mat4.identity(_),o.mat4.identity(b),o.mat4.mul(b,e,this.modelMatrix),o.mat4.mul(_,t,b);let a,i;this._labels.forEach((e)=>{i=this._parentMesh.geometry.vertices[e.indice],a=p.from3DTo2D(i,_),e.element.style.left=`${a.x*window.innerWidth}px`,e.element.style.top=`${a.y*window.innerHeight}px`,e.element.innerHTML=`${e.indice}`}),this.shader.program.bind(),this.shader.setUniforms(e,t,this.modelMatrix),u.extensions.vertexArrayObject?this.vao.bind():(this.bindAttributes(),this.bindAttributesInstanced(),this.bindIndexBuffer()),g.drawArrays(g.POINTS,0,this.geometry.attributes.aVertexPosition.numItems),u.extensions.vertexArrayObject&&this.vao.unbind()}}t.a=y},function(e,t,a){'use strict';var i=a(0),r=a(17);let o;class n{constructor(e){if(this.lights=e,o=i.get(),i.webgl2){const t=this.lights[0].data.length,a=Array(e.length*t),i=new Float32Array(a);this.uniformBuffer=new r.a(i),this._lightsData=new Float32Array(e[0].data.length*e.length)}}get length(){return this.lights.length}get(){return this.lights}update(){i.webgl2?(this.lights.forEach((e,t)=>{e.update(),this._lightsData.set(e.data,t*e.data.length)}),this.uniformBuffer.setValues(this._lightsData,0)):this.lights.forEach((e)=>{e.update()})}bind(){i.webgl2&&(o=i.get(),o.bindBuffer(o.UNIFORM_BUFFER,this.uniformBuffer.buffer),o.bufferSubData(o.UNIFORM_BUFFER,0,this.uniformBuffer.data),o.bindBuffer(o.UNIFORM_BUFFER,null))}}t.a=n},function(e,t,a){'use strict';var i=a(0),r=a(24),o=a(2),n=a(12),s=a(3);class l extends r.a{constructor(e={}){super(),this.type=s.LIGHT_AMBIENT,this.uniforms={color:{type:'3f',value:new n.a(4210752).v},intensity:{type:'f',value:0.1}},Object.assign(this.uniforms,e),this.position=new o.a,i.webgl2&&(this.data=new Float32Array([...this.uniforms.color.value,0,this.uniforms.intensity.value,0,0,0]))}update(){i.webgl2&&(this.setValues(this.uniforms.color.value,0),this.setValues([this.uniforms.intensity.value],4))}}t.a=l},function(e,t,a){'use strict';var i=a(0),r=a(24),o=a(2),n=a(12),s=a(3);class l extends r.a{constructor(e={}){super(),this.type=s.LIGHT_DIRECTIONAL,this.uniforms={position:{type:'3f',value:new o.a(0,0,0).v},color:{type:'3f',value:new n.a(16777215).v},intensity:{type:'f',value:1}},Object.assign(this.uniforms,e),this.position=new o.a,i.webgl2&&(this.data=new Float32Array([...this.uniforms.position.value,0,...this.uniforms.color.value,0,this.uniforms.intensity.value,0,0,0]))}update(){i.webgl2?(this.setValues(this.position.v),this.setValues(this.uniforms.color.value,4),this.setValues([this.uniforms.intensity.value],8)):this.uniforms.position.value.set(this.position.v)}}t.a=l},function(e,t,a){'use strict';var i=a(0),r=a(24),o=a(2),n=a(12),s=a(3);class l extends r.a{constructor(e={}){super(),this.type=s.LIGHT_POINT,this.uniforms={position:{type:'3f',value:new o.a(0,0,0).v},color:{type:'3f',value:new n.a(16777215).v},specularColor:{type:'3f',value:new n.a(16777215).v},shininess:{type:'f',value:100},intensity:{type:'f',value:1}},Object.assign(this.uniforms,e),this.position=new o.a,i.webgl2&&(this.data=new Float32Array([...this.uniforms.position.value,0,...this.uniforms.color.value,0,...this.uniforms.specularColor.value,0,this.uniforms.shininess.value,0,0,0,this.uniforms.intensity.value,0,0,0]))}update(){i.webgl2?(this.setValues(this.position.v),this.setValues(this.uniforms.color.value,4),this.setValues(this.uniforms.specularColor.value,8),this.setValues([this.uniforms.shininess.value],12),this.setValues([this.uniforms.intensity.value],16)):this.uniforms.position.value.set(this.position.v)}}t.a=l},function(e,t,a){'use strict';var i=a(18),r=a(79),o=a(20),n=a(80),s=a(4),l=a(81),d=a(82),u=a(19),c=a(83),m=a(33),x=a(84),f=a(85),p=a(34),g=a(10),h=a(86),E=a(87);t.a={AmbientLight:i,Conditionals:r.a,DirectionalLights:o,EnvMapCube:n.a,EsVersion:s.a,Fog:l.a,Gamma:d.a,Lambert:u,Matcap:c.a,Math:m.a,Noise:x,Packing:f.a,PointLights:p,ProjectionView:g.a,Tonemap:h,Transpose:E.a}},function(e,t){'use strict';const a=`
float whenEquals(float x, float y) {
  return 1.0 - abs(sign(x - y));
};
`,i=`
int whenEqualsInt(int x, int y) {
  return 1 - abs(sign(x - y));
}
`,r=`
float whenLessThan(float x, float y) {
  return max(sign(y - x), 0.0);
}
`,o=`
float whenGreaterThan(float x, float y) {
  return max(sign(x - y), 0.0);
}
`;t.a={whenEquals:a,whenEqualsInt:i,whenLessThan:r,whenGreaterThan:o}},function(e,t){'use strict';t.a=`
/**
 * Samples cubemap environment map
 * @param  {vec3} wcNormal - normal in the world coordinate space
 * @param  {float} - flipEnvMap    -1.0 for left handed coorinate system oriented texture (usual case)
 *                                  1.0 for right handed coorinate system oriented texture
 * @return {vec4} - cubemap texture coordinate
 */
vec3 envMapCube(vec3 wcNormal, float flipEnvMap) {
	return vec3(flipEnvMap * wcNormal.x, wcNormal.y, wcNormal.z);
}

vec3 envMapCube(vec3 wcNormal) {
 //-1.0 for left handed coorinate system oriented texture (usual case)
 return envMapCube(wcNormal, -1.0);
}
`},function(e,t){'use strict';const a=`
float fogLinear(const float dist, const float start, const float end) {
  return 1.0 - clamp((end - dist) / (end - start), 0.0, 1.0);
}
`,i=`
float fogExp(
  const float dist,
  const float density
) {
  return 1.0 - clamp(exp(-density * dist), 0.0, 1.0);
}
`,r=`
float fogExp2(
  const float dist,
  const float density
) {
  const float LOG2 = -1.442695;
  float d = density * dist;
  return 1.0 - clamp(exp2(d * d * LOG2), 0.0, 1.0);
}
`;t.a={linear:a,exp:i,exp2:r}},function(e,t){'use strict';t.a=`
	const float gamma = 2.2;

	float toGamma(float v) {
	  return pow(v, 1.0 / gamma);
	}

	vec2 toGamma(vec2 v) {
	  return pow(v, vec2(1.0 / gamma));
	}

	vec3 toGamma(vec3 v) {
	  return pow(v, vec3(1.0 / gamma));
	}

	vec4 toGamma(vec4 v) {
	  return vec4(toGamma(v.rgb), v.a);
	}
`},function(e,t){'use strict';t.a=`
vec2 matcap(vec3 eye, vec3 normal) {
  vec3 reflected = reflect(eye, normal);
  float m = 2.8284271247461903 * sqrt( reflected.z+1.0 );
  return reflected.xy / m + 0.5;
}
`},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const a=`
//
// GLSL textureless classic 2D noise "cnoise",
// with an RSL-style periodic variant "pnoise".
// Author:  Stefan Gustavson (stefan.gustavson@liu.se)
// Version: 2011-08-22
//
// Many thanks to Ian McEwan of Ashima Arts for the
// ideas for permutation and gradient selection.
//
// Copyright (c) 2011 Stefan Gustavson. All rights reserved.
// Distributed under the MIT license. See LICENSE file.
// https://github.com/ashima/webgl-noise
//

vec4 mod289(vec4 x)
{
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 permute(vec4 x)
{
  return mod289(((x*34.0)+1.0)*x);
}

vec4 taylorInvSqrt(vec4 r)
{
  return 1.79284291400159 - 0.85373472095314 * r;
}

vec2 fade(vec2 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

// Classic Perlin noise
float classicNoise2D(vec2 P)
{
  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);
  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);
  Pi = mod289(Pi); // To avoid truncation effects in permutation
  vec4 ix = Pi.xzxz;
  vec4 iy = Pi.yyww;
  vec4 fx = Pf.xzxz;
  vec4 fy = Pf.yyww;

  vec4 i = permute(permute(ix) + iy);

  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;
  vec4 gy = abs(gx) - 0.5 ;
  vec4 tx = floor(gx + 0.5);
  gx = gx - tx;

  vec2 g00 = vec2(gx.x,gy.x);
  vec2 g10 = vec2(gx.y,gy.y);
  vec2 g01 = vec2(gx.z,gy.z);
  vec2 g11 = vec2(gx.w,gy.w);

  vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));
  g00 *= norm.x;
  g01 *= norm.y;
  g10 *= norm.z;
  g11 *= norm.w;

  float n00 = dot(g00, vec2(fx.x, fy.x));
  float n10 = dot(g10, vec2(fx.y, fy.y));
  float n01 = dot(g01, vec2(fx.z, fy.z));
  float n11 = dot(g11, vec2(fx.w, fy.w));

  vec2 fade_xy = fade(Pf.xy);
  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);
  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);
  return 2.3 * n_xy;
}
`;t.classicNoise2D=a;const i=`
//
// GLSL textureless classic 3D noise "cnoise",
// with an RSL-style periodic variant "pnoise".
// Author:  Stefan Gustavson (stefan.gustavson@liu.se)
// Version: 2011-10-11
//
// Many thanks to Ian McEwan of Ashima Arts for the
// ideas for permutation and gradient selection.
//
// Copyright (c) 2011 Stefan Gustavson. All rights reserved.
// Distributed under the MIT license. See LICENSE file.
// https://github.com/ashima/webgl-noise
//

vec3 mod289(vec3 x)
{
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 mod289(vec4 x)
{
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 permute(vec4 x)
{
  return mod289(((x*34.0)+1.0)*x);
}

vec4 taylorInvSqrt(vec4 r)
{
  return 1.79284291400159 - 0.85373472095314 * r;
}

vec3 fade(vec3 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

// Classic Perlin noise
float classicNoise3D(vec3 P)
{
  vec3 Pi0 = floor(P); // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec3 Pf0 = fract(P); // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);

  vec4 gx0 = ixy0 * (1.0 / 7.0);
  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 * (1.0 / 7.0);
  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
  return 2.2 * n_xyz;
}
`;t.classicNoise3D=i;const r=`
//
// GLSL textureless classic 4D noise "cnoise",
// with an RSL-style periodic variant "pnoise".
// Author:  Stefan Gustavson (stefan.gustavson@liu.se)
// Version: 2011-08-22
//
// Many thanks to Ian McEwan of Ashima Arts for the
// ideas for permutation and gradient selection.
//
// Copyright (c) 2011 Stefan Gustavson. All rights reserved.
// Distributed under the MIT license. See LICENSE file.
// https://github.com/ashima/webgl-noise
//

vec4 mod289(vec4 x)
{
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 permute(vec4 x)
{
  return mod289(((x*34.0)+1.0)*x);
}

vec4 taylorInvSqrt(vec4 r)
{
  return 1.79284291400159 - 0.85373472095314 * r;
}

vec4 fade(vec4 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

// Classic Perlin noise
float classicNoise4D(vec4 P)
{
  vec4 Pi0 = floor(P); // Integer part for indexing
  vec4 Pi1 = Pi0 + 1.0; // Integer part + 1
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec4 Pf0 = fract(P); // Fractional part for interpolation
  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = vec4(Pi0.zzzz);
  vec4 iz1 = vec4(Pi1.zzzz);
  vec4 iw0 = vec4(Pi0.wwww);
  vec4 iw1 = vec4(Pi1.wwww);

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);
  vec4 ixy00 = permute(ixy0 + iw0);
  vec4 ixy01 = permute(ixy0 + iw1);
  vec4 ixy10 = permute(ixy1 + iw0);
  vec4 ixy11 = permute(ixy1 + iw1);

  vec4 gx00 = ixy00 * (1.0 / 7.0);
  vec4 gy00 = floor(gx00) * (1.0 / 7.0);
  vec4 gz00 = floor(gy00) * (1.0 / 6.0);
  gx00 = fract(gx00) - 0.5;
  gy00 = fract(gy00) - 0.5;
  gz00 = fract(gz00) - 0.5;
  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);
  vec4 sw00 = step(gw00, vec4(0.0));
  gx00 -= sw00 * (step(0.0, gx00) - 0.5);
  gy00 -= sw00 * (step(0.0, gy00) - 0.5);

  vec4 gx01 = ixy01 * (1.0 / 7.0);
  vec4 gy01 = floor(gx01) * (1.0 / 7.0);
  vec4 gz01 = floor(gy01) * (1.0 / 6.0);
  gx01 = fract(gx01) - 0.5;
  gy01 = fract(gy01) - 0.5;
  gz01 = fract(gz01) - 0.5;
  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);
  vec4 sw01 = step(gw01, vec4(0.0));
  gx01 -= sw01 * (step(0.0, gx01) - 0.5);
  gy01 -= sw01 * (step(0.0, gy01) - 0.5);

  vec4 gx10 = ixy10 * (1.0 / 7.0);
  vec4 gy10 = floor(gx10) * (1.0 / 7.0);
  vec4 gz10 = floor(gy10) * (1.0 / 6.0);
  gx10 = fract(gx10) - 0.5;
  gy10 = fract(gy10) - 0.5;
  gz10 = fract(gz10) - 0.5;
  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);
  vec4 sw10 = step(gw10, vec4(0.0));
  gx10 -= sw10 * (step(0.0, gx10) - 0.5);
  gy10 -= sw10 * (step(0.0, gy10) - 0.5);

  vec4 gx11 = ixy11 * (1.0 / 7.0);
  vec4 gy11 = floor(gx11) * (1.0 / 7.0);
  vec4 gz11 = floor(gy11) * (1.0 / 6.0);
  gx11 = fract(gx11) - 0.5;
  gy11 = fract(gy11) - 0.5;
  gz11 = fract(gz11) - 0.5;
  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);
  vec4 sw11 = step(gw11, vec4(0.0));
  gx11 -= sw11 * (step(0.0, gx11) - 0.5);
  gy11 -= sw11 * (step(0.0, gy11) - 0.5);

  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);
  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);
  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);
  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);
  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);
  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);
  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);
  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);
  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);
  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);
  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);
  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);
  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);
  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);
  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);
  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);

  vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));
  g0000 *= norm00.x;
  g0100 *= norm00.y;
  g1000 *= norm00.z;
  g1100 *= norm00.w;

  vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));
  g0001 *= norm01.x;
  g0101 *= norm01.y;
  g1001 *= norm01.z;
  g1101 *= norm01.w;

  vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));
  g0010 *= norm10.x;
  g0110 *= norm10.y;
  g1010 *= norm10.z;
  g1110 *= norm10.w;

  vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));
  g0011 *= norm11.x;
  g0111 *= norm11.y;
  g1011 *= norm11.z;
  g1111 *= norm11.w;

  float n0000 = dot(g0000, Pf0);
  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));
  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));
  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));
  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));
  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));
  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));
  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));
  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));
  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));
  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));
  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));
  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));
  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));
  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));
  float n1111 = dot(g1111, Pf1);

  vec4 fade_xyzw = fade(Pf0);
  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);
  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);
  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);
  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);
  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);
  return 2.2 * n_xyzw;
}
`;t.classicNoise4D=r;const o=`
//
// GLSL textureless classic 2D noise "cnoise",
// with an RSL-style periodic variant "pnoise".
// Author:  Stefan Gustavson (stefan.gustavson@liu.se)
// Version: 2011-08-22
//
// Many thanks to Ian McEwan of Ashima Arts for the
// ideas for permutation and gradient selection.
//
// Copyright (c) 2011 Stefan Gustavson. All rights reserved.
// Distributed under the MIT license. See LICENSE file.
// https://github.com/ashima/webgl-noise
//

vec4 mod289(vec4 x)
{
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 permute(vec4 x)
{
  return mod289(((x*34.0)+1.0)*x);
}

vec4 taylorInvSqrt(vec4 r)
{
  return 1.79284291400159 - 0.85373472095314 * r;
}

vec2 fade(vec2 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

// Classic Perlin noise, periodic variant
float periodicNoise2D(vec2 P, vec2 rep)
{
  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);
  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);
  Pi = mod(Pi, rep.xyxy); // To create noise with explicit period
  Pi = mod289(Pi);        // To avoid truncation effects in permutation
  vec4 ix = Pi.xzxz;
  vec4 iy = Pi.yyww;
  vec4 fx = Pf.xzxz;
  vec4 fy = Pf.yyww;

  vec4 i = permute(permute(ix) + iy);

  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;
  vec4 gy = abs(gx) - 0.5 ;
  vec4 tx = floor(gx + 0.5);
  gx = gx - tx;

  vec2 g00 = vec2(gx.x,gy.x);
  vec2 g10 = vec2(gx.y,gy.y);
  vec2 g01 = vec2(gx.z,gy.z);
  vec2 g11 = vec2(gx.w,gy.w);

  vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));
  g00 *= norm.x;
  g01 *= norm.y;
  g10 *= norm.z;
  g11 *= norm.w;

  float n00 = dot(g00, vec2(fx.x, fy.x));
  float n10 = dot(g10, vec2(fx.y, fy.y));
  float n01 = dot(g01, vec2(fx.z, fy.z));
  float n11 = dot(g11, vec2(fx.w, fy.w));

  vec2 fade_xy = fade(Pf.xy);
  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);
  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);
  return 2.3 * n_xy;
}
`;t.periodicNoise2D=o;const n=`
//
// GLSL textureless classic 3D noise "cnoise",
// with an RSL-style periodic variant "pnoise".
// Author:  Stefan Gustavson (stefan.gustavson@liu.se)
// Version: 2011-10-11
//
// Many thanks to Ian McEwan of Ashima Arts for the
// ideas for permutation and gradient selection.
//
// Copyright (c) 2011 Stefan Gustavson. All rights reserved.
// Distributed under the MIT license. See LICENSE file.
// https://github.com/ashima/webgl-noise
//

vec3 mod289(vec3 x)
{
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 mod289(vec4 x)
{
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 permute(vec4 x)
{
  return mod289(((x*34.0)+1.0)*x);
}

vec4 taylorInvSqrt(vec4 r)
{
  return 1.79284291400159 - 0.85373472095314 * r;
}

vec3 fade(vec3 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

// Classic Perlin noise, periodic variant
float periodicNoise3D(vec3 P, vec3 rep)
{
  vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
  vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec3 Pf0 = fract(P); // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);

  vec4 gx0 = ixy0 * (1.0 / 7.0);
  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 * (1.0 / 7.0);
  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
  return 2.2 * n_xyz;
}
`;t.periodicNoise3D=n;const s=`
//
// GLSL textureless classic 4D noise "cnoise",
// with an RSL-style periodic variant "pnoise".
// Author:  Stefan Gustavson (stefan.gustavson@liu.se)
// Version: 2011-08-22
//
// Many thanks to Ian McEwan of Ashima Arts for the
// ideas for permutation and gradient selection.
//
// Copyright (c) 2011 Stefan Gustavson. All rights reserved.
// Distributed under the MIT license. See LICENSE file.
// https://github.com/ashima/webgl-noise
//

vec4 mod289(vec4 x)
{
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 permute(vec4 x)
{
  return mod289(((x*34.0)+1.0)*x);
}

vec4 taylorInvSqrt(vec4 r)
{
  return 1.79284291400159 - 0.85373472095314 * r;
}

vec4 fade(vec4 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

// Classic Perlin noise, periodic version
float periodicNoise4D(vec4 P, vec4 rep)
{
  vec4 Pi0 = mod(floor(P), rep); // Integer part modulo rep
  vec4 Pi1 = mod(Pi0 + 1.0, rep); // Integer part + 1 mod rep
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec4 Pf0 = fract(P); // Fractional part for interpolation
  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = vec4(Pi0.zzzz);
  vec4 iz1 = vec4(Pi1.zzzz);
  vec4 iw0 = vec4(Pi0.wwww);
  vec4 iw1 = vec4(Pi1.wwww);

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);
  vec4 ixy00 = permute(ixy0 + iw0);
  vec4 ixy01 = permute(ixy0 + iw1);
  vec4 ixy10 = permute(ixy1 + iw0);
  vec4 ixy11 = permute(ixy1 + iw1);

  vec4 gx00 = ixy00 * (1.0 / 7.0);
  vec4 gy00 = floor(gx00) * (1.0 / 7.0);
  vec4 gz00 = floor(gy00) * (1.0 / 6.0);
  gx00 = fract(gx00) - 0.5;
  gy00 = fract(gy00) - 0.5;
  gz00 = fract(gz00) - 0.5;
  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);
  vec4 sw00 = step(gw00, vec4(0.0));
  gx00 -= sw00 * (step(0.0, gx00) - 0.5);
  gy00 -= sw00 * (step(0.0, gy00) - 0.5);

  vec4 gx01 = ixy01 * (1.0 / 7.0);
  vec4 gy01 = floor(gx01) * (1.0 / 7.0);
  vec4 gz01 = floor(gy01) * (1.0 / 6.0);
  gx01 = fract(gx01) - 0.5;
  gy01 = fract(gy01) - 0.5;
  gz01 = fract(gz01) - 0.5;
  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);
  vec4 sw01 = step(gw01, vec4(0.0));
  gx01 -= sw01 * (step(0.0, gx01) - 0.5);
  gy01 -= sw01 * (step(0.0, gy01) - 0.5);

  vec4 gx10 = ixy10 * (1.0 / 7.0);
  vec4 gy10 = floor(gx10) * (1.0 / 7.0);
  vec4 gz10 = floor(gy10) * (1.0 / 6.0);
  gx10 = fract(gx10) - 0.5;
  gy10 = fract(gy10) - 0.5;
  gz10 = fract(gz10) - 0.5;
  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);
  vec4 sw10 = step(gw10, vec4(0.0));
  gx10 -= sw10 * (step(0.0, gx10) - 0.5);
  gy10 -= sw10 * (step(0.0, gy10) - 0.5);

  vec4 gx11 = ixy11 * (1.0 / 7.0);
  vec4 gy11 = floor(gx11) * (1.0 / 7.0);
  vec4 gz11 = floor(gy11) * (1.0 / 6.0);
  gx11 = fract(gx11) - 0.5;
  gy11 = fract(gy11) - 0.5;
  gz11 = fract(gz11) - 0.5;
  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);
  vec4 sw11 = step(gw11, vec4(0.0));
  gx11 -= sw11 * (step(0.0, gx11) - 0.5);
  gy11 -= sw11 * (step(0.0, gy11) - 0.5);

  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);
  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);
  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);
  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);
  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);
  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);
  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);
  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);
  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);
  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);
  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);
  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);
  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);
  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);
  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);
  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);

  vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));
  g0000 *= norm00.x;
  g0100 *= norm00.y;
  g1000 *= norm00.z;
  g1100 *= norm00.w;

  vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));
  g0001 *= norm01.x;
  g0101 *= norm01.y;
  g1001 *= norm01.z;
  g1101 *= norm01.w;

  vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));
  g0010 *= norm10.x;
  g0110 *= norm10.y;
  g1010 *= norm10.z;
  g1110 *= norm10.w;

  vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));
  g0011 *= norm11.x;
  g0111 *= norm11.y;
  g1011 *= norm11.z;
  g1111 *= norm11.w;

  float n0000 = dot(g0000, Pf0);
  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));
  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));
  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));
  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));
  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));
  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));
  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));
  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));
  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));
  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));
  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));
  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));
  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));
  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));
  float n1111 = dot(g1111, Pf1);

  vec4 fade_xyzw = fade(Pf0);
  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);
  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);
  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);
  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);
  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);
  return 2.2 * n_xyzw;
}
`;t.periodicNoise4D=s;const l=`
//
// Description : Array and textureless GLSL 2D simplex noise function.
//      Author : Ian McEwan, Ashima Arts.
//  Maintainer : ijm
//     Lastmod : 20110822 (ijm)
//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.
//               Distributed under the MIT License. See LICENSE file.
//               https://github.com/ashima/webgl-noise
//

vec3 mod289(vec3 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec2 mod289(vec2 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec3 permute(vec3 x) {
  return mod289(((x*34.0)+1.0)*x);
}

float simplexNoise2D(vec2 v)
  {
  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0
                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)
                     -0.577350269189626,  // -1.0 + 2.0 * C.x
                      0.024390243902439); // 1.0 / 41.0
// First corner
  vec2 i  = floor(v + dot(v, C.yy) );
  vec2 x0 = v -   i + dot(i, C.xx);

// Other corners
  vec2 i1;
  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0
  //i1.y = 1.0 - i1.x;
  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
  // x0 = x0 - 0.0 + 0.0 * C.xx ;
  // x1 = x0 - i1 + 1.0 * C.xx ;
  // x2 = x0 - 1.0 + 2.0 * C.xx ;
  vec4 x12 = x0.xyxy + C.xxzz;
  x12.xy -= i1;

// Permutations
  i = mod289(i); // Avoid truncation effects in permutation
  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))
    + i.x + vec3(0.0, i1.x, 1.0 ));

  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);
  m = m*m ;
  m = m*m ;

// Gradients: 41 points uniformly over a line, mapped onto a diamond.
// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)

  vec3 x = 2.0 * fract(p * C.www) - 1.0;
  vec3 h = abs(x) - 0.5;
  vec3 ox = floor(x + 0.5);
  vec3 a0 = x - ox;

// Normalise gradients implicitly by scaling m
// Approximation of: m *= inversesqrt( a0*a0 + h*h );
  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );

// Compute final noise value at P
  vec3 g;
  g.x  = a0.x  * x0.x  + h.x  * x0.y;
  g.yz = a0.yz * x12.xz + h.yz * x12.yw;
  return 130.0 * dot(m, g);
}
`;t.simplexNoise2D=l;const d=`
//
// Description : Array and textureless GLSL 2D/3D/4D simplex
//               noise functions.
//      Author : Ian McEwan, Ashima Arts.
//  Maintainer : ijm
//     Lastmod : 20110822 (ijm)
//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.
//               Distributed under the MIT License. See LICENSE file.
//               https://github.com/ashima/webgl-noise
//

vec3 mod289(vec3 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 mod289(vec4 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 permute(vec4 x) {
     return mod289(((x*34.0)+1.0)*x);
}

vec4 taylorInvSqrt(vec4 r)
{
  return 1.79284291400159 - 0.85373472095314 * r;
}

float simplexNoise3D(vec3 v)
  {
  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);

// First corner
  vec3 i  = floor(v + dot(v, C.yyy) );
  vec3 x0 =   v - i + dot(i, C.xxx) ;

// Other corners
  vec3 g = step(x0.yzx, x0.xyz);
  vec3 l = 1.0 - g;
  vec3 i1 = min( g.xyz, l.zxy );
  vec3 i2 = max( g.xyz, l.zxy );

  //   x0 = x0 - 0.0 + 0.0 * C.xxx;
  //   x1 = x0 - i1  + 1.0 * C.xxx;
  //   x2 = x0 - i2  + 2.0 * C.xxx;
  //   x3 = x0 - 1.0 + 3.0 * C.xxx;
  vec3 x1 = x0 - i1 + C.xxx;
  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y

// Permutations
  i = mod289(i);
  vec4 p = permute( permute( permute(
             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));

// Gradients: 7x7 points over a square, mapped onto an octahedron.
// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
  float n_ = 0.142857142857; // 1.0/7.0
  vec3  ns = n_ * D.wyz - D.xzx;

  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)

  vec4 x_ = floor(j * ns.z);
  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)

  vec4 x = x_ *ns.x + ns.yyyy;
  vec4 y = y_ *ns.x + ns.yyyy;
  vec4 h = 1.0 - abs(x) - abs(y);

  vec4 b0 = vec4( x.xy, y.xy );
  vec4 b1 = vec4( x.zw, y.zw );

  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;
  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;
  vec4 s0 = floor(b0)*2.0 + 1.0;
  vec4 s1 = floor(b1)*2.0 + 1.0;
  vec4 sh = -step(h, vec4(0.0));

  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;

  vec3 p0 = vec3(a0.xy,h.x);
  vec3 p1 = vec3(a0.zw,h.y);
  vec3 p2 = vec3(a1.xy,h.z);
  vec3 p3 = vec3(a1.zw,h.w);

//Normalise gradients
  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;

// Mix final noise value
  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
  m = m * m;
  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                dot(p2,x2), dot(p3,x3) ) );
  }
`;t.simplexNoise3D=d;const u=`
//
// Description : Array and textureless GLSL 2D/3D/4D simplex
//               noise functions.
//      Author : Ian McEwan, Ashima Arts.
//  Maintainer : ijm
//     Lastmod : 20110822 (ijm)
//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.
//               Distributed under the MIT License. See LICENSE file.
//               https://github.com/ashima/webgl-noise
//

vec4 mod289(vec4 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0; }

float mod289(float x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0; }

vec4 permute(vec4 x) {
     return mod289(((x*34.0)+1.0)*x);
}

float permute(float x) {
     return mod289(((x*34.0)+1.0)*x);
}

vec4 taylorInvSqrt(vec4 r)
{
  return 1.79284291400159 - 0.85373472095314 * r;
}

float taylorInvSqrt(float r)
{
  return 1.79284291400159 - 0.85373472095314 * r;
}

vec4 grad4(float j, vec4 ip)
  {
  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
  vec4 p,s;

  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
  s = vec4(lessThan(p, vec4(0.0)));
  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;

  return p;
  }

// (sqrt(5) - 1)/4 = F4, used once below
#define F4 0.309016994374947451

float simplexNoise4D(vec4 v)
  {
  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4
                        0.276393202250021,  // 2 * G4
                        0.414589803375032,  // 3 * G4
                       -0.447213595499958); // -1 + 4 * G4

// First corner
  vec4 i  = floor(v + dot(v, vec4(F4)) );
  vec4 x0 = v -   i + dot(i, C.xxxx);

// Other corners

// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)
  vec4 i0;
  vec3 isX = step( x0.yzw, x0.xxx );
  vec3 isYZ = step( x0.zww, x0.yyz );
//  i0.x = dot( isX, vec3( 1.0 ) );
  i0.x = isX.x + isX.y + isX.z;
  i0.yzw = 1.0 - isX;
//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );
  i0.y += isYZ.x + isYZ.y;
  i0.zw += 1.0 - isYZ.xy;
  i0.z += isYZ.z;
  i0.w += 1.0 - isYZ.z;

  // i0 now contains the unique values 0,1,2,3 in each channel
  vec4 i3 = clamp( i0, 0.0, 1.0 );
  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );
  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );

  //  x0 = x0 - 0.0 + 0.0 * C.xxxx
  //  x1 = x0 - i1  + 1.0 * C.xxxx
  //  x2 = x0 - i2  + 2.0 * C.xxxx
  //  x3 = x0 - i3  + 3.0 * C.xxxx
  //  x4 = x0 - 1.0 + 4.0 * C.xxxx
  vec4 x1 = x0 - i1 + C.xxxx;
  vec4 x2 = x0 - i2 + C.yyyy;
  vec4 x3 = x0 - i3 + C.zzzz;
  vec4 x4 = x0 + C.wwww;

// Permutations
  i = mod289(i);
  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);
  vec4 j1 = permute( permute( permute( permute (
             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))
           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))
           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))
           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));

// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope
// 7*7*6 = 294, which is close to the ring size 17*17 = 289.
  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;

  vec4 p0 = grad4(j0,   ip);
  vec4 p1 = grad4(j1.x, ip);
  vec4 p2 = grad4(j1.y, ip);
  vec4 p3 = grad4(j1.z, ip);
  vec4 p4 = grad4(j1.w, ip);

// Normalise gradients
  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;
  p4 *= taylorInvSqrt(dot(p4,p4));

// Mix contributions from the five corners
  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);
  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);
  m0 = m0 * m0;
  m1 = m1 * m1;
  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))
               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;

  }
`;t.simplexNoise4D=u},function(e,t){'use strict';const a=`
	vec3 packNormalToRGB(const in vec3 normal) {
	  return normalize(normal) * 0.5 + 0.5;
	}
`;t.a={packNormalToRGB:a}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const a=`
	vec3 tonemapReinhard(vec3 color) {
	  return color / (color + vec3(1.0));
	}
`;t.tonemapReinhard=a},function(e,t){'use strict';t.a=`
	float transpose(float m) {
	  return m;
	}

	mat2 transpose(mat2 m) {
	  return mat2(m[0][0], m[1][0],
	              m[0][1], m[1][1]);
	}

	mat3 transpose(mat3 m) {
	  return mat3(m[0][0], m[1][0], m[2][0],
	              m[0][1], m[1][1], m[2][1],
	              m[0][2], m[1][2], m[2][2]);
	}

	mat4 transpose(mat4 m) {
	  return mat4(m[0][0], m[1][0], m[2][0], m[3][0],
	              m[0][1], m[1][1], m[2][1], m[3][1],
	              m[0][2], m[1][2], m[2][2], m[3][2],
	              m[0][3], m[1][3], m[2][3], m[3][3]);
	}
`},function(e,t,a){'use strict';var i=a(89),r=a.n(i),o=a(93),n=a.n(o),s=a(14),l=a.n(s),d=a(3),u=a(36),c=a(37),m=a(8),x=a(9);class f{constructor(e,t,a=50){this.origin=e,this.lookat=t;let i=[],r=[];e.forEach((e)=>{i=i.concat(e)}),t.forEach((e)=>{r=r.concat(e)}),this.curves={origin:new n.a(i),lookat:new n.a(r)}}get(e=0){const t=this.curves.origin.get(e),a=this.curves.lookat.get(e);return{origin:t,lookat:a}}rebuild(){this.curves.origin.update(),this.curves.lookat.update()}destroy(){this.curves.origin=null,this.curves.lookat=null}}class p{constructor(e,t,a,i=50,o=100,n=!1,s=!1,d=!1){this._rebuild=()=>{this.dolly.rebuild(),this.updateLine('origin',this.dolly.curves.origin.getLUT(this.steps)),this.updateLine('lookat',this.dolly.curves.lookat.getLUT(this.steps)),this.updatePoints('origin',this.dolly.curves.origin.points),this.updatePoints('lookat',this.dolly.curves.lookat.points),this.emit('rebuild')},l.a(this),this.id=r.a(),this.dolly=e,this.scene=t,this.gui=a.addFolder(`Dolly ${this.id}`),n&&this.gui.open(),this.steps=i,this.range=o,this.lines={origin:null,lookat:null},this.points={origin:[],lookat:[]},this.createPoints('origin',this.dolly.origin),this.createPoints('lookat',this.dolly.lookat),this.createLine('origin',this.dolly.curves.origin.getLUT(this.steps)),this.createLine('lookat',this.dolly.curves.lookat.getLUT(this.steps)),this.guiOrigin=this.gui.addFolder(`origin`),this.guiLookat=this.gui.addFolder(`lookat`),s&&this.guiOrigin.open(),d&&this.guiLookat.open(),this.guiLookat.open(),this.dolly.curves.origin.points.forEach((e,t)=>{const a=this.guiOrigin.addFolder(`${t}`);a.open(),a.add(e,'x',-this.range,this.range).onChange(this._rebuild),a.add(e,'y',-this.range,this.range).onChange(this._rebuild),a.add(e,'z',-this.range,this.range).onChange(this._rebuild)}),this.dolly.curves.lookat.points.forEach((e,t)=>{const a=this.guiLookat.addFolder(`${t}`);a.open(),a.add(e,'x',-this.range,this.range).onChange(this._rebuild),a.add(e,'y',-this.range,this.range).onChange(this._rebuild),a.add(e,'z',-this.range,this.range).onChange(this._rebuild)})}flatten(e){let t=[];return e.forEach((e)=>{t=t.concat([e.x,e.y,e.z])}),t}createPoints(e,t){t.forEach((t,a)=>{this.points[e][a]=new m.a(new c.a(0.2,4,5),new x.a({drawType:d.DRAW_LINES})),this.points[e][a].position.set(t.x,t.y,t.z),this.scene.add(this.points[e][a])})}updatePoints(e,t){t.forEach((t,a)=>{this.points[e][a].position.set(t.x,t.y,t.z)})}updateLine(e,t){const a=this.lines[e].geometry.vertices.length/2;let r=0,o,n;for(let s=0;s<a;s+=1)r=2*s,s<a&&(o=t[s],n=t[s+1],this.lines[e].geometry.vertices[r].set(o.x,o.y,o.z),this.lines[e].geometry.vertices[r+1].set(n.x,n.y,n.z));this.lines[e].geometry.updateVertices()}createLine(e,t){const a=new Float32Array(this.flatten(t));this.lines[e]=new m.a(new u.a(a),new x.a({drawType:d.DRAW_LINES})),this.scene.add(this.lines[e])}destroy(){Object.keys(this.lines).forEach((e)=>{this.scene.remove(this.lines[e],!0)}),Object.keys(this.points).forEach((e)=>{this.points[e].forEach((e)=>{this.scene.remove(e,!0)})}),this.scene=null}}t.a=class{constructor(e){this.update=()=>{const{origin:e,lookat:t}=this.dollies[this.dolly].get(this.time);this.camera.position.set(e.x,e.y,e.z),this.camera.lookAt(t.x,t.y,t.z)},this.id=r.a(),Object.assign(this,e),this.dollies=[],this.helpers=[],this.dolly='',this.time=0,this.gui&&(this.guiFolder=this.gui.addFolder(`Camera Dolly ${this.id}`),this.guiFolder.open(),this.guiFolder.add(this,'export'))}add(e,t){this.dollies[e]=new f(t.origin,t.lookat,this.curveSteps),this.set(e),this.guiFolder&&(this.helpers[e]=new p(this.dollies[e],this.scene,this.gui,this.curveSteps,this.guiSliderRange,this.guiOpen,this.guiOpenOrigin,this.guiOpenLookat),this.helpers[e].on('rebuild',this.update))}export(){const e=JSON.stringify({origin:this.dollies[this.dolly].curves.origin.points,lookat:this.dollies[this.dolly].curves.lookat.points},void 0,2);window.prompt('Copy to clipboard: Ctrl+C, Enter',e)}set(e){this.dolly=e}destroy(){Object.keys(this.dollies).forEach((e)=>{this.dollies[e].destroy()}),Object.keys(this.helpers).forEach((e)=>{this.helpers[e].destroy()})}}},function(e,t,a){var i=a(90),r=a(92),o=i(),s=[1|o[0],o[1],o[2],o[3],o[4],o[5]],l=16383&(o[6]<<8|o[7]),d=0,u=0;e.exports=function(e,t,a){var o=t&&a||0,i=t||[];e=e||{};var c=void 0===e.clockseq?l:e.clockseq,m=void 0===e.msecs?new Date().getTime():e.msecs,x=void 0===e.nsecs?u+1:e.nsecs,f=m-d+(x-u)/1e4;if(0>f&&void 0===e.clockseq&&(c=16383&c+1),(0>f||m>d)&&void 0===e.nsecs&&(x=0),1e4<=x)throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');d=m,u=x,l=c,m+=1.22192928e13;var p=(1e4*(268435455&m)+x)%4294967296;i[o++]=255&p>>>24,i[o++]=255&p>>>16,i[o++]=255&p>>>8,i[o++]=255&p;var g=268435455&1e4*(m/4294967296);i[o++]=255&g>>>8,i[o++]=255&g,i[o++]=16|15&g>>>24,i[o++]=255&g>>>16,i[o++]=128|c>>>8,i[o++]=255&c;for(var h=e.node||s,E=0;6>E;++E)i[o+E]=h[E];return t?t:r(i)}},function(e,t,a){(function(t){var a=t.crypto||t.msCrypto,i;if(a&&a.getRandomValues){var r=new Uint8Array(16);i=function(){return a.getRandomValues(r),r}}if(!i){var o=Array(16);i=function(){for(var e=0,t;16>e;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=255&t>>>((3&e)<<3);return o}}e.exports=i}).call(t,a(91))},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(a){'object'==typeof window&&(t=window)}e.exports=t},function(e){for(var t=[],a=0;256>a;++a)t[a]=(a+256).toString(16).substr(1);e.exports=function(e,a){var r=a||0,i=t;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+'-'+i[e[r++]]+i[e[r++]]+'-'+i[e[r++]]+i[e[r++]]+'-'+i[e[r++]]+i[e[r++]]+'-'+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}},function(e,t,a){e.exports=a(38)},function(e,t,a){(function(){'use strict';var t=a(39),i=function(e){this.curves=[],this._3d=!1,!e||(this.curves=e,this._3d=this.curves[0]._3d)};i.prototype={valueOf:function(){return this.toString()},toString:function(){return'['+this.curves.map(function(e){return t.pointsToString(e.points)}).join(', ')+']'},addCurve:function(e){this.curves.push(e),this._3d=this._3d||e._3d},length:function(){return this.curves.map(function(e){return e.length()}).reduce(function(e,t){return e+t})},curve:function(e){return this.curves[e]},bbox:function(){for(var e=this.curves,a=e[0].bbox(),r=1;r<e.length;r++)t.expandbox(a,e[r].bbox());return a},offset:function(e){var t=[];return this.curves.forEach(function(a){t=t.concat(a.offset(e))}),new i(t)}},e.exports=i})()},function(e,t){'use strict';let a,i;const r=window.performance||Date;t.a=class{constructor(e=!1){this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.isRunning=e}start(){this.startTime=r.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.isRunning=!0}stop(){this.getElapsedTime(),this.isRunning=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){return a=0,this.autoStart&&!this.isRunning&&this.start(),this.isRunning&&(i=r.now(),a=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=a),a}}},function(e){(function(){'use strict';var t={};e.exports=t,t.Mesh=function(e){var t=[],a=[],r=[],o={};o.verts=[],o.norms=[],o.textures=[],o.hashindices={},o.indices=[],o.index=0;for(var n=e.split('\n'),s=/^v\s/,l=/^vn\s/,d=/^vt\s/,u=/^f\s/,c=/\s+/,m=0;m<n.length;m++){var i=n[m].trim(),x=i.split(c);if(x.shift(),s.test(i))t.push.apply(t,x);else if(l.test(i))a.push.apply(a,x);else if(d.test(i))r.push.apply(r,x);else if(u.test(i))for(var f=!1,p=0,g=x.length;p<g;p++){if(3!==p||f||(p=2,f=!0),x[p]in o.hashindices)o.indices.push(o.hashindices[x[p]]);else{var h=x[p].split('/');o.verts.push(+t[3*(h[0]-1)+0]),o.verts.push(+t[3*(h[0]-1)+1]),o.verts.push(+t[3*(h[0]-1)+2]),r.length&&(o.textures.push(+r[2*(h[1]-1)+0]),o.textures.push(+r[2*(h[1]-1)+1])),o.norms.push(+a[3*(h[2]-1)+0]),o.norms.push(+a[3*(h[2]-1)+1]),o.norms.push(+a[3*(h[2]-1)+2]),o.hashindices[x[p]]=o.index,o.indices.push(o.index),o.index+=1}3===p&&f&&o.indices.push(o.hashindices[x[0]])}}this.vertices=o.verts,this.vertexNormals=o.norms,this.textures=o.textures,this.indices=o.indices};var a=function(){var e=this;this.xmlhttp=new XMLHttpRequest,this.get=function(t,a){e.xmlhttp.onreadystatechange=function(){4===e.xmlhttp.readyState&&a(e.xmlhttp.responseText,e.xmlhttp.status)},e.xmlhttp.open('GET',t,!0),e.xmlhttp.send()}};t.downloadMeshes=function(e,i,r){var o=Object.keys(e).length,n=!1;for(var s in void 0===r&&(r={}),e)e.hasOwnProperty(s)&&new a().get(e[s],function(e){return function(a,s){if(200===s?r[e]=new t.Mesh(a):(n=!0,console.error('An error has occurred and the mesh "'+e+'" could not be downloaded.')),o--,0===o){if(n)throw console.error('An error has occurred and one or meshes has not been downloaded. The execution of the script has terminated.'),'';i(r)}}}(s))};var i=function(e,t,a,i){var r=e.createBuffer(),o=t===e.ARRAY_BUFFER?Float32Array:Uint16Array;return e.bindBuffer(t,r),e.bufferData(t,new o(a),e.STATIC_DRAW),r.itemSize=i,r.numItems=a.length/i,r};t.initMeshBuffers=function(e,t){t.normalBuffer=i(e,e.ARRAY_BUFFER,t.vertexNormals,3),t.textureBuffer=i(e,e.ARRAY_BUFFER,t.textures,2),t.vertexBuffer=i(e,e.ARRAY_BUFFER,t.vertices,3),t.indexBuffer=i(e,e.ELEMENT_ARRAY_BUFFER,t.indices,1)},t.deleteMeshBuffers=function(e,t){e.deleteBuffer(t.normalBuffer),e.deleteBuffer(t.textureBuffer),e.deleteBuffer(t.vertexBuffer),e.deleteBuffer(t.indexBuffer)}})()},function(e,t,a){'use strict';var i=Math.atan2,o=Math.cos,n=Math.sin,s=Math.max,l=Math.abs,r=Math.PI,d=a(11),u=a(2);const c='MODE_DRAG',m='MODE_PAN',x='MODE_ZOOM',f=new u.a(0,1,0),p=1e-4;t.a=class{constructor(e,t){this._onTouchStart=(e)=>{if(e.preventDefault(),e.touches)switch(e.touches.length){case 1:this._mode=c,this._offsetY=this._rotationY,this._offsetX=this._rotationX;break;case 2:{this._mode=x,this._radiusOffset=this._radius;break}default:this._mode=m,this._offsetY=this.target.y,this._offsetX=this.target.x;}else switch(e.which){case 3:this._mode=m,this._offsetY=this.target.y,this._offsetX=this.target.x;break;default:this._mode=c,this._offsetY=this._rotationY,this._offsetX=this._rotationX;}this._startY=e.pageX/this._width,this._startX=e.pageY/this._height,this._targetOffset.copy(this.target),this._radiusOffset=this._radius,this.isDown=!0},this._onTouchMove=(e)=>{if(this.isDown){switch(this._mode){case m:{if(!this.pan)return;const t=e.pageX/this._width,a=e.pageY/this._height;this._direction.copy(this._camera.position).subtract(this.target).normalize();const i=this._direction.cross(f),r=this._targetOffset.x+-(this._startY-t)*this.panSpeed*i.x,o=this._targetOffset.y+-(this._startX-a)*this.panSpeed,n=this._targetOffset.z+-(this._startY-t)*this.panSpeed*i.z;this.target.set(r,o,n);break}case x:{if(!this.zoom)return;const t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+a*a),r=this._lastZoomDistance>i?1:-1;this._zoomConstraint(100*r),this._lastZoomDistance=i;break}default:{const t=e.pageX/this._width,a=e.pageY/this._height;this._rotationX=this._offsetX+-(this._startX-a)*this.rotationSpeed,this._rotationY=this._offsetY+(this._startY-t)*this.rotationSpeed,this._rotationX=d.clamp(this._rotationX,-r/2,r/2)}}this.update()}},this._onTouchEnd=()=>{this.isDown=!1},this._onContextMenu=(e)=>{e.preventDefault()},this._onMouseWheel=(e)=>{let t=0;e.wheelDelta?t=e.wheelDelta:e.detail&&(t=e.detail),this._zoomConstraint(-t)},this._onKeypress=(e)=>{switch(e.keyCode){case 114:this.reset();break;default:}},this.rotationSpeed=5,this.panSpeed=10,this.zoom=!0,this.pan=!0,this.smoothing=!1,this.easing=0.1,this._camera=e,this._element=t,this._zoomMin=0.1,this._zoomMax=Infinity,this._radius=s(e.position.x,e.position.z),this._radiusOffset=0,this._defaultRadius=s(e.position.x,e.position.z),this._rotationX=i(e.position.y-0,+this._radius-0),this._rotationY=i(e.position.z-0,e.position.x-0),this._defaultRotationX=i(e.position.y-0,+this._radius-0),this._defaultRotationY=i(e.position.z-0,e.position.x-0);const a=this._radius*n(this._rotationX),l=this._radius*o(this._rotationX),p=n(this._rotationY)*l,g=o(this._rotationY)*l;this._x=p,this._y=a,this._z=g,this._offsetX=0,this._offsetY=0,this._offsetPanX=0,this._offsetPanY=0,this.target=new u.a,this._targetOffset=new u.a,this._direction=new u.a,this._lastZoomDistance=0,this._width=window.innerWidth,this._height=window.innerHeight,this._element.addEventListener('mousedown',this._onTouchStart,!1),this._element.addEventListener('mousemove',this._onTouchMove,!1),this._element.addEventListener('mouseup',this._onTouchEnd,!1),this._element.addEventListener('touchstart',this._onTouchStart,!1),this._element.addEventListener('touchmove',this._onTouchMove,!1),this._element.addEventListener('touchend',this._onTouchEnd,!1),this._element.addEventListener('contextmenu',this._onContextMenu,!1),window.addEventListener('mousewheel',this._onMouseWheel,!1),window.addEventListener('keypress',this._onKeypress,!1)}_zoomConstraint(e){if(this.zoom){this._radius+=e/1e3*3,this._radius=d.clamp(this._radius,this._zoomMin,this._zoomMax),this.update()}}update(){const e=this._radius*n(this._rotationX),t=this._radius*o(this._rotationX),a=n(this._rotationY)*t,i=o(this._rotationY)*t;this.smoothing?(this._x+=(a-this._x)*this.easing,this._y+=(e-this._y)*this.easing,this._z+=(i-this._z)*this.easing,l(this._x-a)<p&&(this._x=a),l(this._y-e)<p&&(this._y=e),l(this._z-i)<p&&(this._z=i)):(this._x=a,this._y=e,this._z=i),this._camera.position.set(this._x,this._y,this._z).add(this.target),this._camera.lookAt(this.target.x,this.target.y,this.target.z)}reset(){this.target.set(0,0,0),this._rotationY=this._defaultRotationY,this._rotationX=this._defaultRotationX,this._radius=this._defaultRadius,this.update()}dispose(){this._element.removeEventListener('mousedown',this._onTouchStart),this._element.removeEventListener('mousemove',this._onTouchMove),this._element.removeEventListener('mouseup',this._onTouchEnd),this._element.removeEventListener('touchstart',this._onTouchStart),this._element.removeEventListener('touchmove',this._onTouchMove),this._element.removeEventListener('touchend',this._onTouchEnd),this._element.removeEventListener('contextmenu',this._onContextMenu),window.removeEventListener('mousewheel',this._onMouseWheel),window.removeEventListener('keypress',this._onKeypress),this._camera=null,this._element=null}}},function(e,t,a){'use strict';var i=a(25);t.a=function(e){return new Promise((t,a)=>{i.a(e).then((e)=>{const a=JSON.parse(e);t(a)}).catch(a)})}},function(e,t,a){'use strict';var i=a(25),r=a(40);t.a=function(e){return new Promise((t,a)=>{i.a(e).then((e)=>{const a=r.a(e);t(a)}).catch(a)})}}]);